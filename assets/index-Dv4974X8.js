var e=Object.create,t=Object.defineProperty,n=Object.getOwnPropertyDescriptor,r=Object.getOwnPropertyNames,i=Object.getPrototypeOf,a=Object.prototype.hasOwnProperty,o=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),s=(e,i,o,s)=>{if(i&&typeof i==`object`||typeof i==`function`)for(var c=r(i),l=0,u=c.length,d;l<u;l++)d=c[l],!a.call(e,d)&&d!==o&&t(e,d,{get:(e=>i[e]).bind(null,d),enumerable:!(s=n(i,d))||s.enumerable});return e},c=(n,r,a)=>(a=n==null?{}:e(i(n)),s(r||!n||!n.__esModule?t(a,`default`,{value:n,enumerable:!0}):a,n));(function(){let e=document.createElement(`link`).relList;if(e&&e.supports&&e.supports(`modulepreload`))return;for(let e of document.querySelectorAll(`link[rel="modulepreload"]`))n(e);new MutationObserver(e=>{for(let t of e)if(t.type===`childList`)for(let e of t.addedNodes)e.tagName===`LINK`&&e.rel===`modulepreload`&&n(e)}).observe(document,{childList:!0,subtree:!0});function t(e){let t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),e.crossOrigin===`use-credentials`?t.credentials=`include`:e.crossOrigin===`anonymous`?t.credentials=`omit`:t.credentials=`same-origin`,t}function n(e){if(e.ep)return;e.ep=!0;let n=t(e);fetch(e.href,n)}})();var l=o((e=>{var t=Symbol.for(`react.transitional.element`),n=Symbol.for(`react.portal`),r=Symbol.for(`react.fragment`),i=Symbol.for(`react.strict_mode`),a=Symbol.for(`react.profiler`),o=Symbol.for(`react.consumer`),s=Symbol.for(`react.context`),c=Symbol.for(`react.forward_ref`),l=Symbol.for(`react.suspense`),u=Symbol.for(`react.memo`),d=Symbol.for(`react.lazy`),f=Symbol.for(`react.activity`),p=Symbol.iterator;function m(e){return typeof e!=`object`||!e?null:(e=p&&e[p]||e[`@@iterator`],typeof e==`function`?e:null)}var h={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},g=Object.assign,_={};function v(e,t,n){this.props=e,this.context=t,this.refs=_,this.updater=n||h}v.prototype.isReactComponent={},v.prototype.setState=function(e,t){if(typeof e!=`object`&&typeof e!=`function`&&e!=null)throw Error(`takes an object of state variables to update or a function which returns an object of state variables.`);this.updater.enqueueSetState(this,e,t,`setState`)},v.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,`forceUpdate`)};function y(){}y.prototype=v.prototype;function b(e,t,n){this.props=e,this.context=t,this.refs=_,this.updater=n||h}var x=b.prototype=new y;x.constructor=b,g(x,v.prototype),x.isPureReactComponent=!0;var S=Array.isArray;function C(){}var w={H:null,A:null,T:null,S:null},T=Object.prototype.hasOwnProperty;function E(e,n,r){var i=r.ref;return{$$typeof:t,type:e,key:n,ref:i===void 0?null:i,props:r}}function D(e,t){return E(e.type,t,e.props)}function O(e){return typeof e==`object`&&!!e&&e.$$typeof===t}function k(e){var t={"=":`=0`,":":`=2`};return`$`+e.replace(/[=:]/g,function(e){return t[e]})}var A=/\/+/g;function j(e,t){return typeof e==`object`&&e&&e.key!=null?k(``+e.key):t.toString(36)}function M(e){switch(e.status){case`fulfilled`:return e.value;case`rejected`:throw e.reason;default:switch(typeof e.status==`string`?e.then(C,C):(e.status=`pending`,e.then(function(t){e.status===`pending`&&(e.status=`fulfilled`,e.value=t)},function(t){e.status===`pending`&&(e.status=`rejected`,e.reason=t)})),e.status){case`fulfilled`:return e.value;case`rejected`:throw e.reason}}throw e}function ee(e,r,i,a,o){var s=typeof e;(s===`undefined`||s===`boolean`)&&(e=null);var c=!1;if(e===null)c=!0;else switch(s){case`bigint`:case`string`:case`number`:c=!0;break;case`object`:switch(e.$$typeof){case t:case n:c=!0;break;case d:return c=e._init,ee(c(e._payload),r,i,a,o)}}if(c)return o=o(e),c=a===``?`.`+j(e,0):a,S(o)?(i=``,c!=null&&(i=c.replace(A,`$&/`)+`/`),ee(o,r,i,``,function(e){return e})):o!=null&&(O(o)&&(o=D(o,i+(o.key==null||e&&e.key===o.key?``:(``+o.key).replace(A,`$&/`)+`/`)+c)),r.push(o)),1;c=0;var l=a===``?`.`:a+`:`;if(S(e))for(var u=0;u<e.length;u++)a=e[u],s=l+j(a,u),c+=ee(a,r,i,s,o);else if(u=m(e),typeof u==`function`)for(e=u.call(e),u=0;!(a=e.next()).done;)a=a.value,s=l+j(a,u++),c+=ee(a,r,i,s,o);else if(s===`object`){if(typeof e.then==`function`)return ee(M(e),r,i,a,o);throw r=String(e),Error(`Objects are not valid as a React child (found: `+(r===`[object Object]`?`object with keys {`+Object.keys(e).join(`, `)+`}`:r)+`). If you meant to render a collection of children, use an array instead.`)}return c}function te(e,t,n){if(e==null)return e;var r=[],i=0;return ee(e,r,``,``,function(e){return t.call(n,e,i++)}),r}function ne(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(t){(e._status===0||e._status===-1)&&(e._status=1,e._result=t)},function(t){(e._status===0||e._status===-1)&&(e._status=2,e._result=t)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var N=typeof reportError==`function`?reportError:function(e){if(typeof window==`object`&&typeof window.ErrorEvent==`function`){var t=new window.ErrorEvent(`error`,{bubbles:!0,cancelable:!0,message:typeof e==`object`&&e&&typeof e.message==`string`?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if(typeof process==`object`&&typeof process.emit==`function`){process.emit(`uncaughtException`,e);return}console.error(e)},P={map:te,forEach:function(e,t,n){te(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return te(e,function(){t++}),t},toArray:function(e){return te(e,function(e){return e})||[]},only:function(e){if(!O(e))throw Error(`React.Children.only expected to receive a single React element child.`);return e}};e.Activity=f,e.Children=P,e.Component=v,e.Fragment=r,e.Profiler=a,e.PureComponent=b,e.StrictMode=i,e.Suspense=l,e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=w,e.__COMPILER_RUNTIME={__proto__:null,c:function(e){return w.H.useMemoCache(e)}},e.cache=function(e){return function(){return e.apply(null,arguments)}},e.cacheSignal=function(){return null},e.cloneElement=function(e,t,n){if(e==null)throw Error(`The argument must be a React element, but you passed `+e+`.`);var r=g({},e.props),i=e.key;if(t!=null)for(a in t.key!==void 0&&(i=``+t.key),t)!T.call(t,a)||a===`key`||a===`__self`||a===`__source`||a===`ref`&&t.ref===void 0||(r[a]=t[a]);var a=arguments.length-2;if(a===1)r.children=n;else if(1<a){for(var o=Array(a),s=0;s<a;s++)o[s]=arguments[s+2];r.children=o}return E(e.type,i,r)},e.createContext=function(e){return e={$$typeof:s,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null},e.Provider=e,e.Consumer={$$typeof:o,_context:e},e},e.createElement=function(e,t,n){var r,i={},a=null;if(t!=null)for(r in t.key!==void 0&&(a=``+t.key),t)T.call(t,r)&&r!==`key`&&r!==`__self`&&r!==`__source`&&(i[r]=t[r]);var o=arguments.length-2;if(o===1)i.children=n;else if(1<o){for(var s=Array(o),c=0;c<o;c++)s[c]=arguments[c+2];i.children=s}if(e&&e.defaultProps)for(r in o=e.defaultProps,o)i[r]===void 0&&(i[r]=o[r]);return E(e,a,i)},e.createRef=function(){return{current:null}},e.forwardRef=function(e){return{$$typeof:c,render:e}},e.isValidElement=O,e.lazy=function(e){return{$$typeof:d,_payload:{_status:-1,_result:e},_init:ne}},e.memo=function(e,t){return{$$typeof:u,type:e,compare:t===void 0?null:t}},e.startTransition=function(e){var t=w.T,n={};w.T=n;try{var r=e(),i=w.S;i!==null&&i(n,r),typeof r==`object`&&r&&typeof r.then==`function`&&r.then(C,N)}catch(e){N(e)}finally{t!==null&&n.types!==null&&(t.types=n.types),w.T=t}},e.unstable_useCacheRefresh=function(){return w.H.useCacheRefresh()},e.use=function(e){return w.H.use(e)},e.useActionState=function(e,t,n){return w.H.useActionState(e,t,n)},e.useCallback=function(e,t){return w.H.useCallback(e,t)},e.useContext=function(e){return w.H.useContext(e)},e.useDebugValue=function(){},e.useDeferredValue=function(e,t){return w.H.useDeferredValue(e,t)},e.useEffect=function(e,t){return w.H.useEffect(e,t)},e.useEffectEvent=function(e){return w.H.useEffectEvent(e)},e.useId=function(){return w.H.useId()},e.useImperativeHandle=function(e,t,n){return w.H.useImperativeHandle(e,t,n)},e.useInsertionEffect=function(e,t){return w.H.useInsertionEffect(e,t)},e.useLayoutEffect=function(e,t){return w.H.useLayoutEffect(e,t)},e.useMemo=function(e,t){return w.H.useMemo(e,t)},e.useOptimistic=function(e,t){return w.H.useOptimistic(e,t)},e.useReducer=function(e,t,n){return w.H.useReducer(e,t,n)},e.useRef=function(e){return w.H.useRef(e)},e.useState=function(e){return w.H.useState(e)},e.useSyncExternalStore=function(e,t,n){return w.H.useSyncExternalStore(e,t,n)},e.useTransition=function(){return w.H.useTransition()},e.version=`19.2.3`})),u=o(((e,t)=>{t.exports=l()})),d=o((e=>{function t(e,t){var n=e.length;e.push(t);a:for(;0<n;){var r=n-1>>>1,a=e[r];if(0<i(a,t))e[r]=t,e[n]=a,n=r;else break a}}function n(e){return e.length===0?null:e[0]}function r(e){if(e.length===0)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;a:for(var r=0,a=e.length,o=a>>>1;r<o;){var s=2*(r+1)-1,c=e[s],l=s+1,u=e[l];if(0>i(c,n))l<a&&0>i(u,c)?(e[r]=u,e[l]=n,r=l):(e[r]=c,e[s]=n,r=s);else if(l<a&&0>i(u,n))e[r]=u,e[l]=n,r=l;else break a}}return t}function i(e,t){var n=e.sortIndex-t.sortIndex;return n===0?e.id-t.id:n}if(e.unstable_now=void 0,typeof performance==`object`&&typeof performance.now==`function`){var a=performance;e.unstable_now=function(){return a.now()}}else{var o=Date,s=o.now();e.unstable_now=function(){return o.now()-s}}var c=[],l=[],u=1,d=null,f=3,p=!1,m=!1,h=!1,g=!1,_=typeof setTimeout==`function`?setTimeout:null,v=typeof clearTimeout==`function`?clearTimeout:null,y=typeof setImmediate<`u`?setImmediate:null;function b(e){for(var i=n(l);i!==null;){if(i.callback===null)r(l);else if(i.startTime<=e)r(l),i.sortIndex=i.expirationTime,t(c,i);else break;i=n(l)}}function x(e){if(h=!1,b(e),!m)if(n(c)!==null)m=!0,S||(S=!0,O());else{var t=n(l);t!==null&&j(x,t.startTime-e)}}var S=!1,C=-1,w=5,T=-1;function E(){return g?!0:!(e.unstable_now()-T<w)}function D(){if(g=!1,S){var t=e.unstable_now();T=t;var i=!0;try{a:{m=!1,h&&(h=!1,v(C),C=-1),p=!0;var a=f;try{b:{for(b(t),d=n(c);d!==null&&!(d.expirationTime>t&&E());){var o=d.callback;if(typeof o==`function`){d.callback=null,f=d.priorityLevel;var s=o(d.expirationTime<=t);if(t=e.unstable_now(),typeof s==`function`){d.callback=s,b(t),i=!0;break b}d===n(c)&&r(c),b(t)}else r(c);d=n(c)}if(d!==null)i=!0;else{var u=n(l);u!==null&&j(x,u.startTime-t),i=!1}}break a}finally{d=null,f=a,p=!1}i=void 0}}finally{i?O():S=!1}}}var O;if(typeof y==`function`)O=function(){y(D)};else if(typeof MessageChannel<`u`){var k=new MessageChannel,A=k.port2;k.port1.onmessage=D,O=function(){A.postMessage(null)}}else O=function(){_(D,0)};function j(t,n){C=_(function(){t(e.unstable_now())},n)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(e){e.callback=null},e.unstable_forceFrameRate=function(e){0>e||125<e?console.error(`forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported`):w=0<e?Math.floor(1e3/e):5},e.unstable_getCurrentPriorityLevel=function(){return f},e.unstable_next=function(e){switch(f){case 1:case 2:case 3:var t=3;break;default:t=f}var n=f;f=t;try{return e()}finally{f=n}},e.unstable_requestPaint=function(){g=!0},e.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=f;f=e;try{return t()}finally{f=n}},e.unstable_scheduleCallback=function(r,i,a){var o=e.unstable_now();switch(typeof a==`object`&&a?(a=a.delay,a=typeof a==`number`&&0<a?o+a:o):a=o,r){case 1:var s=-1;break;case 2:s=250;break;case 5:s=1073741823;break;case 4:s=1e4;break;default:s=5e3}return s=a+s,r={id:u++,callback:i,priorityLevel:r,startTime:a,expirationTime:s,sortIndex:-1},a>o?(r.sortIndex=a,t(l,r),n(c)===null&&r===n(l)&&(h?(v(C),C=-1):h=!0,j(x,a-o))):(r.sortIndex=s,t(c,r),m||p||(m=!0,S||(S=!0,O()))),r},e.unstable_shouldYield=E,e.unstable_wrapCallback=function(e){var t=f;return function(){var n=f;f=t;try{return e.apply(this,arguments)}finally{f=n}}}})),f=o(((e,t)=>{t.exports=d()})),p=o((e=>{var t=u();function n(e){var t=`https://react.dev/errors/`+e;if(1<arguments.length){t+=`?args[]=`+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)t+=`&args[]=`+encodeURIComponent(arguments[n])}return`Minified React error #`+e+`; visit `+t+` for the full message or use the non-minified dev environment for full errors and additional helpful warnings.`}function r(){}var i={d:{f:r,r:function(){throw Error(n(522))},D:r,C:r,L:r,m:r,X:r,S:r,M:r},p:0,findDOMNode:null},a=Symbol.for(`react.portal`);function o(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:a,key:r==null?null:``+r,children:e,containerInfo:t,implementation:n}}var s=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function c(e,t){if(e===`font`)return``;if(typeof t==`string`)return t===`use-credentials`?t:``}e.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,e.createPortal=function(e,t){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)throw Error(n(299));return o(e,t,null,r)},e.flushSync=function(e){var t=s.T,n=i.p;try{if(s.T=null,i.p=2,e)return e()}finally{s.T=t,i.p=n,i.d.f()}},e.preconnect=function(e,t){typeof e==`string`&&(t?(t=t.crossOrigin,t=typeof t==`string`?t===`use-credentials`?t:``:void 0):t=null,i.d.C(e,t))},e.prefetchDNS=function(e){typeof e==`string`&&i.d.D(e)},e.preinit=function(e,t){if(typeof e==`string`&&t&&typeof t.as==`string`){var n=t.as,r=c(n,t.crossOrigin),a=typeof t.integrity==`string`?t.integrity:void 0,o=typeof t.fetchPriority==`string`?t.fetchPriority:void 0;n===`style`?i.d.S(e,typeof t.precedence==`string`?t.precedence:void 0,{crossOrigin:r,integrity:a,fetchPriority:o}):n===`script`&&i.d.X(e,{crossOrigin:r,integrity:a,fetchPriority:o,nonce:typeof t.nonce==`string`?t.nonce:void 0})}},e.preinitModule=function(e,t){if(typeof e==`string`)if(typeof t==`object`&&t){if(t.as==null||t.as===`script`){var n=c(t.as,t.crossOrigin);i.d.M(e,{crossOrigin:n,integrity:typeof t.integrity==`string`?t.integrity:void 0,nonce:typeof t.nonce==`string`?t.nonce:void 0})}}else t??i.d.M(e)},e.preload=function(e,t){if(typeof e==`string`&&typeof t==`object`&&t&&typeof t.as==`string`){var n=t.as,r=c(n,t.crossOrigin);i.d.L(e,n,{crossOrigin:r,integrity:typeof t.integrity==`string`?t.integrity:void 0,nonce:typeof t.nonce==`string`?t.nonce:void 0,type:typeof t.type==`string`?t.type:void 0,fetchPriority:typeof t.fetchPriority==`string`?t.fetchPriority:void 0,referrerPolicy:typeof t.referrerPolicy==`string`?t.referrerPolicy:void 0,imageSrcSet:typeof t.imageSrcSet==`string`?t.imageSrcSet:void 0,imageSizes:typeof t.imageSizes==`string`?t.imageSizes:void 0,media:typeof t.media==`string`?t.media:void 0})}},e.preloadModule=function(e,t){if(typeof e==`string`)if(t){var n=c(t.as,t.crossOrigin);i.d.m(e,{as:typeof t.as==`string`&&t.as!==`script`?t.as:void 0,crossOrigin:n,integrity:typeof t.integrity==`string`?t.integrity:void 0})}else i.d.m(e)},e.requestFormReset=function(e){i.d.r(e)},e.unstable_batchedUpdates=function(e,t){return e(t)},e.useFormState=function(e,t,n){return s.H.useFormState(e,t,n)},e.useFormStatus=function(){return s.H.useHostTransitionStatus()},e.version=`19.2.3`})),m=o(((e,t)=>{function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>`u`||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!=`function`))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}n(),t.exports=p()})),h=o((e=>{var t=f(),n=u(),r=m();function i(e){var t=`https://react.dev/errors/`+e;if(1<arguments.length){t+=`?args[]=`+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)t+=`&args[]=`+encodeURIComponent(arguments[n])}return`Minified React error #`+e+`; visit `+t+` for the full message or use the non-minified dev environment for full errors and additional helpful warnings.`}function a(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function o(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function s(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function c(e){if(e.tag===31){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function l(e){if(o(e)!==e)throw Error(i(188))}function d(e){var t=e.alternate;if(!t){if(t=o(e),t===null)throw Error(i(188));return t===e?e:null}for(var n=e,r=t;;){var a=n.return;if(a===null)break;var s=a.alternate;if(s===null){if(r=a.return,r!==null){n=r;continue}break}if(a.child===s.child){for(s=a.child;s;){if(s===n)return l(a),e;if(s===r)return l(a),t;s=s.sibling}throw Error(i(188))}if(n.return!==r.return)n=a,r=s;else{for(var c=!1,u=a.child;u;){if(u===n){c=!0,n=a,r=s;break}if(u===r){c=!0,r=a,n=s;break}u=u.sibling}if(!c){for(u=s.child;u;){if(u===n){c=!0,n=s,r=a;break}if(u===r){c=!0,r=s,n=a;break}u=u.sibling}if(!c)throw Error(i(189))}}if(n.alternate!==r)throw Error(i(190))}if(n.tag!==3)throw Error(i(188));return n.stateNode.current===n?e:t}function p(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e;for(e=e.child;e!==null;){if(t=p(e),t!==null)return t;e=e.sibling}return null}var h=Object.assign,g=Symbol.for(`react.element`),_=Symbol.for(`react.transitional.element`),v=Symbol.for(`react.portal`),y=Symbol.for(`react.fragment`),b=Symbol.for(`react.strict_mode`),x=Symbol.for(`react.profiler`),S=Symbol.for(`react.consumer`),C=Symbol.for(`react.context`),w=Symbol.for(`react.forward_ref`),T=Symbol.for(`react.suspense`),E=Symbol.for(`react.suspense_list`),D=Symbol.for(`react.memo`),O=Symbol.for(`react.lazy`),k=Symbol.for(`react.activity`),A=Symbol.for(`react.memo_cache_sentinel`),j=Symbol.iterator;function M(e){return typeof e!=`object`||!e?null:(e=j&&e[j]||e[`@@iterator`],typeof e==`function`?e:null)}var ee=Symbol.for(`react.client.reference`);function te(e){if(e==null)return null;if(typeof e==`function`)return e.$$typeof===ee?null:e.displayName||e.name||null;if(typeof e==`string`)return e;switch(e){case y:return`Fragment`;case x:return`Profiler`;case b:return`StrictMode`;case T:return`Suspense`;case E:return`SuspenseList`;case k:return`Activity`}if(typeof e==`object`)switch(e.$$typeof){case v:return`Portal`;case C:return e.displayName||`Context`;case S:return(e._context.displayName||`Context`)+`.Consumer`;case w:var t=e.render;return e=e.displayName,e||=(e=t.displayName||t.name||``,e===``?`ForwardRef`:`ForwardRef(`+e+`)`),e;case D:return t=e.displayName||null,t===null?te(e.type)||`Memo`:t;case O:t=e._payload,e=e._init;try{return te(e(t))}catch{}}return null}var ne=Array.isArray,N=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,P=r.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,re={pending:!1,data:null,method:null,action:null},ie=[],ae=-1;function oe(e){return{current:e}}function se(e){0>ae||(e.current=ie[ae],ie[ae]=null,ae--)}function F(e,t){ae++,ie[ae]=e.current,e.current=t}var ce=oe(null),le=oe(null),ue=oe(null),de=oe(null);function fe(e,t){switch(F(ue,t),F(le,e),F(ce,null),t.nodeType){case 9:case 11:e=(e=t.documentElement)&&(e=e.namespaceURI)?Ud(e):0;break;default:if(e=t.tagName,t=t.namespaceURI)t=Ud(t),e=Wd(t,e);else switch(e){case`svg`:e=1;break;case`math`:e=2;break;default:e=0}}se(ce),F(ce,e)}function pe(){se(ce),se(le),se(ue)}function me(e){e.memoizedState!==null&&F(de,e);var t=ce.current,n=Wd(t,e.type);t!==n&&(F(le,e),F(ce,n))}function he(e){le.current===e&&(se(ce),se(le)),de.current===e&&(se(de),Qf._currentValue=re)}var ge,_e;function ve(e){if(ge===void 0)try{throw Error()}catch(e){var t=e.stack.trim().match(/\n( *(at )?)/);ge=t&&t[1]||``,_e=-1<e.stack.indexOf(`
    at`)?` (<anonymous>)`:-1<e.stack.indexOf(`@`)?`@unknown:0:0`:``}return`
`+ge+e+_e}var ye=!1;function be(e,t){if(!e||ye)return``;ye=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var r={DetermineComponentFrameRoot:function(){try{if(t){var n=function(){throw Error()};if(Object.defineProperty(n.prototype,`props`,{set:function(){throw Error()}}),typeof Reflect==`object`&&Reflect.construct){try{Reflect.construct(n,[])}catch(e){var r=e}Reflect.construct(e,[],n)}else{try{n.call()}catch(e){r=e}e.call(n.prototype)}}else{try{throw Error()}catch(e){r=e}(n=e())&&typeof n.catch==`function`&&n.catch(function(){})}}catch(e){if(e&&r&&typeof e.stack==`string`)return[e.stack,r.stack]}return[null,null]}};r.DetermineComponentFrameRoot.displayName=`DetermineComponentFrameRoot`;var i=Object.getOwnPropertyDescriptor(r.DetermineComponentFrameRoot,`name`);i&&i.configurable&&Object.defineProperty(r.DetermineComponentFrameRoot,`name`,{value:`DetermineComponentFrameRoot`});var a=r.DetermineComponentFrameRoot(),o=a[0],s=a[1];if(o&&s){var c=o.split(`
`),l=s.split(`
`);for(i=r=0;r<c.length&&!c[r].includes(`DetermineComponentFrameRoot`);)r++;for(;i<l.length&&!l[i].includes(`DetermineComponentFrameRoot`);)i++;if(r===c.length||i===l.length)for(r=c.length-1,i=l.length-1;1<=r&&0<=i&&c[r]!==l[i];)i--;for(;1<=r&&0<=i;r--,i--)if(c[r]!==l[i]){if(r!==1||i!==1)do if(r--,i--,0>i||c[r]!==l[i]){var u=`
`+c[r].replace(` at new `,` at `);return e.displayName&&u.includes(`<anonymous>`)&&(u=u.replace(`<anonymous>`,e.displayName)),u}while(1<=r&&0<=i);break}}}finally{ye=!1,Error.prepareStackTrace=n}return(n=e?e.displayName||e.name:``)?ve(n):``}function xe(e,t){switch(e.tag){case 26:case 27:case 5:return ve(e.type);case 16:return ve(`Lazy`);case 13:return e.child!==t&&t!==null?ve(`Suspense Fallback`):ve(`Suspense`);case 19:return ve(`SuspenseList`);case 0:case 15:return be(e.type,!1);case 11:return be(e.type.render,!1);case 1:return be(e.type,!0);case 31:return ve(`Activity`);default:return``}}function Se(e){try{var t=``,n=null;do t+=xe(e,n),n=e,e=e.return;while(e);return t}catch(e){return`
Error generating stack: `+e.message+`
`+e.stack}}var Ce=Object.prototype.hasOwnProperty,we=t.unstable_scheduleCallback,Te=t.unstable_cancelCallback,Ee=t.unstable_shouldYield,De=t.unstable_requestPaint,Oe=t.unstable_now,ke=t.unstable_getCurrentPriorityLevel,Ae=t.unstable_ImmediatePriority,je=t.unstable_UserBlockingPriority,Me=t.unstable_NormalPriority,Ne=t.unstable_LowPriority,Pe=t.unstable_IdlePriority,Fe=t.log,Ie=t.unstable_setDisableYieldValue,Le=null,Re=null;function ze(e){if(typeof Fe==`function`&&Ie(e),Re&&typeof Re.setStrictMode==`function`)try{Re.setStrictMode(Le,e)}catch{}}var Be=Math.clz32?Math.clz32:Ue,Ve=Math.log,He=Math.LN2;function Ue(e){return e>>>=0,e===0?32:31-(Ve(e)/He|0)|0}var We=256,Ge=262144,Ke=4194304;function qe(e){var t=e&42;if(t!==0)return t;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return e&261888;case 262144:case 524288:case 1048576:case 2097152:return e&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function Je(e,t,n){var r=e.pendingLanes;if(r===0)return 0;var i=0,a=e.suspendedLanes,o=e.pingedLanes;e=e.warmLanes;var s=r&134217727;return s===0?(s=r&~a,s===0?o===0?n||(n=r&~e,n!==0&&(i=qe(n))):i=qe(o):i=qe(s)):(r=s&~a,r===0?(o&=s,o===0?n||(n=s&~e,n!==0&&(i=qe(n))):i=qe(o)):i=qe(r)),i===0?0:t!==0&&t!==i&&(t&a)===0&&(a=i&-i,n=t&-t,a>=n||a===32&&n&4194048)?t:i}function Ye(e,t){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&t)===0}function Xe(e,t){switch(e){case 1:case 2:case 4:case 8:case 64:return t+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Ze(){var e=Ke;return Ke<<=1,!(Ke&62914560)&&(Ke=4194304),e}function Qe(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function $e(e,t){e.pendingLanes|=t,t!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function et(e,t,n,r,i,a){var o=e.pendingLanes;e.pendingLanes=n,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=n,e.entangledLanes&=n,e.errorRecoveryDisabledLanes&=n,e.shellSuspendCounter=0;var s=e.entanglements,c=e.expirationTimes,l=e.hiddenUpdates;for(n=o&~n;0<n;){var u=31-Be(n),d=1<<u;s[u]=0,c[u]=-1;var f=l[u];if(f!==null)for(l[u]=null,u=0;u<f.length;u++){var p=f[u];p!==null&&(p.lane&=-536870913)}n&=~d}r!==0&&tt(e,r,0),a!==0&&i===0&&e.tag!==0&&(e.suspendedLanes|=a&~(o&~t))}function tt(e,t,n){e.pendingLanes|=t,e.suspendedLanes&=~t;var r=31-Be(t);e.entangledLanes|=t,e.entanglements[r]=e.entanglements[r]|1073741824|n&261930}function nt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-Be(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}function rt(e,t){var n=t&-t;return n=n&42?1:it(n),(n&(e.suspendedLanes|t))===0?n:0}function it(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function at(e){return e&=-e,2<e?8<e?e&134217727?32:268435456:8:2}function ot(){var e=P.p;return e===0?(e=window.event,e===void 0?32:mp(e.type)):e}function st(e,t){var n=P.p;try{return P.p=e,t()}finally{P.p=n}}var ct=Math.random().toString(36).slice(2),lt=`__reactFiber$`+ct,ut=`__reactProps$`+ct,dt=`__reactContainer$`+ct,ft=`__reactEvents$`+ct,pt=`__reactListeners$`+ct,mt=`__reactHandles$`+ct,ht=`__reactResources$`+ct,gt=`__reactMarker$`+ct;function _t(e){delete e[lt],delete e[ut],delete e[ft],delete e[pt],delete e[mt]}function vt(e){var t=e[lt];if(t)return t;for(var n=e.parentNode;n;){if(t=n[dt]||n[lt]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=ff(e);e!==null;){if(n=e[lt])return n;e=ff(e)}return t}e=n,n=e.parentNode}return null}function yt(e){if(e=e[lt]||e[dt]){var t=e.tag;if(t===5||t===6||t===13||t===31||t===26||t===27||t===3)return e}return null}function I(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e.stateNode;throw Error(i(33))}function bt(e){var t=e[ht];return t||=e[ht]={hoistableStyles:new Map,hoistableScripts:new Map},t}function xt(e){e[gt]=!0}var St=new Set,Ct={};function wt(e,t){Tt(e,t),Tt(e+`Capture`,t)}function Tt(e,t){for(Ct[e]=t,e=0;e<t.length;e++)St.add(t[e])}var Et=RegExp(`^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$`),Dt={},Ot={};function kt(e){return Ce.call(Ot,e)?!0:Ce.call(Dt,e)?!1:Et.test(e)?Ot[e]=!0:(Dt[e]=!0,!1)}function At(e,t,n){if(kt(t))if(n===null)e.removeAttribute(t);else{switch(typeof n){case`undefined`:case`function`:case`symbol`:e.removeAttribute(t);return;case`boolean`:var r=t.toLowerCase().slice(0,5);if(r!==`data-`&&r!==`aria-`){e.removeAttribute(t);return}}e.setAttribute(t,``+n)}}function jt(e,t,n){if(n===null)e.removeAttribute(t);else{switch(typeof n){case`undefined`:case`function`:case`symbol`:case`boolean`:e.removeAttribute(t);return}e.setAttribute(t,``+n)}}function Mt(e,t,n,r){if(r===null)e.removeAttribute(n);else{switch(typeof r){case`undefined`:case`function`:case`symbol`:case`boolean`:e.removeAttribute(n);return}e.setAttributeNS(t,n,``+r)}}function L(e){switch(typeof e){case`bigint`:case`boolean`:case`number`:case`string`:case`undefined`:return e;case`object`:return e;default:return``}}function R(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()===`input`&&(t===`checkbox`||t===`radio`)}function z(e,t,n){var r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t);if(!e.hasOwnProperty(t)&&r!==void 0&&typeof r.get==`function`&&typeof r.set==`function`){var i=r.get,a=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){n=``+e,a.call(this,e)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(e){n=``+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Nt(e){if(!e._valueTracker){var t=R(e)?`checked`:`value`;e._valueTracker=z(e,t,``+e[t])}}function Pt(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r=``;return e&&(r=R(e)?e.checked?`true`:`false`:e.value),e=r,e===n?!1:(t.setValue(e),!0)}function Ft(e){if(e||=typeof document<`u`?document:void 0,e===void 0)return null;try{return e.activeElement||e.body}catch{return e.body}}var It=/[\n"\\]/g;function Lt(e){return e.replace(It,function(e){return`\\`+e.charCodeAt(0).toString(16)+` `})}function Rt(e,t,n,r,i,a,o,s){e.name=``,o!=null&&typeof o!=`function`&&typeof o!=`symbol`&&typeof o!=`boolean`?e.type=o:e.removeAttribute(`type`),t==null?o!==`submit`&&o!==`reset`||e.removeAttribute(`value`):o===`number`?(t===0&&e.value===``||e.value!=t)&&(e.value=``+L(t)):e.value!==``+L(t)&&(e.value=``+L(t)),t==null?n==null?r!=null&&e.removeAttribute(`value`):Bt(e,o,L(n)):Bt(e,o,L(t)),i==null&&a!=null&&(e.defaultChecked=!!a),i!=null&&(e.checked=i&&typeof i!=`function`&&typeof i!=`symbol`),s!=null&&typeof s!=`function`&&typeof s!=`symbol`&&typeof s!=`boolean`?e.name=``+L(s):e.removeAttribute(`name`)}function zt(e,t,n,r,i,a,o,s){if(a!=null&&typeof a!=`function`&&typeof a!=`symbol`&&typeof a!=`boolean`&&(e.type=a),t!=null||n!=null){if(!(a!==`submit`&&a!==`reset`||t!=null)){Nt(e);return}n=n==null?``:``+L(n),t=t==null?n:``+L(t),s||t===e.value||(e.value=t),e.defaultValue=t}r??=i,r=typeof r!=`function`&&typeof r!=`symbol`&&!!r,e.checked=s?e.checked:!!r,e.defaultChecked=!!r,o!=null&&typeof o!=`function`&&typeof o!=`symbol`&&typeof o!=`boolean`&&(e.name=o),Nt(e)}function Bt(e,t,n){t===`number`&&Ft(e.ownerDocument)===e||e.defaultValue===``+n||(e.defaultValue=``+n)}function Vt(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t[`$`+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty(`$`+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=``+L(n),t=null,i=0;i<e.length;i++){if(e[i].value===n){e[i].selected=!0,r&&(e[i].defaultSelected=!0);return}t!==null||e[i].disabled||(t=e[i])}t!==null&&(t.selected=!0)}}function Ht(e,t,n){if(t!=null&&(t=``+L(t),t!==e.value&&(e.value=t),n==null)){e.defaultValue!==t&&(e.defaultValue=t);return}e.defaultValue=n==null?``:``+L(n)}function Ut(e,t,n,r){if(t==null){if(r!=null){if(n!=null)throw Error(i(92));if(ne(r)){if(1<r.length)throw Error(i(93));r=r[0]}n=r}n??=``,t=n}n=L(t),e.defaultValue=n,r=e.textContent,r===n&&r!==``&&r!==null&&(e.value=r),Nt(e)}function Wt(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var Gt=new Set(`animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp`.split(` `));function Kt(e,t,n){var r=t.indexOf(`--`)===0;n==null||typeof n==`boolean`||n===``?r?e.setProperty(t,``):t===`float`?e.cssFloat=``:e[t]=``:r?e.setProperty(t,n):typeof n!=`number`||n===0||Gt.has(t)?t===`float`?e.cssFloat=n:e[t]=(``+n).trim():e[t]=n+`px`}function qt(e,t,n){if(t!=null&&typeof t!=`object`)throw Error(i(62));if(e=e.style,n!=null){for(var r in n)!n.hasOwnProperty(r)||t!=null&&t.hasOwnProperty(r)||(r.indexOf(`--`)===0?e.setProperty(r,``):r===`float`?e.cssFloat=``:e[r]=``);for(var a in t)r=t[a],t.hasOwnProperty(a)&&n[a]!==r&&Kt(e,a,r)}else for(var o in t)t.hasOwnProperty(o)&&Kt(e,o,t[o])}function Jt(e){if(e.indexOf(`-`)===-1)return!1;switch(e){case`annotation-xml`:case`color-profile`:case`font-face`:case`font-face-src`:case`font-face-uri`:case`font-face-format`:case`font-face-name`:case`missing-glyph`:return!1;default:return!0}}var Yt=new Map([[`acceptCharset`,`accept-charset`],[`htmlFor`,`for`],[`httpEquiv`,`http-equiv`],[`crossOrigin`,`crossorigin`],[`accentHeight`,`accent-height`],[`alignmentBaseline`,`alignment-baseline`],[`arabicForm`,`arabic-form`],[`baselineShift`,`baseline-shift`],[`capHeight`,`cap-height`],[`clipPath`,`clip-path`],[`clipRule`,`clip-rule`],[`colorInterpolation`,`color-interpolation`],[`colorInterpolationFilters`,`color-interpolation-filters`],[`colorProfile`,`color-profile`],[`colorRendering`,`color-rendering`],[`dominantBaseline`,`dominant-baseline`],[`enableBackground`,`enable-background`],[`fillOpacity`,`fill-opacity`],[`fillRule`,`fill-rule`],[`floodColor`,`flood-color`],[`floodOpacity`,`flood-opacity`],[`fontFamily`,`font-family`],[`fontSize`,`font-size`],[`fontSizeAdjust`,`font-size-adjust`],[`fontStretch`,`font-stretch`],[`fontStyle`,`font-style`],[`fontVariant`,`font-variant`],[`fontWeight`,`font-weight`],[`glyphName`,`glyph-name`],[`glyphOrientationHorizontal`,`glyph-orientation-horizontal`],[`glyphOrientationVertical`,`glyph-orientation-vertical`],[`horizAdvX`,`horiz-adv-x`],[`horizOriginX`,`horiz-origin-x`],[`imageRendering`,`image-rendering`],[`letterSpacing`,`letter-spacing`],[`lightingColor`,`lighting-color`],[`markerEnd`,`marker-end`],[`markerMid`,`marker-mid`],[`markerStart`,`marker-start`],[`overlinePosition`,`overline-position`],[`overlineThickness`,`overline-thickness`],[`paintOrder`,`paint-order`],[`panose-1`,`panose-1`],[`pointerEvents`,`pointer-events`],[`renderingIntent`,`rendering-intent`],[`shapeRendering`,`shape-rendering`],[`stopColor`,`stop-color`],[`stopOpacity`,`stop-opacity`],[`strikethroughPosition`,`strikethrough-position`],[`strikethroughThickness`,`strikethrough-thickness`],[`strokeDasharray`,`stroke-dasharray`],[`strokeDashoffset`,`stroke-dashoffset`],[`strokeLinecap`,`stroke-linecap`],[`strokeLinejoin`,`stroke-linejoin`],[`strokeMiterlimit`,`stroke-miterlimit`],[`strokeOpacity`,`stroke-opacity`],[`strokeWidth`,`stroke-width`],[`textAnchor`,`text-anchor`],[`textDecoration`,`text-decoration`],[`textRendering`,`text-rendering`],[`transformOrigin`,`transform-origin`],[`underlinePosition`,`underline-position`],[`underlineThickness`,`underline-thickness`],[`unicodeBidi`,`unicode-bidi`],[`unicodeRange`,`unicode-range`],[`unitsPerEm`,`units-per-em`],[`vAlphabetic`,`v-alphabetic`],[`vHanging`,`v-hanging`],[`vIdeographic`,`v-ideographic`],[`vMathematical`,`v-mathematical`],[`vectorEffect`,`vector-effect`],[`vertAdvY`,`vert-adv-y`],[`vertOriginX`,`vert-origin-x`],[`vertOriginY`,`vert-origin-y`],[`wordSpacing`,`word-spacing`],[`writingMode`,`writing-mode`],[`xmlnsXlink`,`xmlns:xlink`],[`xHeight`,`x-height`]]),Xt=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Zt(e){return Xt.test(``+e)?`javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')`:e}function Qt(){}var $t=null;function en(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var tn=null,nn=null;function rn(e){var t=yt(e);if(t&&(e=t.stateNode)){var n=e[ut]||null;a:switch(e=t.stateNode,t.type){case`input`:if(Rt(e,n.value,n.defaultValue,n.defaultValue,n.checked,n.defaultChecked,n.type,n.name),t=n.name,n.type===`radio`&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll(`input[name="`+Lt(``+t)+`"][type="radio"]`),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var a=r[ut]||null;if(!a)throw Error(i(90));Rt(r,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name)}}for(t=0;t<n.length;t++)r=n[t],r.form===e.form&&Pt(r)}break a;case`textarea`:Ht(e,n.value,n.defaultValue);break a;case`select`:t=n.value,t!=null&&Vt(e,!!n.multiple,t,!1)}}}var an=!1;function on(e,t,n){if(an)return e(t,n);an=!0;try{return e(t)}finally{if(an=!1,(tn!==null||nn!==null)&&(bu(),tn&&(t=tn,e=nn,nn=tn=null,rn(t),e)))for(t=0;t<e.length;t++)rn(e[t])}}function sn(e,t){var n=e.stateNode;if(n===null)return null;var r=n[ut]||null;if(r===null)return null;n=r[t];a:switch(t){case`onClick`:case`onClickCapture`:case`onDoubleClick`:case`onDoubleClickCapture`:case`onMouseDown`:case`onMouseDownCapture`:case`onMouseMove`:case`onMouseMoveCapture`:case`onMouseUp`:case`onMouseUpCapture`:case`onMouseEnter`:(r=!r.disabled)||(e=e.type,r=!(e===`button`||e===`input`||e===`select`||e===`textarea`)),e=!r;break a;default:e=!1}if(e)return null;if(n&&typeof n!=`function`)throw Error(i(231,t,typeof n));return n}var cn=!(typeof window>`u`||window.document===void 0||window.document.createElement===void 0),ln=!1;if(cn)try{var un={};Object.defineProperty(un,`passive`,{get:function(){ln=!0}}),window.addEventListener(`test`,un,un),window.removeEventListener(`test`,un,un)}catch{ln=!1}var dn=null,fn=null,pn=null;function mn(){if(pn)return pn;var e,t=fn,n=t.length,r,i=`value`in dn?dn.value:dn.textContent,a=i.length;for(e=0;e<n&&t[e]===i[e];e++);var o=n-e;for(r=1;r<=o&&t[n-r]===i[a-r];r++);return pn=i.slice(e,1<r?1-r:void 0)}function hn(e){var t=e.keyCode;return`charCode`in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function gn(){return!0}function _n(){return!1}function vn(e){function t(t,n,r,i,a){for(var o in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=a,this.currentTarget=null,e)e.hasOwnProperty(o)&&(t=e[o],this[o]=t?t(i):i[o]);return this.isDefaultPrevented=(i.defaultPrevented==null?!1===i.returnValue:i.defaultPrevented)?gn:_n,this.isPropagationStopped=_n,this}return h(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():typeof e.returnValue!=`unknown`&&(e.returnValue=!1),this.isDefaultPrevented=gn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():typeof e.cancelBubble!=`unknown`&&(e.cancelBubble=!0),this.isPropagationStopped=gn)},persist:function(){},isPersistent:gn}),t}var yn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},bn=vn(yn),xn=h({},yn,{view:0,detail:0}),Sn=vn(xn),Cn,wn,Tn,En=h({},xn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ln,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return`movementX`in e?e.movementX:(e!==Tn&&(Tn&&e.type===`mousemove`?(Cn=e.screenX-Tn.screenX,wn=e.screenY-Tn.screenY):wn=Cn=0,Tn=e),Cn)},movementY:function(e){return`movementY`in e?e.movementY:wn}}),Dn=vn(En),On=vn(h({},En,{dataTransfer:0})),kn=vn(h({},xn,{relatedTarget:0})),An=vn(h({},yn,{animationName:0,elapsedTime:0,pseudoElement:0})),jn=vn(h({},yn,{clipboardData:function(e){return`clipboardData`in e?e.clipboardData:window.clipboardData}})),Mn=vn(h({},yn,{data:0})),Nn={Esc:`Escape`,Spacebar:` `,Left:`ArrowLeft`,Up:`ArrowUp`,Right:`ArrowRight`,Down:`ArrowDown`,Del:`Delete`,Win:`OS`,Menu:`ContextMenu`,Apps:`ContextMenu`,Scroll:`ScrollLock`,MozPrintableKey:`Unidentified`},Pn={8:`Backspace`,9:`Tab`,12:`Clear`,13:`Enter`,16:`Shift`,17:`Control`,18:`Alt`,19:`Pause`,20:`CapsLock`,27:`Escape`,32:` `,33:`PageUp`,34:`PageDown`,35:`End`,36:`Home`,37:`ArrowLeft`,38:`ArrowUp`,39:`ArrowRight`,40:`ArrowDown`,45:`Insert`,46:`Delete`,112:`F1`,113:`F2`,114:`F3`,115:`F4`,116:`F5`,117:`F6`,118:`F7`,119:`F8`,120:`F9`,121:`F10`,122:`F11`,123:`F12`,144:`NumLock`,145:`ScrollLock`,224:`Meta`},Fn={Alt:`altKey`,Control:`ctrlKey`,Meta:`metaKey`,Shift:`shiftKey`};function In(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=Fn[e])?!!t[e]:!1}function Ln(){return In}var Rn=vn(h({},xn,{key:function(e){if(e.key){var t=Nn[e.key]||e.key;if(t!==`Unidentified`)return t}return e.type===`keypress`?(e=hn(e),e===13?`Enter`:String.fromCharCode(e)):e.type===`keydown`||e.type===`keyup`?Pn[e.keyCode]||`Unidentified`:``},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ln,charCode:function(e){return e.type===`keypress`?hn(e):0},keyCode:function(e){return e.type===`keydown`||e.type===`keyup`?e.keyCode:0},which:function(e){return e.type===`keypress`?hn(e):e.type===`keydown`||e.type===`keyup`?e.keyCode:0}})),zn=vn(h({},En,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Bn=vn(h({},xn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ln})),Vn=vn(h({},yn,{propertyName:0,elapsedTime:0,pseudoElement:0})),Hn=vn(h({},En,{deltaX:function(e){return`deltaX`in e?e.deltaX:`wheelDeltaX`in e?-e.wheelDeltaX:0},deltaY:function(e){return`deltaY`in e?e.deltaY:`wheelDeltaY`in e?-e.wheelDeltaY:`wheelDelta`in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0})),Un=vn(h({},yn,{newState:0,oldState:0})),Wn=[9,13,27,32],Gn=cn&&`CompositionEvent`in window,Kn=null;cn&&`documentMode`in document&&(Kn=document.documentMode);var qn=cn&&`TextEvent`in window&&!Kn,Jn=cn&&(!Gn||Kn&&8<Kn&&11>=Kn),Yn=` `,Xn=!1;function Zn(e,t){switch(e){case`keyup`:return Wn.indexOf(t.keyCode)!==-1;case`keydown`:return t.keyCode!==229;case`keypress`:case`mousedown`:case`focusout`:return!0;default:return!1}}function Qn(e){return e=e.detail,typeof e==`object`&&`data`in e?e.data:null}var $n=!1;function er(e,t){switch(e){case`compositionend`:return Qn(t);case`keypress`:return t.which===32?(Xn=!0,Yn):null;case`textInput`:return e=t.data,e===Yn&&Xn?null:e;default:return null}}function tr(e,t){if($n)return e===`compositionend`||!Gn&&Zn(e,t)?(e=mn(),pn=fn=dn=null,$n=!1,e):null;switch(e){case`paste`:return null;case`keypress`:if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case`compositionend`:return Jn&&t.locale!==`ko`?null:t.data;default:return null}}var nr={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function rr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t===`input`?!!nr[e.type]:t===`textarea`}function ir(e,t,n,r){tn?nn?nn.push(r):nn=[r]:tn=r,t=Dd(t,`onChange`),0<t.length&&(n=new bn(`onChange`,`change`,null,n,r),e.push({event:n,listeners:t}))}var ar=null,or=null;function sr(e){bd(e,0)}function B(e){if(Pt(I(e)))return e}function cr(e,t){if(e===`change`)return t}var lr=!1;if(cn){var ur;if(cn){var dr=`oninput`in document;if(!dr){var fr=document.createElement(`div`);fr.setAttribute(`oninput`,`return;`),dr=typeof fr.oninput==`function`}ur=dr}else ur=!1;lr=ur&&(!document.documentMode||9<document.documentMode)}function pr(){ar&&(ar.detachEvent(`onpropertychange`,mr),or=ar=null)}function mr(e){if(e.propertyName===`value`&&B(or)){var t=[];ir(t,or,e,en(e)),on(sr,t)}}function hr(e,t,n){e===`focusin`?(pr(),ar=t,or=n,ar.attachEvent(`onpropertychange`,mr)):e===`focusout`&&pr()}function gr(e){if(e===`selectionchange`||e===`keyup`||e===`keydown`)return B(or)}function _r(e,t){if(e===`click`)return B(t)}function vr(e,t){if(e===`input`||e===`change`)return B(t)}function yr(e,t){return e===t&&(e!==0||1/e==1/t)||e!==e&&t!==t}var br=typeof Object.is==`function`?Object.is:yr;function xr(e,t){if(br(e,t))return!0;if(typeof e!=`object`||!e||typeof t!=`object`||!t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!Ce.call(t,i)||!br(e[i],t[i]))return!1}return!0}function Sr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Cr(e,t){var n=Sr(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}a:{for(;n;){if(n.nextSibling){n=n.nextSibling;break a}n=n.parentNode}n=void 0}n=Sr(n)}}function wr(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?wr(e,t.parentNode):`contains`in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function Tr(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var t=Ft(e.document);t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href==`string`}catch{n=!1}if(n)e=t.contentWindow;else break;t=Ft(e.document)}return t}function Er(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t===`input`&&(e.type===`text`||e.type===`search`||e.type===`tel`||e.type===`url`||e.type===`password`)||t===`textarea`||e.contentEditable===`true`)}var Dr=cn&&`documentMode`in document&&11>=document.documentMode,Or=null,kr=null,Ar=null,jr=!1;function Mr(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;jr||Or==null||Or!==Ft(r)||(r=Or,`selectionStart`in r&&Er(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Ar&&xr(Ar,r)||(Ar=r,r=Dd(kr,`onSelect`),0<r.length&&(t=new bn(`onSelect`,`select`,null,t,n),e.push({event:t,listeners:r}),t.target=Or)))}function Nr(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n[`Webkit`+e]=`webkit`+t,n[`Moz`+e]=`moz`+t,n}var Pr={animationend:Nr(`Animation`,`AnimationEnd`),animationiteration:Nr(`Animation`,`AnimationIteration`),animationstart:Nr(`Animation`,`AnimationStart`),transitionrun:Nr(`Transition`,`TransitionRun`),transitionstart:Nr(`Transition`,`TransitionStart`),transitioncancel:Nr(`Transition`,`TransitionCancel`),transitionend:Nr(`Transition`,`TransitionEnd`)},Fr={},Ir={};cn&&(Ir=document.createElement(`div`).style,`AnimationEvent`in window||(delete Pr.animationend.animation,delete Pr.animationiteration.animation,delete Pr.animationstart.animation),`TransitionEvent`in window||delete Pr.transitionend.transition);function Lr(e){if(Fr[e])return Fr[e];if(!Pr[e])return e;var t=Pr[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in Ir)return Fr[e]=t[n];return e}var Rr=Lr(`animationend`),zr=Lr(`animationiteration`),Br=Lr(`animationstart`),Vr=Lr(`transitionrun`),Hr=Lr(`transitionstart`),Ur=Lr(`transitioncancel`),Wr=Lr(`transitionend`),Gr=new Map,Kr=`abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel`.split(` `);Kr.push(`scrollEnd`);function qr(e,t){Gr.set(e,t),wt(t,[e])}var Jr=typeof reportError==`function`?reportError:function(e){if(typeof window==`object`&&typeof window.ErrorEvent==`function`){var t=new window.ErrorEvent(`error`,{bubbles:!0,cancelable:!0,message:typeof e==`object`&&e&&typeof e.message==`string`?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if(typeof process==`object`&&typeof process.emit==`function`){process.emit(`uncaughtException`,e);return}console.error(e)},Yr=[],Xr=0,Zr=0;function Qr(){for(var e=Xr,t=Zr=Xr=0;t<e;){var n=Yr[t];Yr[t++]=null;var r=Yr[t];Yr[t++]=null;var i=Yr[t];Yr[t++]=null;var a=Yr[t];if(Yr[t++]=null,r!==null&&i!==null){var o=r.pending;o===null?i.next=i:(i.next=o.next,o.next=i),r.pending=i}a!==0&&ni(n,i,a)}}function $r(e,t,n,r){Yr[Xr++]=e,Yr[Xr++]=t,Yr[Xr++]=n,Yr[Xr++]=r,Zr|=r,e.lanes|=r,e=e.alternate,e!==null&&(e.lanes|=r)}function ei(e,t,n,r){return $r(e,t,n,r),ri(e)}function ti(e,t){return $r(e,null,null,t),ri(e)}function ni(e,t,n){e.lanes|=n;var r=e.alternate;r!==null&&(r.lanes|=n);for(var i=!1,a=e.return;a!==null;)a.childLanes|=n,r=a.alternate,r!==null&&(r.childLanes|=n),a.tag===22&&(e=a.stateNode,e===null||e._visibility&1||(i=!0)),e=a,a=a.return;return e.tag===3?(a=e.stateNode,i&&t!==null&&(i=31-Be(n),e=a.hiddenUpdates,r=e[i],r===null?e[i]=[t]:r.push(t),t.lane=n|536870912),a):null}function ri(e){if(50<du)throw du=0,fu=null,Error(i(185));for(var t=e.return;t!==null;)e=t,t=e.return;return e.tag===3?e.stateNode:null}var ii={};function ai(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function oi(e,t,n,r){return new ai(e,t,n,r)}function si(e){return e=e.prototype,!(!e||!e.isReactComponent)}function ci(e,t){var n=e.alternate;return n===null?(n=oi(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&65011712,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n.refCleanup=e.refCleanup,n}function li(e,t){e.flags&=65011714;var n=e.alternate;return n===null?(e.childLanes=0,e.lanes=t,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=n.childLanes,e.lanes=n.lanes,e.child=n.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=n.memoizedProps,e.memoizedState=n.memoizedState,e.updateQueue=n.updateQueue,e.type=n.type,t=n.dependencies,e.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),e}function ui(e,t,n,r,a,o){var s=0;if(r=e,typeof e==`function`)si(e)&&(s=1);else if(typeof e==`string`)s=Uf(e,n,ce.current)?26:e===`html`||e===`head`||e===`body`?27:5;else a:switch(e){case k:return e=oi(31,n,t,a),e.elementType=k,e.lanes=o,e;case y:return di(n.children,a,o,t);case b:s=8,a|=24;break;case x:return e=oi(12,n,t,a|2),e.elementType=x,e.lanes=o,e;case T:return e=oi(13,n,t,a),e.elementType=T,e.lanes=o,e;case E:return e=oi(19,n,t,a),e.elementType=E,e.lanes=o,e;default:if(typeof e==`object`&&e)switch(e.$$typeof){case C:s=10;break a;case S:s=9;break a;case w:s=11;break a;case D:s=14;break a;case O:s=16,r=null;break a}s=29,n=Error(i(130,e===null?`null`:typeof e,``)),r=null}return t=oi(s,n,t,a),t.elementType=e,t.type=r,t.lanes=o,t}function di(e,t,n,r){return e=oi(7,e,r,t),e.lanes=n,e}function fi(e,t,n){return e=oi(6,e,null,t),e.lanes=n,e}function pi(e){var t=oi(18,null,null,0);return t.stateNode=e,t}function mi(e,t,n){return t=oi(4,e.children===null?[]:e.children,e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}var hi=new WeakMap;function gi(e,t){if(typeof e==`object`&&e){var n=hi.get(e);return n===void 0?(t={value:e,source:t,stack:Se(t)},hi.set(e,t),t):n}return{value:e,source:t,stack:Se(t)}}var _i=[],vi=0,yi=null,bi=0,xi=[],Si=0,Ci=null,wi=1,Ti=``;function Ei(e,t){_i[vi++]=bi,_i[vi++]=yi,yi=e,bi=t}function Di(e,t,n){xi[Si++]=wi,xi[Si++]=Ti,xi[Si++]=Ci,Ci=e;var r=wi;e=Ti;var i=32-Be(r)-1;r&=~(1<<i),n+=1;var a=32-Be(t)+i;if(30<a){var o=i-i%5;a=(r&(1<<o)-1).toString(32),r>>=o,i-=o,wi=1<<32-Be(t)+i|n<<i|r,Ti=a+e}else wi=1<<a|n<<i|r,Ti=e}function Oi(e){e.return!==null&&(Ei(e,1),Di(e,1,0))}function ki(e){for(;e===yi;)yi=_i[--vi],_i[vi]=null,bi=_i[--vi],_i[vi]=null;for(;e===Ci;)Ci=xi[--Si],xi[Si]=null,Ti=xi[--Si],xi[Si]=null,wi=xi[--Si],xi[Si]=null}function Ai(e,t){xi[Si++]=wi,xi[Si++]=Ti,xi[Si++]=Ci,wi=t.id,Ti=t.overflow,Ci=e}var ji=null,Mi=null,V=!1,Ni=null,Pi=!1,Fi=Error(i(519));function Ii(e){throw Hi(gi(Error(i(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?`text`:`HTML`,``)),e)),Fi}function Li(e){var t=e.stateNode,n=e.type,r=e.memoizedProps;switch(t[lt]=e,t[ut]=r,n){case`dialog`:Z(`cancel`,t),Z(`close`,t);break;case`iframe`:case`object`:case`embed`:Z(`load`,t);break;case`video`:case`audio`:for(n=0;n<vd.length;n++)Z(vd[n],t);break;case`source`:Z(`error`,t);break;case`img`:case`image`:case`link`:Z(`error`,t),Z(`load`,t);break;case`details`:Z(`toggle`,t);break;case`input`:Z(`invalid`,t),zt(t,r.value,r.defaultValue,r.checked,r.defaultChecked,r.type,r.name,!0);break;case`select`:Z(`invalid`,t);break;case`textarea`:Z(`invalid`,t),Ut(t,r.value,r.defaultValue,r.children)}n=r.children,typeof n!=`string`&&typeof n!=`number`&&typeof n!=`bigint`||t.textContent===``+n||!0===r.suppressHydrationWarning||Nd(t.textContent,n)?(r.popover!=null&&(Z(`beforetoggle`,t),Z(`toggle`,t)),r.onScroll!=null&&Z(`scroll`,t),r.onScrollEnd!=null&&Z(`scrollend`,t),r.onClick!=null&&(t.onclick=Qt),t=!0):t=!1,t||Ii(e,!0)}function Ri(e){for(ji=e.return;ji;)switch(ji.tag){case 5:case 31:case 13:Pi=!1;return;case 27:case 3:Pi=!0;return;default:ji=ji.return}}function zi(e){if(e!==ji)return!1;if(!V)return Ri(e),V=!0,!1;var t=e.tag,n;if((n=t!==3&&t!==27)&&((n=t===5)&&(n=e.type,n=!(n!==`form`&&n!==`button`)||Gd(e.type,e.memoizedProps)),n=!n),n&&Mi&&Ii(e),Ri(e),t===13){if(e=e.memoizedState,e=e===null?null:e.dehydrated,!e)throw Error(i(317));Mi=Q(e)}else if(t===31){if(e=e.memoizedState,e=e===null?null:e.dehydrated,!e)throw Error(i(317));Mi=Q(e)}else t===27?(t=Mi,$d(e.type)?(e=df,df=null,Mi=e):Mi=t):Mi=ji?uf(e.stateNode.nextSibling):null;return!0}function Bi(){Mi=ji=null,V=!1}function Vi(){var e=Ni;return e!==null&&(Ql===null?Ql=e:Ql.push.apply(Ql,e),Ni=null),e}function Hi(e){Ni===null?Ni=[e]:Ni.push(e)}var Ui=oe(null),Wi=null,Gi=null;function Ki(e,t,n){F(Ui,t._currentValue),t._currentValue=n}function qi(e){e._currentValue=Ui.current,se(Ui)}function Ji(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)===t?r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t):(e.childLanes|=t,r!==null&&(r.childLanes|=t)),e===n)break;e=e.return}}function Yi(e,t,n,r){var a=e.child;for(a!==null&&(a.return=e);a!==null;){var o=a.dependencies;if(o!==null){var s=a.child;o=o.firstContext;a:for(;o!==null;){var c=o;o=a;for(var l=0;l<t.length;l++)if(c.context===t[l]){o.lanes|=n,c=o.alternate,c!==null&&(c.lanes|=n),Ji(o.return,n,e),r||(s=null);break a}o=c.next}}else if(a.tag===18){if(s=a.return,s===null)throw Error(i(341));s.lanes|=n,o=s.alternate,o!==null&&(o.lanes|=n),Ji(s,n,e),s=null}else s=a.child;if(s!==null)s.return=a;else for(s=a;s!==null;){if(s===e){s=null;break}if(a=s.sibling,a!==null){a.return=s.return,s=a;break}s=s.return}a=s}}function Xi(e,t,n,r){e=null;for(var a=t,o=!1;a!==null;){if(!o){if(a.flags&524288)o=!0;else if(a.flags&262144)break}if(a.tag===10){var s=a.alternate;if(s===null)throw Error(i(387));if(s=s.memoizedProps,s!==null){var c=a.type;br(a.pendingProps.value,s.value)||(e===null?e=[c]:e.push(c))}}else if(a===de.current){if(s=a.alternate,s===null)throw Error(i(387));s.memoizedState.memoizedState!==a.memoizedState.memoizedState&&(e===null?e=[Qf]:e.push(Qf))}a=a.return}e!==null&&Yi(t,e,n,r),t.flags|=262144}function Zi(e){for(e=e.firstContext;e!==null;){if(!br(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function Qi(e){Wi=e,Gi=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function $i(e){return ta(Wi,e)}function ea(e,t){return Wi===null&&Qi(e),ta(e,t)}function ta(e,t){var n=t._currentValue;if(t={context:t,memoizedValue:n,next:null},Gi===null){if(e===null)throw Error(i(308));Gi=t,e.dependencies={lanes:0,firstContext:t},e.flags|=524288}else Gi=Gi.next=t;return n}var na=typeof AbortController<`u`?AbortController:function(){var e=[],t=this.signal={aborted:!1,addEventListener:function(t,n){e.push(n)}};this.abort=function(){t.aborted=!0,e.forEach(function(e){return e()})}},ra=t.unstable_scheduleCallback,ia=t.unstable_NormalPriority,aa={$$typeof:C,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function oa(){return{controller:new na,data:new Map,refCount:0}}function sa(e){e.refCount--,e.refCount===0&&ra(ia,function(){e.controller.abort()})}var ca=null,la=0,ua=0,da=null;function fa(e,t){if(ca===null){var n=ca=[];la=0,ua=fd(),da={status:`pending`,value:void 0,then:function(e){n.push(e)}}}return la++,t.then(pa,pa),t}function pa(){if(--la===0&&ca!==null){da!==null&&(da.status=`fulfilled`);var e=ca;ca=null,ua=0,da=null;for(var t=0;t<e.length;t++)(0,e[t])()}}function ma(e,t){var n=[],r={status:`pending`,value:null,reason:null,then:function(e){n.push(e)}};return e.then(function(){r.status=`fulfilled`,r.value=t;for(var e=0;e<n.length;e++)(0,n[e])(t)},function(e){for(r.status=`rejected`,r.reason=e,e=0;e<n.length;e++)(0,n[e])(void 0)}),r}var ha=N.S;N.S=function(e,t){tu=Oe(),typeof t==`object`&&t&&typeof t.then==`function`&&fa(e,t),ha!==null&&ha(e,t)};var ga=oe(null);function _a(){var e=ga.current;return e===null?Rl.pooledCache:e}function va(e,t){t===null?F(ga,ga.current):F(ga,t.pool)}function ya(){var e=_a();return e===null?null:{parent:aa._currentValue,pool:e}}var ba=Error(i(460)),xa=Error(i(474)),Sa=Error(i(542)),Ca={then:function(){}};function wa(e){return e=e.status,e===`fulfilled`||e===`rejected`}function Ta(e,t,n){switch(n=e[n],n===void 0?e.push(t):n!==t&&(t.then(Qt,Qt),t=n),t.status){case`fulfilled`:return t.value;case`rejected`:throw e=t.reason,ka(e),e;default:if(typeof t.status==`string`)t.then(Qt,Qt);else{if(e=Rl,e!==null&&100<e.shellSuspendCounter)throw Error(i(482));e=t,e.status=`pending`,e.then(function(e){if(t.status===`pending`){var n=t;n.status=`fulfilled`,n.value=e}},function(e){if(t.status===`pending`){var n=t;n.status=`rejected`,n.reason=e}})}switch(t.status){case`fulfilled`:return t.value;case`rejected`:throw e=t.reason,ka(e),e}throw Da=t,ba}}function Ea(e){try{var t=e._init;return t(e._payload)}catch(e){throw typeof e==`object`&&e&&typeof e.then==`function`?(Da=e,ba):e}}var Da=null;function Oa(){if(Da===null)throw Error(i(459));var e=Da;return Da=null,e}function ka(e){if(e===ba||e===Sa)throw Error(i(483))}var Aa=null,ja=0;function Ma(e){var t=ja;return ja+=1,Aa===null&&(Aa=[]),Ta(Aa,e,t)}function Na(e,t){t=t.props.ref,e.ref=t===void 0?null:t}function Pa(e,t){throw t.$$typeof===g?Error(i(525)):(e=Object.prototype.toString.call(t),Error(i(31,e===`[object Object]`?`object with keys {`+Object.keys(t).join(`, `)+`}`:e)))}function Fa(e){function t(t,n){if(e){var r=t.deletions;r===null?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;r!==null;)t(n,r),r=r.sibling;return null}function r(e){for(var t=new Map;e!==null;)e.key===null?t.set(e.index,e):t.set(e.key,e),e=e.sibling;return t}function a(e,t){return e=ci(e,t),e.index=0,e.sibling=null,e}function o(t,n,r){return t.index=r,e?(r=t.alternate,r===null?(t.flags|=67108866,n):(r=r.index,r<n?(t.flags|=67108866,n):r)):(t.flags|=1048576,n)}function s(t){return e&&t.alternate===null&&(t.flags|=67108866),t}function c(e,t,n,r){return t===null||t.tag!==6?(t=fi(n,e.mode,r),t.return=e,t):(t=a(t,n),t.return=e,t)}function l(e,t,n,r){var i=n.type;return i===y?d(e,t,n.props.children,r,n.key):t!==null&&(t.elementType===i||typeof i==`object`&&i&&i.$$typeof===O&&Ea(i)===t.type)?(t=a(t,n.props),Na(t,n),t.return=e,t):(t=ui(n.type,n.key,n.props,null,e.mode,r),Na(t,n),t.return=e,t)}function u(e,t,n,r){return t===null||t.tag!==4||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?(t=mi(n,e.mode,r),t.return=e,t):(t=a(t,n.children||[]),t.return=e,t)}function d(e,t,n,r,i){return t===null||t.tag!==7?(t=di(n,e.mode,r,i),t.return=e,t):(t=a(t,n),t.return=e,t)}function f(e,t,n){if(typeof t==`string`&&t!==``||typeof t==`number`||typeof t==`bigint`)return t=fi(``+t,e.mode,n),t.return=e,t;if(typeof t==`object`&&t){switch(t.$$typeof){case _:return n=ui(t.type,t.key,t.props,null,e.mode,n),Na(n,t),n.return=e,n;case v:return t=mi(t,e.mode,n),t.return=e,t;case O:return t=Ea(t),f(e,t,n)}if(ne(t)||M(t))return t=di(t,e.mode,n,null),t.return=e,t;if(typeof t.then==`function`)return f(e,Ma(t),n);if(t.$$typeof===C)return f(e,ea(e,t),n);Pa(e,t)}return null}function p(e,t,n,r){var i=t===null?null:t.key;if(typeof n==`string`&&n!==``||typeof n==`number`||typeof n==`bigint`)return i===null?c(e,t,``+n,r):null;if(typeof n==`object`&&n){switch(n.$$typeof){case _:return n.key===i?l(e,t,n,r):null;case v:return n.key===i?u(e,t,n,r):null;case O:return n=Ea(n),p(e,t,n,r)}if(ne(n)||M(n))return i===null?d(e,t,n,r,null):null;if(typeof n.then==`function`)return p(e,t,Ma(n),r);if(n.$$typeof===C)return p(e,t,ea(e,n),r);Pa(e,n)}return null}function m(e,t,n,r,i){if(typeof r==`string`&&r!==``||typeof r==`number`||typeof r==`bigint`)return e=e.get(n)||null,c(t,e,``+r,i);if(typeof r==`object`&&r){switch(r.$$typeof){case _:return e=e.get(r.key===null?n:r.key)||null,l(t,e,r,i);case v:return e=e.get(r.key===null?n:r.key)||null,u(t,e,r,i);case O:return r=Ea(r),m(e,t,n,r,i)}if(ne(r)||M(r))return e=e.get(n)||null,d(t,e,r,i,null);if(typeof r.then==`function`)return m(e,t,n,Ma(r),i);if(r.$$typeof===C)return m(e,t,n,ea(t,r),i);Pa(t,r)}return null}function h(i,a,s,c){for(var l=null,u=null,d=a,h=a=0,g=null;d!==null&&h<s.length;h++){d.index>h?(g=d,d=null):g=d.sibling;var _=p(i,d,s[h],c);if(_===null){d===null&&(d=g);break}e&&d&&_.alternate===null&&t(i,d),a=o(_,a,h),u===null?l=_:u.sibling=_,u=_,d=g}if(h===s.length)return n(i,d),V&&Ei(i,h),l;if(d===null){for(;h<s.length;h++)d=f(i,s[h],c),d!==null&&(a=o(d,a,h),u===null?l=d:u.sibling=d,u=d);return V&&Ei(i,h),l}for(d=r(d);h<s.length;h++)g=m(d,i,h,s[h],c),g!==null&&(e&&g.alternate!==null&&d.delete(g.key===null?h:g.key),a=o(g,a,h),u===null?l=g:u.sibling=g,u=g);return e&&d.forEach(function(e){return t(i,e)}),V&&Ei(i,h),l}function g(a,s,c,l){if(c==null)throw Error(i(151));for(var u=null,d=null,h=s,g=s=0,_=null,v=c.next();h!==null&&!v.done;g++,v=c.next()){h.index>g?(_=h,h=null):_=h.sibling;var y=p(a,h,v.value,l);if(y===null){h===null&&(h=_);break}e&&h&&y.alternate===null&&t(a,h),s=o(y,s,g),d===null?u=y:d.sibling=y,d=y,h=_}if(v.done)return n(a,h),V&&Ei(a,g),u;if(h===null){for(;!v.done;g++,v=c.next())v=f(a,v.value,l),v!==null&&(s=o(v,s,g),d===null?u=v:d.sibling=v,d=v);return V&&Ei(a,g),u}for(h=r(h);!v.done;g++,v=c.next())v=m(h,a,g,v.value,l),v!==null&&(e&&v.alternate!==null&&h.delete(v.key===null?g:v.key),s=o(v,s,g),d===null?u=v:d.sibling=v,d=v);return e&&h.forEach(function(e){return t(a,e)}),V&&Ei(a,g),u}function b(e,r,o,c){if(typeof o==`object`&&o&&o.type===y&&o.key===null&&(o=o.props.children),typeof o==`object`&&o){switch(o.$$typeof){case _:a:{for(var l=o.key;r!==null;){if(r.key===l){if(l=o.type,l===y){if(r.tag===7){n(e,r.sibling),c=a(r,o.props.children),c.return=e,e=c;break a}}else if(r.elementType===l||typeof l==`object`&&l&&l.$$typeof===O&&Ea(l)===r.type){n(e,r.sibling),c=a(r,o.props),Na(c,o),c.return=e,e=c;break a}n(e,r);break}else t(e,r);r=r.sibling}o.type===y?(c=di(o.props.children,e.mode,c,o.key),c.return=e,e=c):(c=ui(o.type,o.key,o.props,null,e.mode,c),Na(c,o),c.return=e,e=c)}return s(e);case v:a:{for(l=o.key;r!==null;){if(r.key===l)if(r.tag===4&&r.stateNode.containerInfo===o.containerInfo&&r.stateNode.implementation===o.implementation){n(e,r.sibling),c=a(r,o.children||[]),c.return=e,e=c;break a}else{n(e,r);break}else t(e,r);r=r.sibling}c=mi(o,e.mode,c),c.return=e,e=c}return s(e);case O:return o=Ea(o),b(e,r,o,c)}if(ne(o))return h(e,r,o,c);if(M(o)){if(l=M(o),typeof l!=`function`)throw Error(i(150));return o=l.call(o),g(e,r,o,c)}if(typeof o.then==`function`)return b(e,r,Ma(o),c);if(o.$$typeof===C)return b(e,r,ea(e,o),c);Pa(e,o)}return typeof o==`string`&&o!==``||typeof o==`number`||typeof o==`bigint`?(o=``+o,r!==null&&r.tag===6?(n(e,r.sibling),c=a(r,o),c.return=e,e=c):(n(e,r),c=fi(o,e.mode,c),c.return=e,e=c),s(e)):n(e,r)}return function(e,t,n,r){try{ja=0;var i=b(e,t,n,r);return Aa=null,i}catch(t){if(t===ba||t===Sa)throw t;var a=oi(29,t,null,e.mode);return a.lanes=r,a.return=e,a}}}var Ia=Fa(!0),La=Fa(!1),Ra=!1;function za(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Ba(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function Va(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function Ha(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,Ll&2){var i=r.pending;return i===null?t.next=t:(t.next=i.next,i.next=t),r.pending=t,t=ri(e),ni(e,null,n),t}return $r(e,r,t,n),ri(e)}function Ua(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,n&4194048)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,nt(e,n)}}function Wa(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,a=null;if(n=n.firstBaseUpdate,n!==null){do{var o={lane:n.lane,tag:n.tag,payload:n.payload,callback:null,next:null};a===null?i=a=o:a=a.next=o,n=n.next}while(n!==null);a===null?i=a=t:a=a.next=t}else i=a=t;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:a,shared:r.shared,callbacks:r.callbacks},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}var Ga=!1;function Ka(){if(Ga){var e=da;if(e!==null)throw e}}function qa(e,t,n,r){Ga=!1;var i=e.updateQueue;Ra=!1;var a=i.firstBaseUpdate,o=i.lastBaseUpdate,s=i.shared.pending;if(s!==null){i.shared.pending=null;var c=s,l=c.next;c.next=null,o===null?a=l:o.next=l,o=c;var u=e.alternate;u!==null&&(u=u.updateQueue,s=u.lastBaseUpdate,s!==o&&(s===null?u.firstBaseUpdate=l:s.next=l,u.lastBaseUpdate=c))}if(a!==null){var d=i.baseState;o=0,u=l=c=null,s=a;do{var f=s.lane&-536870913,p=f!==s.lane;if(p?(Y&f)===f:(r&f)===f){f!==0&&f===ua&&(Ga=!0),u!==null&&(u=u.next={lane:0,tag:s.tag,payload:s.payload,callback:null,next:null});a:{var m=e,g=s;f=t;var _=n;switch(g.tag){case 1:if(m=g.payload,typeof m==`function`){d=m.call(_,d,f);break a}d=m;break a;case 3:m.flags=m.flags&-65537|128;case 0:if(m=g.payload,f=typeof m==`function`?m.call(_,d,f):m,f==null)break a;d=h({},d,f);break a;case 2:Ra=!0}}f=s.callback,f!==null&&(e.flags|=64,p&&(e.flags|=8192),p=i.callbacks,p===null?i.callbacks=[f]:p.push(f))}else p={lane:f,tag:s.tag,payload:s.payload,callback:s.callback,next:null},u===null?(l=u=p,c=d):u=u.next=p,o|=f;if(s=s.next,s===null){if(s=i.shared.pending,s===null)break;p=s,s=p.next,p.next=null,i.lastBaseUpdate=p,i.shared.pending=null}}while(1);u===null&&(c=d),i.baseState=c,i.firstBaseUpdate=l,i.lastBaseUpdate=u,a===null&&(i.shared.lanes=0),Kl|=o,e.lanes=o,e.memoizedState=d}}function Ja(e,t){if(typeof e!=`function`)throw Error(i(191,e));e.call(t)}function Ya(e,t){var n=e.callbacks;if(n!==null)for(e.callbacks=null,e=0;e<n.length;e++)Ja(n[e],t)}var Xa=oe(null),Za=oe(0);function Qa(e,t){e=Wl,F(Za,e),F(Xa,t),Wl=e|t.baseLanes}function $a(){F(Za,Wl),F(Xa,Xa.current)}function eo(){Wl=Za.current,se(Xa),se(Za)}var to=oe(null),no=null;function ro(e){var t=e.alternate;F(co,co.current&1),F(to,e),no===null&&(t===null||Xa.current!==null||t.memoizedState!==null)&&(no=e)}function io(e){F(co,co.current),F(to,e),no===null&&(no=e)}function ao(e){e.tag===22?(F(co,co.current),F(to,e),no===null&&(no=e)):oo(e)}function oo(){F(co,co.current),F(to,to.current)}function so(e){se(to),no===e&&(no=null),se(co)}var co=oe(0);function lo(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||sf(n)||cf(n)))return t}else if(t.tag===19&&(t.memoizedProps.revealOrder===`forwards`||t.memoizedProps.revealOrder===`backwards`||t.memoizedProps.revealOrder===`unstable_legacy-backwards`||t.memoizedProps.revealOrder===`together`)){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var uo=0,H=null,fo=null,po=null,mo=!1,ho=!1,go=!1,_o=0,vo=0,yo=null,bo=0;function xo(){throw Error(i(321))}function So(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!br(e[n],t[n]))return!1;return!0}function Co(e,t,n,r,i,a){return uo=a,H=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,N.H=e===null||e.memoizedState===null?Is:Ls,go=!1,a=n(r,i),go=!1,ho&&(a=To(t,n,r,i)),wo(e),a}function wo(e){N.H=Fs;var t=fo!==null&&fo.next!==null;if(uo=0,po=fo=H=null,mo=!1,vo=0,yo=null,t)throw Error(i(300));e===null||ec||(e=e.dependencies,e!==null&&Zi(e)&&(ec=!0))}function To(e,t,n,r){H=e;var a=0;do{if(ho&&(yo=null),vo=0,ho=!1,25<=a)throw Error(i(301));if(a+=1,po=fo=null,e.updateQueue!=null){var o=e.updateQueue;o.lastEffect=null,o.events=null,o.stores=null,o.memoCache!=null&&(o.memoCache.index=0)}N.H=Rs,o=t(n,r)}while(ho);return o}function Eo(){var e=N.H,t=e.useState()[0];return t=typeof t.then==`function`?No(t):t,e=e.useState()[0],(fo===null?null:fo.memoizedState)!==e&&(H.flags|=1024),t}function Do(){var e=_o!==0;return _o=0,e}function Oo(e,t,n){t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~n}function ko(e){if(mo){for(e=e.memoizedState;e!==null;){var t=e.queue;t!==null&&(t.pending=null),e=e.next}mo=!1}uo=0,po=fo=H=null,ho=!1,vo=_o=0,yo=null}function Ao(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return po===null?H.memoizedState=po=e:po=po.next=e,po}function jo(){if(fo===null){var e=H.alternate;e=e===null?null:e.memoizedState}else e=fo.next;var t=po===null?H.memoizedState:po.next;if(t!==null)po=t,fo=e;else{if(e===null)throw H.alternate===null?Error(i(467)):Error(i(310));fo=e,e={memoizedState:fo.memoizedState,baseState:fo.baseState,baseQueue:fo.baseQueue,queue:fo.queue,next:null},po===null?H.memoizedState=po=e:po=po.next=e}return po}function Mo(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function No(e){var t=vo;return vo+=1,yo===null&&(yo=[]),e=Ta(yo,e,t),t=H,(po===null?t.memoizedState:po.next)===null&&(t=t.alternate,N.H=t===null||t.memoizedState===null?Is:Ls),e}function Po(e){if(typeof e==`object`&&e){if(typeof e.then==`function`)return No(e);if(e.$$typeof===C)return $i(e)}throw Error(i(438,String(e)))}function Fo(e){var t=null,n=H.updateQueue;if(n!==null&&(t=n.memoCache),t==null){var r=H.alternate;r!==null&&(r=r.updateQueue,r!==null&&(r=r.memoCache,r!=null&&(t={data:r.data.map(function(e){return e.slice()}),index:0})))}if(t??={data:[],index:0},n===null&&(n=Mo(),H.updateQueue=n),n.memoCache=t,n=t.data[t.index],n===void 0)for(n=t.data[t.index]=Array(e),r=0;r<e;r++)n[r]=A;return t.index++,n}function Io(e,t){return typeof t==`function`?t(e):t}function Lo(e){return Ro(jo(),fo,e)}function Ro(e,t,n){var r=e.queue;if(r===null)throw Error(i(311));r.lastRenderedReducer=n;var a=e.baseQueue,o=r.pending;if(o!==null){if(a!==null){var s=a.next;a.next=o.next,o.next=s}t.baseQueue=a=o,r.pending=null}if(o=e.baseState,a===null)e.memoizedState=o;else{t=a.next;var c=s=null,l=null,u=t,d=!1;do{var f=u.lane&-536870913;if(f===u.lane?(uo&f)===f:(Y&f)===f){var p=u.revertLane;if(p===0)l!==null&&(l=l.next={lane:0,revertLane:0,gesture:null,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),f===ua&&(d=!0);else if((uo&p)===p){u=u.next,p===ua&&(d=!0);continue}else f={lane:0,revertLane:u.revertLane,gesture:null,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null},l===null?(c=l=f,s=o):l=l.next=f,H.lanes|=p,Kl|=p;f=u.action,go&&n(o,f),o=u.hasEagerState?u.eagerState:n(o,f)}else p={lane:f,revertLane:u.revertLane,gesture:u.gesture,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null},l===null?(c=l=p,s=o):l=l.next=p,H.lanes|=f,Kl|=f;u=u.next}while(u!==null&&u!==t);if(l===null?s=o:l.next=c,!br(o,e.memoizedState)&&(ec=!0,d&&(n=da,n!==null)))throw n;e.memoizedState=o,e.baseState=s,e.baseQueue=l,r.lastRenderedState=o}return a===null&&(r.lanes=0),[e.memoizedState,r.dispatch]}function zo(e){var t=jo(),n=t.queue;if(n===null)throw Error(i(311));n.lastRenderedReducer=e;var r=n.dispatch,a=n.pending,o=t.memoizedState;if(a!==null){n.pending=null;var s=a=a.next;do o=e(o,s.action),s=s.next;while(s!==a);br(o,t.memoizedState)||(ec=!0),t.memoizedState=o,t.baseQueue===null&&(t.baseState=o),n.lastRenderedState=o}return[o,r]}function Bo(e,t,n){var r=H,a=jo(),o=V;if(o){if(n===void 0)throw Error(i(407));n=n()}else n=t();var s=!br((fo||a).memoizedState,n);if(s&&(a.memoizedState=n,ec=!0),a=a.queue,cs(Ho.bind(null,r,a,e),[e]),a.getSnapshot!==t||s||po!==null&&po.memoizedState.tag&1){if(r.flags|=2048,rs(9,{destroy:void 0},Vo.bind(null,r,a,n,t),null),Rl===null)throw Error(i(349));o||uo&127||U(r,t,n)}return n}function U(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=H.updateQueue,t===null?(t=Mo(),H.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function Vo(e,t,n,r){t.value=n,t.getSnapshot=r,Uo(t)&&Wo(e)}function Ho(e,t,n){return n(function(){Uo(t)&&Wo(e)})}function Uo(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!br(e,n)}catch{return!0}}function Wo(e){var t=ti(e,2);t!==null&&hu(t,e,2)}function Go(e){var t=Ao();if(typeof e==`function`){var n=e;if(e=n(),go){ze(!0);try{n()}finally{ze(!1)}}}return t.memoizedState=t.baseState=e,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Io,lastRenderedState:e},t}function Ko(e,t,n,r){return e.baseState=n,Ro(e,fo,typeof r==`function`?r:Io)}function qo(e,t,n,r,a){if(Ms(e))throw Error(i(485));if(e=t.action,e!==null){var o={payload:a,action:e,next:null,isTransition:!0,status:`pending`,value:null,reason:null,listeners:[],then:function(e){o.listeners.push(e)}};N.T===null?o.isTransition=!1:n(!0),r(o),n=t.pending,n===null?(o.next=t.pending=o,W(t,o)):(o.next=n.next,t.pending=n.next=o)}}function W(e,t){var n=t.action,r=t.payload,i=e.state;if(t.isTransition){var a=N.T,o={};N.T=o;try{var s=n(i,r),c=N.S;c!==null&&c(o,s),G(e,t,s)}catch(n){Yo(e,t,n)}finally{a!==null&&o.types!==null&&(a.types=o.types),N.T=a}}else try{a=n(i,r),G(e,t,a)}catch(n){Yo(e,t,n)}}function G(e,t,n){typeof n==`object`&&n&&typeof n.then==`function`?n.then(function(n){Jo(e,t,n)},function(n){return Yo(e,t,n)}):Jo(e,t,n)}function Jo(e,t,n){t.status=`fulfilled`,t.value=n,Xo(t),e.state=n,t=e.pending,t!==null&&(n=t.next,n===t?e.pending=null:(n=n.next,t.next=n,W(e,n)))}function Yo(e,t,n){var r=e.pending;if(e.pending=null,r!==null){r=r.next;do t.status=`rejected`,t.reason=n,Xo(t),t=t.next;while(t!==r)}e.action=null}function Xo(e){e=e.listeners;for(var t=0;t<e.length;t++)(0,e[t])()}function Zo(e,t){return t}function Qo(e,t){if(V){var n=Rl.formState;if(n!==null){a:{var r=H;if(V){if(Mi){b:{for(var i=Mi,a=Pi;i.nodeType!==8;){if(!a){i=null;break b}if(i=uf(i.nextSibling),i===null){i=null;break b}}a=i.data,i=a===`F!`||a===`F`?i:null}if(i){Mi=uf(i.nextSibling),r=i.data===`F!`;break a}}Ii(r)}r=!1}r&&(t=n[0])}}return n=Ao(),n.memoizedState=n.baseState=t,r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Zo,lastRenderedState:t},n.queue=r,n=As.bind(null,H,r),r.dispatch=n,r=Go(!1),a=js.bind(null,H,!1,r.queue),r=Ao(),i={state:t,dispatch:null,action:e,pending:null},r.queue=i,n=qo.bind(null,H,i,a,n),i.dispatch=n,r.memoizedState=e,[t,n,!1]}function $o(e){return es(jo(),fo,e)}function es(e,t,n){if(t=Ro(e,t,Zo)[0],e=Lo(Io)[0],typeof t==`object`&&t&&typeof t.then==`function`)try{var r=No(t)}catch(e){throw e===ba?Sa:e}else r=t;t=jo();var i=t.queue,a=i.dispatch;return n!==t.memoizedState&&(H.flags|=2048,rs(9,{destroy:void 0},ts.bind(null,i,n),null)),[r,a,e]}function ts(e,t){e.action=t}function ns(e){var t=jo(),n=fo;if(n!==null)return es(t,n,e);jo(),t=t.memoizedState,n=jo();var r=n.queue.dispatch;return n.memoizedState=e,[t,r,!1]}function rs(e,t,n,r){return e={tag:e,create:n,deps:r,inst:t,next:null},t=H.updateQueue,t===null&&(t=Mo(),H.updateQueue=t),n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function is(){return jo().memoizedState}function as(e,t,n,r){var i=Ao();H.flags|=e,i.memoizedState=rs(1|t,{destroy:void 0},n,r===void 0?null:r)}function os(e,t,n,r){var i=jo();r=r===void 0?null:r;var a=i.memoizedState.inst;fo!==null&&r!==null&&So(r,fo.memoizedState.deps)?i.memoizedState=rs(t,a,n,r):(H.flags|=e,i.memoizedState=rs(1|t,a,n,r))}function ss(e,t){as(8390656,8,e,t)}function cs(e,t){os(2048,8,e,t)}function ls(e){H.flags|=4;var t=H.updateQueue;if(t===null)t=Mo(),H.updateQueue=t,t.events=[e];else{var n=t.events;n===null?t.events=[e]:n.push(e)}}function us(e){var t=jo().memoizedState;return ls({ref:t,nextImpl:e}),function(){if(Ll&2)throw Error(i(440));return t.impl.apply(void 0,arguments)}}function ds(e,t){return os(4,2,e,t)}function fs(e,t){return os(4,4,e,t)}function ps(e,t){if(typeof t==`function`){e=e();var n=t(e);return function(){typeof n==`function`?n():t(null)}}if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function ms(e,t,n){n=n==null?null:n.concat([e]),os(4,4,ps.bind(null,t,e),n)}function hs(){}function gs(e,t){var n=jo();t=t===void 0?null:t;var r=n.memoizedState;return t!==null&&So(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function _s(e,t){var n=jo();t=t===void 0?null:t;var r=n.memoizedState;if(t!==null&&So(t,r[1]))return r[0];if(r=e(),go){ze(!0);try{e()}finally{ze(!1)}}return n.memoizedState=[r,t],r}function vs(e,t,n){return n===void 0||uo&1073741824&&!(Y&261930)?e.memoizedState=t:(e.memoizedState=n,e=mu(),H.lanes|=e,Kl|=e,n)}function ys(e,t,n,r){return br(n,t)?n:Xa.current===null?!(uo&42)||uo&1073741824&&!(Y&261930)?(ec=!0,e.memoizedState=n):(e=mu(),H.lanes|=e,Kl|=e,t):(e=vs(e,n,r),br(e,t)||(ec=!0),e)}function bs(e,t,n,r,i){var a=P.p;P.p=a!==0&&8>a?a:8;var o=N.T,s={};N.T=s,js(e,!1,t,n);try{var c=i(),l=N.S;l!==null&&l(s,c),typeof c==`object`&&c&&typeof c.then==`function`?K(e,t,ma(c,r),pu(e)):K(e,t,r,pu(e))}catch(n){K(e,t,{then:function(){},status:`rejected`,reason:n},pu())}finally{P.p=a,o!==null&&s.types!==null&&(o.types=s.types),N.T=o}}function xs(){}function Ss(e,t,n,r){if(e.tag!==5)throw Error(i(476));var a=Cs(e).queue;bs(e,a,t,re,n===null?xs:function(){return ws(e),n(r)})}function Cs(e){var t=e.memoizedState;if(t!==null)return t;t={memoizedState:re,baseState:re,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Io,lastRenderedState:re},next:null};var n={};return t.next={memoizedState:n,baseState:n,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Io,lastRenderedState:n},next:null},e.memoizedState=t,e=e.alternate,e!==null&&(e.memoizedState=t),t}function ws(e){var t=Cs(e);t.next===null&&(t=e.alternate.memoizedState),K(e,t.next.queue,{},pu())}function Ts(){return $i(Qf)}function Es(){return jo().memoizedState}function Ds(){return jo().memoizedState}function Os(e){for(var t=e.return;t!==null;){switch(t.tag){case 24:case 3:var n=pu();e=Va(n);var r=Ha(t,e,n);r!==null&&(hu(r,t,n),Ua(r,t,n)),t={cache:oa()},e.payload=t;return}t=t.return}}function ks(e,t,n){var r=pu();n={lane:r,revertLane:0,gesture:null,action:n,hasEagerState:!1,eagerState:null,next:null},Ms(e)?Ns(t,n):(n=ei(e,t,n,r),n!==null&&(hu(n,e,r),Ps(n,t,r)))}function As(e,t,n){K(e,t,n,pu())}function K(e,t,n,r){var i={lane:r,revertLane:0,gesture:null,action:n,hasEagerState:!1,eagerState:null,next:null};if(Ms(e))Ns(t,i);else{var a=e.alternate;if(e.lanes===0&&(a===null||a.lanes===0)&&(a=t.lastRenderedReducer,a!==null))try{var o=t.lastRenderedState,s=a(o,n);if(i.hasEagerState=!0,i.eagerState=s,br(s,o))return $r(e,t,i,0),Rl===null&&Qr(),!1}catch{}if(n=ei(e,t,i,r),n!==null)return hu(n,e,r),Ps(n,t,r),!0}return!1}function js(e,t,n,r){if(r={lane:2,revertLane:fd(),gesture:null,action:r,hasEagerState:!1,eagerState:null,next:null},Ms(e)){if(t)throw Error(i(479))}else t=ei(e,n,r,2),t!==null&&hu(t,e,2)}function Ms(e){var t=e.alternate;return e===H||t!==null&&t===H}function Ns(e,t){ho=mo=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function Ps(e,t,n){if(n&4194048){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,nt(e,n)}}var Fs={readContext:$i,use:Po,useCallback:xo,useContext:xo,useEffect:xo,useImperativeHandle:xo,useLayoutEffect:xo,useInsertionEffect:xo,useMemo:xo,useReducer:xo,useRef:xo,useState:xo,useDebugValue:xo,useDeferredValue:xo,useTransition:xo,useSyncExternalStore:xo,useId:xo,useHostTransitionStatus:xo,useFormState:xo,useActionState:xo,useOptimistic:xo,useMemoCache:xo,useCacheRefresh:xo};Fs.useEffectEvent=xo;var Is={readContext:$i,use:Po,useCallback:function(e,t){return Ao().memoizedState=[e,t===void 0?null:t],e},useContext:$i,useEffect:ss,useImperativeHandle:function(e,t,n){n=n==null?null:n.concat([e]),as(4194308,4,ps.bind(null,t,e),n)},useLayoutEffect:function(e,t){return as(4194308,4,e,t)},useInsertionEffect:function(e,t){as(4,2,e,t)},useMemo:function(e,t){var n=Ao();t=t===void 0?null:t;var r=e();if(go){ze(!0);try{e()}finally{ze(!1)}}return n.memoizedState=[r,t],r},useReducer:function(e,t,n){var r=Ao();if(n!==void 0){var i=n(t);if(go){ze(!0);try{n(t)}finally{ze(!1)}}}else i=t;return r.memoizedState=r.baseState=i,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:i},r.queue=e,e=e.dispatch=ks.bind(null,H,e),[r.memoizedState,e]},useRef:function(e){var t=Ao();return e={current:e},t.memoizedState=e},useState:function(e){e=Go(e);var t=e.queue,n=As.bind(null,H,t);return t.dispatch=n,[e.memoizedState,n]},useDebugValue:hs,useDeferredValue:function(e,t){return vs(Ao(),e,t)},useTransition:function(){var e=Go(!1);return e=bs.bind(null,H,e.queue,!0,!1),Ao().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,t,n){var r=H,a=Ao();if(V){if(n===void 0)throw Error(i(407));n=n()}else{if(n=t(),Rl===null)throw Error(i(349));Y&127||U(r,t,n)}a.memoizedState=n;var o={value:n,getSnapshot:t};return a.queue=o,ss(Ho.bind(null,r,o,e),[e]),r.flags|=2048,rs(9,{destroy:void 0},Vo.bind(null,r,o,n,t),null),n},useId:function(){var e=Ao(),t=Rl.identifierPrefix;if(V){var n=Ti,r=wi;n=(r&~(1<<32-Be(r)-1)).toString(32)+n,t=`_`+t+`R_`+n,n=_o++,0<n&&(t+=`H`+n.toString(32)),t+=`_`}else n=bo++,t=`_`+t+`r_`+n.toString(32)+`_`;return e.memoizedState=t},useHostTransitionStatus:Ts,useFormState:Qo,useActionState:Qo,useOptimistic:function(e){var t=Ao();t.memoizedState=t.baseState=e;var n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=n,t=js.bind(null,H,!0,n),n.dispatch=t,[e,t]},useMemoCache:Fo,useCacheRefresh:function(){return Ao().memoizedState=Os.bind(null,H)},useEffectEvent:function(e){var t=Ao(),n={impl:e};return t.memoizedState=n,function(){if(Ll&2)throw Error(i(440));return n.impl.apply(void 0,arguments)}}},Ls={readContext:$i,use:Po,useCallback:gs,useContext:$i,useEffect:cs,useImperativeHandle:ms,useInsertionEffect:ds,useLayoutEffect:fs,useMemo:_s,useReducer:Lo,useRef:is,useState:function(){return Lo(Io)},useDebugValue:hs,useDeferredValue:function(e,t){return ys(jo(),fo.memoizedState,e,t)},useTransition:function(){var e=Lo(Io)[0],t=jo().memoizedState;return[typeof e==`boolean`?e:No(e),t]},useSyncExternalStore:Bo,useId:Es,useHostTransitionStatus:Ts,useFormState:$o,useActionState:$o,useOptimistic:function(e,t){return Ko(jo(),fo,e,t)},useMemoCache:Fo,useCacheRefresh:Ds};Ls.useEffectEvent=us;var Rs={readContext:$i,use:Po,useCallback:gs,useContext:$i,useEffect:cs,useImperativeHandle:ms,useInsertionEffect:ds,useLayoutEffect:fs,useMemo:_s,useReducer:zo,useRef:is,useState:function(){return zo(Io)},useDebugValue:hs,useDeferredValue:function(e,t){var n=jo();return fo===null?vs(n,e,t):ys(n,fo.memoizedState,e,t)},useTransition:function(){var e=zo(Io)[0],t=jo().memoizedState;return[typeof e==`boolean`?e:No(e),t]},useSyncExternalStore:Bo,useId:Es,useHostTransitionStatus:Ts,useFormState:ns,useActionState:ns,useOptimistic:function(e,t){var n=jo();return fo===null?(n.baseState=e,[e,n.queue.dispatch]):Ko(n,fo,e,t)},useMemoCache:Fo,useCacheRefresh:Ds};Rs.useEffectEvent=us;function zs(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:h({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var Bs={enqueueSetState:function(e,t,n){e=e._reactInternals;var r=pu(),i=Va(r);i.payload=t,n!=null&&(i.callback=n),t=Ha(e,i,r),t!==null&&(hu(t,e,r),Ua(t,e,r))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=pu(),i=Va(r);i.tag=1,i.payload=t,n!=null&&(i.callback=n),t=Ha(e,i,r),t!==null&&(hu(t,e,r),Ua(t,e,r))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=pu(),r=Va(n);r.tag=2,t!=null&&(r.callback=t),t=Ha(e,r,n),t!==null&&(hu(t,e,n),Ua(t,e,n))}};function Vs(e,t,n,r,i,a,o){return e=e.stateNode,typeof e.shouldComponentUpdate==`function`?e.shouldComponentUpdate(r,a,o):t.prototype&&t.prototype.isPureReactComponent?!xr(n,r)||!xr(i,a):!0}function Hs(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps==`function`&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps==`function`&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&Bs.enqueueReplaceState(t,t.state,null)}function Us(e,t){var n=t;if(`ref`in t)for(var r in n={},t)r!==`ref`&&(n[r]=t[r]);if(e=e.defaultProps)for(var i in n===t&&(n=h({},n)),e)n[i]===void 0&&(n[i]=e[i]);return n}function Ws(e){Jr(e)}function Gs(e){console.error(e)}function Ks(e){Jr(e)}function qs(e,t){try{var n=e.onUncaughtError;n(t.value,{componentStack:t.stack})}catch(e){setTimeout(function(){throw e})}}function Js(e,t,n){try{var r=e.onCaughtError;r(n.value,{componentStack:n.stack,errorBoundary:t.tag===1?t.stateNode:null})}catch(e){setTimeout(function(){throw e})}}function Ys(e,t,n){return n=Va(n),n.tag=3,n.payload={element:null},n.callback=function(){qs(e,t)},n}function Xs(e){return e=Va(e),e.tag=3,e}function Zs(e,t,n,r){var i=n.type.getDerivedStateFromError;if(typeof i==`function`){var a=r.value;e.payload=function(){return i(a)},e.callback=function(){Js(t,n,r)}}var o=n.stateNode;o!==null&&typeof o.componentDidCatch==`function`&&(e.callback=function(){Js(t,n,r),typeof i!=`function`&&(X===null?X=new Set([this]):X.add(this));var e=r.stack;this.componentDidCatch(r.value,{componentStack:e===null?``:e})})}function Qs(e,t,n,r,a){if(n.flags|=32768,typeof r==`object`&&r&&typeof r.then==`function`){if(t=n.alternate,t!==null&&Xi(t,n,a,!0),n=to.current,n!==null){switch(n.tag){case 31:case 13:return no===null?Du():n.alternate===null&&Gl===0&&(Gl=3),n.flags&=-257,n.flags|=65536,n.lanes=a,r===Ca?n.flags|=16384:(t=n.updateQueue,t===null?n.updateQueue=new Set([r]):t.add(r),Ku(e,r,a)),!1;case 22:return n.flags|=65536,r===Ca?n.flags|=16384:(t=n.updateQueue,t===null?(t={transitions:null,markerInstances:null,retryQueue:new Set([r])},n.updateQueue=t):(n=t.retryQueue,n===null?t.retryQueue=new Set([r]):n.add(r)),Ku(e,r,a)),!1}throw Error(i(435,n.tag))}return Ku(e,r,a),Du(),!1}if(V)return t=to.current,t===null?(r!==Fi&&(t=Error(i(423),{cause:r}),Hi(gi(t,n))),e=e.current.alternate,e.flags|=65536,a&=-a,e.lanes|=a,r=gi(r,n),a=Ys(e.stateNode,r,a),Wa(e,a),Gl!==4&&(Gl=2)):(!(t.flags&65536)&&(t.flags|=256),t.flags|=65536,t.lanes=a,r!==Fi&&(e=Error(i(422),{cause:r}),Hi(gi(e,n)))),!1;var o=Error(i(520),{cause:r});if(o=gi(o,n),Zl===null?Zl=[o]:Zl.push(o),Gl!==4&&(Gl=2),t===null)return!0;r=gi(r,n),n=t;do{switch(n.tag){case 3:return n.flags|=65536,e=a&-a,n.lanes|=e,e=Ys(n.stateNode,r,e),Wa(n,e),!1;case 1:if(t=n.type,o=n.stateNode,!(n.flags&128)&&(typeof t.getDerivedStateFromError==`function`||o!==null&&typeof o.componentDidCatch==`function`&&(X===null||!X.has(o))))return n.flags|=65536,a&=-a,n.lanes|=a,a=Xs(a),Zs(a,e,n,r),Wa(n,a),!1}n=n.return}while(n!==null);return!1}var $s=Error(i(461)),ec=!1;function tc(e,t,n,r){t.child=e===null?La(t,null,n,r):Ia(t,e.child,n,r)}function nc(e,t,n,r,i){n=n.render;var a=t.ref;if(`ref`in r){var o={};for(var s in r)s!==`ref`&&(o[s]=r[s])}else o=r;return Qi(t),r=Co(e,t,n,o,a,i),s=Do(),e!==null&&!ec?(Oo(e,t,i),Ec(e,t,i)):(V&&s&&Oi(t),t.flags|=1,tc(e,t,r,i),t.child)}function rc(e,t,n,r,i){if(e===null){var a=n.type;return typeof a==`function`&&!si(a)&&a.defaultProps===void 0&&n.compare===null?(t.tag=15,t.type=a,ic(e,t,a,r,i)):(e=ui(n.type,null,r,t,t.mode,i),e.ref=t.ref,e.return=t,t.child=e)}if(a=e.child,!Dc(e,i)){var o=a.memoizedProps;if(n=n.compare,n=n===null?xr:n,n(o,r)&&e.ref===t.ref)return Ec(e,t,i)}return t.flags|=1,e=ci(a,r),e.ref=t.ref,e.return=t,t.child=e}function ic(e,t,n,r,i){if(e!==null){var a=e.memoizedProps;if(xr(a,r)&&e.ref===t.ref)if(ec=!1,t.pendingProps=r=a,Dc(e,i))e.flags&131072&&(ec=!0);else return t.lanes=e.lanes,Ec(e,t,i)}return fc(e,t,n,r,i)}function ac(e,t,n,r){var i=r.children,a=e===null?null:e.memoizedState;if(e===null&&t.stateNode===null&&(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),r.mode===`hidden`){if(t.flags&128){if(a=a===null?n:a.baseLanes|n,e!==null){for(r=t.child=e.child,i=0;r!==null;)i=i|r.lanes|r.childLanes,r=r.sibling;r=i&~a}else r=0,t.child=null;return sc(e,t,a,n,r)}if(n&536870912)t.memoizedState={baseLanes:0,cachePool:null},e!==null&&va(t,a===null?null:a.cachePool),a===null?$a():Qa(t,a),ao(t);else return r=t.lanes=536870912,sc(e,t,a===null?n:a.baseLanes|n,n,r)}else a===null?(e!==null&&va(t,null),$a(),oo(t)):(va(t,a.cachePool),Qa(t,a),oo(t),t.memoizedState=null);return tc(e,t,i,n),t.child}function oc(e,t){return e!==null&&e.tag===22||t.stateNode!==null||(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),t.sibling}function sc(e,t,n,r,i){var a=_a();return a=a===null?null:{parent:aa._currentValue,pool:a},t.memoizedState={baseLanes:n,cachePool:a},e!==null&&va(t,null),$a(),ao(t),e!==null&&Xi(e,t,r,!0),t.childLanes=i,null}function cc(e,t){return t=xc({mode:t.mode,children:t.children},e.mode),t.ref=e.ref,e.child=t,t.return=e,t}function lc(e,t,n){return Ia(t,e.child,null,n),e=cc(t,t.pendingProps),e.flags|=2,so(t),t.memoizedState=null,e}function uc(e,t,n){var r=t.pendingProps,a=(t.flags&128)!=0;if(t.flags&=-129,e===null){if(V){if(r.mode===`hidden`)return e=cc(t,r),t.lanes=536870912,oc(null,e);if(io(t),(e=Mi)?(e=of(e,Pi),e=e!==null&&e.data===`&`?e:null,e!==null&&(t.memoizedState={dehydrated:e,treeContext:Ci===null?null:{id:wi,overflow:Ti},retryLane:536870912,hydrationErrors:null},n=pi(e),n.return=t,t.child=n,ji=t,Mi=null)):e=null,e===null)throw Ii(t);return t.lanes=536870912,null}return cc(t,r)}var o=e.memoizedState;if(o!==null){var s=o.dehydrated;if(io(t),a)if(t.flags&256)t.flags&=-257,t=lc(e,t,n);else if(t.memoizedState!==null)t.child=e.child,t.flags|=128,t=null;else throw Error(i(558));else if(ec||Xi(e,t,n,!1),a=(n&e.childLanes)!==0,ec||a){if(r=Rl,r!==null&&(s=rt(r,n),s!==0&&s!==o.retryLane))throw o.retryLane=s,ti(e,s),hu(r,e,s),$s;Du(),t=lc(e,t,n)}else e=o.treeContext,Mi=uf(s.nextSibling),ji=t,V=!0,Ni=null,Pi=!1,e!==null&&Ai(t,e),t=cc(t,r),t.flags|=4096;return t}return e=ci(e.child,{mode:r.mode,children:r.children}),e.ref=t.ref,t.child=e,e.return=t,e}function dc(e,t){var n=t.ref;if(n===null)e!==null&&e.ref!==null&&(t.flags|=4194816);else{if(typeof n!=`function`&&typeof n!=`object`)throw Error(i(284));(e===null||e.ref!==n)&&(t.flags|=4194816)}}function fc(e,t,n,r,i){return Qi(t),n=Co(e,t,n,r,void 0,i),r=Do(),e!==null&&!ec?(Oo(e,t,i),Ec(e,t,i)):(V&&r&&Oi(t),t.flags|=1,tc(e,t,n,i),t.child)}function pc(e,t,n,r,i,a){return Qi(t),t.updateQueue=null,n=To(t,r,n,i),wo(e),r=Do(),e!==null&&!ec?(Oo(e,t,a),Ec(e,t,a)):(V&&r&&Oi(t),t.flags|=1,tc(e,t,n,a),t.child)}function mc(e,t,n,r,i){if(Qi(t),t.stateNode===null){var a=ii,o=n.contextType;typeof o==`object`&&o&&(a=$i(o)),a=new n(r,a),t.memoizedState=a.state!==null&&a.state!==void 0?a.state:null,a.updater=Bs,t.stateNode=a,a._reactInternals=t,a=t.stateNode,a.props=r,a.state=t.memoizedState,a.refs={},za(t),o=n.contextType,a.context=typeof o==`object`&&o?$i(o):ii,a.state=t.memoizedState,o=n.getDerivedStateFromProps,typeof o==`function`&&(zs(t,n,o,r),a.state=t.memoizedState),typeof n.getDerivedStateFromProps==`function`||typeof a.getSnapshotBeforeUpdate==`function`||typeof a.UNSAFE_componentWillMount!=`function`&&typeof a.componentWillMount!=`function`||(o=a.state,typeof a.componentWillMount==`function`&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount==`function`&&a.UNSAFE_componentWillMount(),o!==a.state&&Bs.enqueueReplaceState(a,a.state,null),qa(t,r,a,i),Ka(),a.state=t.memoizedState),typeof a.componentDidMount==`function`&&(t.flags|=4194308),r=!0}else if(e===null){a=t.stateNode;var s=t.memoizedProps,c=Us(n,s);a.props=c;var l=a.context,u=n.contextType;o=ii,typeof u==`object`&&u&&(o=$i(u));var d=n.getDerivedStateFromProps;u=typeof d==`function`||typeof a.getSnapshotBeforeUpdate==`function`,s=t.pendingProps!==s,u||typeof a.UNSAFE_componentWillReceiveProps!=`function`&&typeof a.componentWillReceiveProps!=`function`||(s||l!==o)&&Hs(t,a,r,o),Ra=!1;var f=t.memoizedState;a.state=f,qa(t,r,a,i),Ka(),l=t.memoizedState,s||f!==l||Ra?(typeof d==`function`&&(zs(t,n,d,r),l=t.memoizedState),(c=Ra||Vs(t,n,c,r,f,l,o))?(u||typeof a.UNSAFE_componentWillMount!=`function`&&typeof a.componentWillMount!=`function`||(typeof a.componentWillMount==`function`&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount==`function`&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount==`function`&&(t.flags|=4194308)):(typeof a.componentDidMount==`function`&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=l),a.props=r,a.state=l,a.context=o,r=c):(typeof a.componentDidMount==`function`&&(t.flags|=4194308),r=!1)}else{a=t.stateNode,Ba(e,t),o=t.memoizedProps,u=Us(n,o),a.props=u,d=t.pendingProps,f=a.context,l=n.contextType,c=ii,typeof l==`object`&&l&&(c=$i(l)),s=n.getDerivedStateFromProps,(l=typeof s==`function`||typeof a.getSnapshotBeforeUpdate==`function`)||typeof a.UNSAFE_componentWillReceiveProps!=`function`&&typeof a.componentWillReceiveProps!=`function`||(o!==d||f!==c)&&Hs(t,a,r,c),Ra=!1,f=t.memoizedState,a.state=f,qa(t,r,a,i),Ka();var p=t.memoizedState;o!==d||f!==p||Ra||e!==null&&e.dependencies!==null&&Zi(e.dependencies)?(typeof s==`function`&&(zs(t,n,s,r),p=t.memoizedState),(u=Ra||Vs(t,n,u,r,f,p,c)||e!==null&&e.dependencies!==null&&Zi(e.dependencies))?(l||typeof a.UNSAFE_componentWillUpdate!=`function`&&typeof a.componentWillUpdate!=`function`||(typeof a.componentWillUpdate==`function`&&a.componentWillUpdate(r,p,c),typeof a.UNSAFE_componentWillUpdate==`function`&&a.UNSAFE_componentWillUpdate(r,p,c)),typeof a.componentDidUpdate==`function`&&(t.flags|=4),typeof a.getSnapshotBeforeUpdate==`function`&&(t.flags|=1024)):(typeof a.componentDidUpdate!=`function`||o===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),typeof a.getSnapshotBeforeUpdate!=`function`||o===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=p),a.props=r,a.state=p,a.context=c,r=u):(typeof a.componentDidUpdate!=`function`||o===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),typeof a.getSnapshotBeforeUpdate!=`function`||o===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),r=!1)}return a=r,dc(e,t),r=(t.flags&128)!=0,a||r?(a=t.stateNode,n=r&&typeof n.getDerivedStateFromError!=`function`?null:a.render(),t.flags|=1,e!==null&&r?(t.child=Ia(t,e.child,null,i),t.child=Ia(t,null,n,i)):tc(e,t,n,i),t.memoizedState=a.state,e=t.child):e=Ec(e,t,i),e}function hc(e,t,n,r){return Bi(),t.flags|=256,tc(e,t,n,r),t.child}var gc={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function _c(e){return{baseLanes:e,cachePool:ya()}}function vc(e,t,n){return e=e===null?0:e.childLanes&~n,t&&(e|=Yl),e}function yc(e,t,n){var r=t.pendingProps,a=!1,o=(t.flags&128)!=0,s;if((s=o)||(s=e!==null&&e.memoizedState===null?!1:(co.current&2)!=0),s&&(a=!0,t.flags&=-129),s=(t.flags&32)!=0,t.flags&=-33,e===null){if(V){if(a?ro(t):oo(t),(e=Mi)?(e=of(e,Pi),e=e!==null&&e.data!==`&`?e:null,e!==null&&(t.memoizedState={dehydrated:e,treeContext:Ci===null?null:{id:wi,overflow:Ti},retryLane:536870912,hydrationErrors:null},n=pi(e),n.return=t,t.child=n,ji=t,Mi=null)):e=null,e===null)throw Ii(t);return cf(e)?t.lanes=32:t.lanes=536870912,null}var c=r.children;return r=r.fallback,a?(oo(t),a=t.mode,c=xc({mode:`hidden`,children:c},a),r=di(r,a,n,null),c.return=t,r.return=t,c.sibling=r,t.child=c,r=t.child,r.memoizedState=_c(n),r.childLanes=vc(e,s,n),t.memoizedState=gc,oc(null,r)):(ro(t),bc(t,c))}var l=e.memoizedState;if(l!==null&&(c=l.dehydrated,c!==null)){if(o)t.flags&256?(ro(t),t.flags&=-257,t=Sc(e,t,n)):t.memoizedState===null?(oo(t),c=r.fallback,a=t.mode,r=xc({mode:`visible`,children:r.children},a),c=di(c,a,n,null),c.flags|=2,r.return=t,c.return=t,r.sibling=c,t.child=r,Ia(t,e.child,null,n),r=t.child,r.memoizedState=_c(n),r.childLanes=vc(e,s,n),t.memoizedState=gc,t=oc(null,r)):(oo(t),t.child=e.child,t.flags|=128,t=null);else if(ro(t),cf(c)){if(s=c.nextSibling&&c.nextSibling.dataset,s)var u=s.dgst;s=u,r=Error(i(419)),r.stack=``,r.digest=s,Hi({value:r,source:null,stack:null}),t=Sc(e,t,n)}else if(ec||Xi(e,t,n,!1),s=(n&e.childLanes)!==0,ec||s){if(s=Rl,s!==null&&(r=rt(s,n),r!==0&&r!==l.retryLane))throw l.retryLane=r,ti(e,r),hu(s,e,r),$s;sf(c)||Du(),t=Sc(e,t,n)}else sf(c)?(t.flags|=192,t.child=e.child,t=null):(e=l.treeContext,Mi=uf(c.nextSibling),ji=t,V=!0,Ni=null,Pi=!1,e!==null&&Ai(t,e),t=bc(t,r.children),t.flags|=4096);return t}return a?(oo(t),c=r.fallback,a=t.mode,l=e.child,u=l.sibling,r=ci(l,{mode:`hidden`,children:r.children}),r.subtreeFlags=l.subtreeFlags&65011712,u===null?(c=di(c,a,n,null),c.flags|=2):c=ci(u,c),c.return=t,r.return=t,r.sibling=c,t.child=r,oc(null,r),r=t.child,c=e.child.memoizedState,c===null?c=_c(n):(a=c.cachePool,a===null?a=ya():(l=aa._currentValue,a=a.parent===l?a:{parent:l,pool:l}),c={baseLanes:c.baseLanes|n,cachePool:a}),r.memoizedState=c,r.childLanes=vc(e,s,n),t.memoizedState=gc,oc(e.child,r)):(ro(t),n=e.child,e=n.sibling,n=ci(n,{mode:`visible`,children:r.children}),n.return=t,n.sibling=null,e!==null&&(s=t.deletions,s===null?(t.deletions=[e],t.flags|=16):s.push(e)),t.child=n,t.memoizedState=null,n)}function bc(e,t){return t=xc({mode:`visible`,children:t},e.mode),t.return=e,e.child=t}function xc(e,t){return e=oi(22,e,null,t),e.lanes=0,e}function Sc(e,t,n){return Ia(t,e.child,null,n),e=bc(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function Cc(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),Ji(e.return,t,n)}function wc(e,t,n,r,i,a){var o=e.memoizedState;o===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i,treeForkCount:a}:(o.isBackwards=t,o.rendering=null,o.renderingStartTime=0,o.last=r,o.tail=n,o.tailMode=i,o.treeForkCount=a)}function Tc(e,t,n){var r=t.pendingProps,i=r.revealOrder,a=r.tail;r=r.children;var o=co.current,s=(o&2)!=0;if(s?(o=o&1|2,t.flags|=128):o&=1,F(co,o),tc(e,t,r,n),r=V?bi:0,!s&&e!==null&&e.flags&128)a:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Cc(e,n,t);else if(e.tag===19)Cc(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break a;for(;e.sibling===null;){if(e.return===null||e.return===t)break a;e=e.return}e.sibling.return=e.return,e=e.sibling}switch(i){case`forwards`:for(n=t.child,i=null;n!==null;)e=n.alternate,e!==null&&lo(e)===null&&(i=n),n=n.sibling;n=i,n===null?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),wc(t,!1,i,n,a,r);break;case`backwards`:case`unstable_legacy-backwards`:for(n=null,i=t.child,t.child=null;i!==null;){if(e=i.alternate,e!==null&&lo(e)===null){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}wc(t,!0,n,null,a,r);break;case`together`:wc(t,!1,null,null,void 0,r);break;default:t.memoizedState=null}return t.child}function Ec(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),Kl|=t.lanes,(n&t.childLanes)===0)if(e!==null){if(Xi(e,t,n,!1),(n&t.childLanes)===0)return null}else return null;if(e!==null&&t.child!==e.child)throw Error(i(153));if(t.child!==null){for(e=t.child,n=ci(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=ci(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function Dc(e,t){return(e.lanes&t)===0?(e=e.dependencies,!!(e!==null&&Zi(e))):!0}function Oc(e,t,n){switch(t.tag){case 3:fe(t,t.stateNode.containerInfo),Ki(t,aa,e.memoizedState.cache),Bi();break;case 27:case 5:me(t);break;case 4:fe(t,t.stateNode.containerInfo);break;case 10:Ki(t,t.type,t.memoizedProps.value);break;case 31:if(t.memoizedState!==null)return t.flags|=128,io(t),null;break;case 13:var r=t.memoizedState;if(r!==null)return r.dehydrated===null?(n&t.child.childLanes)===0?(ro(t),e=Ec(e,t,n),e===null?null:e.sibling):yc(e,t,n):(ro(t),t.flags|=128,null);ro(t);break;case 19:var i=(e.flags&128)!=0;if(r=(n&t.childLanes)!==0,r||=(Xi(e,t,n,!1),(n&t.childLanes)!==0),i){if(r)return Tc(e,t,n);t.flags|=128}if(i=t.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),F(co,co.current),r)break;return null;case 22:return t.lanes=0,ac(e,t,n,t.pendingProps);case 24:Ki(t,aa,e.memoizedState.cache)}return Ec(e,t,n)}function kc(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps)ec=!0;else{if(!Dc(e,n)&&!(t.flags&128))return ec=!1,Oc(e,t,n);ec=!!(e.flags&131072)}else ec=!1,V&&t.flags&1048576&&Di(t,bi,t.index);switch(t.lanes=0,t.tag){case 16:a:{var r=t.pendingProps;if(e=Ea(t.elementType),t.type=e,typeof e==`function`)si(e)?(r=Us(e,r),t.tag=1,t=mc(null,t,e,r,n)):(t.tag=0,t=fc(null,t,e,r,n));else{if(e!=null){var a=e.$$typeof;if(a===w){t.tag=11,t=nc(null,t,e,r,n);break a}else if(a===D){t.tag=14,t=rc(null,t,e,r,n);break a}}throw t=te(e)||e,Error(i(306,t,``))}}return t;case 0:return fc(e,t,t.type,t.pendingProps,n);case 1:return r=t.type,a=Us(r,t.pendingProps),mc(e,t,r,a,n);case 3:a:{if(fe(t,t.stateNode.containerInfo),e===null)throw Error(i(387));r=t.pendingProps;var o=t.memoizedState;a=o.element,Ba(e,t),qa(t,r,null,n);var s=t.memoizedState;if(r=s.cache,Ki(t,aa,r),r!==o.cache&&Yi(t,[aa],n,!0),Ka(),r=s.element,o.isDehydrated)if(o={element:r,isDehydrated:!1,cache:s.cache},t.updateQueue.baseState=o,t.memoizedState=o,t.flags&256){t=hc(e,t,r,n);break a}else if(r!==a){a=gi(Error(i(424)),t),Hi(a),t=hc(e,t,r,n);break a}else{switch(e=t.stateNode.containerInfo,e.nodeType){case 9:e=e.body;break;default:e=e.nodeName===`HTML`?e.ownerDocument.body:e}for(Mi=uf(e.firstChild),ji=t,V=!0,Ni=null,Pi=!0,n=La(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling}else{if(Bi(),r===a){t=Ec(e,t,n);break a}tc(e,t,r,n)}t=t.child}return t;case 26:return dc(e,t),e===null?(n=kf(t.type,null,t.pendingProps,null))?t.memoizedState=n:V||(n=t.type,e=t.pendingProps,r=Hd(ue.current).createElement(n),r[lt]=t,r[ut]=e,Id(r,n,e),xt(r),t.stateNode=r):t.memoizedState=kf(t.type,e.memoizedProps,t.pendingProps,e.memoizedState),null;case 27:return me(t),e===null&&V&&(r=t.stateNode=$(t.type,t.pendingProps,ue.current),ji=t,Pi=!0,a=Mi,$d(t.type)?(df=a,Mi=uf(r.firstChild)):Mi=a),tc(e,t,t.pendingProps.children,n),dc(e,t),e===null&&(t.flags|=4194304),t.child;case 5:return e===null&&V&&((a=r=Mi)&&(r=rf(r,t.type,t.pendingProps,Pi),r===null?a=!1:(t.stateNode=r,ji=t,Mi=uf(r.firstChild),Pi=!1,a=!0)),a||Ii(t)),me(t),a=t.type,o=t.pendingProps,s=e===null?null:e.memoizedProps,r=o.children,Gd(a,o)?r=null:s!==null&&Gd(a,s)&&(t.flags|=32),t.memoizedState!==null&&(a=Co(e,t,Eo,null,null,n),Qf._currentValue=a),dc(e,t),tc(e,t,r,n),t.child;case 6:return e===null&&V&&((e=n=Mi)&&(n=af(n,t.pendingProps,Pi),n===null?e=!1:(t.stateNode=n,ji=t,Mi=null,e=!0)),e||Ii(t)),null;case 13:return yc(e,t,n);case 4:return fe(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=Ia(t,null,r,n):tc(e,t,r,n),t.child;case 11:return nc(e,t,t.type,t.pendingProps,n);case 7:return tc(e,t,t.pendingProps,n),t.child;case 8:return tc(e,t,t.pendingProps.children,n),t.child;case 12:return tc(e,t,t.pendingProps.children,n),t.child;case 10:return r=t.pendingProps,Ki(t,t.type,r.value),tc(e,t,r.children,n),t.child;case 9:return a=t.type._context,r=t.pendingProps.children,Qi(t),a=$i(a),r=r(a),t.flags|=1,tc(e,t,r,n),t.child;case 14:return rc(e,t,t.type,t.pendingProps,n);case 15:return ic(e,t,t.type,t.pendingProps,n);case 19:return Tc(e,t,n);case 31:return uc(e,t,n);case 22:return ac(e,t,n,t.pendingProps);case 24:return Qi(t),r=$i(aa),e===null?(a=_a(),a===null&&(a=Rl,o=oa(),a.pooledCache=o,o.refCount++,o!==null&&(a.pooledCacheLanes|=n),a=o),t.memoizedState={parent:r,cache:a},za(t),Ki(t,aa,a)):((e.lanes&n)!==0&&(Ba(e,t),qa(t,null,null,n),Ka()),a=e.memoizedState,o=t.memoizedState,a.parent===r?(r=o.cache,Ki(t,aa,r),r!==a.cache&&Yi(t,[aa],n,!0)):(a={parent:r,cache:r},t.memoizedState=a,t.lanes===0&&(t.memoizedState=t.updateQueue.baseState=a),Ki(t,aa,r))),tc(e,t,t.pendingProps.children,n),t.child;case 29:throw t.pendingProps}throw Error(i(156,t.tag))}function Ac(e){e.flags|=4}function jc(e,t,n,r,i){if((t=(e.mode&32)!=0)&&(t=!1),t){if(e.flags|=16777216,(i&335544128)===i)if(e.stateNode.complete)e.flags|=8192;else if(wu())e.flags|=8192;else throw Da=Ca,xa}else e.flags&=-16777217}function Mc(e,t){if(t.type!==`stylesheet`||t.state.loading&4)e.flags&=-16777217;else if(e.flags|=16777216,!Wf(t))if(wu())e.flags|=8192;else throw Da=Ca,xa}function Nc(e,t){t!==null&&(e.flags|=4),e.flags&16384&&(t=e.tag===22?536870912:Ze(),e.lanes|=t,Xl|=t)}function Pc(e,t){if(!V)switch(e.tailMode){case`hidden`:t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case`collapsed`:n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function q(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&65011712,r|=i.flags&65011712,i.return=e,i=i.sibling;else for(i=e.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Fc(e,t,n){var r=t.pendingProps;switch(ki(t),t.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return q(t),null;case 1:return q(t),null;case 3:return n=t.stateNode,r=null,e!==null&&(r=e.memoizedState.cache),t.memoizedState.cache!==r&&(t.flags|=2048),qi(aa),pe(),n.pendingContext&&=(n.context=n.pendingContext,null),(e===null||e.child===null)&&(zi(t)?Ac(t):e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Vi())),q(t),null;case 26:var a=t.type,o=t.memoizedState;return e===null?(Ac(t),o===null?(q(t),jc(t,a,null,r,n)):(q(t),Mc(t,o))):o?o===e.memoizedState?(q(t),t.flags&=-16777217):(Ac(t),q(t),Mc(t,o)):(e=e.memoizedProps,e!==r&&Ac(t),q(t),jc(t,a,e,r,n)),null;case 27:if(he(t),n=ue.current,a=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==r&&Ac(t);else{if(!r){if(t.stateNode===null)throw Error(i(166));return q(t),null}e=ce.current,zi(t)?Li(t,e):(e=$(a,r,n),t.stateNode=e,Ac(t))}return q(t),null;case 5:if(he(t),a=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==r&&Ac(t);else{if(!r){if(t.stateNode===null)throw Error(i(166));return q(t),null}if(o=ce.current,zi(t))Li(t,o);else{var s=Hd(ue.current);switch(o){case 1:o=s.createElementNS(`http://www.w3.org/2000/svg`,a);break;case 2:o=s.createElementNS(`http://www.w3.org/1998/Math/MathML`,a);break;default:switch(a){case`svg`:o=s.createElementNS(`http://www.w3.org/2000/svg`,a);break;case`math`:o=s.createElementNS(`http://www.w3.org/1998/Math/MathML`,a);break;case`script`:o=s.createElement(`div`),o.innerHTML=`<script><\/script>`,o=o.removeChild(o.firstChild);break;case`select`:o=typeof r.is==`string`?s.createElement(`select`,{is:r.is}):s.createElement(`select`),r.multiple?o.multiple=!0:r.size&&(o.size=r.size);break;default:o=typeof r.is==`string`?s.createElement(a,{is:r.is}):s.createElement(a)}}o[lt]=t,o[ut]=r;a:for(s=t.child;s!==null;){if(s.tag===5||s.tag===6)o.appendChild(s.stateNode);else if(s.tag!==4&&s.tag!==27&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===t)break a;for(;s.sibling===null;){if(s.return===null||s.return===t)break a;s=s.return}s.sibling.return=s.return,s=s.sibling}t.stateNode=o;a:switch(Id(o,a,r),a){case`button`:case`input`:case`select`:case`textarea`:r=!!r.autoFocus;break a;case`img`:r=!0;break a;default:r=!1}r&&Ac(t)}}return q(t),jc(t,t.type,e===null?null:e.memoizedProps,t.pendingProps,n),null;case 6:if(e&&t.stateNode!=null)e.memoizedProps!==r&&Ac(t);else{if(typeof r!=`string`&&t.stateNode===null)throw Error(i(166));if(e=ue.current,zi(t)){if(e=t.stateNode,n=t.memoizedProps,r=null,a=ji,a!==null)switch(a.tag){case 27:case 5:r=a.memoizedProps}e[lt]=t,e=!!(e.nodeValue===n||r!==null&&!0===r.suppressHydrationWarning||Nd(e.nodeValue,n)),e||Ii(t,!0)}else e=Hd(e).createTextNode(r),e[lt]=t,t.stateNode=e}return q(t),null;case 31:if(n=t.memoizedState,e===null||e.memoizedState!==null){if(r=zi(t),n!==null){if(e===null){if(!r)throw Error(i(318));if(e=t.memoizedState,e=e===null?null:e.dehydrated,!e)throw Error(i(557));e[lt]=t}else Bi(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;q(t),e=!1}else n=Vi(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=n),e=!0;if(!e)return t.flags&256?(so(t),t):(so(t),null);if(t.flags&128)throw Error(i(558))}return q(t),null;case 13:if(r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(a=zi(t),r!==null&&r.dehydrated!==null){if(e===null){if(!a)throw Error(i(318));if(a=t.memoizedState,a=a===null?null:a.dehydrated,!a)throw Error(i(317));a[lt]=t}else Bi(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;q(t),a=!1}else a=Vi(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=a),a=!0;if(!a)return t.flags&256?(so(t),t):(so(t),null)}return so(t),t.flags&128?(t.lanes=n,t):(n=r!==null,e=e!==null&&e.memoizedState!==null,n&&(r=t.child,a=null,r.alternate!==null&&r.alternate.memoizedState!==null&&r.alternate.memoizedState.cachePool!==null&&(a=r.alternate.memoizedState.cachePool.pool),o=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(o=r.memoizedState.cachePool.pool),o!==a&&(r.flags|=2048)),n!==e&&n&&(t.child.flags|=8192),Nc(t,t.updateQueue),q(t),null);case 4:return pe(),e===null&&Cd(t.stateNode.containerInfo),q(t),null;case 10:return qi(t.type),q(t),null;case 19:if(se(co),r=t.memoizedState,r===null)return q(t),null;if(a=(t.flags&128)!=0,o=r.rendering,o===null)if(a)Pc(r,!1);else{if(Gl!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(o=lo(e),o!==null){for(t.flags|=128,Pc(r,!1),e=o.updateQueue,t.updateQueue=e,Nc(t,e),t.subtreeFlags=0,e=n,n=t.child;n!==null;)li(n,e),n=n.sibling;return F(co,co.current&1|2),V&&Ei(t,r.treeForkCount),t.child}e=e.sibling}r.tail!==null&&Oe()>nu&&(t.flags|=128,a=!0,Pc(r,!1),t.lanes=4194304)}else{if(!a)if(e=lo(o),e!==null){if(t.flags|=128,a=!0,e=e.updateQueue,t.updateQueue=e,Nc(t,e),Pc(r,!0),r.tail===null&&r.tailMode===`hidden`&&!o.alternate&&!V)return q(t),null}else 2*Oe()-r.renderingStartTime>nu&&n!==536870912&&(t.flags|=128,a=!0,Pc(r,!1),t.lanes=4194304);r.isBackwards?(o.sibling=t.child,t.child=o):(e=r.last,e===null?t.child=o:e.sibling=o,r.last=o)}return r.tail===null?(q(t),null):(e=r.tail,r.rendering=e,r.tail=e.sibling,r.renderingStartTime=Oe(),e.sibling=null,n=co.current,F(co,a?n&1|2:n&1),V&&Ei(t,r.treeForkCount),e);case 22:case 23:return so(t),eo(),r=t.memoizedState!==null,e===null?r&&(t.flags|=8192):e.memoizedState!==null!==r&&(t.flags|=8192),r?n&536870912&&!(t.flags&128)&&(q(t),t.subtreeFlags&6&&(t.flags|=8192)):q(t),n=t.updateQueue,n!==null&&Nc(t,n.retryQueue),n=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(n=e.memoizedState.cachePool.pool),r=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(r=t.memoizedState.cachePool.pool),r!==n&&(t.flags|=2048),e!==null&&se(ga),null;case 24:return n=null,e!==null&&(n=e.memoizedState.cache),t.memoizedState.cache!==n&&(t.flags|=2048),qi(aa),q(t),null;case 25:return null;case 30:return null}throw Error(i(156,t.tag))}function Ic(e,t){switch(ki(t),t.tag){case 1:return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return qi(aa),pe(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 26:case 27:case 5:return he(t),null;case 31:if(t.memoizedState!==null){if(so(t),t.alternate===null)throw Error(i(340));Bi()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 13:if(so(t),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(i(340));Bi()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return se(co),null;case 4:return pe(),null;case 10:return qi(t.type),null;case 22:case 23:return so(t),eo(),e!==null&&se(ga),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 24:return qi(aa),null;case 25:return null;default:return null}}function Lc(e,t){switch(ki(t),t.tag){case 3:qi(aa),pe();break;case 26:case 27:case 5:he(t);break;case 4:pe();break;case 31:t.memoizedState!==null&&so(t);break;case 13:so(t);break;case 19:se(co);break;case 10:qi(t.type);break;case 22:case 23:so(t),eo(),e!==null&&se(ga);break;case 24:qi(aa)}}function Rc(e,t){try{var n=t.updateQueue,r=n===null?null:n.lastEffect;if(r!==null){var i=r.next;n=i;do{if((n.tag&e)===e){r=void 0;var a=n.create,o=n.inst;r=a(),o.destroy=r}n=n.next}while(n!==i)}}catch(e){Gu(t,t.return,e)}}function zc(e,t,n){try{var r=t.updateQueue,i=r===null?null:r.lastEffect;if(i!==null){var a=i.next;r=a;do{if((r.tag&e)===e){var o=r.inst,s=o.destroy;if(s!==void 0){o.destroy=void 0,i=t;var c=n,l=s;try{l()}catch(e){Gu(i,c,e)}}}r=r.next}while(r!==a)}}catch(e){Gu(t,t.return,e)}}function Bc(e){var t=e.updateQueue;if(t!==null){var n=e.stateNode;try{Ya(t,n)}catch(t){Gu(e,e.return,t)}}}function Vc(e,t,n){n.props=Us(e.type,e.memoizedProps),n.state=e.memoizedState;try{n.componentWillUnmount()}catch(n){Gu(e,t,n)}}function Hc(e,t){try{var n=e.ref;if(n!==null){switch(e.tag){case 26:case 27:case 5:var r=e.stateNode;break;case 30:r=e.stateNode;break;default:r=e.stateNode}typeof n==`function`?e.refCleanup=n(r):n.current=r}}catch(n){Gu(e,t,n)}}function Uc(e,t){var n=e.ref,r=e.refCleanup;if(n!==null)if(typeof r==`function`)try{r()}catch(n){Gu(e,t,n)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof n==`function`)try{n(null)}catch(n){Gu(e,t,n)}else n.current=null}function Wc(e){var t=e.type,n=e.memoizedProps,r=e.stateNode;try{a:switch(t){case`button`:case`input`:case`select`:case`textarea`:n.autoFocus&&r.focus();break a;case`img`:n.src?r.src=n.src:n.srcSet&&(r.srcset=n.srcSet)}}catch(t){Gu(e,e.return,t)}}function Gc(e,t,n){try{var r=e.stateNode;Ld(r,e.type,n,t),r[ut]=t}catch(t){Gu(e,e.return,t)}}function Kc(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&$d(e.type)||e.tag===4}function qc(e){a:for(;;){for(;e.sibling===null;){if(e.return===null||Kc(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&$d(e.type)||e.flags&2||e.child===null||e.tag===4)continue a;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Jc(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?(n.nodeType===9?n.body:n.nodeName===`HTML`?n.ownerDocument.body:n).insertBefore(e,t):(t=n.nodeType===9?n.body:n.nodeName===`HTML`?n.ownerDocument.body:n,t.appendChild(e),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=Qt));else if(r!==4&&(r===27&&$d(e.type)&&(n=e.stateNode,t=null),e=e.child,e!==null))for(Jc(e,t,n),e=e.sibling;e!==null;)Jc(e,t,n),e=e.sibling}function Yc(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(r===27&&$d(e.type)&&(n=e.stateNode),e=e.child,e!==null))for(Yc(e,t,n),e=e.sibling;e!==null;)Yc(e,t,n),e=e.sibling}function Xc(e){var t=e.stateNode,n=e.memoizedProps;try{for(var r=e.type,i=t.attributes;i.length;)t.removeAttributeNode(i[0]);Id(t,r,n),t[lt]=e,t[ut]=n}catch(t){Gu(e,e.return,t)}}var Zc=!1,Qc=!1,$c=!1,el=typeof WeakSet==`function`?WeakSet:Set,tl=null;function nl(e,t){if(e=e.containerInfo,Bd=sp,e=Tr(e),Er(e)){if(`selectionStart`in e)var n={start:e.selectionStart,end:e.selectionEnd};else a:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var a=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch{n=null;break a}var s=0,c=-1,l=-1,u=0,d=0,f=e,p=null;b:for(;;){for(var m;f!==n||a!==0&&f.nodeType!==3||(c=s+a),f!==o||r!==0&&f.nodeType!==3||(l=s+r),f.nodeType===3&&(s+=f.nodeValue.length),(m=f.firstChild)!==null;)p=f,f=m;for(;;){if(f===e)break b;if(p===n&&++u===a&&(c=s),p===o&&++d===r&&(l=s),(m=f.nextSibling)!==null)break;f=p,p=f.parentNode}f=m}n=c===-1||l===-1?null:{start:c,end:l}}else n=null}n||={start:0,end:0}}else n=null;for(Vd={focusedElem:e,selectionRange:n},sp=!1,tl=t;tl!==null;)if(t=tl,e=t.child,t.subtreeFlags&1028&&e!==null)e.return=t,tl=e;else for(;tl!==null;){switch(t=tl,o=t.alternate,e=t.flags,t.tag){case 0:if(e&4&&(e=t.updateQueue,e=e===null?null:e.events,e!==null))for(n=0;n<e.length;n++)a=e[n],a.ref.impl=a.nextImpl;break;case 11:case 15:break;case 1:if(e&1024&&o!==null){e=void 0,n=t,a=o.memoizedProps,o=o.memoizedState,r=n.stateNode;try{var h=Us(n.type,a);e=r.getSnapshotBeforeUpdate(h,o),r.__reactInternalSnapshotBeforeUpdate=e}catch(e){Gu(n,n.return,e)}}break;case 3:if(e&1024){if(e=t.stateNode.containerInfo,n=e.nodeType,n===9)nf(e);else if(n===1)switch(e.nodeName){case`HEAD`:case`HTML`:case`BODY`:nf(e);break;default:e.textContent=``}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if(e&1024)throw Error(i(163))}if(e=t.sibling,e!==null){e.return=t.return,tl=e;break}tl=t.return}}function rl(e,t,n){var r=n.flags;switch(n.tag){case 0:case 11:case 15:vl(e,n),r&4&&Rc(5,n);break;case 1:if(vl(e,n),r&4)if(e=n.stateNode,t===null)try{e.componentDidMount()}catch(e){Gu(n,n.return,e)}else{var i=Us(n.type,t.memoizedProps);t=t.memoizedState;try{e.componentDidUpdate(i,t,e.__reactInternalSnapshotBeforeUpdate)}catch(e){Gu(n,n.return,e)}}r&64&&Bc(n),r&512&&Hc(n,n.return);break;case 3:if(vl(e,n),r&64&&(e=n.updateQueue,e!==null)){if(t=null,n.child!==null)switch(n.child.tag){case 27:case 5:t=n.child.stateNode;break;case 1:t=n.child.stateNode}try{Ya(e,t)}catch(e){Gu(n,n.return,e)}}break;case 27:t===null&&r&4&&Xc(n);case 26:case 5:vl(e,n),t===null&&r&4&&Wc(n),r&512&&Hc(n,n.return);break;case 12:vl(e,n);break;case 31:vl(e,n),r&4&&ll(e,n);break;case 13:vl(e,n),r&4&&ul(e,n),r&64&&(e=n.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(n=Yu.bind(null,n),lf(e,n))));break;case 22:if(r=n.memoizedState!==null||Zc,!r){t=t!==null&&t.memoizedState!==null||Qc,i=Zc;var a=Qc;Zc=r,(Qc=t)&&!a?bl(e,n,(n.subtreeFlags&8772)!=0):vl(e,n),Zc=i,Qc=a}break;case 30:break;default:vl(e,n)}}function il(e){var t=e.alternate;t!==null&&(e.alternate=null,il(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&_t(t)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var al=null,ol=!1;function sl(e,t,n){for(n=n.child;n!==null;)cl(e,t,n),n=n.sibling}function cl(e,t,n){if(Re&&typeof Re.onCommitFiberUnmount==`function`)try{Re.onCommitFiberUnmount(Le,n)}catch{}switch(n.tag){case 26:Qc||Uc(n,t),sl(e,t,n),n.memoizedState?n.memoizedState.count--:n.stateNode&&(n=n.stateNode,n.parentNode.removeChild(n));break;case 27:Qc||Uc(n,t);var r=al,i=ol;$d(n.type)&&(al=n.stateNode,ol=!1),sl(e,t,n),pf(n.stateNode),al=r,ol=i;break;case 5:Qc||Uc(n,t);case 6:if(r=al,i=ol,al=null,sl(e,t,n),al=r,ol=i,al!==null)if(ol)try{(al.nodeType===9?al.body:al.nodeName===`HTML`?al.ownerDocument.body:al).removeChild(n.stateNode)}catch(e){Gu(n,t,e)}else try{al.removeChild(n.stateNode)}catch(e){Gu(n,t,e)}break;case 18:al!==null&&(ol?(e=al,ef(e.nodeType===9?e.body:e.nodeName===`HTML`?e.ownerDocument.body:e,n.stateNode),Np(e)):ef(al,n.stateNode));break;case 4:r=al,i=ol,al=n.stateNode.containerInfo,ol=!0,sl(e,t,n),al=r,ol=i;break;case 0:case 11:case 14:case 15:zc(2,n,t),Qc||zc(4,n,t),sl(e,t,n);break;case 1:Qc||(Uc(n,t),r=n.stateNode,typeof r.componentWillUnmount==`function`&&Vc(n,t,r)),sl(e,t,n);break;case 21:sl(e,t,n);break;case 22:Qc=(r=Qc)||n.memoizedState!==null,sl(e,t,n),Qc=r;break;default:sl(e,t,n)}}function ll(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null))){e=e.dehydrated;try{Np(e)}catch(e){Gu(t,t.return,e)}}}function ul(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{Np(e)}catch(e){Gu(t,t.return,e)}}function dl(e){switch(e.tag){case 31:case 13:case 19:var t=e.stateNode;return t===null&&(t=e.stateNode=new el),t;case 22:return e=e.stateNode,t=e._retryCache,t===null&&(t=e._retryCache=new el),t;default:throw Error(i(435,e.tag))}}function fl(e,t){var n=dl(e);t.forEach(function(t){if(!n.has(t)){n.add(t);var r=Xu.bind(null,e,t);t.then(r,r)}})}function pl(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var a=n[r],o=e,s=t,c=s;a:for(;c!==null;){switch(c.tag){case 27:if($d(c.type)){al=c.stateNode,ol=!1;break a}break;case 5:al=c.stateNode,ol=!1;break a;case 3:case 4:al=c.stateNode.containerInfo,ol=!0;break a}c=c.return}if(al===null)throw Error(i(160));cl(o,s,a),al=null,ol=!1,o=a.alternate,o!==null&&(o.return=null),a.return=null}if(t.subtreeFlags&13886)for(t=t.child;t!==null;)hl(t,e),t=t.sibling}var ml=null;function hl(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:pl(t,e),gl(e),r&4&&(zc(3,e,e.return),Rc(3,e),zc(5,e,e.return));break;case 1:pl(t,e),gl(e),r&512&&(Qc||n===null||Uc(n,n.return)),r&64&&Zc&&(e=e.updateQueue,e!==null&&(r=e.callbacks,r!==null&&(n=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=n===null?r:n.concat(r))));break;case 26:var a=ml;if(pl(t,e),gl(e),r&512&&(Qc||n===null||Uc(n,n.return)),r&4){var o=n===null?null:n.memoizedState;if(r=e.memoizedState,n===null)if(r===null)if(e.stateNode===null){a:{r=e.type,n=e.memoizedProps,a=a.ownerDocument||a;b:switch(r){case`title`:o=a.getElementsByTagName(`title`)[0],(!o||o[gt]||o[lt]||o.namespaceURI===`http://www.w3.org/2000/svg`||o.hasAttribute(`itemprop`))&&(o=a.createElement(r),a.head.insertBefore(o,a.querySelector(`head > title`))),Id(o,r,n),o[lt]=e,xt(o),r=o;break a;case`link`:var s=Vf(`link`,`href`,a).get(r+(n.href||``));if(s){for(var c=0;c<s.length;c++)if(o=s[c],o.getAttribute(`href`)===(n.href==null||n.href===``?null:n.href)&&o.getAttribute(`rel`)===(n.rel==null?null:n.rel)&&o.getAttribute(`title`)===(n.title==null?null:n.title)&&o.getAttribute(`crossorigin`)===(n.crossOrigin==null?null:n.crossOrigin)){s.splice(c,1);break b}}o=a.createElement(r),Id(o,r,n),a.head.appendChild(o);break;case`meta`:if(s=Vf(`meta`,`content`,a).get(r+(n.content||``))){for(c=0;c<s.length;c++)if(o=s[c],o.getAttribute(`content`)===(n.content==null?null:``+n.content)&&o.getAttribute(`name`)===(n.name==null?null:n.name)&&o.getAttribute(`property`)===(n.property==null?null:n.property)&&o.getAttribute(`http-equiv`)===(n.httpEquiv==null?null:n.httpEquiv)&&o.getAttribute(`charset`)===(n.charSet==null?null:n.charSet)){s.splice(c,1);break b}}o=a.createElement(r),Id(o,r,n),a.head.appendChild(o);break;default:throw Error(i(468,r))}o[lt]=e,xt(o),r=o}e.stateNode=r}else Hf(a,e.type,e.stateNode);else e.stateNode=If(a,r,e.memoizedProps);else o===r?r===null&&e.stateNode!==null&&Gc(e,e.memoizedProps,n.memoizedProps):(o===null?n.stateNode!==null&&(n=n.stateNode,n.parentNode.removeChild(n)):o.count--,r===null?Hf(a,e.type,e.stateNode):If(a,r,e.memoizedProps))}break;case 27:pl(t,e),gl(e),r&512&&(Qc||n===null||Uc(n,n.return)),n!==null&&r&4&&Gc(e,e.memoizedProps,n.memoizedProps);break;case 5:if(pl(t,e),gl(e),r&512&&(Qc||n===null||Uc(n,n.return)),e.flags&32){a=e.stateNode;try{Wt(a,``)}catch(t){Gu(e,e.return,t)}}r&4&&e.stateNode!=null&&(a=e.memoizedProps,Gc(e,a,n===null?a:n.memoizedProps)),r&1024&&($c=!0);break;case 6:if(pl(t,e),gl(e),r&4){if(e.stateNode===null)throw Error(i(162));r=e.memoizedProps,n=e.stateNode;try{n.nodeValue=r}catch(t){Gu(e,e.return,t)}}break;case 3:if(Bf=null,a=ml,ml=gf(t.containerInfo),pl(t,e),ml=a,gl(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Np(t.containerInfo)}catch(t){Gu(e,e.return,t)}$c&&($c=!1,_l(e));break;case 4:r=ml,ml=gf(e.stateNode.containerInfo),pl(t,e),gl(e),ml=r;break;case 12:pl(t,e),gl(e);break;case 31:pl(t,e),gl(e),r&4&&(r=e.updateQueue,r!==null&&(e.updateQueue=null,fl(e,r)));break;case 13:pl(t,e),gl(e),e.child.flags&8192&&e.memoizedState!==null!=(n!==null&&n.memoizedState!==null)&&(eu=Oe()),r&4&&(r=e.updateQueue,r!==null&&(e.updateQueue=null,fl(e,r)));break;case 22:a=e.memoizedState!==null;var l=n!==null&&n.memoizedState!==null,u=Zc,d=Qc;if(Zc=u||a,Qc=d||l,pl(t,e),Qc=d,Zc=u,gl(e),r&8192)a:for(t=e.stateNode,t._visibility=a?t._visibility&-2:t._visibility|1,a&&(n===null||l||Zc||Qc||yl(e)),n=null,t=e;;){if(t.tag===5||t.tag===26){if(n===null){l=n=t;try{if(o=l.stateNode,a)s=o.style,typeof s.setProperty==`function`?s.setProperty(`display`,`none`,`important`):s.display=`none`;else{c=l.stateNode;var f=l.memoizedProps.style,p=f!=null&&f.hasOwnProperty(`display`)?f.display:null;c.style.display=p==null||typeof p==`boolean`?``:(``+p).trim()}}catch(e){Gu(l,l.return,e)}}}else if(t.tag===6){if(n===null){l=t;try{l.stateNode.nodeValue=a?``:l.memoizedProps}catch(e){Gu(l,l.return,e)}}}else if(t.tag===18){if(n===null){l=t;try{var m=l.stateNode;a?tf(m,!0):tf(l.stateNode,!1)}catch(e){Gu(l,l.return,e)}}}else if((t.tag!==22&&t.tag!==23||t.memoizedState===null||t===e)&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break a;for(;t.sibling===null;){if(t.return===null||t.return===e)break a;n===t&&(n=null),t=t.return}n===t&&(n=null),t.sibling.return=t.return,t=t.sibling}r&4&&(r=e.updateQueue,r!==null&&(n=r.retryQueue,n!==null&&(r.retryQueue=null,fl(e,n))));break;case 19:pl(t,e),gl(e),r&4&&(r=e.updateQueue,r!==null&&(e.updateQueue=null,fl(e,r)));break;case 30:break;case 21:break;default:pl(t,e),gl(e)}}function gl(e){var t=e.flags;if(t&2){try{for(var n,r=e.return;r!==null;){if(Kc(r)){n=r;break}r=r.return}if(n==null)throw Error(i(160));switch(n.tag){case 27:var a=n.stateNode;Yc(e,qc(e),a);break;case 5:var o=n.stateNode;n.flags&32&&(Wt(o,``),n.flags&=-33),Yc(e,qc(e),o);break;case 3:case 4:var s=n.stateNode.containerInfo;Jc(e,qc(e),s);break;default:throw Error(i(161))}}catch(t){Gu(e,e.return,t)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function _l(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var t=e;_l(t),t.tag===5&&t.flags&1024&&t.stateNode.reset(),e=e.sibling}}function vl(e,t){if(t.subtreeFlags&8772)for(t=t.child;t!==null;)rl(e,t.alternate,t),t=t.sibling}function yl(e){for(e=e.child;e!==null;){var t=e;switch(t.tag){case 0:case 11:case 14:case 15:zc(4,t,t.return),yl(t);break;case 1:Uc(t,t.return);var n=t.stateNode;typeof n.componentWillUnmount==`function`&&Vc(t,t.return,n),yl(t);break;case 27:pf(t.stateNode);case 26:case 5:Uc(t,t.return),yl(t);break;case 22:t.memoizedState===null&&yl(t);break;case 30:yl(t);break;default:yl(t)}e=e.sibling}}function bl(e,t,n){for(n&&=(t.subtreeFlags&8772)!=0,t=t.child;t!==null;){var r=t.alternate,i=e,a=t,o=a.flags;switch(a.tag){case 0:case 11:case 15:bl(i,a,n),Rc(4,a);break;case 1:if(bl(i,a,n),r=a,i=r.stateNode,typeof i.componentDidMount==`function`)try{i.componentDidMount()}catch(e){Gu(r,r.return,e)}if(r=a,i=r.updateQueue,i!==null){var s=r.stateNode;try{var c=i.shared.hiddenCallbacks;if(c!==null)for(i.shared.hiddenCallbacks=null,i=0;i<c.length;i++)Ja(c[i],s)}catch(e){Gu(r,r.return,e)}}n&&o&64&&Bc(a),Hc(a,a.return);break;case 27:Xc(a);case 26:case 5:bl(i,a,n),n&&r===null&&o&4&&Wc(a),Hc(a,a.return);break;case 12:bl(i,a,n);break;case 31:bl(i,a,n),n&&o&4&&ll(i,a);break;case 13:bl(i,a,n),n&&o&4&&ul(i,a);break;case 22:a.memoizedState===null&&bl(i,a,n),Hc(a,a.return);break;case 30:break;default:bl(i,a,n)}t=t.sibling}}function xl(e,t){var n=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(n=e.memoizedState.cachePool.pool),e=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(e=t.memoizedState.cachePool.pool),e!==n&&(e!=null&&e.refCount++,n!=null&&sa(n))}function Sl(e,t){e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&sa(e))}function Cl(e,t,n,r){if(t.subtreeFlags&10256)for(t=t.child;t!==null;)wl(e,t,n,r),t=t.sibling}function wl(e,t,n,r){var i=t.flags;switch(t.tag){case 0:case 11:case 15:Cl(e,t,n,r),i&2048&&Rc(9,t);break;case 1:Cl(e,t,n,r);break;case 3:Cl(e,t,n,r),i&2048&&(e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&sa(e)));break;case 12:if(i&2048){Cl(e,t,n,r),e=t.stateNode;try{var a=t.memoizedProps,o=a.id,s=a.onPostCommit;typeof s==`function`&&s(o,t.alternate===null?`mount`:`update`,e.passiveEffectDuration,-0)}catch(e){Gu(t,t.return,e)}}else Cl(e,t,n,r);break;case 31:Cl(e,t,n,r);break;case 13:Cl(e,t,n,r);break;case 23:break;case 22:a=t.stateNode,o=t.alternate,t.memoizedState===null?a._visibility&2?Cl(e,t,n,r):(a._visibility|=2,Tl(e,t,n,r,(t.subtreeFlags&10256)!=0||!1)):a._visibility&2?Cl(e,t,n,r):El(e,t),i&2048&&xl(o,t);break;case 24:Cl(e,t,n,r),i&2048&&Sl(t.alternate,t);break;default:Cl(e,t,n,r)}}function Tl(e,t,n,r,i){for(i&&=(t.subtreeFlags&10256)!=0||!1,t=t.child;t!==null;){var a=e,o=t,s=n,c=r,l=o.flags;switch(o.tag){case 0:case 11:case 15:Tl(a,o,s,c,i),Rc(8,o);break;case 23:break;case 22:var u=o.stateNode;o.memoizedState===null?(u._visibility|=2,Tl(a,o,s,c,i)):u._visibility&2?Tl(a,o,s,c,i):El(a,o),i&&l&2048&&xl(o.alternate,o);break;case 24:Tl(a,o,s,c,i),i&&l&2048&&Sl(o.alternate,o);break;default:Tl(a,o,s,c,i)}t=t.sibling}}function El(e,t){if(t.subtreeFlags&10256)for(t=t.child;t!==null;){var n=e,r=t,i=r.flags;switch(r.tag){case 22:El(n,r),i&2048&&xl(r.alternate,r);break;case 24:El(n,r),i&2048&&Sl(r.alternate,r);break;default:El(n,r)}t=t.sibling}}var Dl=8192;function Ol(e,t,n){if(e.subtreeFlags&Dl)for(e=e.child;e!==null;)kl(e,t,n),e=e.sibling}function kl(e,t,n){switch(e.tag){case 26:Ol(e,t,n),e.flags&Dl&&e.memoizedState!==null&&Gf(n,ml,e.memoizedState,e.memoizedProps);break;case 5:Ol(e,t,n);break;case 3:case 4:var r=ml;ml=gf(e.stateNode.containerInfo),Ol(e,t,n),ml=r;break;case 22:e.memoizedState===null&&(r=e.alternate,r!==null&&r.memoizedState!==null?(r=Dl,Dl=16777216,Ol(e,t,n),Dl=r):Ol(e,t,n));break;default:Ol(e,t,n)}}function Al(e){var t=e.alternate;if(t!==null&&(e=t.child,e!==null)){t.child=null;do t=e.sibling,e.sibling=null,e=t;while(e!==null)}}function jl(e){var t=e.deletions;if(e.flags&16){if(t!==null)for(var n=0;n<t.length;n++){var r=t[n];tl=r,Pl(r,e)}Al(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)Ml(e),e=e.sibling}function Ml(e){switch(e.tag){case 0:case 11:case 15:jl(e),e.flags&2048&&zc(9,e,e.return);break;case 3:jl(e);break;case 12:jl(e);break;case 22:var t=e.stateNode;e.memoizedState!==null&&t._visibility&2&&(e.return===null||e.return.tag!==13)?(t._visibility&=-3,Nl(e)):jl(e);break;default:jl(e)}}function Nl(e){var t=e.deletions;if(e.flags&16){if(t!==null)for(var n=0;n<t.length;n++){var r=t[n];tl=r,Pl(r,e)}Al(e)}for(e=e.child;e!==null;){switch(t=e,t.tag){case 0:case 11:case 15:zc(8,t,t.return),Nl(t);break;case 22:n=t.stateNode,n._visibility&2&&(n._visibility&=-3,Nl(t));break;default:Nl(t)}e=e.sibling}}function Pl(e,t){for(;tl!==null;){var n=tl;switch(n.tag){case 0:case 11:case 15:zc(8,n,t);break;case 23:case 22:if(n.memoizedState!==null&&n.memoizedState.cachePool!==null){var r=n.memoizedState.cachePool.pool;r!=null&&r.refCount++}break;case 24:sa(n.memoizedState.cache)}if(r=n.child,r!==null)r.return=n,tl=r;else a:for(n=e;tl!==null;){r=tl;var i=r.sibling,a=r.return;if(il(r),r===n){tl=null;break a}if(i!==null){i.return=a,tl=i;break a}tl=a}}}var Fl={getCacheForType:function(e){var t=$i(aa),n=t.data.get(e);return n===void 0&&(n=e(),t.data.set(e,n)),n},cacheSignal:function(){return $i(aa).controller.signal}},Il=typeof WeakMap==`function`?WeakMap:Map,Ll=0,Rl=null,J=null,Y=0,zl=0,Bl=null,Vl=!1,Hl=!1,Ul=!1,Wl=0,Gl=0,Kl=0,ql=0,Jl=0,Yl=0,Xl=0,Zl=null,Ql=null,$l=!1,eu=0,tu=0,nu=1/0,ru=null,X=null,iu=0,au=null,ou=null,su=0,cu=0,lu=null,uu=null,du=0,fu=null;function pu(){return Ll&2&&Y!==0?Y&-Y:N.T===null?ot():fd()}function mu(){if(Yl===0)if(!(Y&536870912)||V){var e=Ge;Ge<<=1,!(Ge&3932160)&&(Ge=262144),Yl=e}else Yl=536870912;return e=to.current,e!==null&&(e.flags|=32),Yl}function hu(e,t,n){(e===Rl&&(zl===2||zl===9)||e.cancelPendingCommit!==null)&&(Su(e,0),yu(e,Y,Yl,!1)),$e(e,n),(!(Ll&2)||e!==Rl)&&(e===Rl&&(!(Ll&2)&&(ql|=n),Gl===4&&yu(e,Y,Yl,!1)),id(e))}function gu(e,t,n){if(Ll&6)throw Error(i(327));var r=!n&&(t&127)==0&&(t&e.expiredLanes)===0||Ye(e,t),a=r?Au(e,t):Ou(e,t,!0),o=r;do{if(a===0){Hl&&!r&&yu(e,t,0,!1);break}else{if(n=e.current.alternate,o&&!vu(n)){a=Ou(e,t,!1),o=!1;continue}if(a===2){if(o=t,e.errorRecoveryDisabledLanes&o)var s=0;else s=e.pendingLanes&-536870913,s=s===0?s&536870912?536870912:0:s;if(s!==0){t=s;a:{var c=e;a=Zl;var l=c.current.memoizedState.isDehydrated;if(l&&(Su(c,s).flags|=256),s=Ou(c,s,!1),s!==2){if(Ul&&!l){c.errorRecoveryDisabledLanes|=o,ql|=o,a=4;break a}o=Ql,Ql=a,o!==null&&(Ql===null?Ql=o:Ql.push.apply(Ql,o))}a=s}if(o=!1,a!==2)continue}}if(a===1){Su(e,0),yu(e,t,0,!0);break}a:{switch(r=e,o=a,o){case 0:case 1:throw Error(i(345));case 4:if((t&4194048)!==t)break;case 6:yu(r,t,Yl,!Vl);break a;case 2:Ql=null;break;case 3:case 5:break;default:throw Error(i(329))}if((t&62914560)===t&&(a=eu+300-Oe(),10<a)){if(yu(r,t,Yl,!Vl),Je(r,0,!0)!==0)break a;su=t,r.timeoutHandle=Jd(_u.bind(null,r,n,Ql,ru,$l,t,Yl,ql,Xl,Vl,o,`Throttled`,-0,0),a);break a}_u(r,n,Ql,ru,$l,t,Yl,ql,Xl,Vl,o,null,-0,0)}}break}while(1);id(e)}function _u(e,t,n,r,i,a,o,s,c,l,u,d,f,p){if(e.timeoutHandle=-1,d=t.subtreeFlags,d&8192||(d&16785408)==16785408){d={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Qt},kl(t,a,d);var m=(a&62914560)===a?eu-Oe():(a&4194048)===a?tu-Oe():0;if(m=qf(d,m),m!==null){su=a,e.cancelPendingCommit=m(Lu.bind(null,e,t,a,n,r,i,o,s,c,u,d,null,f,p)),yu(e,a,o,!l);return}}Lu(e,t,a,n,r,i,o,s,c)}function vu(e){for(var t=e;;){var n=t.tag;if((n===0||n===11||n===15)&&t.flags&16384&&(n=t.updateQueue,n!==null&&(n=n.stores,n!==null)))for(var r=0;r<n.length;r++){var i=n[r],a=i.getSnapshot;i=i.value;try{if(!br(a(),i))return!1}catch{return!1}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function yu(e,t,n,r){t&=~Jl,t&=~ql,e.suspendedLanes|=t,e.pingedLanes&=~t,r&&(e.warmLanes|=t),r=e.expirationTimes;for(var i=t;0<i;){var a=31-Be(i),o=1<<a;r[a]=-1,i&=~o}n!==0&&tt(e,n,t)}function bu(){return Ll&6?!0:(ad(0,!1),!1)}function xu(){if(J!==null){if(zl===0)var e=J.return;else e=J,Gi=Wi=null,ko(e),Aa=null,ja=0,e=J;for(;e!==null;)Lc(e.alternate,e),e=e.return;J=null}}function Su(e,t){var n=e.timeoutHandle;n!==-1&&(e.timeoutHandle=-1,Yd(n)),n=e.cancelPendingCommit,n!==null&&(e.cancelPendingCommit=null,n()),su=0,xu(),Rl=e,J=n=ci(e.current,null),Y=t,zl=0,Bl=null,Vl=!1,Hl=Ye(e,t),Ul=!1,Xl=Yl=Jl=ql=Kl=Gl=0,Ql=Zl=null,$l=!1,t&8&&(t|=t&32);var r=e.entangledLanes;if(r!==0)for(e=e.entanglements,r&=t;0<r;){var i=31-Be(r),a=1<<i;t|=e[i],r&=~a}return Wl=t,Qr(),n}function Cu(e,t){H=null,N.H=Fs,t===ba||t===Sa?(t=Oa(),zl=3):t===xa?(t=Oa(),zl=4):zl=t===$s?8:typeof t==`object`&&t&&typeof t.then==`function`?6:1,Bl=t,J===null&&(Gl=1,qs(e,gi(t,e.current)))}function wu(){var e=to.current;return e===null?!0:(Y&4194048)===Y?no===null:(Y&62914560)===Y||Y&536870912?e===no:!1}function Tu(){var e=N.H;return N.H=Fs,e===null?Fs:e}function Eu(){var e=N.A;return N.A=Fl,e}function Du(){Gl=4,Vl||(Y&4194048)!==Y&&to.current!==null||(Hl=!0),!(Kl&134217727)&&!(ql&134217727)||Rl===null||yu(Rl,Y,Yl,!1)}function Ou(e,t,n){var r=Ll;Ll|=2;var i=Tu(),a=Eu();(Rl!==e||Y!==t)&&(ru=null,Su(e,t)),t=!1;var o=Gl;a:do try{if(zl!==0&&J!==null){var s=J,c=Bl;switch(zl){case 8:xu(),o=6;break a;case 3:case 2:case 9:case 6:to.current===null&&(t=!0);var l=zl;if(zl=0,Bl=null,Pu(e,s,c,l),n&&Hl){o=0;break a}break;default:l=zl,zl=0,Bl=null,Pu(e,s,c,l)}}ku(),o=Gl;break}catch(t){Cu(e,t)}while(1);return t&&e.shellSuspendCounter++,Gi=Wi=null,Ll=r,N.H=i,N.A=a,J===null&&(Rl=null,Y=0,Qr()),o}function ku(){for(;J!==null;)Mu(J)}function Au(e,t){var n=Ll;Ll|=2;var r=Tu(),a=Eu();Rl!==e||Y!==t?(ru=null,nu=Oe()+500,Su(e,t)):Hl=Ye(e,t);a:do try{if(zl!==0&&J!==null){t=J;var o=Bl;b:switch(zl){case 1:zl=0,Bl=null,Pu(e,t,o,1);break;case 2:case 9:if(wa(o)){zl=0,Bl=null,Nu(t);break}t=function(){zl!==2&&zl!==9||Rl!==e||(zl=7),id(e)},o.then(t,t);break a;case 3:zl=7;break a;case 4:zl=5;break a;case 7:wa(o)?(zl=0,Bl=null,Nu(t)):(zl=0,Bl=null,Pu(e,t,o,7));break;case 5:var s=null;switch(J.tag){case 26:s=J.memoizedState;case 5:case 27:var c=J;if(s?Wf(s):c.stateNode.complete){zl=0,Bl=null;var l=c.sibling;if(l!==null)J=l;else{var u=c.return;u===null?J=null:(J=u,Fu(u))}break b}}zl=0,Bl=null,Pu(e,t,o,5);break;case 6:zl=0,Bl=null,Pu(e,t,o,6);break;case 8:xu(),Gl=6;break a;default:throw Error(i(462))}}ju();break}catch(t){Cu(e,t)}while(1);return Gi=Wi=null,N.H=r,N.A=a,Ll=n,J===null?(Rl=null,Y=0,Qr(),Gl):0}function ju(){for(;J!==null&&!Ee();)Mu(J)}function Mu(e){var t=kc(e.alternate,e,Wl);e.memoizedProps=e.pendingProps,t===null?Fu(e):J=t}function Nu(e){var t=e,n=t.alternate;switch(t.tag){case 15:case 0:t=pc(n,t,t.pendingProps,t.type,void 0,Y);break;case 11:t=pc(n,t,t.pendingProps,t.type.render,t.ref,Y);break;case 5:ko(t);default:Lc(n,t),t=J=li(t,Wl),t=kc(n,t,Wl)}e.memoizedProps=e.pendingProps,t===null?Fu(e):J=t}function Pu(e,t,n,r){Gi=Wi=null,ko(t),Aa=null,ja=0;var i=t.return;try{if(Qs(e,i,t,n,Y)){Gl=1,qs(e,gi(n,e.current)),J=null;return}}catch(t){if(i!==null)throw J=i,t;Gl=1,qs(e,gi(n,e.current)),J=null;return}t.flags&32768?(V||r===1?e=!0:Hl||Y&536870912?e=!1:(Vl=e=!0,(r===2||r===9||r===3||r===6)&&(r=to.current,r!==null&&r.tag===13&&(r.flags|=16384))),Iu(t,e)):Fu(t)}function Fu(e){var t=e;do{if(t.flags&32768){Iu(t,Vl);return}e=t.return;var n=Fc(t.alternate,t,Wl);if(n!==null){J=n;return}if(t=t.sibling,t!==null){J=t;return}J=t=e}while(t!==null);Gl===0&&(Gl=5)}function Iu(e,t){do{var n=Ic(e.alternate,e);if(n!==null){n.flags&=32767,J=n;return}if(n=e.return,n!==null&&(n.flags|=32768,n.subtreeFlags=0,n.deletions=null),!t&&(e=e.sibling,e!==null)){J=e;return}J=e=n}while(e!==null);Gl=6,J=null}function Lu(e,t,n,r,a,o,s,c,l){e.cancelPendingCommit=null;do Hu();while(iu!==0);if(Ll&6)throw Error(i(327));if(t!==null){if(t===e.current)throw Error(i(177));if(o=t.lanes|t.childLanes,o|=Zr,et(e,n,o,s,c,l),e===Rl&&(J=Rl=null,Y=0),ou=t,au=e,su=n,cu=o,lu=a,uu=r,t.subtreeFlags&10256||t.flags&10256?(e.callbackNode=null,e.callbackPriority=0,Zu(Me,function(){return Uu(),null})):(e.callbackNode=null,e.callbackPriority=0),r=(t.flags&13878)!=0,t.subtreeFlags&13878||r){r=N.T,N.T=null,a=P.p,P.p=2,s=Ll,Ll|=4;try{nl(e,t,n)}finally{Ll=s,P.p=a,N.T=r}}iu=1,Ru(),zu(),Bu()}}function Ru(){if(iu===1){iu=0;var e=au,t=ou,n=(t.flags&13878)!=0;if(t.subtreeFlags&13878||n){n=N.T,N.T=null;var r=P.p;P.p=2;var i=Ll;Ll|=4;try{hl(t,e);var a=Vd,o=Tr(e.containerInfo),s=a.focusedElem,c=a.selectionRange;if(o!==s&&s&&s.ownerDocument&&wr(s.ownerDocument.documentElement,s)){if(c!==null&&Er(s)){var l=c.start,u=c.end;if(u===void 0&&(u=l),`selectionStart`in s)s.selectionStart=l,s.selectionEnd=Math.min(u,s.value.length);else{var d=s.ownerDocument||document,f=d&&d.defaultView||window;if(f.getSelection){var p=f.getSelection(),m=s.textContent.length,h=Math.min(c.start,m),g=c.end===void 0?h:Math.min(c.end,m);!p.extend&&h>g&&(o=g,g=h,h=o);var _=Cr(s,h),v=Cr(s,g);if(_&&v&&(p.rangeCount!==1||p.anchorNode!==_.node||p.anchorOffset!==_.offset||p.focusNode!==v.node||p.focusOffset!==v.offset)){var y=d.createRange();y.setStart(_.node,_.offset),p.removeAllRanges(),h>g?(p.addRange(y),p.extend(v.node,v.offset)):(y.setEnd(v.node,v.offset),p.addRange(y))}}}}for(d=[],p=s;p=p.parentNode;)p.nodeType===1&&d.push({element:p,left:p.scrollLeft,top:p.scrollTop});for(typeof s.focus==`function`&&s.focus(),s=0;s<d.length;s++){var b=d[s];b.element.scrollLeft=b.left,b.element.scrollTop=b.top}}sp=!!Bd,Vd=Bd=null}finally{Ll=i,P.p=r,N.T=n}}e.current=t,iu=2}}function zu(){if(iu===2){iu=0;var e=au,t=ou,n=(t.flags&8772)!=0;if(t.subtreeFlags&8772||n){n=N.T,N.T=null;var r=P.p;P.p=2;var i=Ll;Ll|=4;try{rl(e,t.alternate,t)}finally{Ll=i,P.p=r,N.T=n}}iu=3}}function Bu(){if(iu===4||iu===3){iu=0,De();var e=au,t=ou,n=su,r=uu;t.subtreeFlags&10256||t.flags&10256?iu=5:(iu=0,ou=au=null,Vu(e,e.pendingLanes));var i=e.pendingLanes;if(i===0&&(X=null),at(n),t=t.stateNode,Re&&typeof Re.onCommitFiberRoot==`function`)try{Re.onCommitFiberRoot(Le,t,void 0,(t.current.flags&128)==128)}catch{}if(r!==null){t=N.T,i=P.p,P.p=2,N.T=null;try{for(var a=e.onRecoverableError,o=0;o<r.length;o++){var s=r[o];a(s.value,{componentStack:s.stack})}}finally{N.T=t,P.p=i}}su&3&&Hu(),id(e),i=e.pendingLanes,n&261930&&i&42?e===fu?du++:(du=0,fu=e):du=0,ad(0,!1)}}function Vu(e,t){(e.pooledCacheLanes&=t)===0&&(t=e.pooledCache,t!=null&&(e.pooledCache=null,sa(t)))}function Hu(){return Ru(),zu(),Bu(),Uu()}function Uu(){if(iu!==5)return!1;var e=au,t=cu;cu=0;var n=at(su),r=N.T,a=P.p;try{P.p=32>n?32:n,N.T=null,n=lu,lu=null;var o=au,s=su;if(iu=0,ou=au=null,su=0,Ll&6)throw Error(i(331));var c=Ll;if(Ll|=4,Ml(o.current),wl(o,o.current,s,n),Ll=c,ad(0,!1),Re&&typeof Re.onPostCommitFiberRoot==`function`)try{Re.onPostCommitFiberRoot(Le,o)}catch{}return!0}finally{P.p=a,N.T=r,Vu(e,t)}}function Wu(e,t,n){t=gi(n,t),t=Ys(e.stateNode,t,2),e=Ha(e,t,2),e!==null&&($e(e,2),id(e))}function Gu(e,t,n){if(e.tag===3)Wu(e,e,n);else for(;t!==null;){if(t.tag===3){Wu(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError==`function`||typeof r.componentDidCatch==`function`&&(X===null||!X.has(r))){e=gi(n,e),n=Xs(2),r=Ha(t,n,2),r!==null&&(Zs(n,r,t,e),$e(r,2),id(r));break}}t=t.return}}function Ku(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new Il;var i=new Set;r.set(t,i)}else i=r.get(t),i===void 0&&(i=new Set,r.set(t,i));i.has(n)||(Ul=!0,i.add(n),e=qu.bind(null,e,t,n),t.then(e,e))}function qu(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),e.pingedLanes|=e.suspendedLanes&n,e.warmLanes&=~n,Rl===e&&(Y&n)===n&&(Gl===4||Gl===3&&(Y&62914560)===Y&&300>Oe()-eu?!(Ll&2)&&Su(e,0):Jl|=n,Xl===Y&&(Xl=0)),id(e)}function Ju(e,t){t===0&&(t=Ze()),e=ti(e,t),e!==null&&($e(e,t),id(e))}function Yu(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),Ju(e,n)}function Xu(e,t){var n=0;switch(e.tag){case 31:case 13:var r=e.stateNode,a=e.memoizedState;a!==null&&(n=a.retryLane);break;case 19:r=e.stateNode;break;case 22:r=e.stateNode._retryCache;break;default:throw Error(i(314))}r!==null&&r.delete(t),Ju(e,n)}function Zu(e,t){return we(e,t)}var Qu=null,$u=null,ed=!1,td=!1,nd=!1,rd=0;function id(e){e!==$u&&e.next===null&&($u===null?Qu=$u=e:$u=$u.next=e),td=!0,ed||(ed=!0,dd())}function ad(e,t){if(!nd&&td){nd=!0;do for(var n=!1,r=Qu;r!==null;){if(!t)if(e!==0){var i=r.pendingLanes;if(i===0)var a=0;else{var o=r.suspendedLanes,s=r.pingedLanes;a=(1<<31-Be(42|e)+1)-1,a&=i&~(o&~s),a=a&201326741?a&201326741|1:a?a|2:0}a!==0&&(n=!0,ud(r,a))}else a=Y,a=Je(r,r===Rl?a:0,r.cancelPendingCommit!==null||r.timeoutHandle!==-1),!(a&3)||Ye(r,a)||(n=!0,ud(r,a));r=r.next}while(n);nd=!1}}function od(){sd()}function sd(){td=ed=!1;var e=0;rd!==0&&qd()&&(e=rd);for(var t=Oe(),n=null,r=Qu;r!==null;){var i=r.next,a=cd(r,t);a===0?(r.next=null,n===null?Qu=i:n.next=i,i===null&&($u=n)):(n=r,(e!==0||a&3)&&(td=!0)),r=i}iu!==0&&iu!==5||ad(e,!1),rd!==0&&(rd=0)}function cd(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,a=e.pendingLanes&-62914561;0<a;){var o=31-Be(a),s=1<<o,c=i[o];c===-1?((s&n)===0||(s&r)!==0)&&(i[o]=Xe(s,t)):c<=t&&(e.expiredLanes|=s),a&=~s}if(t=Rl,n=Y,n=Je(e,e===t?n:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),r=e.callbackNode,n===0||e===t&&(zl===2||zl===9)||e.cancelPendingCommit!==null)return r!==null&&r!==null&&Te(r),e.callbackNode=null,e.callbackPriority=0;if(!(n&3)||Ye(e,n)){if(t=n&-n,t===e.callbackPriority)return t;switch(r!==null&&Te(r),at(n)){case 2:case 8:n=je;break;case 32:n=Me;break;case 268435456:n=Pe;break;default:n=Me}return r=ld.bind(null,e),n=we(n,r),e.callbackPriority=t,e.callbackNode=n,t}return r!==null&&r!==null&&Te(r),e.callbackPriority=2,e.callbackNode=null,2}function ld(e,t){if(iu!==0&&iu!==5)return e.callbackNode=null,e.callbackPriority=0,null;var n=e.callbackNode;if(Hu()&&e.callbackNode!==n)return null;var r=Y;return r=Je(e,e===Rl?r:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),r===0?null:(gu(e,r,t),cd(e,Oe()),e.callbackNode!=null&&e.callbackNode===n?ld.bind(null,e):null)}function ud(e,t){if(Hu())return null;gu(e,t,!0)}function dd(){Zd(function(){Ll&6?we(Ae,od):sd()})}function fd(){if(rd===0){var e=ua;e===0&&(e=We,We<<=1,!(We&261888)&&(We=256)),rd=e}return rd}function pd(e){return e==null||typeof e==`symbol`||typeof e==`boolean`?null:typeof e==`function`?e:Zt(``+e)}function md(e,t){var n=t.ownerDocument.createElement(`input`);return n.name=t.name,n.value=t.value,e.id&&n.setAttribute(`form`,e.id),t.parentNode.insertBefore(n,t),e=new FormData(e),n.parentNode.removeChild(n),e}function hd(e,t,n,r,i){if(t===`submit`&&n&&n.stateNode===i){var a=pd((i[ut]||null).action),o=r.submitter;o&&(t=(t=o[ut]||null)?pd(t.formAction):o.getAttribute(`formAction`),t!==null&&(a=t,o=null));var s=new bn(`action`,`action`,null,r,i);e.push({event:s,listeners:[{instance:null,listener:function(){if(r.defaultPrevented){if(rd!==0){var e=o?md(i,o):new FormData(i);Ss(n,{pending:!0,data:e,method:i.method,action:a},null,e)}}else typeof a==`function`&&(s.preventDefault(),e=o?md(i,o):new FormData(i),Ss(n,{pending:!0,data:e,method:i.method,action:a},a,e))},currentTarget:i}]})}}for(var gd=0;gd<Kr.length;gd++){var _d=Kr[gd];qr(_d.toLowerCase(),`on`+(_d[0].toUpperCase()+_d.slice(1)))}qr(Rr,`onAnimationEnd`),qr(zr,`onAnimationIteration`),qr(Br,`onAnimationStart`),qr(`dblclick`,`onDoubleClick`),qr(`focusin`,`onFocus`),qr(`focusout`,`onBlur`),qr(Vr,`onTransitionRun`),qr(Hr,`onTransitionStart`),qr(Ur,`onTransitionCancel`),qr(Wr,`onTransitionEnd`),Tt(`onMouseEnter`,[`mouseout`,`mouseover`]),Tt(`onMouseLeave`,[`mouseout`,`mouseover`]),Tt(`onPointerEnter`,[`pointerout`,`pointerover`]),Tt(`onPointerLeave`,[`pointerout`,`pointerover`]),wt(`onChange`,`change click focusin focusout input keydown keyup selectionchange`.split(` `)),wt(`onSelect`,`focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange`.split(` `)),wt(`onBeforeInput`,[`compositionend`,`keypress`,`textInput`,`paste`]),wt(`onCompositionEnd`,`compositionend focusout keydown keypress keyup mousedown`.split(` `)),wt(`onCompositionStart`,`compositionstart focusout keydown keypress keyup mousedown`.split(` `)),wt(`onCompositionUpdate`,`compositionupdate focusout keydown keypress keyup mousedown`.split(` `));var vd=`abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting`.split(` `),yd=new Set(`beforetoggle cancel close invalid load scroll scrollend toggle`.split(` `).concat(vd));function bd(e,t){t=(t&4)!=0;for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;a:{var a=void 0;if(t)for(var o=r.length-1;0<=o;o--){var s=r[o],c=s.instance,l=s.currentTarget;if(s=s.listener,c!==a&&i.isPropagationStopped())break a;a=s,i.currentTarget=l;try{a(i)}catch(e){Jr(e)}i.currentTarget=null,a=c}else for(o=0;o<r.length;o++){if(s=r[o],c=s.instance,l=s.currentTarget,s=s.listener,c!==a&&i.isPropagationStopped())break a;a=s,i.currentTarget=l;try{a(i)}catch(e){Jr(e)}i.currentTarget=null,a=c}}}}function Z(e,t){var n=t[ft];n===void 0&&(n=t[ft]=new Set);var r=e+`__bubble`;n.has(r)||(wd(t,e,2,!1),n.add(r))}function xd(e,t,n){var r=0;t&&(r|=4),wd(n,e,r,t)}var Sd=`_reactListening`+Math.random().toString(36).slice(2);function Cd(e){if(!e[Sd]){e[Sd]=!0,St.forEach(function(t){t!==`selectionchange`&&(yd.has(t)||xd(t,!1,e),xd(t,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Sd]||(t[Sd]=!0,xd(`selectionchange`,!1,t))}}function wd(e,t,n,r){switch(mp(t)){case 2:var i=cp;break;case 8:i=lp;break;default:i=up}n=i.bind(null,t,n,e),i=void 0,!ln||t!==`touchstart`&&t!==`touchmove`&&t!==`wheel`||(i=!0),r?i===void 0?e.addEventListener(t,n,!0):e.addEventListener(t,n,{capture:!0,passive:i}):i===void 0?e.addEventListener(t,n,!1):e.addEventListener(t,n,{passive:i})}function Td(e,t,n,r,i){var a=r;if(!(t&1)&&!(t&2)&&r!==null)a:for(;;){if(r===null)return;var s=r.tag;if(s===3||s===4){var c=r.stateNode.containerInfo;if(c===i)break;if(s===4)for(s=r.return;s!==null;){var l=s.tag;if((l===3||l===4)&&s.stateNode.containerInfo===i)return;s=s.return}for(;c!==null;){if(s=vt(c),s===null)return;if(l=s.tag,l===5||l===6||l===26||l===27){r=a=s;continue a}c=c.parentNode}}r=r.return}on(function(){var r=a,i=en(n),s=[];a:{var c=Gr.get(e);if(c!==void 0){var l=bn,u=e;switch(e){case`keypress`:if(hn(n)===0)break a;case`keydown`:case`keyup`:l=Rn;break;case`focusin`:u=`focus`,l=kn;break;case`focusout`:u=`blur`,l=kn;break;case`beforeblur`:case`afterblur`:l=kn;break;case`click`:if(n.button===2)break a;case`auxclick`:case`dblclick`:case`mousedown`:case`mousemove`:case`mouseup`:case`mouseout`:case`mouseover`:case`contextmenu`:l=Dn;break;case`drag`:case`dragend`:case`dragenter`:case`dragexit`:case`dragleave`:case`dragover`:case`dragstart`:case`drop`:l=On;break;case`touchcancel`:case`touchend`:case`touchmove`:case`touchstart`:l=Bn;break;case Rr:case zr:case Br:l=An;break;case Wr:l=Vn;break;case`scroll`:case`scrollend`:l=Sn;break;case`wheel`:l=Hn;break;case`copy`:case`cut`:case`paste`:l=jn;break;case`gotpointercapture`:case`lostpointercapture`:case`pointercancel`:case`pointerdown`:case`pointermove`:case`pointerout`:case`pointerover`:case`pointerup`:l=zn;break;case`toggle`:case`beforetoggle`:l=Un}var d=(t&4)!=0,f=!d&&(e===`scroll`||e===`scrollend`),p=d?c===null?null:c+`Capture`:c;d=[];for(var m=r,h;m!==null;){var g=m;if(h=g.stateNode,g=g.tag,g!==5&&g!==26&&g!==27||h===null||p===null||(g=sn(m,p),g!=null&&d.push(Ed(m,g,h))),f)break;m=m.return}0<d.length&&(c=new l(c,u,null,n,i),s.push({event:c,listeners:d}))}}if(!(t&7)){a:{if(c=e===`mouseover`||e===`pointerover`,l=e===`mouseout`||e===`pointerout`,c&&n!==$t&&(u=n.relatedTarget||n.fromElement)&&(vt(u)||u[dt]))break a;if((l||c)&&(c=i.window===i?i:(c=i.ownerDocument)?c.defaultView||c.parentWindow:window,l?(u=n.relatedTarget||n.toElement,l=r,u=u?vt(u):null,u!==null&&(f=o(u),d=u.tag,u!==f||d!==5&&d!==27&&d!==6)&&(u=null)):(l=null,u=r),l!==u)){if(d=Dn,g=`onMouseLeave`,p=`onMouseEnter`,m=`mouse`,(e===`pointerout`||e===`pointerover`)&&(d=zn,g=`onPointerLeave`,p=`onPointerEnter`,m=`pointer`),f=l==null?c:I(l),h=u==null?c:I(u),c=new d(g,m+`leave`,l,n,i),c.target=f,c.relatedTarget=h,g=null,vt(i)===r&&(d=new d(p,m+`enter`,u,n,i),d.target=h,d.relatedTarget=f,g=d),f=g,l&&u)b:{for(d=Od,p=l,m=u,h=0,g=p;g;g=d(g))h++;g=0;for(var _=m;_;_=d(_))g++;for(;0<h-g;)p=d(p),h--;for(;0<g-h;)m=d(m),g--;for(;h--;){if(p===m||m!==null&&p===m.alternate){d=p;break b}p=d(p),m=d(m)}d=null}else d=null;l!==null&&kd(s,c,l,d,!1),u!==null&&f!==null&&kd(s,f,u,d,!0)}}a:{if(c=r?I(r):window,l=c.nodeName&&c.nodeName.toLowerCase(),l===`select`||l===`input`&&c.type===`file`)var v=cr;else if(rr(c))if(lr)v=vr;else{v=gr;var y=hr}else l=c.nodeName,!l||l.toLowerCase()!==`input`||c.type!==`checkbox`&&c.type!==`radio`?r&&Jt(r.elementType)&&(v=cr):v=_r;if(v&&=v(e,r)){ir(s,v,n,i);break a}y&&y(e,c,r),e===`focusout`&&r&&c.type===`number`&&r.memoizedProps.value!=null&&Bt(c,`number`,c.value)}switch(y=r?I(r):window,e){case`focusin`:(rr(y)||y.contentEditable===`true`)&&(Or=y,kr=r,Ar=null);break;case`focusout`:Ar=kr=Or=null;break;case`mousedown`:jr=!0;break;case`contextmenu`:case`mouseup`:case`dragend`:jr=!1,Mr(s,n,i);break;case`selectionchange`:if(Dr)break;case`keydown`:case`keyup`:Mr(s,n,i)}var b;if(Gn)b:{switch(e){case`compositionstart`:var x=`onCompositionStart`;break b;case`compositionend`:x=`onCompositionEnd`;break b;case`compositionupdate`:x=`onCompositionUpdate`;break b}x=void 0}else $n?Zn(e,n)&&(x=`onCompositionEnd`):e===`keydown`&&n.keyCode===229&&(x=`onCompositionStart`);x&&(Jn&&n.locale!==`ko`&&($n||x!==`onCompositionStart`?x===`onCompositionEnd`&&$n&&(b=mn()):(dn=i,fn=`value`in dn?dn.value:dn.textContent,$n=!0)),y=Dd(r,x),0<y.length&&(x=new Mn(x,e,null,n,i),s.push({event:x,listeners:y}),b?x.data=b:(b=Qn(n),b!==null&&(x.data=b)))),(b=qn?er(e,n):tr(e,n))&&(x=Dd(r,`onBeforeInput`),0<x.length&&(y=new Mn(`onBeforeInput`,`beforeinput`,null,n,i),s.push({event:y,listeners:x}),y.data=b)),hd(s,e,r,n,i)}bd(s,t)})}function Ed(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Dd(e,t){for(var n=t+`Capture`,r=[];e!==null;){var i=e,a=i.stateNode;if(i=i.tag,i!==5&&i!==26&&i!==27||a===null||(i=sn(e,n),i!=null&&r.unshift(Ed(e,i,a)),i=sn(e,t),i!=null&&r.push(Ed(e,i,a))),e.tag===3)return r;e=e.return}return[]}function Od(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function kd(e,t,n,r,i){for(var a=t._reactName,o=[];n!==null&&n!==r;){var s=n,c=s.alternate,l=s.stateNode;if(s=s.tag,c!==null&&c===r)break;s!==5&&s!==26&&s!==27||l===null||(c=l,i?(l=sn(n,a),l!=null&&o.unshift(Ed(n,l,c))):i||(l=sn(n,a),l!=null&&o.push(Ed(n,l,c)))),n=n.return}o.length!==0&&e.push({event:t,listeners:o})}var Ad=/\r\n?/g,jd=/\u0000|\uFFFD/g;function Md(e){return(typeof e==`string`?e:``+e).replace(Ad,`
`).replace(jd,``)}function Nd(e,t){return t=Md(t),Md(e)===t}function Pd(e,t,n,r,a,o){switch(n){case`children`:typeof r==`string`?t===`body`||t===`textarea`&&r===``||Wt(e,r):(typeof r==`number`||typeof r==`bigint`)&&t!==`body`&&Wt(e,``+r);break;case`className`:jt(e,`class`,r);break;case`tabIndex`:jt(e,`tabindex`,r);break;case`dir`:case`role`:case`viewBox`:case`width`:case`height`:jt(e,n,r);break;case`style`:qt(e,r,o);break;case`data`:if(t!==`object`){jt(e,`data`,r);break}case`src`:case`href`:if(r===``&&(t!==`a`||n!==`href`)){e.removeAttribute(n);break}if(r==null||typeof r==`function`||typeof r==`symbol`||typeof r==`boolean`){e.removeAttribute(n);break}r=Zt(``+r),e.setAttribute(n,r);break;case`action`:case`formAction`:if(typeof r==`function`){e.setAttribute(n,`javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')`);break}else typeof o==`function`&&(n===`formAction`?(t!==`input`&&Pd(e,t,`name`,a.name,a,null),Pd(e,t,`formEncType`,a.formEncType,a,null),Pd(e,t,`formMethod`,a.formMethod,a,null),Pd(e,t,`formTarget`,a.formTarget,a,null)):(Pd(e,t,`encType`,a.encType,a,null),Pd(e,t,`method`,a.method,a,null),Pd(e,t,`target`,a.target,a,null)));if(r==null||typeof r==`symbol`||typeof r==`boolean`){e.removeAttribute(n);break}r=Zt(``+r),e.setAttribute(n,r);break;case`onClick`:r!=null&&(e.onclick=Qt);break;case`onScroll`:r!=null&&Z(`scroll`,e);break;case`onScrollEnd`:r!=null&&Z(`scrollend`,e);break;case`dangerouslySetInnerHTML`:if(r!=null){if(typeof r!=`object`||!(`__html`in r))throw Error(i(61));if(n=r.__html,n!=null){if(a.children!=null)throw Error(i(60));e.innerHTML=n}}break;case`multiple`:e.multiple=r&&typeof r!=`function`&&typeof r!=`symbol`;break;case`muted`:e.muted=r&&typeof r!=`function`&&typeof r!=`symbol`;break;case`suppressContentEditableWarning`:case`suppressHydrationWarning`:case`defaultValue`:case`defaultChecked`:case`innerHTML`:case`ref`:break;case`autoFocus`:break;case`xlinkHref`:if(r==null||typeof r==`function`||typeof r==`boolean`||typeof r==`symbol`){e.removeAttribute(`xlink:href`);break}n=Zt(``+r),e.setAttributeNS(`http://www.w3.org/1999/xlink`,`xlink:href`,n);break;case`contentEditable`:case`spellCheck`:case`draggable`:case`value`:case`autoReverse`:case`externalResourcesRequired`:case`focusable`:case`preserveAlpha`:r!=null&&typeof r!=`function`&&typeof r!=`symbol`?e.setAttribute(n,``+r):e.removeAttribute(n);break;case`inert`:case`allowFullScreen`:case`async`:case`autoPlay`:case`controls`:case`default`:case`defer`:case`disabled`:case`disablePictureInPicture`:case`disableRemotePlayback`:case`formNoValidate`:case`hidden`:case`loop`:case`noModule`:case`noValidate`:case`open`:case`playsInline`:case`readOnly`:case`required`:case`reversed`:case`scoped`:case`seamless`:case`itemScope`:r&&typeof r!=`function`&&typeof r!=`symbol`?e.setAttribute(n,``):e.removeAttribute(n);break;case`capture`:case`download`:!0===r?e.setAttribute(n,``):!1!==r&&r!=null&&typeof r!=`function`&&typeof r!=`symbol`?e.setAttribute(n,r):e.removeAttribute(n);break;case`cols`:case`rows`:case`size`:case`span`:r!=null&&typeof r!=`function`&&typeof r!=`symbol`&&!isNaN(r)&&1<=r?e.setAttribute(n,r):e.removeAttribute(n);break;case`rowSpan`:case`start`:r==null||typeof r==`function`||typeof r==`symbol`||isNaN(r)?e.removeAttribute(n):e.setAttribute(n,r);break;case`popover`:Z(`beforetoggle`,e),Z(`toggle`,e),At(e,`popover`,r);break;case`xlinkActuate`:Mt(e,`http://www.w3.org/1999/xlink`,`xlink:actuate`,r);break;case`xlinkArcrole`:Mt(e,`http://www.w3.org/1999/xlink`,`xlink:arcrole`,r);break;case`xlinkRole`:Mt(e,`http://www.w3.org/1999/xlink`,`xlink:role`,r);break;case`xlinkShow`:Mt(e,`http://www.w3.org/1999/xlink`,`xlink:show`,r);break;case`xlinkTitle`:Mt(e,`http://www.w3.org/1999/xlink`,`xlink:title`,r);break;case`xlinkType`:Mt(e,`http://www.w3.org/1999/xlink`,`xlink:type`,r);break;case`xmlBase`:Mt(e,`http://www.w3.org/XML/1998/namespace`,`xml:base`,r);break;case`xmlLang`:Mt(e,`http://www.w3.org/XML/1998/namespace`,`xml:lang`,r);break;case`xmlSpace`:Mt(e,`http://www.w3.org/XML/1998/namespace`,`xml:space`,r);break;case`is`:At(e,`is`,r);break;case`innerText`:case`textContent`:break;default:(!(2<n.length)||n[0]!==`o`&&n[0]!==`O`||n[1]!==`n`&&n[1]!==`N`)&&(n=Yt.get(n)||n,At(e,n,r))}}function Fd(e,t,n,r,a,o){switch(n){case`style`:qt(e,r,o);break;case`dangerouslySetInnerHTML`:if(r!=null){if(typeof r!=`object`||!(`__html`in r))throw Error(i(61));if(n=r.__html,n!=null){if(a.children!=null)throw Error(i(60));e.innerHTML=n}}break;case`children`:typeof r==`string`?Wt(e,r):(typeof r==`number`||typeof r==`bigint`)&&Wt(e,``+r);break;case`onScroll`:r!=null&&Z(`scroll`,e);break;case`onScrollEnd`:r!=null&&Z(`scrollend`,e);break;case`onClick`:r!=null&&(e.onclick=Qt);break;case`suppressContentEditableWarning`:case`suppressHydrationWarning`:case`innerHTML`:case`ref`:break;case`innerText`:case`textContent`:break;default:if(!Ct.hasOwnProperty(n))a:{if(n[0]===`o`&&n[1]===`n`&&(a=n.endsWith(`Capture`),t=n.slice(2,a?n.length-7:void 0),o=e[ut]||null,o=o==null?null:o[n],typeof o==`function`&&e.removeEventListener(t,o,a),typeof r==`function`)){typeof o!=`function`&&o!==null&&(n in e?e[n]=null:e.hasAttribute(n)&&e.removeAttribute(n)),e.addEventListener(t,r,a);break a}n in e?e[n]=r:!0===r?e.setAttribute(n,``):At(e,n,r)}}}function Id(e,t,n){switch(t){case`div`:case`span`:case`svg`:case`path`:case`a`:case`g`:case`p`:case`li`:break;case`img`:Z(`error`,e),Z(`load`,e);var r=!1,a=!1,o;for(o in n)if(n.hasOwnProperty(o)){var s=n[o];if(s!=null)switch(o){case`src`:r=!0;break;case`srcSet`:a=!0;break;case`children`:case`dangerouslySetInnerHTML`:throw Error(i(137,t));default:Pd(e,t,o,s,n,null)}}a&&Pd(e,t,`srcSet`,n.srcSet,n,null),r&&Pd(e,t,`src`,n.src,n,null);return;case`input`:Z(`invalid`,e);var c=o=s=a=null,l=null,u=null;for(r in n)if(n.hasOwnProperty(r)){var d=n[r];if(d!=null)switch(r){case`name`:a=d;break;case`type`:s=d;break;case`checked`:l=d;break;case`defaultChecked`:u=d;break;case`value`:o=d;break;case`defaultValue`:c=d;break;case`children`:case`dangerouslySetInnerHTML`:if(d!=null)throw Error(i(137,t));break;default:Pd(e,t,r,d,n,null)}}zt(e,o,c,l,u,s,a,!1);return;case`select`:for(a in Z(`invalid`,e),r=s=o=null,n)if(n.hasOwnProperty(a)&&(c=n[a],c!=null))switch(a){case`value`:o=c;break;case`defaultValue`:s=c;break;case`multiple`:r=c;default:Pd(e,t,a,c,n,null)}t=o,n=s,e.multiple=!!r,t==null?n!=null&&Vt(e,!!r,n,!0):Vt(e,!!r,t,!1);return;case`textarea`:for(s in Z(`invalid`,e),o=a=r=null,n)if(n.hasOwnProperty(s)&&(c=n[s],c!=null))switch(s){case`value`:r=c;break;case`defaultValue`:a=c;break;case`children`:o=c;break;case`dangerouslySetInnerHTML`:if(c!=null)throw Error(i(91));break;default:Pd(e,t,s,c,n,null)}Ut(e,r,a,o);return;case`option`:for(l in n)if(n.hasOwnProperty(l)&&(r=n[l],r!=null))switch(l){case`selected`:e.selected=r&&typeof r!=`function`&&typeof r!=`symbol`;break;default:Pd(e,t,l,r,n,null)}return;case`dialog`:Z(`beforetoggle`,e),Z(`toggle`,e),Z(`cancel`,e),Z(`close`,e);break;case`iframe`:case`object`:Z(`load`,e);break;case`video`:case`audio`:for(r=0;r<vd.length;r++)Z(vd[r],e);break;case`image`:Z(`error`,e),Z(`load`,e);break;case`details`:Z(`toggle`,e);break;case`embed`:case`source`:case`link`:Z(`error`,e),Z(`load`,e);case`area`:case`base`:case`br`:case`col`:case`hr`:case`keygen`:case`meta`:case`param`:case`track`:case`wbr`:case`menuitem`:for(u in n)if(n.hasOwnProperty(u)&&(r=n[u],r!=null))switch(u){case`children`:case`dangerouslySetInnerHTML`:throw Error(i(137,t));default:Pd(e,t,u,r,n,null)}return;default:if(Jt(t)){for(d in n)n.hasOwnProperty(d)&&(r=n[d],r!==void 0&&Fd(e,t,d,r,n,void 0));return}}for(c in n)n.hasOwnProperty(c)&&(r=n[c],r!=null&&Pd(e,t,c,r,n,null))}function Ld(e,t,n,r){switch(t){case`div`:case`span`:case`svg`:case`path`:case`a`:case`g`:case`p`:case`li`:break;case`input`:var a=null,o=null,s=null,c=null,l=null,u=null,d=null;for(m in n){var f=n[m];if(n.hasOwnProperty(m)&&f!=null)switch(m){case`checked`:break;case`value`:break;case`defaultValue`:l=f;default:r.hasOwnProperty(m)||Pd(e,t,m,null,r,f)}}for(var p in r){var m=r[p];if(f=n[p],r.hasOwnProperty(p)&&(m!=null||f!=null))switch(p){case`type`:o=m;break;case`name`:a=m;break;case`checked`:u=m;break;case`defaultChecked`:d=m;break;case`value`:s=m;break;case`defaultValue`:c=m;break;case`children`:case`dangerouslySetInnerHTML`:if(m!=null)throw Error(i(137,t));break;default:m!==f&&Pd(e,t,p,m,r,f)}}Rt(e,s,c,l,u,d,o,a);return;case`select`:for(o in m=s=c=p=null,n)if(l=n[o],n.hasOwnProperty(o)&&l!=null)switch(o){case`value`:break;case`multiple`:m=l;default:r.hasOwnProperty(o)||Pd(e,t,o,null,r,l)}for(a in r)if(o=r[a],l=n[a],r.hasOwnProperty(a)&&(o!=null||l!=null))switch(a){case`value`:p=o;break;case`defaultValue`:c=o;break;case`multiple`:s=o;default:o!==l&&Pd(e,t,a,o,r,l)}t=c,n=s,r=m,p==null?!!r!=!!n&&(t==null?Vt(e,!!n,n?[]:``,!1):Vt(e,!!n,t,!0)):Vt(e,!!n,p,!1);return;case`textarea`:for(c in m=p=null,n)if(a=n[c],n.hasOwnProperty(c)&&a!=null&&!r.hasOwnProperty(c))switch(c){case`value`:break;case`children`:break;default:Pd(e,t,c,null,r,a)}for(s in r)if(a=r[s],o=n[s],r.hasOwnProperty(s)&&(a!=null||o!=null))switch(s){case`value`:p=a;break;case`defaultValue`:m=a;break;case`children`:break;case`dangerouslySetInnerHTML`:if(a!=null)throw Error(i(91));break;default:a!==o&&Pd(e,t,s,a,r,o)}Ht(e,p,m);return;case`option`:for(var h in n)if(p=n[h],n.hasOwnProperty(h)&&p!=null&&!r.hasOwnProperty(h))switch(h){case`selected`:e.selected=!1;break;default:Pd(e,t,h,null,r,p)}for(l in r)if(p=r[l],m=n[l],r.hasOwnProperty(l)&&p!==m&&(p!=null||m!=null))switch(l){case`selected`:e.selected=p&&typeof p!=`function`&&typeof p!=`symbol`;break;default:Pd(e,t,l,p,r,m)}return;case`img`:case`link`:case`area`:case`base`:case`br`:case`col`:case`embed`:case`hr`:case`keygen`:case`meta`:case`param`:case`source`:case`track`:case`wbr`:case`menuitem`:for(var g in n)p=n[g],n.hasOwnProperty(g)&&p!=null&&!r.hasOwnProperty(g)&&Pd(e,t,g,null,r,p);for(u in r)if(p=r[u],m=n[u],r.hasOwnProperty(u)&&p!==m&&(p!=null||m!=null))switch(u){case`children`:case`dangerouslySetInnerHTML`:if(p!=null)throw Error(i(137,t));break;default:Pd(e,t,u,p,r,m)}return;default:if(Jt(t)){for(var _ in n)p=n[_],n.hasOwnProperty(_)&&p!==void 0&&!r.hasOwnProperty(_)&&Fd(e,t,_,void 0,r,p);for(d in r)p=r[d],m=n[d],!r.hasOwnProperty(d)||p===m||p===void 0&&m===void 0||Fd(e,t,d,p,r,m);return}}for(var v in n)p=n[v],n.hasOwnProperty(v)&&p!=null&&!r.hasOwnProperty(v)&&Pd(e,t,v,null,r,p);for(f in r)p=r[f],m=n[f],!r.hasOwnProperty(f)||p===m||p==null&&m==null||Pd(e,t,f,p,r,m)}function Rd(e){switch(e){case`css`:case`script`:case`font`:case`img`:case`image`:case`input`:case`link`:return!0;default:return!1}}function zd(){if(typeof performance.getEntriesByType==`function`){for(var e=0,t=0,n=performance.getEntriesByType(`resource`),r=0;r<n.length;r++){var i=n[r],a=i.transferSize,o=i.initiatorType,s=i.duration;if(a&&s&&Rd(o)){for(o=0,s=i.responseEnd,r+=1;r<n.length;r++){var c=n[r],l=c.startTime;if(l>s)break;var u=c.transferSize,d=c.initiatorType;u&&Rd(d)&&(c=c.responseEnd,o+=u*(c<s?1:(s-l)/(c-l)))}if(--r,t+=8*(a+o)/(i.duration/1e3),e++,10<e)break}}if(0<e)return t/e/1e6}return navigator.connection&&(e=navigator.connection.downlink,typeof e==`number`)?e:5}var Bd=null,Vd=null;function Hd(e){return e.nodeType===9?e:e.ownerDocument}function Ud(e){switch(e){case`http://www.w3.org/2000/svg`:return 1;case`http://www.w3.org/1998/Math/MathML`:return 2;default:return 0}}function Wd(e,t){if(e===0)switch(t){case`svg`:return 1;case`math`:return 2;default:return 0}return e===1&&t===`foreignObject`?0:e}function Gd(e,t){return e===`textarea`||e===`noscript`||typeof t.children==`string`||typeof t.children==`number`||typeof t.children==`bigint`||typeof t.dangerouslySetInnerHTML==`object`&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Kd=null;function qd(){var e=window.event;return e&&e.type===`popstate`?e===Kd?!1:(Kd=e,!0):(Kd=null,!1)}var Jd=typeof setTimeout==`function`?setTimeout:void 0,Yd=typeof clearTimeout==`function`?clearTimeout:void 0,Xd=typeof Promise==`function`?Promise:void 0,Zd=typeof queueMicrotask==`function`?queueMicrotask:Xd===void 0?Jd:function(e){return Xd.resolve(null).then(e).catch(Qd)};function Qd(e){setTimeout(function(){throw e})}function $d(e){return e===`head`}function ef(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&i.nodeType===8)if(n=i.data,n===`/$`||n===`/&`){if(r===0){e.removeChild(i),Np(t);return}r--}else if(n===`$`||n===`$?`||n===`$~`||n===`$!`||n===`&`)r++;else if(n===`html`)pf(e.ownerDocument.documentElement);else if(n===`head`){n=e.ownerDocument.head,pf(n);for(var a=n.firstChild;a;){var o=a.nextSibling,s=a.nodeName;a[gt]||s===`SCRIPT`||s===`STYLE`||s===`LINK`&&a.rel.toLowerCase()===`stylesheet`||n.removeChild(a),a=o}}else n===`body`&&pf(e.ownerDocument.body);n=i}while(n);Np(t)}function tf(e,t){var n=e;e=0;do{var r=n.nextSibling;if(n.nodeType===1?t?(n._stashedDisplay=n.style.display,n.style.display=`none`):(n.style.display=n._stashedDisplay||``,n.getAttribute(`style`)===``&&n.removeAttribute(`style`)):n.nodeType===3&&(t?(n._stashedText=n.nodeValue,n.nodeValue=``):n.nodeValue=n._stashedText||``),r&&r.nodeType===8)if(n=r.data,n===`/$`){if(e===0)break;e--}else n!==`$`&&n!==`$?`&&n!==`$~`&&n!==`$!`||e++;n=r}while(n)}function nf(e){var t=e.firstChild;for(t&&t.nodeType===10&&(t=t.nextSibling);t;){var n=t;switch(t=t.nextSibling,n.nodeName){case`HTML`:case`HEAD`:case`BODY`:nf(n),_t(n);continue;case`SCRIPT`:case`STYLE`:continue;case`LINK`:if(n.rel.toLowerCase()===`stylesheet`)continue}e.removeChild(n)}}function rf(e,t,n,r){for(;e.nodeType===1;){var i=n;if(e.nodeName.toLowerCase()!==t.toLowerCase()){if(!r&&(e.nodeName!==`INPUT`||e.type!==`hidden`))break}else if(r){if(!e[gt])switch(t){case`meta`:if(!e.hasAttribute(`itemprop`))break;return e;case`link`:if(a=e.getAttribute(`rel`),a===`stylesheet`&&e.hasAttribute(`data-precedence`)||a!==i.rel||e.getAttribute(`href`)!==(i.href==null||i.href===``?null:i.href)||e.getAttribute(`crossorigin`)!==(i.crossOrigin==null?null:i.crossOrigin)||e.getAttribute(`title`)!==(i.title==null?null:i.title))break;return e;case`style`:if(e.hasAttribute(`data-precedence`))break;return e;case`script`:if(a=e.getAttribute(`src`),(a!==(i.src==null?null:i.src)||e.getAttribute(`type`)!==(i.type==null?null:i.type)||e.getAttribute(`crossorigin`)!==(i.crossOrigin==null?null:i.crossOrigin))&&a&&e.hasAttribute(`async`)&&!e.hasAttribute(`itemprop`))break;return e;default:return e}}else if(t===`input`&&e.type===`hidden`){var a=i.name==null?null:``+i.name;if(i.type===`hidden`&&e.getAttribute(`name`)===a)return e}else return e;if(e=uf(e.nextSibling),e===null)break}return null}function af(e,t,n){if(t===``)return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!==`INPUT`||e.type!==`hidden`)&&!n||(e=uf(e.nextSibling),e===null))return null;return e}function of(e,t){for(;e.nodeType!==8;)if((e.nodeType!==1||e.nodeName!==`INPUT`||e.type!==`hidden`)&&!t||(e=uf(e.nextSibling),e===null))return null;return e}function sf(e){return e.data===`$?`||e.data===`$~`}function cf(e){return e.data===`$!`||e.data===`$?`&&e.ownerDocument.readyState!==`loading`}function lf(e,t){var n=e.ownerDocument;if(e.data===`$~`)e._reactRetry=t;else if(e.data!==`$?`||n.readyState!==`loading`)t();else{var r=function(){t(),n.removeEventListener(`DOMContentLoaded`,r)};n.addEventListener(`DOMContentLoaded`,r),e._reactRetry=r}}function uf(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t===`$`||t===`$!`||t===`$?`||t===`$~`||t===`&`||t===`F!`||t===`F`)break;if(t===`/$`||t===`/&`)return null}}return e}var df=null;function Q(e){e=e.nextSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n===`/$`||n===`/&`){if(t===0)return uf(e.nextSibling);t--}else n!==`$`&&n!==`$!`&&n!==`$?`&&n!==`$~`&&n!==`&`||t++}e=e.nextSibling}return null}function ff(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n===`$`||n===`$!`||n===`$?`||n===`$~`||n===`&`){if(t===0)return e;t--}else n!==`/$`&&n!==`/&`||t++}e=e.previousSibling}return null}function $(e,t,n){switch(t=Hd(n),e){case`html`:if(e=t.documentElement,!e)throw Error(i(452));return e;case`head`:if(e=t.head,!e)throw Error(i(453));return e;case`body`:if(e=t.body,!e)throw Error(i(454));return e;default:throw Error(i(451))}}function pf(e){for(var t=e.attributes;t.length;)e.removeAttributeNode(t[0]);_t(e)}var mf=new Map,hf=new Set;function gf(e){return typeof e.getRootNode==`function`?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var _f=P.d;P.d={f:vf,r:yf,D:Sf,C:Cf,L:wf,m:Tf,X:Df,S:Ef,M:Of};function vf(){var e=_f.f(),t=bu();return e||t}function yf(e){var t=yt(e);t!==null&&t.tag===5&&t.type===`form`?ws(t):_f.r(e)}var bf=typeof document>`u`?null:document;function xf(e,t,n){var r=bf;if(r&&typeof t==`string`&&t){var i=Lt(t);i=`link[rel="`+e+`"][href="`+i+`"]`,typeof n==`string`&&(i+=`[crossorigin="`+n+`"]`),hf.has(i)||(hf.add(i),e={rel:e,crossOrigin:n,href:t},r.querySelector(i)===null&&(t=r.createElement(`link`),Id(t,`link`,e),xt(t),r.head.appendChild(t)))}}function Sf(e){_f.D(e),xf(`dns-prefetch`,e,null)}function Cf(e,t){_f.C(e,t),xf(`preconnect`,e,t)}function wf(e,t,n){_f.L(e,t,n);var r=bf;if(r&&e&&t){var i=`link[rel="preload"][as="`+Lt(t)+`"]`;t===`image`&&n&&n.imageSrcSet?(i+=`[imagesrcset="`+Lt(n.imageSrcSet)+`"]`,typeof n.imageSizes==`string`&&(i+=`[imagesizes="`+Lt(n.imageSizes)+`"]`)):i+=`[href="`+Lt(e)+`"]`;var a=i;switch(t){case`style`:a=Af(e);break;case`script`:a=Pf(e)}mf.has(a)||(e=h({rel:`preload`,href:t===`image`&&n&&n.imageSrcSet?void 0:e,as:t},n),mf.set(a,e),r.querySelector(i)!==null||t===`style`&&r.querySelector(jf(a))||t===`script`&&r.querySelector(Ff(a))||(t=r.createElement(`link`),Id(t,`link`,e),xt(t),r.head.appendChild(t)))}}function Tf(e,t){_f.m(e,t);var n=bf;if(n&&e){var r=t&&typeof t.as==`string`?t.as:`script`,i=`link[rel="modulepreload"][as="`+Lt(r)+`"][href="`+Lt(e)+`"]`,a=i;switch(r){case`audioworklet`:case`paintworklet`:case`serviceworker`:case`sharedworker`:case`worker`:case`script`:a=Pf(e)}if(!mf.has(a)&&(e=h({rel:`modulepreload`,href:e},t),mf.set(a,e),n.querySelector(i)===null)){switch(r){case`audioworklet`:case`paintworklet`:case`serviceworker`:case`sharedworker`:case`worker`:case`script`:if(n.querySelector(Ff(a)))return}r=n.createElement(`link`),Id(r,`link`,e),xt(r),n.head.appendChild(r)}}}function Ef(e,t,n){_f.S(e,t,n);var r=bf;if(r&&e){var i=bt(r).hoistableStyles,a=Af(e);t||=`default`;var o=i.get(a);if(!o){var s={loading:0,preload:null};if(o=r.querySelector(jf(a)))s.loading=5;else{e=h({rel:`stylesheet`,href:e,"data-precedence":t},n),(n=mf.get(a))&&Rf(e,n);var c=o=r.createElement(`link`);xt(c),Id(c,`link`,e),c._p=new Promise(function(e,t){c.onload=e,c.onerror=t}),c.addEventListener(`load`,function(){s.loading|=1}),c.addEventListener(`error`,function(){s.loading|=2}),s.loading|=4,Lf(o,t,r)}o={type:`stylesheet`,instance:o,count:1,state:s},i.set(a,o)}}}function Df(e,t){_f.X(e,t);var n=bf;if(n&&e){var r=bt(n).hoistableScripts,i=Pf(e),a=r.get(i);a||(a=n.querySelector(Ff(i)),a||(e=h({src:e,async:!0},t),(t=mf.get(i))&&zf(e,t),a=n.createElement(`script`),xt(a),Id(a,`link`,e),n.head.appendChild(a)),a={type:`script`,instance:a,count:1,state:null},r.set(i,a))}}function Of(e,t){_f.M(e,t);var n=bf;if(n&&e){var r=bt(n).hoistableScripts,i=Pf(e),a=r.get(i);a||(a=n.querySelector(Ff(i)),a||(e=h({src:e,async:!0,type:`module`},t),(t=mf.get(i))&&zf(e,t),a=n.createElement(`script`),xt(a),Id(a,`link`,e),n.head.appendChild(a)),a={type:`script`,instance:a,count:1,state:null},r.set(i,a))}}function kf(e,t,n,r){var a=(a=ue.current)?gf(a):null;if(!a)throw Error(i(446));switch(e){case`meta`:case`title`:return null;case`style`:return typeof n.precedence==`string`&&typeof n.href==`string`?(t=Af(n.href),n=bt(a).hoistableStyles,r=n.get(t),r||(r={type:`style`,instance:null,count:0,state:null},n.set(t,r)),r):{type:`void`,instance:null,count:0,state:null};case`link`:if(n.rel===`stylesheet`&&typeof n.href==`string`&&typeof n.precedence==`string`){e=Af(n.href);var o=bt(a).hoistableStyles,s=o.get(e);if(s||(a=a.ownerDocument||a,s={type:`stylesheet`,instance:null,count:0,state:{loading:0,preload:null}},o.set(e,s),(o=a.querySelector(jf(e)))&&!o._p&&(s.instance=o,s.state.loading=5),mf.has(e)||(n={rel:`preload`,as:`style`,href:n.href,crossOrigin:n.crossOrigin,integrity:n.integrity,media:n.media,hrefLang:n.hrefLang,referrerPolicy:n.referrerPolicy},mf.set(e,n),o||Nf(a,e,n,s.state))),t&&r===null)throw Error(i(528,``));return s}if(t&&r!==null)throw Error(i(529,``));return null;case`script`:return t=n.async,n=n.src,typeof n==`string`&&t&&typeof t!=`function`&&typeof t!=`symbol`?(t=Pf(n),n=bt(a).hoistableScripts,r=n.get(t),r||(r={type:`script`,instance:null,count:0,state:null},n.set(t,r)),r):{type:`void`,instance:null,count:0,state:null};default:throw Error(i(444,e))}}function Af(e){return`href="`+Lt(e)+`"`}function jf(e){return`link[rel="stylesheet"][`+e+`]`}function Mf(e){return h({},e,{"data-precedence":e.precedence,precedence:null})}function Nf(e,t,n,r){e.querySelector(`link[rel="preload"][as="style"][`+t+`]`)?r.loading=1:(t=e.createElement(`link`),r.preload=t,t.addEventListener(`load`,function(){return r.loading|=1}),t.addEventListener(`error`,function(){return r.loading|=2}),Id(t,`link`,n),xt(t),e.head.appendChild(t))}function Pf(e){return`[src="`+Lt(e)+`"]`}function Ff(e){return`script[async]`+e}function If(e,t,n){if(t.count++,t.instance===null)switch(t.type){case`style`:var r=e.querySelector(`style[data-href~="`+Lt(n.href)+`"]`);if(r)return t.instance=r,xt(r),r;var a=h({},n,{"data-href":n.href,"data-precedence":n.precedence,href:null,precedence:null});return r=(e.ownerDocument||e).createElement(`style`),xt(r),Id(r,`style`,a),Lf(r,n.precedence,e),t.instance=r;case`stylesheet`:a=Af(n.href);var o=e.querySelector(jf(a));if(o)return t.state.loading|=4,t.instance=o,xt(o),o;r=Mf(n),(a=mf.get(a))&&Rf(r,a),o=(e.ownerDocument||e).createElement(`link`),xt(o);var s=o;return s._p=new Promise(function(e,t){s.onload=e,s.onerror=t}),Id(o,`link`,r),t.state.loading|=4,Lf(o,n.precedence,e),t.instance=o;case`script`:return o=Pf(n.src),(a=e.querySelector(Ff(o)))?(t.instance=a,xt(a),a):(r=n,(a=mf.get(o))&&(r=h({},n),zf(r,a)),e=e.ownerDocument||e,a=e.createElement(`script`),xt(a),Id(a,`link`,r),e.head.appendChild(a),t.instance=a);case`void`:return null;default:throw Error(i(443,t.type))}else t.type===`stylesheet`&&!(t.state.loading&4)&&(r=t.instance,t.state.loading|=4,Lf(r,n.precedence,e));return t.instance}function Lf(e,t,n){for(var r=n.querySelectorAll(`link[rel="stylesheet"][data-precedence],style[data-precedence]`),i=r.length?r[r.length-1]:null,a=i,o=0;o<r.length;o++){var s=r[o];if(s.dataset.precedence===t)a=s;else if(a!==i)break}a?a.parentNode.insertBefore(e,a.nextSibling):(t=n.nodeType===9?n.head:n,t.insertBefore(e,t.firstChild))}function Rf(e,t){e.crossOrigin??=t.crossOrigin,e.referrerPolicy??=t.referrerPolicy,e.title??=t.title}function zf(e,t){e.crossOrigin??=t.crossOrigin,e.referrerPolicy??=t.referrerPolicy,e.integrity??=t.integrity}var Bf=null;function Vf(e,t,n){if(Bf===null){var r=new Map,i=Bf=new Map;i.set(n,r)}else i=Bf,r=i.get(n),r||(r=new Map,i.set(n,r));if(r.has(e))return r;for(r.set(e,null),n=n.getElementsByTagName(e),i=0;i<n.length;i++){var a=n[i];if(!(a[gt]||a[lt]||e===`link`&&a.getAttribute(`rel`)===`stylesheet`)&&a.namespaceURI!==`http://www.w3.org/2000/svg`){var o=a.getAttribute(t)||``;o=e+o;var s=r.get(o);s?s.push(a):r.set(o,[a])}}return r}function Hf(e,t,n){e=e.ownerDocument||e,e.head.insertBefore(n,t===`title`?e.querySelector(`head > title`):null)}function Uf(e,t,n){if(n===1||t.itemProp!=null)return!1;switch(e){case`meta`:case`title`:return!0;case`style`:if(typeof t.precedence!=`string`||typeof t.href!=`string`||t.href===``)break;return!0;case`link`:if(typeof t.rel!=`string`||typeof t.href!=`string`||t.href===``||t.onLoad||t.onError)break;switch(t.rel){case`stylesheet`:return e=t.disabled,typeof t.precedence==`string`&&e==null;default:return!0}case`script`:if(t.async&&typeof t.async!=`function`&&typeof t.async!=`symbol`&&!t.onLoad&&!t.onError&&t.src&&typeof t.src==`string`)return!0}return!1}function Wf(e){return!(e.type===`stylesheet`&&!(e.state.loading&3))}function Gf(e,t,n,r){if(n.type===`stylesheet`&&(typeof r.media!=`string`||!1!==matchMedia(r.media).matches)&&!(n.state.loading&4)){if(n.instance===null){var i=Af(r.href),a=t.querySelector(jf(i));if(a){t=a._p,typeof t==`object`&&t&&typeof t.then==`function`&&(e.count++,e=Jf.bind(e),t.then(e,e)),n.state.loading|=4,n.instance=a,xt(a);return}a=t.ownerDocument||t,r=Mf(r),(i=mf.get(i))&&Rf(r,i),a=a.createElement(`link`),xt(a);var o=a;o._p=new Promise(function(e,t){o.onload=e,o.onerror=t}),Id(a,`link`,r),n.instance=a}e.stylesheets===null&&(e.stylesheets=new Map),e.stylesheets.set(n,t),(t=n.state.preload)&&!(n.state.loading&3)&&(e.count++,n=Jf.bind(e),t.addEventListener(`load`,n),t.addEventListener(`error`,n))}}var Kf=0;function qf(e,t){return e.stylesheets&&e.count===0&&Xf(e,e.stylesheets),0<e.count||0<e.imgCount?function(n){var r=setTimeout(function(){if(e.stylesheets&&Xf(e,e.stylesheets),e.unsuspend){var t=e.unsuspend;e.unsuspend=null,t()}},6e4+t);0<e.imgBytes&&Kf===0&&(Kf=62500*zd());var i=setTimeout(function(){if(e.waitingForImages=!1,e.count===0&&(e.stylesheets&&Xf(e,e.stylesheets),e.unsuspend)){var t=e.unsuspend;e.unsuspend=null,t()}},(e.imgBytes>Kf?50:800)+t);return e.unsuspend=n,function(){e.unsuspend=null,clearTimeout(r),clearTimeout(i)}}:null}function Jf(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Xf(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var Yf=null;function Xf(e,t){e.stylesheets=null,e.unsuspend!==null&&(e.count++,Yf=new Map,t.forEach(Zf,e),Yf=null,Jf.call(e))}function Zf(e,t){if(!(t.state.loading&4)){var n=Yf.get(e);if(n)var r=n.get(null);else{n=new Map,Yf.set(e,n);for(var i=e.querySelectorAll(`link[data-precedence],style[data-precedence]`),a=0;a<i.length;a++){var o=i[a];(o.nodeName===`LINK`||o.getAttribute(`media`)!==`not all`)&&(n.set(o.dataset.precedence,o),r=o)}r&&n.set(null,r)}i=t.instance,o=i.getAttribute(`data-precedence`),a=n.get(o)||r,a===r&&n.set(null,i),n.set(o,i),this.count++,r=Jf.bind(this),i.addEventListener(`load`,r),i.addEventListener(`error`,r),a?a.parentNode.insertBefore(i,a.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(i,e.firstChild)),t.state.loading|=4}}var Qf={$$typeof:C,Provider:null,Consumer:null,_currentValue:re,_currentValue2:re,_threadCount:0};function $f(e,t,n,r,i,a,o,s,c){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Qe(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Qe(0),this.hiddenUpdates=Qe(null),this.identifierPrefix=r,this.onUncaughtError=i,this.onCaughtError=a,this.onRecoverableError=o,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=c,this.incompleteTransitions=new Map}function ep(e,t,n,r,i,a,o,s,c,l,u,d){return e=new $f(e,t,n,o,c,l,u,d,s),t=1,!0===a&&(t|=24),a=oi(3,null,null,t),e.current=a,a.stateNode=e,t=oa(),t.refCount++,e.pooledCache=t,t.refCount++,a.memoizedState={element:r,isDehydrated:n,cache:t},za(a),e}function tp(e){return e?(e=ii,e):ii}function np(e,t,n,r,i,a){i=tp(i),r.context===null?r.context=i:r.pendingContext=i,r=Va(t),r.payload={element:n},a=a===void 0?null:a,a!==null&&(r.callback=a),n=Ha(e,r,t),n!==null&&(hu(n,e,t),Ua(n,e,t))}function rp(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function ip(e,t){rp(e,t),(e=e.alternate)&&rp(e,t)}function ap(e){if(e.tag===13||e.tag===31){var t=ti(e,67108864);t!==null&&hu(t,e,67108864),ip(e,67108864)}}function op(e){if(e.tag===13||e.tag===31){var t=pu();t=it(t);var n=ti(e,t);n!==null&&hu(n,e,t),ip(e,t)}}var sp=!0;function cp(e,t,n,r){var i=N.T;N.T=null;var a=P.p;try{P.p=2,up(e,t,n,r)}finally{P.p=a,N.T=i}}function lp(e,t,n,r){var i=N.T;N.T=null;var a=P.p;try{P.p=8,up(e,t,n,r)}finally{P.p=a,N.T=i}}function up(e,t,n,r){if(sp){var i=dp(r);if(i===null)Td(e,t,r,fp,n),Cp(e,r);else if(Tp(i,e,t,n,r))r.stopPropagation();else if(Cp(e,r),t&4&&-1<Sp.indexOf(e)){for(;i!==null;){var a=yt(i);if(a!==null)switch(a.tag){case 3:if(a=a.stateNode,a.current.memoizedState.isDehydrated){var o=qe(a.pendingLanes);if(o!==0){var s=a;for(s.pendingLanes|=2,s.entangledLanes|=2;o;){var c=1<<31-Be(o);s.entanglements[1]|=c,o&=~c}id(a),!(Ll&6)&&(nu=Oe()+500,ad(0,!1))}}break;case 31:case 13:s=ti(a,2),s!==null&&hu(s,a,2),bu(),ip(a,2)}if(a=dp(r),a===null&&Td(e,t,r,fp,n),a===i)break;i=a}i!==null&&r.stopPropagation()}else Td(e,t,r,null,n)}}function dp(e){return e=en(e),pp(e)}var fp=null;function pp(e){if(fp=null,e=vt(e),e!==null){var t=o(e);if(t===null)e=null;else{var n=t.tag;if(n===13){if(e=s(t),e!==null)return e;e=null}else if(n===31){if(e=c(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null)}}return fp=e,null}function mp(e){switch(e){case`beforetoggle`:case`cancel`:case`click`:case`close`:case`contextmenu`:case`copy`:case`cut`:case`auxclick`:case`dblclick`:case`dragend`:case`dragstart`:case`drop`:case`focusin`:case`focusout`:case`input`:case`invalid`:case`keydown`:case`keypress`:case`keyup`:case`mousedown`:case`mouseup`:case`paste`:case`pause`:case`play`:case`pointercancel`:case`pointerdown`:case`pointerup`:case`ratechange`:case`reset`:case`resize`:case`seeked`:case`submit`:case`toggle`:case`touchcancel`:case`touchend`:case`touchstart`:case`volumechange`:case`change`:case`selectionchange`:case`textInput`:case`compositionstart`:case`compositionend`:case`compositionupdate`:case`beforeblur`:case`afterblur`:case`beforeinput`:case`blur`:case`fullscreenchange`:case`focus`:case`hashchange`:case`popstate`:case`select`:case`selectstart`:return 2;case`drag`:case`dragenter`:case`dragexit`:case`dragleave`:case`dragover`:case`mousemove`:case`mouseout`:case`mouseover`:case`pointermove`:case`pointerout`:case`pointerover`:case`scroll`:case`touchmove`:case`wheel`:case`mouseenter`:case`mouseleave`:case`pointerenter`:case`pointerleave`:return 8;case`message`:switch(ke()){case Ae:return 2;case je:return 8;case Me:case Ne:return 32;case Pe:return 268435456;default:return 32}default:return 32}}var hp=!1,gp=null,_p=null,vp=null,yp=new Map,bp=new Map,xp=[],Sp=`mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset`.split(` `);function Cp(e,t){switch(e){case`focusin`:case`focusout`:gp=null;break;case`dragenter`:case`dragleave`:_p=null;break;case`mouseover`:case`mouseout`:vp=null;break;case`pointerover`:case`pointerout`:yp.delete(t.pointerId);break;case`gotpointercapture`:case`lostpointercapture`:bp.delete(t.pointerId)}}function wp(e,t,n,r,i,a){return e===null||e.nativeEvent!==a?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:a,targetContainers:[i]},t!==null&&(t=yt(t),t!==null&&ap(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,i!==null&&t.indexOf(i)===-1&&t.push(i),e)}function Tp(e,t,n,r,i){switch(t){case`focusin`:return gp=wp(gp,e,t,n,r,i),!0;case`dragenter`:return _p=wp(_p,e,t,n,r,i),!0;case`mouseover`:return vp=wp(vp,e,t,n,r,i),!0;case`pointerover`:var a=i.pointerId;return yp.set(a,wp(yp.get(a)||null,e,t,n,r,i)),!0;case`gotpointercapture`:return a=i.pointerId,bp.set(a,wp(bp.get(a)||null,e,t,n,r,i)),!0}return!1}function Ep(e){var t=vt(e.target);if(t!==null){var n=o(t);if(n!==null){if(t=n.tag,t===13){if(t=s(n),t!==null){e.blockedOn=t,st(e.priority,function(){op(n)});return}}else if(t===31){if(t=c(n),t!==null){e.blockedOn=t,st(e.priority,function(){op(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Dp(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=dp(e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);$t=r,n.target.dispatchEvent(r),$t=null}else return t=yt(n),t!==null&&ap(t),e.blockedOn=n,!1;t.shift()}return!0}function Op(e,t,n){Dp(e)&&n.delete(t)}function kp(){hp=!1,gp!==null&&Dp(gp)&&(gp=null),_p!==null&&Dp(_p)&&(_p=null),vp!==null&&Dp(vp)&&(vp=null),yp.forEach(Op),bp.forEach(Op)}function Ap(e,n){e.blockedOn===n&&(e.blockedOn=null,hp||(hp=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,kp)))}var jp=null;function Mp(e){jp!==e&&(jp=e,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){jp===e&&(jp=null);for(var t=0;t<e.length;t+=3){var n=e[t],r=e[t+1],i=e[t+2];if(typeof r!=`function`){if(pp(r||n)===null)continue;break}var a=yt(n);a!==null&&(e.splice(t,3),t-=3,Ss(a,{pending:!0,data:i,method:n.method,action:r},r,i))}}))}function Np(e){function t(t){return Ap(t,e)}gp!==null&&Ap(gp,e),_p!==null&&Ap(_p,e),vp!==null&&Ap(vp,e),yp.forEach(t),bp.forEach(t);for(var n=0;n<xp.length;n++){var r=xp[n];r.blockedOn===e&&(r.blockedOn=null)}for(;0<xp.length&&(n=xp[0],n.blockedOn===null);)Ep(n),n.blockedOn===null&&xp.shift();if(n=(e.ownerDocument||e).$$reactFormReplay,n!=null)for(r=0;r<n.length;r+=3){var i=n[r],a=n[r+1],o=i[ut]||null;if(typeof a==`function`)o||Mp(n);else if(o){var s=null;if(a&&a.hasAttribute(`formAction`)){if(i=a,o=a[ut]||null)s=o.formAction;else if(pp(i)!==null)continue}else s=o.action;typeof s==`function`?n[r+1]=s:(n.splice(r,3),r-=3),Mp(n)}}}function Pp(){function e(e){e.canIntercept&&e.info===`react-transition`&&e.intercept({handler:function(){return new Promise(function(e){return i=e})},focusReset:`manual`,scroll:`manual`})}function t(){i!==null&&(i(),i=null),r||setTimeout(n,20)}function n(){if(!r&&!navigation.transition){var e=navigation.currentEntry;e&&e.url!=null&&navigation.navigate(e.url,{state:e.getState(),info:`react-transition`,history:`replace`})}}if(typeof navigation==`object`){var r=!1,i=null;return navigation.addEventListener(`navigate`,e),navigation.addEventListener(`navigatesuccess`,t),navigation.addEventListener(`navigateerror`,t),setTimeout(n,100),function(){r=!0,navigation.removeEventListener(`navigate`,e),navigation.removeEventListener(`navigatesuccess`,t),navigation.removeEventListener(`navigateerror`,t),i!==null&&(i(),i=null)}}}function Fp(e){this._internalRoot=e}Ip.prototype.render=Fp.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(i(409));var n=t.current;np(n,pu(),e,t,null,null)},Ip.prototype.unmount=Fp.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;np(e.current,2,null,e,null,null),bu(),t[dt]=null}};function Ip(e){this._internalRoot=e}Ip.prototype.unstable_scheduleHydration=function(e){if(e){var t=ot();e={blockedOn:null,target:e,priority:t};for(var n=0;n<xp.length&&t!==0&&t<xp[n].priority;n++);xp.splice(n,0,e),n===0&&Ep(e)}};var Lp=n.version;if(Lp!==`19.2.3`)throw Error(i(527,Lp,`19.2.3`));P.findDOMNode=function(e){var t=e._reactInternals;if(t===void 0)throw typeof e.render==`function`?Error(i(188)):(e=Object.keys(e).join(`,`),Error(i(268,e)));return e=d(t),e=e===null?null:p(e),e=e===null?null:e.stateNode,e};var Rp={bundleType:0,version:`19.2.3`,rendererPackageName:`react-dom`,currentDispatcherRef:N,reconcilerVersion:`19.2.3`};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<`u`){var zp=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!zp.isDisabled&&zp.supportsFiber)try{Le=zp.inject(Rp),Re=zp}catch{}}e.createRoot=function(e,t){if(!a(e))throw Error(i(299));var n=!1,r=``,o=Ws,s=Gs,c=Ks;return t!=null&&(!0===t.unstable_strictMode&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onUncaughtError!==void 0&&(o=t.onUncaughtError),t.onCaughtError!==void 0&&(s=t.onCaughtError),t.onRecoverableError!==void 0&&(c=t.onRecoverableError)),t=ep(e,1,!1,null,null,n,r,null,o,s,c,Pp),e[dt]=t.current,Cd(e),new Fp(t)}})),g=o(((e,t)=>{function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>`u`||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!=`function`))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}n(),t.exports=h()})),_=e=>e.replace(/([a-z0-9])([A-Z])/g,`$1-$2`).toLowerCase(),v=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,n)=>n?n.toUpperCase():t.toLowerCase()),y=e=>{let t=v(e);return t.charAt(0).toUpperCase()+t.slice(1)},b=(...e)=>e.filter((e,t,n)=>!!e&&e.trim()!==``&&n.indexOf(e)===t).join(` `).trim(),x=e=>{for(let t in e)if(t.startsWith(`aria-`)||t===`role`||t===`title`)return!0},S={xmlns:`http://www.w3.org/2000/svg`,width:24,height:24,viewBox:`0 0 24 24`,fill:`none`,stroke:`currentColor`,strokeWidth:2,strokeLinecap:`round`,strokeLinejoin:`round`},C=u(),w=(0,C.forwardRef)(({color:e=`currentColor`,size:t=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:i=``,children:a,iconNode:o,...s},c)=>(0,C.createElement)(`svg`,{ref:c,...S,width:t,height:t,stroke:e,strokeWidth:r?Number(n)*24/Number(t):n,className:b(`lucide`,i),...!a&&!x(s)&&{"aria-hidden":`true`},...s},[...o.map(([e,t])=>(0,C.createElement)(e,t)),...Array.isArray(a)?a:[a]])),T=(e,t)=>{let n=(0,C.forwardRef)(({className:n,...r},i)=>(0,C.createElement)(w,{ref:i,iconNode:t,className:b(`lucide-${_(y(e))}`,`lucide-${e}`,n),...r}));return n.displayName=y(e),n},E=T(`arrow-right`,[[`path`,{d:`M5 12h14`,key:`1ays0h`}],[`path`,{d:`m12 5 7 7-7 7`,key:`xquz4c`}]]),D=T(`book-open`,[[`path`,{d:`M12 7v14`,key:`1akyts`}],[`path`,{d:`M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z`,key:`ruj8y`}]]),O=T(`box`,[[`path`,{d:`M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z`,key:`hh9hay`}],[`path`,{d:`m3.3 7 8.7 5 8.7-5`,key:`g66t2b`}],[`path`,{d:`M12 22V12`,key:`d0xqtd`}]]),k=T(`check`,[[`path`,{d:`M20 6 9 17l-5-5`,key:`1gmf2c`}]]),A=T(`chevron-down`,[[`path`,{d:`m6 9 6 6 6-6`,key:`qrunsl`}]]),j=T(`chevron-up`,[[`path`,{d:`m18 15-6-6-6 6`,key:`153udz`}]]),M=T(`circle-alert`,[[`circle`,{cx:`12`,cy:`12`,r:`10`,key:`1mglay`}],[`line`,{x1:`12`,x2:`12`,y1:`8`,y2:`12`,key:`1pkeuh`}],[`line`,{x1:`12`,x2:`12.01`,y1:`16`,y2:`16`,key:`4dfq90`}]]),ee=T(`circle-arrow-up`,[[`circle`,{cx:`12`,cy:`12`,r:`10`,key:`1mglay`}],[`path`,{d:`m16 12-4-4-4 4`,key:`177agl`}],[`path`,{d:`M12 16V8`,key:`1sbj14`}]]),te=T(`circle-check-big`,[[`path`,{d:`M21.801 10A10 10 0 1 1 17 3.335`,key:`yps3ct`}],[`path`,{d:`m9 11 3 3L22 4`,key:`1pflzl`}]]),ne=T(`clipboard`,[[`rect`,{width:`8`,height:`4`,x:`8`,y:`2`,rx:`1`,ry:`1`,key:`tgr4d6`}],[`path`,{d:`M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2`,key:`116196`}]]),N=T(`clock`,[[`path`,{d:`M12 6v6l4 2`,key:`mmk7yg`}],[`circle`,{cx:`12`,cy:`12`,r:`10`,key:`1mglay`}]]),P=T(`copy`,[[`rect`,{width:`14`,height:`14`,x:`8`,y:`8`,rx:`2`,ry:`2`,key:`17jyea`}],[`path`,{d:`M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2`,key:`zix9uf`}]]),re=T(`database`,[[`ellipse`,{cx:`12`,cy:`5`,rx:`9`,ry:`3`,key:`msslwz`}],[`path`,{d:`M3 5V19A9 3 0 0 0 21 19V5`,key:`1wlel7`}],[`path`,{d:`M3 12A9 3 0 0 0 21 12`,key:`mv7ke4`}]]),ie=T(`download`,[[`path`,{d:`M12 15V3`,key:`m9g1x1`}],[`path`,{d:`M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4`,key:`ih7n3h`}],[`path`,{d:`m7 10 5 5 5-5`,key:`brsn70`}]]),ae=T(`eye-off`,[[`path`,{d:`M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49`,key:`ct8e1f`}],[`path`,{d:`M14.084 14.158a3 3 0 0 1-4.242-4.242`,key:`151rxh`}],[`path`,{d:`M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143`,key:`13bj9a`}],[`path`,{d:`m2 2 20 20`,key:`1ooewy`}]]),oe=T(`eye`,[[`path`,{d:`M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0`,key:`1nclc0`}],[`circle`,{cx:`12`,cy:`12`,r:`3`,key:`1v7zrd`}]]),se=T(`file-braces`,[[`path`,{d:`M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z`,key:`1oefj6`}],[`path`,{d:`M14 2v5a1 1 0 0 0 1 1h5`,key:`wfsgrz`}],[`path`,{d:`M10 12a1 1 0 0 0-1 1v1a1 1 0 0 1-1 1 1 1 0 0 1 1 1v1a1 1 0 0 0 1 1`,key:`1oajmo`}],[`path`,{d:`M14 18a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1 1 1 0 0 1-1-1v-1a1 1 0 0 0-1-1`,key:`mpwhp6`}]]),F=T(`file-code`,[[`path`,{d:`M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z`,key:`1oefj6`}],[`path`,{d:`M14 2v5a1 1 0 0 0 1 1h5`,key:`wfsgrz`}],[`path`,{d:`M10 12.5 8 15l2 2.5`,key:`1tg20x`}],[`path`,{d:`m14 12.5 2 2.5-2 2.5`,key:`yinavb`}]]),ce=T(`file-text`,[[`path`,{d:`M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z`,key:`1oefj6`}],[`path`,{d:`M14 2v5a1 1 0 0 0 1 1h5`,key:`wfsgrz`}],[`path`,{d:`M10 9H8`,key:`b1mrlr`}],[`path`,{d:`M16 13H8`,key:`t4e002`}],[`path`,{d:`M16 17H8`,key:`z1uh3a`}]]),le=T(`folder-open`,[[`path`,{d:`m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2`,key:`usdka0`}]]),ue=T(`layers`,[[`path`,{d:`M12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83z`,key:`zw3jo`}],[`path`,{d:`M2 12a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 12`,key:`1wduqc`}],[`path`,{d:`M2 17a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 17`,key:`kqbvx6`}]]),de=T(`layout-template`,[[`rect`,{width:`18`,height:`7`,x:`3`,y:`3`,rx:`1`,key:`f1a2em`}],[`rect`,{width:`9`,height:`7`,x:`3`,y:`14`,rx:`1`,key:`jqznyg`}],[`rect`,{width:`5`,height:`7`,x:`16`,y:`14`,rx:`1`,key:`q5h2i8`}]]),fe=T(`lock-open`,[[`rect`,{width:`18`,height:`11`,x:`3`,y:`11`,rx:`2`,ry:`2`,key:`1w4ew1`}],[`path`,{d:`M7 11V7a5 5 0 0 1 9.9-1`,key:`1mm8w8`}]]),pe=T(`lock`,[[`rect`,{width:`18`,height:`11`,x:`3`,y:`11`,rx:`2`,ry:`2`,key:`1w4ew1`}],[`path`,{d:`M7 11V7a5 5 0 0 1 10 0v4`,key:`fwvmzm`}]]),me=T(`octagon-alert`,[[`path`,{d:`M12 16h.01`,key:`1drbdi`}],[`path`,{d:`M12 8v4`,key:`1got3b`}],[`path`,{d:`M15.312 2a2 2 0 0 1 1.414.586l4.688 4.688A2 2 0 0 1 22 8.688v6.624a2 2 0 0 1-.586 1.414l-4.688 4.688a2 2 0 0 1-1.414.586H8.688a2 2 0 0 1-1.414-.586l-4.688-4.688A2 2 0 0 1 2 15.312V8.688a2 2 0 0 1 .586-1.414l4.688-4.688A2 2 0 0 1 8.688 2z`,key:`1fd625`}]]),he=T(`package`,[[`path`,{d:`M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z`,key:`1a0edw`}],[`path`,{d:`M12 22V12`,key:`d0xqtd`}],[`polyline`,{points:`3.29 7 12 12 20.71 7`,key:`ousv84`}],[`path`,{d:`m7.5 4.27 9 5.15`,key:`1c824w`}]]),ge=T(`pen-tool`,[[`path`,{d:`M15.707 21.293a1 1 0 0 1-1.414 0l-1.586-1.586a1 1 0 0 1 0-1.414l5.586-5.586a1 1 0 0 1 1.414 0l1.586 1.586a1 1 0 0 1 0 1.414z`,key:`nt11vn`}],[`path`,{d:`m18 13-1.375-6.874a1 1 0 0 0-.746-.776L3.235 2.028a1 1 0 0 0-1.207 1.207L5.35 15.879a1 1 0 0 0 .776.746L13 18`,key:`15qc1e`}],[`path`,{d:`m2.3 2.3 7.286 7.286`,key:`1wuzzi`}],[`circle`,{cx:`11`,cy:`11`,r:`2`,key:`xmgehs`}]]),_e=T(`plus`,[[`path`,{d:`M5 12h14`,key:`1ays0h`}],[`path`,{d:`M12 5v14`,key:`s699le`}]]),ve=T(`refresh-cw`,[[`path`,{d:`M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8`,key:`v9h5vc`}],[`path`,{d:`M21 3v5h-5`,key:`1q7to0`}],[`path`,{d:`M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16`,key:`3uifl3`}],[`path`,{d:`M8 16H3v5`,key:`1cv678`}]]),ye=T(`rotate-ccw`,[[`path`,{d:`M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8`,key:`1357e3`}],[`path`,{d:`M3 3v5h5`,key:`1xhq8a`}]]),be=T(`save`,[[`path`,{d:`M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z`,key:`1c8476`}],[`path`,{d:`M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7`,key:`1ydtos`}],[`path`,{d:`M7 3v4a1 1 0 0 0 1 1h7`,key:`t51u73`}]]),xe=T(`scissors`,[[`circle`,{cx:`6`,cy:`6`,r:`3`,key:`1lh9wr`}],[`path`,{d:`M8.12 8.12 12 12`,key:`1alkpv`}],[`path`,{d:`M20 4 8.12 15.88`,key:`xgtan2`}],[`circle`,{cx:`6`,cy:`18`,r:`3`,key:`fqmcym`}],[`path`,{d:`M14.8 14.8 20 20`,key:`ptml3r`}]]),Se=T(`search`,[[`path`,{d:`m21 21-4.34-4.34`,key:`14j7rj`}],[`circle`,{cx:`11`,cy:`11`,r:`8`,key:`4ej97u`}]]),Ce=T(`settings`,[[`path`,{d:`M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915`,key:`1i5ecw`}],[`circle`,{cx:`12`,cy:`12`,r:`3`,key:`1v7zrd`}]]),we=T(`shield-check`,[[`path`,{d:`M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z`,key:`oel41y`}],[`path`,{d:`m9 12 2 2 4-4`,key:`dzmm74`}]]),Te=T(`sparkles`,[[`path`,{d:`M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z`,key:`1s2grr`}],[`path`,{d:`M20 2v4`,key:`1rf3ol`}],[`path`,{d:`M22 4h-4`,key:`gwowj6`}],[`circle`,{cx:`4`,cy:`20`,r:`2`,key:`6kqj1y`}]]),Ee=T(`square-pen`,[[`path`,{d:`M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7`,key:`1m0v6g`}],[`path`,{d:`M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z`,key:`ohrbg2`}]]),De=T(`terminal`,[[`path`,{d:`M12 19h8`,key:`baeox8`}],[`path`,{d:`m4 17 6-6-6-6`,key:`1yngyt`}]]),Oe=T(`trash-2`,[[`path`,{d:`M10 11v6`,key:`nco0om`}],[`path`,{d:`M14 11v6`,key:`outv1u`}],[`path`,{d:`M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6`,key:`miytrc`}],[`path`,{d:`M3 6h18`,key:`d0wm0j`}],[`path`,{d:`M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2`,key:`e791ji`}]]),ke=T(`triangle-alert`,[[`path`,{d:`m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3`,key:`wmoenq`}],[`path`,{d:`M12 9v4`,key:`juzpu7`}],[`path`,{d:`M12 17h.01`,key:`p32p05`}]]),Ae=T(`upload`,[[`path`,{d:`M12 3v12`,key:`1x0j5s`}],[`path`,{d:`m17 8-5-5-5 5`,key:`7q97r8`}],[`path`,{d:`M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4`,key:`ih7n3h`}]]),je=T(`wrench`,[[`path`,{d:`M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.106-3.105c.32-.322.863-.22.983.218a6 6 0 0 1-8.259 7.057l-7.91 7.91a1 1 0 0 1-2.999-3l7.91-7.91a6 6 0 0 1 7.057-8.259c.438.12.54.662.219.984z`,key:`1ngwbx`}]]),Me=T(`x`,[[`path`,{d:`M18 6 6 18`,key:`1bl5f8`}],[`path`,{d:`m6 6 12 12`,key:`d8bk6v`}]]),Ne=T(`zap`,[[`path`,{d:`M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z`,key:`1xq2db`}]]),Pe=c(g(),1),Fe=()=>void 0,Ie=function(e){let t=[],n=0;for(let r=0;r<e.length;r++){let i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=i&63|128):(i&64512)==55296&&r+1<e.length&&(e.charCodeAt(r+1)&64512)==56320?(i=65536+((i&1023)<<10)+(e.charCodeAt(++r)&1023),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=i&63|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=i&63|128)}return t},Le=function(e){let t=[],n=0,r=0;for(;n<e.length;){let i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){let a=e[n++];t[r++]=String.fromCharCode((i&31)<<6|a&63)}else if(i>239&&i<365){let a=e[n++],o=e[n++],s=e[n++],c=((i&7)<<18|(a&63)<<12|(o&63)<<6|s&63)-65536;t[r++]=String.fromCharCode(55296+(c>>10)),t[r++]=String.fromCharCode(56320+(c&1023))}else{let a=e[n++],o=e[n++];t[r++]=String.fromCharCode((i&15)<<12|(a&63)<<6|o&63)}}return t.join(``)},Re={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:`ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789`,get ENCODED_VALS(){return this.ENCODED_VALS_BASE+`+/=`},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+`-_.`},HAS_NATIVE_SUPPORT:typeof atob==`function`,encodeByteArray(e,t){if(!Array.isArray(e))throw Error(`encodeByteArray takes an array as a parameter`);this.init_();let n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let t=0;t<e.length;t+=3){let i=e[t],a=t+1<e.length,o=a?e[t+1]:0,s=t+2<e.length,c=s?e[t+2]:0,l=i>>2,u=(i&3)<<4|o>>4,d=(o&15)<<2|c>>6,f=c&63;s||(f=64,a||(d=64)),r.push(n[l],n[u],n[d],n[f])}return r.join(``)},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(Ie(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):Le(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();let n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let t=0;t<e.length;){let i=n[e.charAt(t++)],a=t<e.length?n[e.charAt(t)]:0;++t;let o=t<e.length?n[e.charAt(t)]:64;++t;let s=t<e.length?n[e.charAt(t)]:64;if(++t,i==null||a==null||o==null||s==null)throw new ze;let c=i<<2|a>>4;if(r.push(c),o!==64){let e=a<<4&240|o>>2;if(r.push(e),s!==64){let e=o<<6&192|s;r.push(e)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}},ze=class extends Error{constructor(){super(...arguments),this.name=`DecodeBase64StringError`}},Be=function(e){let t=Ie(e);return Re.encodeByteArray(t,!0)},Ve=function(e){return Be(e).replace(/\./g,``)},He=function(e){try{return Re.decodeString(e,!0)}catch(e){console.error(`base64Decode failed: `,e)}return null};function Ue(){if(typeof self<`u`)return self;if(typeof window<`u`)return window;if(typeof global<`u`)return global;throw Error(`Unable to locate global object.`)}var We=()=>Ue().__FIREBASE_DEFAULTS__,Ge=()=>{if(typeof process>`u`)return;let e={}.__FIREBASE_DEFAULTS__;if(e)return JSON.parse(e)},Ke=()=>{if(typeof document>`u`)return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let t=e&&He(e[1]);return t&&JSON.parse(t)},qe=()=>{try{return Fe()||We()||Ge()||Ke()}catch(e){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${e}`);return}};function Je(e){try{return(e.startsWith(`http://`)||e.startsWith(`https://`)?new URL(e).hostname:e).endsWith(`.cloudworkstations.dev`)}catch{return!1}}function Ye(){return typeof navigator<`u`&&typeof navigator.userAgent==`string`?navigator.userAgent:``}function Xe(){return typeof window<`u`&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ye())}function Ze(){let e=qe()?.forceEnvironment;if(e===`node`)return!0;if(e===`browser`)return!1;try{return Object.prototype.toString.call(global.process)===`[object process]`}catch{return!1}}function Qe(){return typeof navigator<`u`&&navigator.userAgent===`Cloudflare-Workers`}function $e(){let e=typeof chrome==`object`?chrome.runtime:typeof browser==`object`?browser.runtime:void 0;return typeof e==`object`&&e.id!==void 0}function et(){return typeof navigator==`object`&&navigator.product===`ReactNative`}function tt(){let e=Ye();return e.indexOf(`MSIE `)>=0||e.indexOf(`Trident/`)>=0}function nt(){return!Ze()&&!!navigator.userAgent&&navigator.userAgent.includes(`Safari`)&&!navigator.userAgent.includes(`Chrome`)}function rt(){try{return typeof indexedDB==`object`}catch{return!1}}function it(){return new Promise((e,t)=>{try{let n=!0,r=`validate-browser-context-for-indexeddb-analytics-module`,i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{t(i.error?.message||``)}}catch(e){t(e)}})}var at=`FirebaseError`,ot=class e extends Error{constructor(t,n,r){super(n),this.code=t,this.customData=r,this.name=at,Object.setPrototypeOf(this,e.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,st.prototype.create)}},st=class{constructor(e,t,n){this.service=e,this.serviceName=t,this.errors=n}create(e,...t){let n=t[0]||{},r=`${this.service}/${e}`,i=this.errors[e],a=i?ct(i,n):`Error`;return new ot(r,`${this.serviceName}: ${a} (${r}).`,n)}};function ct(e,t){return e.replace(lt,(e,n)=>{let r=t[n];return r==null?`<${n}?>`:String(r)})}var lt=/\{\$([^}]+)}/g;function ut(e){let t=[];for(let[n,r]of Object.entries(e))Array.isArray(r)?r.forEach(e=>{t.push(encodeURIComponent(n)+`=`+encodeURIComponent(e))}):t.push(encodeURIComponent(n)+`=`+encodeURIComponent(r));return t.length?`&`+t.join(`&`):``}function dt(e){let t={};return e.replace(/^\?/,``).split(`&`).forEach(e=>{if(e){let[n,r]=e.split(`=`);t[decodeURIComponent(n)]=decodeURIComponent(r)}}),t}function ft(e){let t=e.indexOf(`?`);if(!t)return``;let n=e.indexOf(`#`,t);return e.substring(t,n>0?n:void 0)}function pt(e,t){let n=new mt(e,t);return n.subscribe.bind(n)}var mt=class{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(e=>{this.error(e)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,n){let r;if(e===void 0&&t===void 0&&n===void 0)throw Error(`Missing Observer.`);r=ht(e,[`next`,`error`,`complete`])?e:{next:e,error:t,complete:n},r.next===void 0&&(r.next=gt),r.error===void 0&&(r.error=gt),r.complete===void 0&&(r.complete=gt);let i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch{}}),this.observers.push(r),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],--this.observerCount,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(e){typeof console<`u`&&console.error&&console.error(e)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}};function ht(e,t){if(typeof e!=`object`||!e)return!1;for(let n of t)if(n in e&&typeof e[n]==`function`)return!0;return!1}function gt(){}function _t(e){return e&&e._delegate?e._delegate:e}var vt=class{constructor(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode=`LAZY`,this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}},yt=[],I;(function(e){e[e.DEBUG=0]=`DEBUG`,e[e.VERBOSE=1]=`VERBOSE`,e[e.INFO=2]=`INFO`,e[e.WARN=3]=`WARN`,e[e.ERROR=4]=`ERROR`,e[e.SILENT=5]=`SILENT`})(I||={});var bt={debug:I.DEBUG,verbose:I.VERBOSE,info:I.INFO,warn:I.WARN,error:I.ERROR,silent:I.SILENT},xt=I.INFO,St={[I.DEBUG]:`log`,[I.VERBOSE]:`log`,[I.INFO]:`info`,[I.WARN]:`warn`,[I.ERROR]:`error`},Ct=(e,t,...n)=>{if(t<e.logLevel)return;let r=new Date().toISOString(),i=St[t];if(i)console[i](`[${r}]  ${e.name}:`,...n);else throw Error(`Attempted to log a message with an invalid logType (value: ${t})`)},wt=class{constructor(e){this.name=e,this._logLevel=xt,this._logHandler=Ct,this._userLogHandler=null,yt.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in I))throw TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e==`string`?bt[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!=`function`)throw TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,I.DEBUG,...e),this._logHandler(this,I.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,I.VERBOSE,...e),this._logHandler(this,I.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,I.INFO,...e),this._logHandler(this,I.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,I.WARN,...e),this._logHandler(this,I.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,I.ERROR,...e),this._logHandler(this,I.ERROR,...e)}},Tt=(e,t)=>t.some(t=>e instanceof t),Et,Dt;function Ot(){return Et||=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction]}function kt(){return Dt||=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey]}var At=new WeakMap,jt=new WeakMap,Mt=new WeakMap,L=new WeakMap,R=new WeakMap;function z(e){let t=new Promise((t,n)=>{let r=()=>{e.removeEventListener(`success`,i),e.removeEventListener(`error`,a)},i=()=>{t(Rt(e.result)),r()},a=()=>{n(e.error),r()};e.addEventListener(`success`,i),e.addEventListener(`error`,a)});return t.then(t=>{t instanceof IDBCursor&&At.set(t,e)}).catch(()=>{}),R.set(t,e),t}function Nt(e){if(jt.has(e))return;let t=new Promise((t,n)=>{let r=()=>{e.removeEventListener(`complete`,i),e.removeEventListener(`error`,a),e.removeEventListener(`abort`,a)},i=()=>{t(),r()},a=()=>{n(e.error||new DOMException(`AbortError`,`AbortError`)),r()};e.addEventListener(`complete`,i),e.addEventListener(`error`,a),e.addEventListener(`abort`,a)});jt.set(e,t)}var Pt={get(e,t,n){if(e instanceof IDBTransaction){if(t===`done`)return jt.get(e);if(t===`objectStoreNames`)return e.objectStoreNames||Mt.get(e);if(t===`store`)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Rt(e[t])},set(e,t,n){return e[t]=n,!0},has(e,t){return e instanceof IDBTransaction&&(t===`done`||t===`store`)?!0:t in e}};function Ft(e){Pt=e(Pt)}function It(e){return e===IDBDatabase.prototype.transaction&&!(`objectStoreNames`in IDBTransaction.prototype)?function(t,...n){let r=e.call(zt(this),t,...n);return Mt.set(r,t.sort?t.sort():[t]),Rt(r)}:kt().includes(e)?function(...t){return e.apply(zt(this),t),Rt(At.get(this))}:function(...t){return Rt(e.apply(zt(this),t))}}function Lt(e){return typeof e==`function`?It(e):(e instanceof IDBTransaction&&Nt(e),Tt(e,Ot())?new Proxy(e,Pt):e)}function Rt(e){if(e instanceof IDBRequest)return z(e);if(L.has(e))return L.get(e);let t=Lt(e);return t!==e&&(L.set(e,t),R.set(t,e)),t}var zt=e=>R.get(e);function Bt(e,t,{blocked:n,upgrade:r,blocking:i,terminated:a}={}){let o=indexedDB.open(e,t),s=Rt(o);return r&&o.addEventListener(`upgradeneeded`,e=>{r(Rt(o.result),e.oldVersion,e.newVersion,Rt(o.transaction),e)}),n&&o.addEventListener(`blocked`,e=>n(e.oldVersion,e.newVersion,e)),s.then(e=>{a&&e.addEventListener(`close`,()=>a()),i&&e.addEventListener(`versionchange`,e=>i(e.oldVersion,e.newVersion,e))}).catch(()=>{}),s}var Vt=[`get`,`getKey`,`getAll`,`getAllKeys`,`count`],Ht=[`put`,`add`,`delete`,`clear`],Ut=new Map;function Wt(e,t){if(!(e instanceof IDBDatabase&&!(t in e)&&typeof t==`string`))return;if(Ut.get(t))return Ut.get(t);let n=t.replace(/FromIndex$/,``),r=t!==n,i=Ht.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||Vt.includes(n)))return;let a=async function(e,...t){let a=this.transaction(e,i?`readwrite`:`readonly`),o=a.store;return r&&(o=o.index(t.shift())),(await Promise.all([o[n](...t),i&&a.done]))[0]};return Ut.set(t,a),a}Ft(e=>({...e,get:(t,n,r)=>Wt(t,n)||e.get(t,n,r),has:(t,n)=>!!Wt(t,n)||e.has(t,n)}));var Gt=class{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(e=>{if(Kt(e)){let t=e.getImmediate();return`${t.library}/${t.version}`}else return null}).filter(e=>e).join(` `)}};function Kt(e){return e.getComponent()?.type===`VERSION`}var qt=`@firebase/app`,Jt=`0.14.7`,Yt=new wt(`@firebase/app`),Xt=`@firebase/app-compat`,Zt=`@firebase/analytics-compat`,Qt=`@firebase/analytics`,$t=`@firebase/app-check-compat`,en=`@firebase/app-check`,tn=`@firebase/auth`,nn=`@firebase/auth-compat`,rn=`@firebase/database`,an=`@firebase/data-connect`,on=`@firebase/database-compat`,sn=`@firebase/functions`,cn=`@firebase/functions-compat`,ln=`@firebase/installations`,un=`@firebase/installations-compat`,dn=`@firebase/messaging`,fn=`@firebase/messaging-compat`,pn=`@firebase/performance`,mn=`@firebase/performance-compat`,hn=`@firebase/remote-config`,gn=`@firebase/remote-config-compat`,_n=`@firebase/storage`,vn=`@firebase/storage-compat`,yn=`@firebase/firestore`,bn=`@firebase/ai`,xn=`@firebase/firestore-compat`,Sn=`firebase`,Cn=`12.8.0`,wn={[qt]:`fire-core`,[Xt]:`fire-core-compat`,[Qt]:`fire-analytics`,[Zt]:`fire-analytics-compat`,[en]:`fire-app-check`,[$t]:`fire-app-check-compat`,[tn]:`fire-auth`,[nn]:`fire-auth-compat`,[rn]:`fire-rtdb`,[an]:`fire-data-connect`,[on]:`fire-rtdb-compat`,[sn]:`fire-fn`,[cn]:`fire-fn-compat`,[ln]:`fire-iid`,[un]:`fire-iid-compat`,[dn]:`fire-fcm`,[fn]:`fire-fcm-compat`,[pn]:`fire-perf`,[mn]:`fire-perf-compat`,[hn]:`fire-rc`,[gn]:`fire-rc-compat`,[_n]:`fire-gcs`,[vn]:`fire-gcs-compat`,[yn]:`fire-fst`,[xn]:`fire-fst-compat`,[bn]:`fire-vertex`,"fire-js":`fire-js`,[Sn]:`fire-js-all`},Tn=new Map,En=new Map,Dn=new Map;function On(e,t){try{e.container.addComponent(t)}catch(n){Yt.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`,n)}}function kn(e){let t=e.name;if(Dn.has(t))return Yt.debug(`There were multiple attempts to register component ${t}.`),!1;Dn.set(t,e);for(let t of Tn.values())On(t,e);for(let t of En.values())On(t,e);return!0}function An(e){return e==null?!1:e.settings!==void 0}var jn=new st(`app`,`Firebase`,{"no-app":`No Firebase App '{$appName}' has been created - call initializeApp() first`,"bad-app-name":`Illegal App name: '{$appName}'`,"duplicate-app":`Firebase App named '{$appName}' already exists with different options or config`,"app-deleted":`Firebase App named '{$appName}' already deleted`,"server-app-deleted":`Firebase Server App has been deleted`,"no-options":`Need to provide options, when not being deployed to hosting via source.`,"invalid-app-argument":`firebase.{$appName}() takes either no argument or a Firebase App instance.`,"invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":`Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.`,"idb-get":`Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.`,"idb-set":`Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.`,"idb-delete":`Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.`,"finalization-registry-not-supported":`FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.`,"invalid-server-app-environment":`FirebaseServerApp is not for use in browser environments.`}),Mn=Cn;function Nn(e,t,n){let r=wn[e]??e;n&&(r+=`-${n}`);let i=r.match(/\s|\//),a=t.match(/\s|\//);if(i||a){let e=[`Unable to register library "${r}" with version "${t}":`];i&&e.push(`library name "${r}" contains illegal characters (whitespace or "/")`),i&&a&&e.push(`and`),a&&e.push(`version name "${t}" contains illegal characters (whitespace or "/")`),Yt.warn(e.join(` `));return}kn(new vt(`${r}-version`,()=>({library:r,version:t}),`VERSION`))}var Pn=`firebase-heartbeat-database`,Fn=1,In=`firebase-heartbeat-store`,Ln=null;function Rn(){return Ln||=Bt(Pn,Fn,{upgrade:(e,t)=>{switch(t){case 0:try{e.createObjectStore(In)}catch(e){console.warn(e)}}}}).catch(e=>{throw jn.create(`idb-open`,{originalErrorMessage:e.message})}),Ln}async function zn(e){try{let t=(await Rn()).transaction(In),n=await t.objectStore(In).get(Vn(e));return await t.done,n}catch(e){if(e instanceof ot)Yt.warn(e.message);else{let t=jn.create(`idb-get`,{originalErrorMessage:e?.message});Yt.warn(t.message)}}}async function Bn(e,t){try{let n=(await Rn()).transaction(In,`readwrite`);await n.objectStore(In).put(t,Vn(e)),await n.done}catch(e){if(e instanceof ot)Yt.warn(e.message);else{let t=jn.create(`idb-set`,{originalErrorMessage:e?.message});Yt.warn(t.message)}}}function Vn(e){return`${e.name}!${e.options.appId}`}var Hn=1024,Un=30,Wn=class{constructor(e){this.container=e,this._heartbeatsCache=null,this._storage=new qn(this.container.getProvider(`app`).getImmediate()),this._heartbeatsCachePromise=this._storage.read().then(e=>(this._heartbeatsCache=e,e))}async triggerHeartbeat(){try{let e=this.container.getProvider(`platform-logger`).getImmediate().getPlatformInfoString(),t=Gn();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===t||this._heartbeatsCache.heartbeats.some(e=>e.date===t))return;if(this._heartbeatsCache.heartbeats.push({date:t,agent:e}),this._heartbeatsCache.heartbeats.length>Un){let e=Yn(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(e,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){Yt.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return``;let e=Gn(),{heartbeatsToSend:t,unsentEntries:n}=Kn(this._heartbeatsCache.heartbeats),r=Ve(JSON.stringify({version:2,heartbeats:t}));return this._heartbeatsCache.lastSentHeartbeatDate=e,n.length>0?(this._heartbeatsCache.heartbeats=n,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),r}catch(e){return Yt.warn(e),``}}};function Gn(){return new Date().toISOString().substring(0,10)}function Kn(e,t=Hn){let n=[],r=e.slice();for(let i of e){let e=n.find(e=>e.agent===i.agent);if(e){if(e.dates.push(i.date),Jn(n)>t){e.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),Jn(n)>t){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}var qn=class{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return rt()?it().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){let e=await zn(this.app);return e?.heartbeats?e:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){let t=await this.read();return Bn(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??t.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){let t=await this.read();return Bn(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??t.lastSentHeartbeatDate,heartbeats:[...t.heartbeats,...e.heartbeats]})}else return}};function Jn(e){return Ve(JSON.stringify({version:2,heartbeats:e})).length}function Yn(e){if(e.length===0)return-1;let t=0,n=e[0].date;for(let r=1;r<e.length;r++)e[r].date<n&&(n=e[r].date,t=r);return t}function Xn(e){kn(new vt(`platform-logger`,e=>new Gt(e),`PRIVATE`)),kn(new vt(`heartbeat`,e=>new Wn(e),`PRIVATE`)),Nn(qt,Jt,e),Nn(qt,Jt,`esm2020`),Nn(`fire-js`,``)}Xn(``),Nn(`firebase`,`12.8.0`,`app`);function Zn(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}var Qn=Zn,$n=new st(`auth`,`Firebase`,Zn()),er=new wt(`@firebase/auth`);function tr(e,...t){er.logLevel<=I.WARN&&er.warn(`Auth (${Mn}): ${e}`,...t)}function nr(e,...t){er.logLevel<=I.ERROR&&er.error(`Auth (${Mn}): ${e}`,...t)}function rr(e,...t){throw sr(e,...t)}function ir(e,...t){return sr(e,...t)}function ar(e,t,n){return new st(`auth`,`Firebase`,{...Qn(),[t]:n}).create(t,{appName:e.name})}function or(e){return ar(e,`operation-not-supported-in-this-environment`,`Operations that alter the current user are not supported in conjunction with FirebaseServerApp`)}function sr(e,...t){if(typeof e!=`string`){let n=t[0],r=[...t.slice(1)];return r[0]&&(r[0].appName=e.name),e._errorFactory.create(n,...r)}return $n.create(e,...t)}function B(e,t,...n){if(!e)throw sr(t,...n)}function cr(e){let t=`INTERNAL ASSERTION FAILED: `+e;throw nr(t),Error(t)}function lr(e,t){e||cr(t)}function ur(){return dr()===`http:`||dr()===`https:`}function dr(){return typeof self<`u`&&self.location?.protocol||null}function fr(){return typeof navigator<`u`&&navigator&&`onLine`in navigator&&typeof navigator.onLine==`boolean`&&(ur()||$e()||`connection`in navigator)?navigator.onLine:!0}function pr(){if(typeof navigator>`u`)return null;let e=navigator;return e.languages&&e.languages[0]||e.language||null}var mr=class{constructor(e,t){this.shortDelay=e,this.longDelay=t,lr(t>e,`Short delay should be less than long delay!`),this.isMobile=Xe()||et()}get(){return fr()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};function hr(e,t){lr(e.emulator,`Emulator should always be set here`);let{url:n}=e.emulator;return t?`${n}${t.startsWith(`/`)?t.slice(1):t}`:n}var gr=class{static initialize(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<`u`&&`fetch`in self)return self.fetch;if(typeof globalThis<`u`&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<`u`)return fetch;cr(`Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill`)}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<`u`&&`Headers`in self)return self.Headers;if(typeof globalThis<`u`&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<`u`)return Headers;cr(`Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill`)}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<`u`&&`Response`in self)return self.Response;if(typeof globalThis<`u`&&globalThis.Response)return globalThis.Response;if(typeof Response<`u`)return Response;cr(`Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill`)}},_r={CREDENTIAL_MISMATCH:`custom-token-mismatch`,MISSING_CUSTOM_TOKEN:`internal-error`,INVALID_IDENTIFIER:`invalid-email`,MISSING_CONTINUE_URI:`internal-error`,INVALID_PASSWORD:`wrong-password`,MISSING_PASSWORD:`missing-password`,INVALID_LOGIN_CREDENTIALS:`invalid-credential`,EMAIL_EXISTS:`email-already-in-use`,PASSWORD_LOGIN_DISABLED:`operation-not-allowed`,INVALID_IDP_RESPONSE:`invalid-credential`,INVALID_PENDING_TOKEN:`invalid-credential`,FEDERATED_USER_ID_ALREADY_LINKED:`credential-already-in-use`,MISSING_REQ_TYPE:`internal-error`,EMAIL_NOT_FOUND:`user-not-found`,RESET_PASSWORD_EXCEED_LIMIT:`too-many-requests`,EXPIRED_OOB_CODE:`expired-action-code`,INVALID_OOB_CODE:`invalid-action-code`,MISSING_OOB_CODE:`internal-error`,CREDENTIAL_TOO_OLD_LOGIN_AGAIN:`requires-recent-login`,INVALID_ID_TOKEN:`invalid-user-token`,TOKEN_EXPIRED:`user-token-expired`,USER_NOT_FOUND:`user-token-expired`,TOO_MANY_ATTEMPTS_TRY_LATER:`too-many-requests`,PASSWORD_DOES_NOT_MEET_REQUIREMENTS:`password-does-not-meet-requirements`,INVALID_CODE:`invalid-verification-code`,INVALID_SESSION_INFO:`invalid-verification-id`,INVALID_TEMPORARY_PROOF:`invalid-credential`,MISSING_SESSION_INFO:`missing-verification-id`,SESSION_EXPIRED:`code-expired`,MISSING_ANDROID_PACKAGE_NAME:`missing-android-pkg-name`,UNAUTHORIZED_DOMAIN:`unauthorized-continue-uri`,INVALID_OAUTH_CLIENT_ID:`invalid-oauth-client-id`,ADMIN_ONLY_OPERATION:`admin-restricted-operation`,INVALID_MFA_PENDING_CREDENTIAL:`invalid-multi-factor-session`,MFA_ENROLLMENT_NOT_FOUND:`multi-factor-info-not-found`,MISSING_MFA_ENROLLMENT_ID:`missing-multi-factor-info`,MISSING_MFA_PENDING_CREDENTIAL:`missing-multi-factor-session`,SECOND_FACTOR_EXISTS:`second-factor-already-in-use`,SECOND_FACTOR_LIMIT_EXCEEDED:`maximum-second-factor-count-exceeded`,BLOCKING_FUNCTION_ERROR_RESPONSE:`internal-error`,RECAPTCHA_NOT_ENABLED:`recaptcha-not-enabled`,MISSING_RECAPTCHA_TOKEN:`missing-recaptcha-token`,INVALID_RECAPTCHA_TOKEN:`invalid-recaptcha-token`,INVALID_RECAPTCHA_ACTION:`invalid-recaptcha-action`,MISSING_CLIENT_TYPE:`missing-client-type`,MISSING_RECAPTCHA_VERSION:`missing-recaptcha-version`,INVALID_RECAPTCHA_VERSION:`invalid-recaptcha-version`,INVALID_REQ_TYPE:`invalid-req-type`},vr=[`/v1/accounts:signInWithCustomToken`,`/v1/accounts:signInWithEmailLink`,`/v1/accounts:signInWithIdp`,`/v1/accounts:signInWithPassword`,`/v1/accounts:signInWithPhoneNumber`,`/v1/token`],yr=new mr(3e4,6e4);function br(e,t){return e.tenantId&&!t.tenantId?{...t,tenantId:e.tenantId}:t}async function xr(e,t,n,r,i={}){return Sr(e,i,async()=>{let i={},a={};r&&(t===`GET`?a=r:i={body:JSON.stringify(r)});let o=ut({key:e.config.apiKey,...a}).slice(1),s=await e._getAdditionalHeaders();s[`Content-Type`]=`application/json`,e.languageCode&&(s[`X-Firebase-Locale`]=e.languageCode);let c={method:t,headers:s,...i};return Qe()||(c.referrerPolicy=`no-referrer`),e.emulatorConfig&&Je(e.emulatorConfig.host)&&(c.credentials=`include`),gr.fetch()(await wr(e,e.config.apiHost,n,o),c)})}async function Sr(e,t,n){e._canInitEmulator=!1;let r={..._r,...t};try{let t=new Er(e),i=await Promise.race([n(),t.promise]);t.clearNetworkTimeout();let a=await i.json();if(`needConfirmation`in a)throw Dr(e,`account-exists-with-different-credential`,a);if(i.ok&&!(`errorMessage`in a))return a;{let[t,n]=(i.ok?a.errorMessage:a.error.message).split(` : `);if(t===`FEDERATED_USER_ID_ALREADY_LINKED`)throw Dr(e,`credential-already-in-use`,a);if(t===`EMAIL_EXISTS`)throw Dr(e,`email-already-in-use`,a);if(t===`USER_DISABLED`)throw Dr(e,`user-disabled`,a);let o=r[t]||t.toLowerCase().replace(/[_\s]+/g,`-`);if(n)throw ar(e,o,n);rr(e,o)}}catch(t){if(t instanceof ot)throw t;rr(e,`network-request-failed`,{message:String(t)})}}async function Cr(e,t,n,r,i={}){let a=await xr(e,t,n,r,i);return`mfaPendingCredential`in a&&rr(e,`multi-factor-auth-required`,{_serverResponse:a}),a}async function wr(e,t,n,r){let i=`${t}${n}?${r}`,a=e,o=a.config.emulator?hr(e.config,i):`${e.config.apiScheme}://${i}`;return vr.includes(n)&&(await a._persistenceManagerAvailable,a._getPersistenceType()===`COOKIE`)?a._getPersistence()._getFinalTarget(o).toString():o}function Tr(e){switch(e){case`ENFORCE`:return`ENFORCE`;case`AUDIT`:return`AUDIT`;case`OFF`:return`OFF`;default:return`ENFORCEMENT_STATE_UNSPECIFIED`}}var Er=class{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((e,t)=>{this.timer=setTimeout(()=>t(ir(this.auth,`network-request-failed`)),yr.get())})}};function Dr(e,t,n){let r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);let i=ir(e,t,r);return i.customData._tokenResponse=n,i}function Or(e){return e!==void 0&&e.enterprise!==void 0}var kr=class{constructor(e){if(this.siteKey=``,this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw Error(`recaptchaKey undefined`);this.siteKey=e.recaptchaKey.split(`/`)[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(let t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return Tr(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)===`ENFORCE`||this.getProviderEnforcementState(e)===`AUDIT`}isAnyProviderEnabled(){return this.isProviderEnabled(`EMAIL_PASSWORD_PROVIDER`)||this.isProviderEnabled(`PHONE_PROVIDER`)}};async function Ar(e,t){return xr(e,`GET`,`/v2/recaptchaConfig`,br(e,t))}async function jr(e,t){return xr(e,`POST`,`/v1/accounts:delete`,t)}async function Mr(e,t){return xr(e,`POST`,`/v1/accounts:lookup`,t)}function Nr(e){if(e)try{let t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch{}}async function Pr(e,t=!1){let n=_t(e),r=await n.getIdToken(t),i=Ir(r);B(i&&i.exp&&i.auth_time&&i.iat,n.auth,`internal-error`);let a=typeof i.firebase==`object`?i.firebase:void 0,o=a?.sign_in_provider;return{claims:i,token:r,authTime:Nr(Fr(i.auth_time)),issuedAtTime:Nr(Fr(i.iat)),expirationTime:Nr(Fr(i.exp)),signInProvider:o||null,signInSecondFactor:a?.sign_in_second_factor||null}}function Fr(e){return Number(e)*1e3}function Ir(e){let[t,n,r]=e.split(`.`);if(t===void 0||n===void 0||r===void 0)return nr(`JWT malformed, contained fewer than 3 sections`),null;try{let e=He(n);return e?JSON.parse(e):(nr(`Failed to decode base64 JWT payload`),null)}catch(e){return nr(`Caught error parsing JWT payload as JSON`,e?.toString()),null}}function Lr(e){let t=Ir(e);return B(t,`internal-error`),B(t.exp!==void 0,`internal-error`),B(t.iat!==void 0,`internal-error`),Number(t.exp)-Number(t.iat)}async function Rr(e,t,n=!1){if(n)return t;try{return await t}catch(t){throw t instanceof ot&&zr(t)&&e.auth.currentUser===e&&await e.auth.signOut(),t}}function zr({code:e}){return e===`auth/user-disabled`||e===`auth/user-token-expired`}var Br=class{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){let e=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),e}else{this.errorBackoff=3e4;let e=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,e)}}schedule(e=!1){if(!this.isRunning)return;let t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code===`auth/network-request-failed`&&this.schedule(!0);return}this.schedule()}},Vr=class{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Nr(this.lastLoginAt),this.creationTime=Nr(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};async function Hr(e){let t=e.auth,n=await Rr(e,Mr(t,{idToken:await e.getIdToken()}));B(n?.users.length,t,`internal-error`);let r=n.users[0];e._notifyReloadListener(r);let i=r.providerUserInfo?.length?Gr(r.providerUserInfo):[],a=Wr(e.providerData,i),o=e.isAnonymous,s=!(e.email&&r.passwordHash)&&!a?.length,c=o?s:!1,l={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:a,metadata:new Vr(r.createdAt,r.lastLoginAt),isAnonymous:c};Object.assign(e,l)}async function Ur(e){let t=_t(e);await Hr(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}function Wr(e,t){return[...e.filter(e=>!t.some(t=>t.providerId===e.providerId)),...t]}function Gr(e){return e.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||``,displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}async function Kr(e,t){let n=await Sr(e,{},async()=>{let n=ut({grant_type:`refresh_token`,refresh_token:t}).slice(1),{tokenApiHost:r,apiKey:i}=e.config,a=await wr(e,r,`/v1/token`,`key=${i}`),o=await e._getAdditionalHeaders();o[`Content-Type`]=`application/x-www-form-urlencoded`;let s={method:`POST`,headers:o,body:n};return e.emulatorConfig&&Je(e.emulatorConfig.host)&&(s.credentials=`include`),gr.fetch()(a,s)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function qr(e,t){return xr(e,`POST`,`/v2/accounts:revokeToken`,br(e,t))}var Jr=class e{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){B(e.idToken,`internal-error`),B(e.idToken!==void 0,`internal-error`),B(e.refreshToken!==void 0,`internal-error`);let t=`expiresIn`in e&&e.expiresIn!==void 0?Number(e.expiresIn):Lr(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){B(e.length!==0,`internal-error`);let t=Lr(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(B(this.refreshToken,e,`user-token-expired`),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){let{accessToken:n,refreshToken:r,expiresIn:i}=await Kr(e,t);this.updateTokensAndExpiration(n,r,Number(i))}updateTokensAndExpiration(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+n*1e3}static fromJSON(t,n){let{refreshToken:r,accessToken:i,expirationTime:a}=n,o=new e;return r&&(B(typeof r==`string`,`internal-error`,{appName:t}),o.refreshToken=r),i&&(B(typeof i==`string`,`internal-error`,{appName:t}),o.accessToken=i),a&&(B(typeof a==`number`,`internal-error`,{appName:t}),o.expirationTime=a),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new e,this.toJSON())}_performRefresh(){return cr(`not implemented`)}};function Yr(e,t){B(typeof e==`string`||e===void 0,`internal-error`,{appName:t})}var Xr=class e{constructor({uid:e,auth:t,stsTokenManager:n,...r}){this.providerId=`firebase`,this.proactiveRefresh=new Br(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=n,this.accessToken=n.accessToken,this.displayName=r.displayName||null,this.email=r.email||null,this.emailVerified=r.emailVerified||!1,this.phoneNumber=r.phoneNumber||null,this.photoURL=r.photoURL||null,this.isAnonymous=r.isAnonymous||!1,this.tenantId=r.tenantId||null,this.providerData=r.providerData?[...r.providerData]:[],this.metadata=new Vr(r.createdAt||void 0,r.lastLoginAt||void 0)}async getIdToken(e){let t=await Rr(this,this.stsTokenManager.getToken(this.auth,e));return B(t,this.auth,`internal-error`),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return Pr(this,e)}reload(){return Ur(this)}_assign(e){this!==e&&(B(this.uid===e.uid,this.auth,`internal-error`),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(e=>({...e})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(t){let n=new e({...this,auth:t,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){B(!this.reloadListener,this.auth,`internal-error`),this.reloadListener=e,this.reloadUserInfo&&=(this._notifyReloadListener(this.reloadUserInfo),null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),t&&await Hr(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(An(this.auth.app))return Promise.reject(or(this.auth));let e=await this.getIdToken();return await Rr(this,jr(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||``}static _fromJSON(t,n){let r=n.displayName??void 0,i=n.email??void 0,a=n.phoneNumber??void 0,o=n.photoURL??void 0,s=n.tenantId??void 0,c=n._redirectEventId??void 0,l=n.createdAt??void 0,u=n.lastLoginAt??void 0,{uid:d,emailVerified:f,isAnonymous:p,providerData:m,stsTokenManager:h}=n;B(d&&h,t,`internal-error`);let g=Jr.fromJSON(this.name,h);B(typeof d==`string`,t,`internal-error`),Yr(r,t.name),Yr(i,t.name),B(typeof f==`boolean`,t,`internal-error`),B(typeof p==`boolean`,t,`internal-error`),Yr(a,t.name),Yr(o,t.name),Yr(s,t.name),Yr(c,t.name),Yr(l,t.name),Yr(u,t.name);let _=new e({uid:d,auth:t,email:i,emailVerified:f,displayName:r,isAnonymous:p,photoURL:o,phoneNumber:a,tenantId:s,stsTokenManager:g,createdAt:l,lastLoginAt:u});return m&&Array.isArray(m)&&(_.providerData=m.map(e=>({...e}))),c&&(_._redirectEventId=c),_}static async _fromIdTokenResponse(t,n,r=!1){let i=new Jr;i.updateFromServerResponse(n);let a=new e({uid:n.localId,auth:t,stsTokenManager:i,isAnonymous:r});return await Hr(a),a}static async _fromGetAccountInfoResponse(t,n,r){let i=n.users[0];B(i.localId!==void 0,`internal-error`);let a=i.providerUserInfo===void 0?[]:Gr(i.providerUserInfo),o=!(i.email&&i.passwordHash)&&!a?.length,s=new Jr;s.updateFromIdToken(r);let c=new e({uid:i.localId,auth:t,stsTokenManager:s,isAnonymous:o}),l={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:a,metadata:new Vr(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!a?.length};return Object.assign(c,l),c}},Zr=new Map;function Qr(e){lr(e instanceof Function,`Expected a class definition`);let t=Zr.get(e);return t?(lr(t instanceof e,`Instance stored in cache mismatched with class`),t):(t=new e,Zr.set(e,t),t)}var $r=class{constructor(){this.type=`NONE`,this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){let t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}};$r.type=`NONE`;var ei=$r;function ti(e,t,n){return`firebase:${e}:${t}:${n}`}var ni=class e{constructor(e,t,n){this.persistence=e,this.auth=t,this.userKey=n;let{config:r,name:i}=this.auth;this.fullUserKey=ti(this.userKey,r.apiKey,i),this.fullPersistenceKey=ti(`persistence`,r.apiKey,i),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){let e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e==`string`){let t=await Mr(this.auth,{idToken:e}).catch(()=>void 0);return t?Xr._fromGetAccountInfoResponse(this.auth,t,e):null}return Xr._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;let t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(t,n,r=`authUser`){if(!n.length)return new e(Qr(ei),t,r);let i=(await Promise.all(n.map(async e=>{if(await e._isAvailable())return e}))).filter(e=>e),a=i[0]||Qr(ei),o=ti(r,t.config.apiKey,t.name),s=null;for(let e of n)try{let n=await e._get(o);if(n){let r;if(typeof n==`string`){let e=await Mr(t,{idToken:n}).catch(()=>void 0);if(!e)break;r=await Xr._fromGetAccountInfoResponse(t,e,n)}else r=Xr._fromJSON(t,n);e!==a&&(s=r),a=e;break}}catch{}let c=i.filter(e=>e._shouldAllowMigration);return!a._shouldAllowMigration||!c.length?new e(a,t,r):(a=c[0],s&&await a._set(o,s.toJSON()),await Promise.all(n.map(async e=>{if(e!==a)try{await e._remove(o)}catch{}})),new e(a,t,r))}};function ri(e){let t=e.toLowerCase();if(t.includes(`opera/`)||t.includes(`opr/`)||t.includes(`opios/`))return`Opera`;if(si(t))return`IEMobile`;if(t.includes(`msie`)||t.includes(`trident/`))return`IE`;if(t.includes(`edge/`))return`Edge`;if(ii(t))return`Firefox`;if(t.includes(`silk/`))return`Silk`;if(li(t))return`Blackberry`;if(ui(t))return`Webos`;if(ai(t))return`Safari`;if((t.includes(`chrome/`)||oi(t))&&!t.includes(`edge/`))return`Chrome`;if(ci(t))return`Android`;{let t=e.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(t?.length===2)return t[1]}return`Other`}function ii(e=Ye()){return/firefox\//i.test(e)}function ai(e=Ye()){let t=e.toLowerCase();return t.includes(`safari/`)&&!t.includes(`chrome/`)&&!t.includes(`crios/`)&&!t.includes(`android`)}function oi(e=Ye()){return/crios\//i.test(e)}function si(e=Ye()){return/iemobile/i.test(e)}function ci(e=Ye()){return/android/i.test(e)}function li(e=Ye()){return/blackberry/i.test(e)}function ui(e=Ye()){return/webos/i.test(e)}function di(e=Ye()){return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function fi(){return tt()&&document.documentMode===10}function pi(e=Ye()){return di(e)||ci(e)||ui(e)||li(e)||/windows phone/i.test(e)||si(e)}function mi(e,t=[]){let n;switch(e){case`Browser`:n=ri(Ye());break;case`Worker`:n=`${ri(Ye())}-${e}`;break;default:n=e}let r=t.length?t.join(`,`):`FirebaseCore-web`;return`${n}/JsCore/${Mn}/${r}`}var hi=class{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){let n=t=>new Promise((n,r)=>{try{n(e(t))}catch(e){r(e)}});n.onAbort=t,this.queue.push(n);let r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;let t=[];try{for(let n of this.queue)await n(e),n.onAbort&&t.push(n.onAbort)}catch(e){t.reverse();for(let e of t)try{e()}catch{}throw this.auth._errorFactory.create(`login-blocked`,{originalMessage:e?.message})}}};async function gi(e,t={}){return xr(e,`GET`,`/v2/passwordPolicy`,br(e,t))}var _i=6,vi=class{constructor(e){let t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??_i,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState===`ENFORCEMENT_STATE_UNSPECIFIED`&&(this.enforcementState=`OFF`),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join(``)??``,this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){let t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&=t.meetsMinPasswordLength??!0,t.isValid&&=t.meetsMaxPasswordLength??!0,t.isValid&&=t.containsLowercaseLetter??!0,t.isValid&&=t.containsUppercaseLetter??!0,t.isValid&&=t.containsNumericCharacter??!0,t.isValid&&=t.containsNonAlphanumericCharacter??!0,t}validatePasswordLengthOptions(e,t){let n=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;n&&(t.meetsMinPasswordLength=e.length>=n),r&&(t.meetsMaxPasswordLength=e.length<=r)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let n;for(let r=0;r<e.length;r++)n=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(t,n>=`a`&&n<=`z`,n>=`A`&&n<=`Z`,n>=`0`&&n<=`9`,this.allowedNonAlphanumericCharacters.includes(n))}updatePasswordCharacterOptionsStatuses(e,t,n,r,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||=t),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||=n),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||=r),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||=i)}},yi=class{constructor(e,t,n,r){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=n,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new xi(this),this.idTokenSubscription=new xi(this),this.beforeStateQueue=new hi(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=$n,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion,this._persistenceManagerAvailable=new Promise(e=>this._resolvePersistenceManagerAvailable=e)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Qr(t)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await ni.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;let e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{let t=await Mr(this,{idToken:e}),n=await Xr._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(n)}catch(e){console.warn(`FirebaseServerApp could not login user with provided authIdToken: `,e),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(An(this.app)){let e=this.app.settings.authIdToken;return e?new Promise(t=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(e).then(t,t))}):this.directlySetCurrentUser(null)}let t=await this.assertedPersistence.getCurrentUser(),n=t,r=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();let t=this.redirectUser?._redirectEventId,i=n?._redirectEventId,a=await this.tryRedirectSignIn(e);(!t||t===i)&&a?.user&&(n=a.user,r=!0)}if(!n)return this.directlySetCurrentUser(null);if(!n._redirectEventId){if(r)try{await this.beforeStateQueue.runMiddleware(n)}catch(e){n=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(e))}return n?this.reloadAndSetCurrentUserOrClear(n):this.directlySetCurrentUser(null)}return B(this._popupRedirectResolver,this,`argument-error`),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===n._redirectEventId?this.directlySetCurrentUser(n):this.reloadAndSetCurrentUserOrClear(n)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Hr(e)}catch(e){if(e?.code!==`auth/network-request-failed`)return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=pr()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(An(this.app))return Promise.reject(or(this));let t=e?_t(e):null;return t&&B(t.auth.config.apiKey===this.config.apiKey,this,`invalid-user-token`),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&B(this.tenantId===e.tenantId,this,`tenant-id-mismatch`),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return An(this.app)?Promise.reject(or(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return An(this.app)?Promise.reject(or(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Qr(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();let t=this._getPasswordPolicyInternal();return t.schemaVersion===this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?t.validatePassword(e):Promise.reject(this._errorFactory.create(`unsupported-password-policy-schema-version`,{}))}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){let e=new vi(await gi(this));this.tenantId===null?this._projectPasswordPolicy=e:this._tenantPasswordPolicies[this.tenantId]=e}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new st(`auth`,`Firebase`,e())}onAuthStateChanged(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{let n=this.onAuthStateChanged(()=>{n(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){let t={providerId:`apple.com`,tokenType:`ACCESS_TOKEN`,token:e,idToken:await this.currentUser.getIdToken()};this.tenantId!=null&&(t.tenantId=this.tenantId),await qr(this,t)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,t){let n=await this.getOrInitRedirectPersistenceManager(t);return e===null?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){let t=e&&Qr(e)||this._popupRedirectResolver;B(t,this,`argument-error`),this.redirectPersistenceManager=await ni.create(this,[Qr(t._redirectPersistence)],`redirectUser`),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,n,r){if(this._deleted)return()=>{};let i=typeof t==`function`?t:t.next.bind(t),a=!1,o=this._isInitialized?Promise.resolve():this._initializationPromise;if(B(o,this,`internal-error`),o.then(()=>{a||i(this.currentUser)}),typeof t==`function`){let i=e.addObserver(t,n,r);return()=>{a=!0,i()}}else{let n=e.addObserver(t);return()=>{a=!0,n()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return B(this.persistenceManager,this,`internal-error`),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=mi(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){let e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e[`X-Firebase-gmpid`]=this.app.options.appId);let t=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();t&&(e[`X-Firebase-Client`]=t);let n=await this._getAppCheckToken();return n&&(e[`X-Firebase-AppCheck`]=n),e}async _getAppCheckToken(){if(An(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;let e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&tr(`Error while retrieving App Check token: ${e.error}`),e?.token}};function bi(e){return _t(e)}var xi=class{constructor(e){this.auth=e,this.observer=null,this.addObserver=pt(e=>this.observer=e)}get next(){return B(this.observer,this.auth,`internal-error`),this.observer.next.bind(this.observer)}},Si={async loadJS(){throw Error(`Unable to load external scripts`)},recaptchaV2Script:``,recaptchaEnterpriseScript:``,gapiScript:``};function Ci(e){Si=e}function wi(e){return Si.loadJS(e)}function Ti(){return Si.recaptchaEnterpriseScript}function Ei(e){return`__${e}${Math.floor(Math.random()*1e6)}`}var Di=class{constructor(){this.enterprise=new Oi}ready(e){e()}execute(e,t){return Promise.resolve(`token`)}render(e,t){return``}},Oi=class{ready(e){e()}execute(e,t){return Promise.resolve(`token`)}render(e,t){return``}},ki=`recaptcha-enterprise`,Ai=`NO_RECAPTCHA`,ji=class{constructor(e){this.type=ki,this.auth=bi(e)}async verify(e=`verify`,t=!1){async function n(e){if(!t){if(e.tenantId==null&&e._agentRecaptchaConfig!=null)return e._agentRecaptchaConfig.siteKey;if(e.tenantId!=null&&e._tenantRecaptchaConfigs[e.tenantId]!==void 0)return e._tenantRecaptchaConfigs[e.tenantId].siteKey}return new Promise(async(t,n)=>{Ar(e,{clientType:`CLIENT_TYPE_WEB`,version:`RECAPTCHA_ENTERPRISE`}).then(r=>{if(r.recaptchaKey===void 0)n(Error(`recaptcha Enterprise site key undefined`));else{let n=new kr(r);return e.tenantId==null?e._agentRecaptchaConfig=n:e._tenantRecaptchaConfigs[e.tenantId]=n,t(n.siteKey)}}).catch(e=>{n(e)})})}function r(t,n,r){let i=window.grecaptcha;Or(i)?i.enterprise.ready(()=>{i.enterprise.execute(t,{action:e}).then(e=>{n(e)}).catch(()=>{n(Ai)})}):r(Error(`No reCAPTCHA enterprise script loaded.`))}return this.auth.settings.appVerificationDisabledForTesting?new Di().execute(`siteKey`,{action:`verify`}):new Promise((e,i)=>{n(this.auth).then(n=>{if(!t&&Or(window.grecaptcha))r(n,e,i);else{if(typeof window>`u`){i(Error(`RecaptchaVerifier is only supported in browser`));return}let t=Ti();t.length!==0&&(t+=n),wi(t).then(()=>{r(n,e,i)}).catch(e=>{i(e)})}}).catch(e=>{i(e)})})}};async function Mi(e,t,n,r=!1,i=!1){let a=new ji(e),o;if(i)o=Ai;else try{o=await a.verify(n)}catch{o=await a.verify(n,!0)}let s={...t};if(n===`mfaSmsEnrollment`||n===`mfaSmsSignIn`){if(`phoneEnrollmentInfo`in s){let e=s.phoneEnrollmentInfo.phoneNumber,t=s.phoneEnrollmentInfo.recaptchaToken;Object.assign(s,{phoneEnrollmentInfo:{phoneNumber:e,recaptchaToken:t,captchaResponse:o,clientType:`CLIENT_TYPE_WEB`,recaptchaVersion:`RECAPTCHA_ENTERPRISE`}})}else if(`phoneSignInInfo`in s){let e=s.phoneSignInInfo.recaptchaToken;Object.assign(s,{phoneSignInInfo:{recaptchaToken:e,captchaResponse:o,clientType:`CLIENT_TYPE_WEB`,recaptchaVersion:`RECAPTCHA_ENTERPRISE`}})}return s}return r?Object.assign(s,{captchaResp:o}):Object.assign(s,{captchaResponse:o}),Object.assign(s,{clientType:`CLIENT_TYPE_WEB`}),Object.assign(s,{recaptchaVersion:`RECAPTCHA_ENTERPRISE`}),s}async function V(e,t,n,r,i){return i===`EMAIL_PASSWORD_PROVIDER`?e._getRecaptchaConfig()?.isProviderEnabled(`EMAIL_PASSWORD_PROVIDER`)?r(e,await Mi(e,t,n,n===`getOobCode`)):r(e,t).catch(async i=>i.code===`auth/missing-recaptcha-token`?(console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`),r(e,await Mi(e,t,n,n===`getOobCode`))):Promise.reject(i)):i===`PHONE_PROVIDER`?e._getRecaptchaConfig()?.isProviderEnabled(`PHONE_PROVIDER`)?r(e,await Mi(e,t,n)).catch(async i=>e._getRecaptchaConfig()?.getProviderEnforcementState(`PHONE_PROVIDER`)===`AUDIT`&&(i.code===`auth/missing-recaptcha-token`||i.code===`auth/invalid-app-credential`)?(console.log(`Failed to verify with reCAPTCHA Enterprise. Automatically triggering the reCAPTCHA v2 flow to complete the ${n} flow.`),r(e,await Mi(e,t,n,!1,!0))):Promise.reject(i)):r(e,await Mi(e,t,n,!1,!0)):Promise.reject(i+` provider is not supported.`)}async function Ni(e){let t=bi(e),n=new kr(await Ar(t,{clientType:`CLIENT_TYPE_WEB`,version:`RECAPTCHA_ENTERPRISE`}));t.tenantId==null?t._agentRecaptchaConfig=n:t._tenantRecaptchaConfigs[t.tenantId]=n,n.isAnyProviderEnabled()&&new ji(t).verify()}function Pi(e,t){let n=t?.persistence||[],r=(Array.isArray(n)?n:[n]).map(Qr);t?.errorMap&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,t?.popupRedirectResolver)}var Fi=class{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return cr(`not implemented`)}_getIdTokenResponse(e){return cr(`not implemented`)}_linkToIdToken(e,t){return cr(`not implemented`)}_getReauthenticationResolver(e){return cr(`not implemented`)}};async function Ii(e,t){return xr(e,`POST`,`/v1/accounts:signUp`,t)}async function Li(e,t){return Cr(e,`POST`,`/v1/accounts:signInWithPassword`,br(e,t))}async function Ri(e,t){return Cr(e,`POST`,`/v1/accounts:signInWithEmailLink`,br(e,t))}async function zi(e,t){return Cr(e,`POST`,`/v1/accounts:signInWithEmailLink`,br(e,t))}var Bi=class e extends Fi{constructor(e,t,n,r=null){super(`password`,n),this._email=e,this._password=t,this._tenantId=r}static _fromEmailAndPassword(t,n){return new e(t,n,`password`)}static _fromEmailAndCode(t,n,r=null){return new e(t,n,`emailLink`,r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){let t=typeof e==`string`?JSON.parse(e):e;if(t?.email&&t?.password){if(t.signInMethod===`password`)return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod===`emailLink`)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case`password`:return V(e,{returnSecureToken:!0,email:this._email,password:this._password,clientType:`CLIENT_TYPE_WEB`},`signInWithPassword`,Li,`EMAIL_PASSWORD_PROVIDER`);case`emailLink`:return Ri(e,{email:this._email,oobCode:this._password});default:rr(e,`internal-error`)}}async _linkToIdToken(e,t){switch(this.signInMethod){case`password`:return V(e,{idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:`CLIENT_TYPE_WEB`},`signUpPassword`,Ii,`EMAIL_PASSWORD_PROVIDER`);case`emailLink`:return zi(e,{idToken:t,email:this._email,oobCode:this._password});default:rr(e,`internal-error`)}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}};async function Vi(e,t){return Cr(e,`POST`,`/v1/accounts:signInWithIdp`,br(e,t))}var Hi=`http://localhost`,Ui=class e extends Fi{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(t){let n=new e(t.providerId,t.signInMethod);return t.idToken||t.accessToken?(t.idToken&&(n.idToken=t.idToken),t.accessToken&&(n.accessToken=t.accessToken),t.nonce&&!t.pendingToken&&(n.nonce=t.nonce),t.pendingToken&&(n.pendingToken=t.pendingToken)):t.oauthToken&&t.oauthTokenSecret?(n.accessToken=t.oauthToken,n.secret=t.oauthTokenSecret):rr(`argument-error`),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(t){let{providerId:n,signInMethod:r,...i}=typeof t==`string`?JSON.parse(t):t;if(!n||!r)return null;let a=new e(n,r);return a.idToken=i.idToken||void 0,a.accessToken=i.accessToken||void 0,a.secret=i.secret,a.nonce=i.nonce,a.pendingToken=i.pendingToken||null,a}_getIdTokenResponse(e){return Vi(e,this.buildRequest())}_linkToIdToken(e,t){let n=this.buildRequest();return n.idToken=t,Vi(e,n)}_getReauthenticationResolver(e){let t=this.buildRequest();return t.autoCreate=!1,Vi(e,t)}buildRequest(){let e={requestUri:Hi,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{let t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=ut(t)}return e}};async function Wi(e,t){return xr(e,`POST`,`/v1/accounts:sendVerificationCode`,br(e,t))}async function Gi(e,t){return Cr(e,`POST`,`/v1/accounts:signInWithPhoneNumber`,br(e,t))}async function Ki(e,t){let n=await Cr(e,`POST`,`/v1/accounts:signInWithPhoneNumber`,br(e,t));if(n.temporaryProof)throw Dr(e,`account-exists-with-different-credential`,n);return n}var qi={USER_NOT_FOUND:`user-not-found`};async function Ji(e,t){return Cr(e,`POST`,`/v1/accounts:signInWithPhoneNumber`,br(e,{...t,operation:`REAUTH`}),qi)}var Yi=class e extends Fi{constructor(e){super(`phone`,`phone`),this.params=e}static _fromVerification(t,n){return new e({verificationId:t,verificationCode:n})}static _fromTokenResponse(t,n){return new e({phoneNumber:t,temporaryProof:n})}_getIdTokenResponse(e){return Gi(e,this._makeVerificationRequest())}_linkToIdToken(e,t){return Ki(e,{idToken:t,...this._makeVerificationRequest()})}_getReauthenticationResolver(e){return Ji(e,this._makeVerificationRequest())}_makeVerificationRequest(){let{temporaryProof:e,phoneNumber:t,verificationId:n,verificationCode:r}=this.params;return e&&t?{temporaryProof:e,phoneNumber:t}:{sessionInfo:n,code:r}}toJSON(){let e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(t){typeof t==`string`&&(t=JSON.parse(t));let{verificationId:n,verificationCode:r,phoneNumber:i,temporaryProof:a}=t;return!r&&!n&&!i&&!a?null:new e({verificationId:n,verificationCode:r,phoneNumber:i,temporaryProof:a})}};function Xi(e){switch(e){case`recoverEmail`:return`RECOVER_EMAIL`;case`resetPassword`:return`PASSWORD_RESET`;case`signIn`:return`EMAIL_SIGNIN`;case`verifyEmail`:return`VERIFY_EMAIL`;case`verifyAndChangeEmail`:return`VERIFY_AND_CHANGE_EMAIL`;case`revertSecondFactorAddition`:return`REVERT_SECOND_FACTOR_ADDITION`;default:return null}}function Zi(e){let t=dt(ft(e)).link,n=t?dt(ft(t)).deep_link_id:null,r=dt(ft(e)).deep_link_id;return(r?dt(ft(r)).link:null)||r||n||t||e}var Qi=class e{constructor(e){let t=dt(ft(e)),n=t.apiKey??null,r=t.oobCode??null,i=Xi(t.mode??null);B(n&&r&&i,`argument-error`),this.apiKey=n,this.operation=i,this.code=r,this.continueUrl=t.continueUrl??null,this.languageCode=t.lang??null,this.tenantId=t.tenantId??null}static parseLink(t){let n=Zi(t);try{return new e(n)}catch{return null}}},$i=class e{constructor(){this.providerId=e.PROVIDER_ID}static credential(e,t){return Bi._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){let n=Qi.parseLink(t);return B(n,`argument-error`),Bi._fromEmailAndCode(e,n.code,n.tenantId)}};$i.PROVIDER_ID=`password`,$i.EMAIL_PASSWORD_SIGN_IN_METHOD=`password`,$i.EMAIL_LINK_SIGN_IN_METHOD=`emailLink`;var ea=class{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}},ta=class extends ea{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}},na=class e extends ta{constructor(){super(`facebook.com`)}static credential(t){return Ui._fromParams({providerId:e.PROVIDER_ID,signInMethod:e.FACEBOOK_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return e.credentialFromTaggedObject(t)}static credentialFromError(t){return e.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!(`oauthAccessToken`in t)||!t.oauthAccessToken)return null;try{return e.credential(t.oauthAccessToken)}catch{return null}}};na.FACEBOOK_SIGN_IN_METHOD=`facebook.com`,na.PROVIDER_ID=`facebook.com`;var ra=class e extends ta{constructor(){super(`google.com`),this.addScope(`profile`)}static credential(t,n){return Ui._fromParams({providerId:e.PROVIDER_ID,signInMethod:e.GOOGLE_SIGN_IN_METHOD,idToken:t,accessToken:n})}static credentialFromResult(t){return e.credentialFromTaggedObject(t)}static credentialFromError(t){return e.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;let{oauthIdToken:n,oauthAccessToken:r}=t;if(!n&&!r)return null;try{return e.credential(n,r)}catch{return null}}};ra.GOOGLE_SIGN_IN_METHOD=`google.com`,ra.PROVIDER_ID=`google.com`;var ia=class e extends ta{constructor(){super(`github.com`)}static credential(t){return Ui._fromParams({providerId:e.PROVIDER_ID,signInMethod:e.GITHUB_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return e.credentialFromTaggedObject(t)}static credentialFromError(t){return e.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!(`oauthAccessToken`in t)||!t.oauthAccessToken)return null;try{return e.credential(t.oauthAccessToken)}catch{return null}}};ia.GITHUB_SIGN_IN_METHOD=`github.com`,ia.PROVIDER_ID=`github.com`;var aa=class e extends ta{constructor(){super(`twitter.com`)}static credential(t,n){return Ui._fromParams({providerId:e.PROVIDER_ID,signInMethod:e.TWITTER_SIGN_IN_METHOD,oauthToken:t,oauthTokenSecret:n})}static credentialFromResult(t){return e.credentialFromTaggedObject(t)}static credentialFromError(t){return e.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;let{oauthAccessToken:n,oauthTokenSecret:r}=t;if(!n||!r)return null;try{return e.credential(n,r)}catch{return null}}};aa.TWITTER_SIGN_IN_METHOD=`twitter.com`,aa.PROVIDER_ID=`twitter.com`;var oa=class e{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(t,n,r,i=!1){return new e({user:await Xr._fromIdTokenResponse(t,r,i),providerId:sa(r),_tokenResponse:r,operationType:n})}static async _forOperation(t,n,r){return await t._updateTokensIfNecessary(r,!0),new e({user:t,providerId:sa(r),_tokenResponse:r,operationType:n})}};function sa(e){return e.providerId?e.providerId:`phoneNumber`in e?`phone`:null}var ca=class e extends ot{constructor(t,n,r,i){super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,e.prototype),this.customData={appName:t.name,tenantId:t.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(t,n,r,i){return new e(t,n,r,i)}};function la(e,t,n,r){return(t===`reauthenticate`?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch(n=>{throw n.code===`auth/multi-factor-auth-required`?ca._fromErrorAndOperation(e,n,t,r):n})}async function ua(e,t,n=!1){let r=await Rr(e,t._linkToIdToken(e.auth,await e.getIdToken()),n);return oa._forOperation(e,`link`,r)}async function da(e,t,n=!1){let{auth:r}=e;if(An(r.app))return Promise.reject(or(r));let i=`reauthenticate`;try{let a=await Rr(e,la(r,i,t,e),n);B(a.idToken,r,`internal-error`);let o=Ir(a.idToken);B(o,r,`internal-error`);let{sub:s}=o;return B(e.uid===s,r,`user-mismatch`),oa._forOperation(e,i,a)}catch(e){throw e?.code===`auth/user-not-found`&&rr(r,`user-mismatch`),e}}async function fa(e,t,n=!1){if(An(e.app))return Promise.reject(or(e));let r=`signIn`,i=await la(e,r,t),a=await oa._fromIdTokenResponse(e,r,i);return n||await e._updateCurrentUser(a.user),a}function pa(e,t){return xr(e,`POST`,`/v2/accounts/mfaEnrollment:start`,br(e,t))}function ma(e,t){return xr(e,`POST`,`/v2/accounts/mfaEnrollment:finalize`,br(e,t))}function ha(e,t){return xr(e,`POST`,`/v2/accounts/mfaEnrollment:start`,br(e,t))}function ga(e,t){return xr(e,`POST`,`/v2/accounts/mfaEnrollment:finalize`,br(e,t))}var _a=`__sak`,va=class{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(_a,`1`),this.storage.removeItem(_a),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){let t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}},ya=1e3,ba=10,xa=class extends va{constructor(){super(()=>window.localStorage,`LOCAL`),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=pi(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(let t of Object.keys(this.listeners)){let n=this.storage.getItem(t),r=this.localCache[t];n!==r&&e(t,r,n)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((e,t,n)=>{this.notifyListeners(e,n)});return}let n=e.key;t?this.detachListener():this.stopPolling();let r=()=>{let e=this.storage.getItem(n);!t&&this.localCache[n]===e||this.notifyListeners(n,e)},i=this.storage.getItem(n);fi()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(r,ba):r()}notifyListeners(e,t){this.localCache[e]=t;let n=this.listeners[e];if(n)for(let e of Array.from(n))e(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,n)=>{this.onStorageEvent(new StorageEvent(`storage`,{key:e,oldValue:t,newValue:n}),!0)})},ya)}stopPolling(){this.pollTimer&&=(clearInterval(this.pollTimer),null)}attachListener(){window.addEventListener(`storage`,this.boundEventHandler)}detachListener(){window.removeEventListener(`storage`,this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){let t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}};xa.type=`LOCAL`;var Sa=1e3;function Ca(e){let t=e.replace(/[\\^$.*+?()[\]{}|]/g,`\\$&`),n=RegExp(`${t}=([^;]+)`);return document.cookie.match(n)?.[1]??null}function wa(e){return`${window.location.protocol===`http:`?`__dev_`:`__HOST-`}FIREBASE_${e.split(`:`)[3]}`}var Ta=class{constructor(){this.type=`COOKIE`,this.listenerUnsubscribes=new Map}_getFinalTarget(e){let t=new URL(`${window.location.origin}/__cookies__`);return t.searchParams.set(`finalTarget`,e),t}async _isAvailable(){return typeof isSecureContext==`boolean`&&!isSecureContext||typeof navigator>`u`||typeof document>`u`?!1:navigator.cookieEnabled??!0}async _set(e,t){}async _get(e){if(!this._isAvailable())return null;let t=wa(e);return window.cookieStore?(await window.cookieStore.get(t))?.value:Ca(t)}async _remove(e){if(!this._isAvailable()||!await this._get(e))return;let t=wa(e);document.cookie=`${t}=;Max-Age=34560000;Partitioned;Secure;SameSite=Strict;Path=/;Priority=High`,await fetch(`/__cookies__`,{method:`DELETE`}).catch(()=>void 0)}_addListener(e,t){if(!this._isAvailable())return;let n=wa(e);if(window.cookieStore){let e=(e=>{let r=e.changed.find(e=>e.name===n);r&&t(r.value),e.deleted.find(e=>e.name===n)&&t(null)});return this.listenerUnsubscribes.set(t,()=>window.cookieStore.removeEventListener(`change`,e)),window.cookieStore.addEventListener(`change`,e)}let r=Ca(n),i=setInterval(()=>{let e=Ca(n);e!==r&&(t(e),r=e)},Sa);this.listenerUnsubscribes.set(t,()=>clearInterval(i))}_removeListener(e,t){let n=this.listenerUnsubscribes.get(t);n&&(n(),this.listenerUnsubscribes.delete(t))}};Ta.type=`COOKIE`;var Ea=class extends va{constructor(){super(()=>window.sessionStorage,`SESSION`)}_addListener(e,t){}_removeListener(e,t){}};Ea.type=`SESSION`;function Da(e){return Promise.all(e.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(e){return{fulfilled:!1,reason:e}}}))}var Oa=class e{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){let n=this.receivers.find(e=>e.isListeningto(t));if(n)return n;let r=new e(t);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){let t=e,{eventId:n,eventType:r,data:i}=t.data,a=this.handlersMap[r];if(!a?.size)return;t.ports[0].postMessage({status:`ack`,eventId:n,eventType:r});let o=await Da(Array.from(a).map(async e=>e(t.origin,i)));t.ports[0].postMessage({status:`done`,eventId:n,eventType:r,response:o})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener(`message`,this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener(`message`,this.boundEventHandler)}};Oa.receivers=[];function ka(e=``,t=10){let n=``;for(let e=0;e<t;e++)n+=Math.floor(Math.random()*10);return e+n}var Aa=class{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener(`message`,e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,n=50){let r=typeof MessageChannel<`u`?new MessageChannel:null;if(!r)throw Error(`connection_unavailable`);let i,a;return new Promise((o,s)=>{let c=ka(``,20);r.port1.start();let l=setTimeout(()=>{s(Error(`unsupported_event`))},n);a={messageChannel:r,onMessage(e){let t=e;if(t.data.eventId===c)switch(t.data.status){case`ack`:clearTimeout(l),i=setTimeout(()=>{s(Error(`timeout`))},3e3);break;case`done`:clearTimeout(i),o(t.data.response);break;default:clearTimeout(l),clearTimeout(i),s(Error(`invalid_response`));break}}},this.handlers.add(a),r.port1.addEventListener(`message`,a.onMessage),this.target.postMessage({eventType:e,eventId:c,data:t},[r.port2])}).finally(()=>{a&&this.removeMessageHandler(a)})}};function ja(){return window}function Ma(){return ja().WorkerGlobalScope!==void 0&&typeof ja().importScripts==`function`}async function Na(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function Pa(){return navigator?.serviceWorker?.controller||null}function Fa(){return Ma()?self:null}var Ia=`firebaseLocalStorageDb`,La=1,Ra=`firebaseLocalStorage`,za=`fbase_key`,Ba=class{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener(`success`,()=>{e(this.request.result)}),this.request.addEventListener(`error`,()=>{t(this.request.error)})})}};function Va(e,t){return e.transaction([Ra],t?`readwrite`:`readonly`).objectStore(Ra)}function Ha(){return new Ba(indexedDB.deleteDatabase(Ia)).toPromise()}function Ua(){let e=indexedDB.open(Ia,La);return new Promise((t,n)=>{e.addEventListener(`error`,()=>{n(e.error)}),e.addEventListener(`upgradeneeded`,()=>{let t=e.result;try{t.createObjectStore(Ra,{keyPath:za})}catch(e){n(e)}}),e.addEventListener(`success`,async()=>{let n=e.result;n.objectStoreNames.contains(Ra)?t(n):(n.close(),await Ha(),t(await Ua()))})})}async function Wa(e,t,n){return new Ba(Va(e,!0).put({[za]:t,value:n})).toPromise()}async function Ga(e,t){let n=await new Ba(Va(e,!1).get(t)).toPromise();return n===void 0?null:n.value}function Ka(e,t){return new Ba(Va(e,!0).delete(t)).toPromise()}var qa=800,Ja=3,Ya=class{constructor(){this.type=`LOCAL`,this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db||=await Ua(),this.db}async _withRetries(e){let t=0;for(;;)try{return await e(await this._openDb())}catch(e){if(t++>Ja)throw e;this.db&&=(this.db.close(),void 0)}}async initializeServiceWorkerMessaging(){return Ma()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Oa._getInstance(Fa()),this.receiver._subscribe(`keyChanged`,async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe(`ping`,async(e,t)=>[`keyChanged`])}async initializeSender(){if(this.activeServiceWorker=await Na(),!this.activeServiceWorker)return;this.sender=new Aa(this.activeServiceWorker);let e=await this.sender._send(`ping`,{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes(`keyChanged`)&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||Pa()!==this.activeServiceWorker))try{await this.sender._send(`keyChanged`,{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;let e=await Ua();return await Wa(e,_a,`1`),await Ka(e,_a),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(n=>Wa(n,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){let t=await this._withRetries(t=>Ga(t,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>Ka(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){let e=await this._withRetries(e=>new Ba(Va(e,!1).getAll()).toPromise());if(!e||this.pendingWrites!==0)return[];let t=[],n=new Set;if(e.length!==0)for(let{fbase_key:r,value:i}of e)n.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(i)&&(this.notifyListeners(r,i),t.push(r));for(let e of Object.keys(this.localCache))this.localCache[e]&&!n.has(e)&&(this.notifyListeners(e,null),t.push(e));return t}notifyListeners(e,t){this.localCache[e]=t;let n=this.listeners[e];if(n)for(let e of Array.from(n))e(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),qa)}stopPolling(){this.pollTimer&&=(clearInterval(this.pollTimer),null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}};Ya.type=`LOCAL`;function Xa(e,t){return xr(e,`POST`,`/v2/accounts/mfaSignIn:start`,br(e,t))}function Za(e,t){return xr(e,`POST`,`/v2/accounts/mfaSignIn:finalize`,br(e,t))}function Qa(e,t){return xr(e,`POST`,`/v2/accounts/mfaSignIn:finalize`,br(e,t))}Ei(`rcb`),new mr(3e4,6e4);var $a=`recaptcha`;async function eo(e,t,n){if(!e._getRecaptchaConfig())try{await Ni(e)}catch{console.log(`Failed to initialize reCAPTCHA Enterprise config. Triggering the reCAPTCHA v2 verification.`)}try{let r;if(r=typeof t==`string`?{phoneNumber:t}:t,`session`in r){let t=r.session;if(`phoneNumber`in r)return B(t.type===`enroll`,e,`internal-error`),(await V(e,{idToken:t.credential,phoneEnrollmentInfo:{phoneNumber:r.phoneNumber,clientType:`CLIENT_TYPE_WEB`}},`mfaSmsEnrollment`,async(e,t)=>t.phoneEnrollmentInfo.captchaResponse===Ai?(B(n?.type===$a,e,`argument-error`),pa(e,await to(e,t,n))):pa(e,t),`PHONE_PROVIDER`).catch(e=>Promise.reject(e))).phoneSessionInfo.sessionInfo;{B(t.type===`signin`,e,`internal-error`);let i=r.multiFactorHint?.uid||r.multiFactorUid;return B(i,e,`missing-multi-factor-info`),(await V(e,{mfaPendingCredential:t.credential,mfaEnrollmentId:i,phoneSignInInfo:{clientType:`CLIENT_TYPE_WEB`}},`mfaSmsSignIn`,async(e,t)=>t.phoneSignInInfo.captchaResponse===Ai?(B(n?.type===$a,e,`argument-error`),Xa(e,await to(e,t,n))):Xa(e,t),`PHONE_PROVIDER`).catch(e=>Promise.reject(e))).phoneResponseInfo.sessionInfo}}else return(await V(e,{phoneNumber:r.phoneNumber,clientType:`CLIENT_TYPE_WEB`},`sendVerificationCode`,async(e,t)=>t.captchaResponse===Ai?(B(n?.type===$a,e,`argument-error`),Wi(e,await to(e,t,n))):Wi(e,t),`PHONE_PROVIDER`).catch(e=>Promise.reject(e))).sessionInfo}finally{n?._reset()}}async function to(e,t,n){B(n.type===$a,e,`argument-error`);let r=await n.verify();B(typeof r==`string`,e,`argument-error`);let i={...t};if(`phoneEnrollmentInfo`in i){let e=i.phoneEnrollmentInfo.phoneNumber,t=i.phoneEnrollmentInfo.captchaResponse,n=i.phoneEnrollmentInfo.clientType,a=i.phoneEnrollmentInfo.recaptchaVersion;return Object.assign(i,{phoneEnrollmentInfo:{phoneNumber:e,recaptchaToken:r,captchaResponse:t,clientType:n,recaptchaVersion:a}}),i}else if(`phoneSignInInfo`in i){let e=i.phoneSignInInfo.captchaResponse,t=i.phoneSignInInfo.clientType,n=i.phoneSignInInfo.recaptchaVersion;return Object.assign(i,{phoneSignInInfo:{recaptchaToken:r,captchaResponse:e,clientType:t,recaptchaVersion:n}}),i}else return Object.assign(i,{recaptchaToken:r}),i}var no=class e{constructor(t){this.providerId=e.PROVIDER_ID,this.auth=bi(t)}verifyPhoneNumber(e,t){return eo(this.auth,e,_t(t))}static credential(e,t){return Yi._fromVerification(e,t)}static credentialFromResult(t){let n=t;return e.credentialFromTaggedObject(n)}static credentialFromError(t){return e.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;let{phoneNumber:t,temporaryProof:n}=e;return t&&n?Yi._fromTokenResponse(t,n):null}};no.PROVIDER_ID=`phone`,no.PHONE_SIGN_IN_METHOD=`phone`;var ro=class extends Fi{constructor(e){super(`custom`,`custom`),this.params=e}_getIdTokenResponse(e){return Vi(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Vi(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Vi(e,this._buildIdpRequest())}_buildIdpRequest(e){let t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}};function io(e){return fa(e.auth,new ro(e),e.bypassAuthState)}function ao(e){let{auth:t,user:n}=e;return B(n,t,`internal-error`),da(n,new ro(e),e.bypassAuthState)}async function oo(e){let{auth:t,user:n}=e;return B(n,t,`internal-error`),ua(n,new ro(e),e.bypassAuthState)}var so=class{constructor(e,t,n,r,i=!1){this.auth=e,this.resolver=n,this.user=r,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(e){this.reject(e)}})}async onAuthEvent(e){let{urlResponse:t,sessionId:n,postBody:r,tenantId:i,error:a,type:o}=e;if(a){this.reject(a);return}let s={auth:this.auth,requestUri:t,sessionId:n,tenantId:i||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(o)(s))}catch(e){this.reject(e)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case`signInViaPopup`:case`signInViaRedirect`:return io;case`linkViaPopup`:case`linkViaRedirect`:return oo;case`reauthViaPopup`:case`reauthViaRedirect`:return ao;default:rr(this.auth,`internal-error`)}}resolve(e){lr(this.pendingPromise,`Pending promise was never set`),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){lr(this.pendingPromise,`Pending promise was never set`),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}},co=new mr(2e3,1e4),lo=class e extends so{constructor(t,n,r,i,a){super(t,n,i,a),this.provider=r,this.authWindow=null,this.pollId=null,e.currentPopupAction&&e.currentPopupAction.cancel(),e.currentPopupAction=this}async executeNotNull(){let e=await this.execute();return B(e,this.auth,`internal-error`),e}async onExecution(){lr(this.filter.length===1,`Popup operations only handle one event`);let e=ka();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(e=>{this.reject(e)}),this.resolver._isIframeWebStorageSupported(this.auth,e=>{e||this.reject(ir(this.auth,`web-storage-unsupported`))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(ir(this.auth,`cancelled-popup-request`))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,e.currentPopupAction=null}pollUserCancellation(){let e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(ir(this.auth,`popup-closed-by-user`))},8e3);return}this.pollId=window.setTimeout(e,co.get())};e()}};lo.currentPopupAction=null,new mr(3e4,6e4),new mr(5e3,15e3);var uo=class{constructor(e){this.factorId=e}_process(e,t,n){switch(t.type){case`enroll`:return this._finalizeEnroll(e,t.credential,n);case`signin`:return this._finalizeSignIn(e,t.credential);default:return cr(`unexpected MultiFactorSessionType`)}}},H=class e extends uo{constructor(e){super(`phone`),this.credential=e}static _fromCredential(t){return new e(t)}_finalizeEnroll(e,t,n){return ma(e,{idToken:t,displayName:n,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(e,t){return Za(e,{mfaPendingCredential:t,phoneVerificationInfo:this.credential._makeVerificationRequest()})}},fo=class{constructor(){}static assertion(e){return H._fromCredential(e)}};fo.FACTOR_ID=`phone`;var po=class{static assertionForEnrollment(e,t){return mo._fromSecret(e,t)}static assertionForSignIn(e,t){return mo._fromEnrollmentId(e,t)}static async generateSecret(e){let t=e;B(t.user?.auth!==void 0,`internal-error`);let n=await ha(t.user.auth,{idToken:t.credential,totpEnrollmentInfo:{}});return ho._fromStartTotpMfaEnrollmentResponse(n,t.user.auth)}};po.FACTOR_ID=`totp`;var mo=class e extends uo{constructor(e,t,n){super(`totp`),this.otp=e,this.enrollmentId=t,this.secret=n}static _fromSecret(t,n){return new e(n,void 0,t)}static _fromEnrollmentId(t,n){return new e(n,t)}async _finalizeEnroll(e,t,n){return B(this.secret!==void 0,e,`argument-error`),ga(e,{idToken:t,displayName:n,totpVerificationInfo:this.secret._makeTotpVerificationInfo(this.otp)})}async _finalizeSignIn(e,t){B(this.enrollmentId!==void 0&&this.otp!==void 0,e,`argument-error`);let n={verificationCode:this.otp};return Qa(e,{mfaPendingCredential:t,mfaEnrollmentId:this.enrollmentId,totpVerificationInfo:n})}},ho=class e{constructor(e,t,n,r,i,a,o){this.sessionInfo=a,this.auth=o,this.secretKey=e,this.hashingAlgorithm=t,this.codeLength=n,this.codeIntervalSeconds=r,this.enrollmentCompletionDeadline=i}static _fromStartTotpMfaEnrollmentResponse(t,n){return new e(t.totpSessionInfo.sharedSecretKey,t.totpSessionInfo.hashingAlgorithm,t.totpSessionInfo.verificationCodeLength,t.totpSessionInfo.periodSec,new Date(t.totpSessionInfo.finalizeEnrollmentTime).toUTCString(),t.totpSessionInfo.sessionInfo,n)}_makeTotpVerificationInfo(e){return{sessionInfo:this.sessionInfo,verificationCode:e}}generateQrCodeUrl(e,t){let n=!1;return(go(e)||go(t))&&(n=!0),n&&(go(e)&&(e=this.auth.currentUser?.email||`unknownuser`),go(t)&&(t=this.auth.name)),`otpauth://totp/${t}:${e}?secret=${this.secretKey}&issuer=${t}&algorithm=${this.hashingAlgorithm}&digits=${this.codeLength}`}};function go(e){return e===void 0||e?.length===0}var _o=`@firebase/auth`,vo=`1.12.0`,yo=class{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;let t=this.auth.onIdTokenChanged(t=>{e(t?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();let t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){B(this.auth._initializationPromise,`dependent-sdk-initialized-before-auth`)}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};function bo(e){switch(e){case`Node`:return`node`;case`ReactNative`:return`rn`;case`Worker`:return`webworker`;case`Cordova`:return`cordova`;case`WebExtension`:return`web-extension`;default:return}}function xo(e){kn(new vt(`auth`,(t,{options:n})=>{let r=t.getProvider(`app`).getImmediate(),i=t.getProvider(`heartbeat`),a=t.getProvider(`app-check-internal`),{apiKey:o,authDomain:s}=r.options;B(o&&!o.includes(`:`),`invalid-api-key`,{appName:r.name});let c=new yi(r,i,a,{apiKey:o,authDomain:s,clientPlatform:e,apiHost:`identitytoolkit.googleapis.com`,tokenApiHost:`securetoken.googleapis.com`,apiScheme:`https`,sdkClientVersion:mi(e)});return Pi(c,n),c},`PUBLIC`).setInstantiationMode(`EXPLICIT`).setInstanceCreatedCallback((e,t,n)=>{e.getProvider(`auth-internal`).initialize()})),kn(new vt(`auth-internal`,e=>(e=>new yo(e))(bi(e.getProvider(`auth`).getImmediate())),`PRIVATE`).setInstantiationMode(`EXPLICIT`)),Nn(_o,vo,bo(e)),Nn(_o,vo,`esm2020`)}function So(){return document.getElementsByTagName(`head`)?.[0]??document}Ci({loadJS(e){return new Promise((t,n)=>{let r=document.createElement(`script`);r.setAttribute(`src`,e),r.onload=t,r.onerror=e=>{let t=ir(`internal-error`);t.customData=e,n(t)},r.type=`text/javascript`,r.charset=`UTF-8`,So().appendChild(r)})},gapiScript:`https://apis.google.com/js/api.js`,recaptchaV2Script:`https://www.google.com/recaptcha/api.js`,recaptchaEnterpriseScript:`https://www.google.com/recaptcha/enterprise.js?render=`}),xo(`Browser`);var Co=typeof globalThis<`u`?globalThis:typeof window<`u`?window:typeof global<`u`?global:typeof self<`u`?self:{},wo={},To;(function(){var e;function t(e,t){function n(){}n.prototype=t.prototype,e.F=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.D=function(e,n,r){for(var i=Array(arguments.length-2),a=2;a<arguments.length;a++)i[a-2]=arguments[a];return t.prototype[n].apply(e,i)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=[,,,,],this.C=Array(this.blockSize),this.o=this.h=0,this.u()}t(r,n),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(e,t,n){n||=0;let r=Array(16);if(typeof t==`string`)for(var i=0;i<16;++i)r[i]=t.charCodeAt(n++)|t.charCodeAt(n++)<<8|t.charCodeAt(n++)<<16|t.charCodeAt(n++)<<24;else for(i=0;i<16;++i)r[i]=t[n++]|t[n++]<<8|t[n++]<<16|t[n++]<<24;t=e.g[0],n=e.g[1],i=e.g[2];let a=e.g[3],o;o=t+(a^n&(i^a))+r[0]+3614090360&4294967295,t=n+(o<<7&4294967295|o>>>25),o=a+(i^t&(n^i))+r[1]+3905402710&4294967295,a=t+(o<<12&4294967295|o>>>20),o=i+(n^a&(t^n))+r[2]+606105819&4294967295,i=a+(o<<17&4294967295|o>>>15),o=n+(t^i&(a^t))+r[3]+3250441966&4294967295,n=i+(o<<22&4294967295|o>>>10),o=t+(a^n&(i^a))+r[4]+4118548399&4294967295,t=n+(o<<7&4294967295|o>>>25),o=a+(i^t&(n^i))+r[5]+1200080426&4294967295,a=t+(o<<12&4294967295|o>>>20),o=i+(n^a&(t^n))+r[6]+2821735955&4294967295,i=a+(o<<17&4294967295|o>>>15),o=n+(t^i&(a^t))+r[7]+4249261313&4294967295,n=i+(o<<22&4294967295|o>>>10),o=t+(a^n&(i^a))+r[8]+1770035416&4294967295,t=n+(o<<7&4294967295|o>>>25),o=a+(i^t&(n^i))+r[9]+2336552879&4294967295,a=t+(o<<12&4294967295|o>>>20),o=i+(n^a&(t^n))+r[10]+4294925233&4294967295,i=a+(o<<17&4294967295|o>>>15),o=n+(t^i&(a^t))+r[11]+2304563134&4294967295,n=i+(o<<22&4294967295|o>>>10),o=t+(a^n&(i^a))+r[12]+1804603682&4294967295,t=n+(o<<7&4294967295|o>>>25),o=a+(i^t&(n^i))+r[13]+4254626195&4294967295,a=t+(o<<12&4294967295|o>>>20),o=i+(n^a&(t^n))+r[14]+2792965006&4294967295,i=a+(o<<17&4294967295|o>>>15),o=n+(t^i&(a^t))+r[15]+1236535329&4294967295,n=i+(o<<22&4294967295|o>>>10),o=t+(i^a&(n^i))+r[1]+4129170786&4294967295,t=n+(o<<5&4294967295|o>>>27),o=a+(n^i&(t^n))+r[6]+3225465664&4294967295,a=t+(o<<9&4294967295|o>>>23),o=i+(t^n&(a^t))+r[11]+643717713&4294967295,i=a+(o<<14&4294967295|o>>>18),o=n+(a^t&(i^a))+r[0]+3921069994&4294967295,n=i+(o<<20&4294967295|o>>>12),o=t+(i^a&(n^i))+r[5]+3593408605&4294967295,t=n+(o<<5&4294967295|o>>>27),o=a+(n^i&(t^n))+r[10]+38016083&4294967295,a=t+(o<<9&4294967295|o>>>23),o=i+(t^n&(a^t))+r[15]+3634488961&4294967295,i=a+(o<<14&4294967295|o>>>18),o=n+(a^t&(i^a))+r[4]+3889429448&4294967295,n=i+(o<<20&4294967295|o>>>12),o=t+(i^a&(n^i))+r[9]+568446438&4294967295,t=n+(o<<5&4294967295|o>>>27),o=a+(n^i&(t^n))+r[14]+3275163606&4294967295,a=t+(o<<9&4294967295|o>>>23),o=i+(t^n&(a^t))+r[3]+4107603335&4294967295,i=a+(o<<14&4294967295|o>>>18),o=n+(a^t&(i^a))+r[8]+1163531501&4294967295,n=i+(o<<20&4294967295|o>>>12),o=t+(i^a&(n^i))+r[13]+2850285829&4294967295,t=n+(o<<5&4294967295|o>>>27),o=a+(n^i&(t^n))+r[2]+4243563512&4294967295,a=t+(o<<9&4294967295|o>>>23),o=i+(t^n&(a^t))+r[7]+1735328473&4294967295,i=a+(o<<14&4294967295|o>>>18),o=n+(a^t&(i^a))+r[12]+2368359562&4294967295,n=i+(o<<20&4294967295|o>>>12),o=t+(n^i^a)+r[5]+4294588738&4294967295,t=n+(o<<4&4294967295|o>>>28),o=a+(t^n^i)+r[8]+2272392833&4294967295,a=t+(o<<11&4294967295|o>>>21),o=i+(a^t^n)+r[11]+1839030562&4294967295,i=a+(o<<16&4294967295|o>>>16),o=n+(i^a^t)+r[14]+4259657740&4294967295,n=i+(o<<23&4294967295|o>>>9),o=t+(n^i^a)+r[1]+2763975236&4294967295,t=n+(o<<4&4294967295|o>>>28),o=a+(t^n^i)+r[4]+1272893353&4294967295,a=t+(o<<11&4294967295|o>>>21),o=i+(a^t^n)+r[7]+4139469664&4294967295,i=a+(o<<16&4294967295|o>>>16),o=n+(i^a^t)+r[10]+3200236656&4294967295,n=i+(o<<23&4294967295|o>>>9),o=t+(n^i^a)+r[13]+681279174&4294967295,t=n+(o<<4&4294967295|o>>>28),o=a+(t^n^i)+r[0]+3936430074&4294967295,a=t+(o<<11&4294967295|o>>>21),o=i+(a^t^n)+r[3]+3572445317&4294967295,i=a+(o<<16&4294967295|o>>>16),o=n+(i^a^t)+r[6]+76029189&4294967295,n=i+(o<<23&4294967295|o>>>9),o=t+(n^i^a)+r[9]+3654602809&4294967295,t=n+(o<<4&4294967295|o>>>28),o=a+(t^n^i)+r[12]+3873151461&4294967295,a=t+(o<<11&4294967295|o>>>21),o=i+(a^t^n)+r[15]+530742520&4294967295,i=a+(o<<16&4294967295|o>>>16),o=n+(i^a^t)+r[2]+3299628645&4294967295,n=i+(o<<23&4294967295|o>>>9),o=t+(i^(n|~a))+r[0]+4096336452&4294967295,t=n+(o<<6&4294967295|o>>>26),o=a+(n^(t|~i))+r[7]+1126891415&4294967295,a=t+(o<<10&4294967295|o>>>22),o=i+(t^(a|~n))+r[14]+2878612391&4294967295,i=a+(o<<15&4294967295|o>>>17),o=n+(a^(i|~t))+r[5]+4237533241&4294967295,n=i+(o<<21&4294967295|o>>>11),o=t+(i^(n|~a))+r[12]+1700485571&4294967295,t=n+(o<<6&4294967295|o>>>26),o=a+(n^(t|~i))+r[3]+2399980690&4294967295,a=t+(o<<10&4294967295|o>>>22),o=i+(t^(a|~n))+r[10]+4293915773&4294967295,i=a+(o<<15&4294967295|o>>>17),o=n+(a^(i|~t))+r[1]+2240044497&4294967295,n=i+(o<<21&4294967295|o>>>11),o=t+(i^(n|~a))+r[8]+1873313359&4294967295,t=n+(o<<6&4294967295|o>>>26),o=a+(n^(t|~i))+r[15]+4264355552&4294967295,a=t+(o<<10&4294967295|o>>>22),o=i+(t^(a|~n))+r[6]+2734768916&4294967295,i=a+(o<<15&4294967295|o>>>17),o=n+(a^(i|~t))+r[13]+1309151649&4294967295,n=i+(o<<21&4294967295|o>>>11),o=t+(i^(n|~a))+r[4]+4149444226&4294967295,t=n+(o<<6&4294967295|o>>>26),o=a+(n^(t|~i))+r[11]+3174756917&4294967295,a=t+(o<<10&4294967295|o>>>22),o=i+(t^(a|~n))+r[2]+718787259&4294967295,i=a+(o<<15&4294967295|o>>>17),o=n+(a^(i|~t))+r[9]+3951481745&4294967295,e.g[0]=e.g[0]+t&4294967295,e.g[1]=e.g[1]+(i+(o<<21&4294967295|o>>>11))&4294967295,e.g[2]=e.g[2]+i&4294967295,e.g[3]=e.g[3]+a&4294967295}r.prototype.v=function(e,t){t===void 0&&(t=e.length);let n=t-this.blockSize,r=this.C,a=this.h,o=0;for(;o<t;){if(a==0)for(;o<=n;)i(this,e,o),o+=this.blockSize;if(typeof e==`string`){for(;o<t;)if(r[a++]=e.charCodeAt(o++),a==this.blockSize){i(this,r),a=0;break}}else for(;o<t;)if(r[a++]=e[o++],a==this.blockSize){i(this,r),a=0;break}}this.h=a,this.o+=t},r.prototype.A=function(){var e=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);e[0]=128;for(var t=1;t<e.length-8;++t)e[t]=0;t=this.o*8;for(var n=e.length-8;n<e.length;++n)e[n]=t&255,t/=256;for(this.v(e),e=Array(16),t=0,n=0;n<4;++n)for(let r=0;r<32;r+=8)e[t++]=this.g[n]>>>r&255;return e};function a(e,t){var n=s;return Object.prototype.hasOwnProperty.call(n,e)?n[e]:n[e]=t(e)}function o(e,t){this.h=t;let n=[],r=!0;for(let i=e.length-1;i>=0;i--){let a=e[i]|0;r&&a==t||(n[i]=a,r=!1)}this.g=n}var s={};function c(e){return-128<=e&&e<128?a(e,function(e){return new o([e|0],e<0?-1:0)}):new o([e|0],e<0?-1:0)}function l(e){if(isNaN(e)||!isFinite(e))return d;if(e<0)return g(l(-e));let t=[],n=1;for(let r=0;e>=n;r++)t[r]=e/n|0,n*=4294967296;return new o(t,0)}function u(e,t){if(e.length==0)throw Error(`number format error: empty string`);if(t||=10,t<2||36<t)throw Error(`radix out of range: `+t);if(e.charAt(0)==`-`)return g(u(e.substring(1),t));if(e.indexOf(`-`)>=0)throw Error(`number format error: interior "-" character`);let n=l(t**8),r=d;for(let a=0;a<e.length;a+=8){var i=Math.min(8,e.length-a);let o=parseInt(e.substring(a,a+i),t);i<8?(i=l(t**+i),r=r.j(i).add(l(o))):(r=r.j(n),r=r.add(l(o)))}return r}var d=c(0),f=c(1),p=c(16777216);e=o.prototype,e.m=function(){if(h(this))return-g(this).m();let e=0,t=1;for(let n=0;n<this.g.length;n++){let r=this.i(n);e+=(r>=0?r:4294967296+r)*t,t*=4294967296}return e},e.toString=function(e){if(e||=10,e<2||36<e)throw Error(`radix out of range: `+e);if(m(this))return`0`;if(h(this))return`-`+g(this).toString(e);let t=l(e**6);var n=this;let r=``;for(;;){let i=b(n,t).g;n=_(n,i.j(t));let a=((n.g.length>0?n.g[0]:n.h)>>>0).toString(e);if(n=i,m(n))return a+r;for(;a.length<6;)a=`0`+a;r=a+r}},e.i=function(e){return e<0?0:e<this.g.length?this.g[e]:this.h};function m(e){if(e.h!=0)return!1;for(let t=0;t<e.g.length;t++)if(e.g[t]!=0)return!1;return!0}function h(e){return e.h==-1}e.l=function(e){return e=_(this,e),h(e)?-1:m(e)?0:1};function g(e){let t=e.g.length,n=[];for(let r=0;r<t;r++)n[r]=~e.g[r];return new o(n,~e.h).add(f)}e.abs=function(){return h(this)?g(this):this},e.add=function(e){let t=Math.max(this.g.length,e.g.length),n=[],r=0;for(let i=0;i<=t;i++){let t=r+(this.i(i)&65535)+(e.i(i)&65535),a=(t>>>16)+(this.i(i)>>>16)+(e.i(i)>>>16);r=a>>>16,t&=65535,a&=65535,n[i]=a<<16|t}return new o(n,n[n.length-1]&-2147483648?-1:0)};function _(e,t){return e.add(g(t))}e.j=function(e){if(m(this)||m(e))return d;if(h(this))return h(e)?g(this).j(g(e)):g(g(this).j(e));if(h(e))return g(this.j(g(e)));if(this.l(p)<0&&e.l(p)<0)return l(this.m()*e.m());let t=this.g.length+e.g.length,n=[];for(var r=0;r<2*t;r++)n[r]=0;for(r=0;r<this.g.length;r++)for(let t=0;t<e.g.length;t++){let i=this.i(r)>>>16,a=this.i(r)&65535,o=e.i(t)>>>16,s=e.i(t)&65535;n[2*r+2*t]+=a*s,v(n,2*r+2*t),n[2*r+2*t+1]+=i*s,v(n,2*r+2*t+1),n[2*r+2*t+1]+=a*o,v(n,2*r+2*t+1),n[2*r+2*t+2]+=i*o,v(n,2*r+2*t+2)}for(e=0;e<t;e++)n[e]=n[2*e+1]<<16|n[2*e];for(e=t;e<2*t;e++)n[e]=0;return new o(n,0)};function v(e,t){for(;(e[t]&65535)!=e[t];)e[t+1]+=e[t]>>>16,e[t]&=65535,t++}function y(e,t){this.g=e,this.h=t}function b(e,t){if(m(t))throw Error(`division by zero`);if(m(e))return new y(d,d);if(h(e))return t=b(g(e),t),new y(g(t.g),g(t.h));if(h(t))return t=b(e,g(t)),new y(g(t.g),t.h);if(e.g.length>30){if(h(e)||h(t))throw Error(`slowDivide_ only works with positive integers.`);for(var n=f,r=t;r.l(e)<=0;)n=x(n),r=x(r);var i=S(n,1),a=S(r,1);for(r=S(r,2),n=S(n,2);!m(r);){var o=a.add(r);o.l(e)<=0&&(i=i.add(n),a=o),r=S(r,1),n=S(n,1)}return t=_(e,i.j(t)),new y(i,t)}for(i=d;e.l(t)>=0;){for(n=Math.max(1,Math.floor(e.m()/t.m())),r=Math.ceil(Math.log(n)/Math.LN2),r=r<=48?1:2**(r-48),a=l(n),o=a.j(t);h(o)||o.l(e)>0;)n-=r,a=l(n),o=a.j(t);m(a)&&(a=f),i=i.add(a),e=_(e,o)}return new y(i,e)}e.B=function(e){return b(this,e).h},e.and=function(e){let t=Math.max(this.g.length,e.g.length),n=[];for(let r=0;r<t;r++)n[r]=this.i(r)&e.i(r);return new o(n,this.h&e.h)},e.or=function(e){let t=Math.max(this.g.length,e.g.length),n=[];for(let r=0;r<t;r++)n[r]=this.i(r)|e.i(r);return new o(n,this.h|e.h)},e.xor=function(e){let t=Math.max(this.g.length,e.g.length),n=[];for(let r=0;r<t;r++)n[r]=this.i(r)^e.i(r);return new o(n,this.h^e.h)};function x(e){let t=e.g.length+1,n=[];for(let r=0;r<t;r++)n[r]=e.i(r)<<1|e.i(r-1)>>>31;return new o(n,e.h)}function S(e,t){let n=t>>5;t%=32;let r=e.g.length-n,i=[];for(let a=0;a<r;a++)i[a]=t>0?e.i(a+n)>>>t|e.i(a+n+1)<<32-t:e.i(a+n);return new o(i,e.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,wo.Md5=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.B,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=l,o.fromString=u,To=wo.Integer=o}).apply(Co===void 0?typeof self<`u`?self:typeof window<`u`?window:{}:Co);var Eo=typeof globalThis<`u`?globalThis:typeof window<`u`?window:typeof global<`u`?global:typeof self<`u`?self:{},Do={},Oo,ko,Ao,jo,Mo,No,Po,Fo;(function(){var e,t=Object.defineProperty;function n(e){e=[typeof globalThis==`object`&&globalThis,e,typeof window==`object`&&window,typeof self==`object`&&self,typeof Eo==`object`&&Eo];for(var t=0;t<e.length;++t){var n=e[t];if(n&&n.Math==Math)return n}throw Error(`Cannot find global object`)}var r=n(this);function i(e,n){if(n)a:{var i=r;e=e.split(`.`);for(var a=0;a<e.length-1;a++){var o=e[a];if(!(o in i))break a;i=i[o]}e=e[e.length-1],a=i[e],n=n(a),n!=a&&n!=null&&t(i,e,{configurable:!0,writable:!0,value:n})}}i(`Symbol.dispose`,function(e){return e||Symbol(`Symbol.dispose`)}),i(`Array.prototype.values`,function(e){return e||function(){return this[Symbol.iterator]()}}),i(`Object.entries`,function(e){return e||function(e){var t=[],n;for(n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.push([n,e[n]]);return t}});var a=a||{},o=this||self;function s(e){var t=typeof e;return t==`object`&&e!=null||t==`function`}function c(e,t,n){return e.call.apply(e.bind,arguments)}function l(e,t,n){return l=c,l.apply(null,arguments)}function u(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function d(e,t){function n(){}n.prototype=t.prototype,e.Z=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.Ob=function(e,n,r){for(var i=Array(arguments.length-2),a=2;a<arguments.length;a++)i[a-2]=arguments[a];return t.prototype[n].apply(e,i)}}var f=typeof AsyncContext<`u`&&typeof AsyncContext.Snapshot==`function`?e=>e&&AsyncContext.Snapshot.wrap(e):e=>e;function p(e){let t=e.length;if(t>0){let n=Array(t);for(let r=0;r<t;r++)n[r]=e[r];return n}return[]}function m(e,t){for(let t=1;t<arguments.length;t++){let r=arguments[t];var n=typeof r;if(n=n==`object`?r?Array.isArray(r)?`array`:n:`null`:n,n==`array`||n==`object`&&typeof r.length==`number`){n=e.length||0;let t=r.length||0;e.length=n+t;for(let i=0;i<t;i++)e[n+i]=r[i]}else e.push(r)}}class h{constructor(e,t){this.i=e,this.j=t,this.h=0,this.g=null}get(){let e;return this.h>0?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}function g(e){o.setTimeout(()=>{throw e},0)}function _(){var e=C;let t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}class v{constructor(){this.h=this.g=null}add(e,t){let n=y.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}}var y=new h(()=>new b,e=>e.reset());class b{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}let x,S=!1,C=new v,w=()=>{let e=Promise.resolve(void 0);x=()=>{e.then(T)}};function T(){for(var e;e=_();){try{e.h.call(e.g)}catch(e){g(e)}var t=y;t.j(e),t.h<100&&(t.h++,e.next=t.g,t.g=e)}S=!1}function E(){this.u=this.u,this.C=this.C}E.prototype.u=!1,E.prototype.dispose=function(){this.u||(this.u=!0,this.N())},E.prototype[Symbol.dispose]=function(){this.dispose()},E.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function D(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}D.prototype.h=function(){this.defaultPrevented=!0};var O=function(){if(!o.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},`passive`,{get:function(){e=!0}});try{let e=()=>{};o.addEventListener(`test`,e,t),o.removeEventListener(`test`,e,t)}catch{}return e}();function k(e){return/^[\s\xa0]*$/.test(e)}function A(e,t){D.call(this,e?e.type:``),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key=``,this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType=``,this.i=null,e&&this.init(e,t)}d(A,D),A.prototype.init=function(e,t){let n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget,t||(n==`mouseover`?t=e.fromElement:n==`mouseout`&&(t=e.toElement)),this.relatedTarget=t,r?(this.clientX=r.clientX===void 0?r.pageX:r.clientX,this.clientY=r.clientY===void 0?r.pageY:r.clientY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=e.clientX===void 0?e.pageX:e.clientX,this.clientY=e.clientY===void 0?e.pageY:e.clientY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||``,this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType=e.pointerType,this.state=e.state,this.i=e,e.defaultPrevented&&A.Z.h.call(this)},A.prototype.h=function(){A.Z.h.call(this);let e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var j=`closure_listenable_`+(Math.random()*1e6|0),M=0;function ee(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.ha=i,this.key=++M,this.da=this.fa=!1}function te(e){e.da=!0,e.listener=null,e.proxy=null,e.src=null,e.ha=null}function ne(e,t,n){for(let r in e)t.call(n,e[r],r,e)}function N(e,t){for(let n in e)t.call(void 0,e[n],n,e)}function P(e){let t={};for(let n in e)t[n]=e[n];return t}let re=`constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf`.split(` `);function ie(e,t){let n,r;for(let t=1;t<arguments.length;t++){for(n in r=arguments[t],r)e[n]=r[n];for(let t=0;t<re.length;t++)n=re[t],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function ae(e){this.src=e,this.g={},this.h=0}ae.prototype.add=function(e,t,n,r,i){let a=e.toString();e=this.g[a],e||(e=this.g[a]=[],this.h++);let o=se(e,t,r,i);return o>-1?(t=e[o],n||(t.fa=!1)):(t=new ee(t,this.src,a,!!r,i),t.fa=n,e.push(t)),t};function oe(e,t){let n=t.type;if(n in e.g){var r=e.g[n],i=Array.prototype.indexOf.call(r,t,void 0),a;(a=i>=0)&&Array.prototype.splice.call(r,i,1),a&&(te(t),e.g[n].length==0&&(delete e.g[n],e.h--))}}function se(e,t,n,r){for(let i=0;i<e.length;++i){let a=e[i];if(!a.da&&a.listener==t&&a.capture==!!n&&a.ha==r)return i}return-1}var F=`closure_lm_`+(Math.random()*1e6|0),ce={};function le(e,t,n,r,i){if(r&&r.once)return fe(e,t,n,r,i);if(Array.isArray(t)){for(let a=0;a<t.length;a++)le(e,t[a],n,r,i);return null}return n=ye(n),e&&e[j]?e.J(t,n,s(r)?!!r.capture:!!r,i):ue(e,t,n,!1,r,i)}function ue(e,t,n,r,i,a){if(!t)throw Error(`Invalid event type`);let o=s(i)?!!i.capture:!!i,c=_e(e);if(c||(e[F]=c=new ae(e)),n=c.add(t,n,r,o,a),n.proxy)return n;if(r=de(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)O||(i=o),i===void 0&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(he(t.toString()),r);else if(e.addListener&&e.removeListener)e.addListener(r);else throw Error(`addEventListener and attachEvent are unavailable.`);return n}function de(){function e(n){return t.call(e.src,e.listener,n)}let t=ge;return e}function fe(e,t,n,r,i){if(Array.isArray(t)){for(let a=0;a<t.length;a++)fe(e,t[a],n,r,i);return null}return n=ye(n),e&&e[j]?e.K(t,n,s(r)?!!r.capture:!!r,i):ue(e,t,n,!0,r,i)}function pe(e,t,n,r,i){if(Array.isArray(t))for(var a=0;a<t.length;a++)pe(e,t[a],n,r,i);else r=s(r)?!!r.capture:!!r,n=ye(n),e&&e[j]?(e=e.i,a=String(t).toString(),a in e.g&&(t=e.g[a],n=se(t,n,r,i),n>-1&&(te(t[n]),Array.prototype.splice.call(t,n,1),t.length==0&&(delete e.g[a],e.h--)))):(e&&=_e(e))&&(t=e.g[t.toString()],e=-1,t&&(e=se(t,n,r,i)),(n=e>-1?t[e]:null)&&me(n))}function me(e){if(typeof e!=`number`&&e&&!e.da){var t=e.src;if(t&&t[j])oe(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(he(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=_e(t))?(oe(n,e),n.h==0&&(n.src=null,t[F]=null)):te(e)}}}function he(e){return e in ce?ce[e]:ce[e]=`on`+e}function ge(e,t){if(e.da)e=!0;else{t=new A(t,this);let n=e.listener,r=e.ha||e.src;e.fa&&me(e),e=n.call(r,t)}return e}function _e(e){return e=e[F],e instanceof ae?e:null}var ve=`__closure_events_fn_`+(Math.random()*1e9>>>0);function ye(e){return typeof e==`function`?e:(e[ve]||(e[ve]=function(t){return e.handleEvent(t)}),e[ve])}function be(){E.call(this),this.i=new ae(this),this.M=this,this.G=null}d(be,E),be.prototype[j]=!0,be.prototype.removeEventListener=function(e,t,n,r){pe(this,e,t,n,r)};function xe(e,t){var n,r=e.G;if(r)for(n=[];r;r=r.G)n.push(r);if(e=e.M,r=t.type||t,typeof t==`string`)t=new D(t,e);else if(t instanceof D)t.target=t.target||e;else{var i=t;t=new D(r,e),ie(t,i)}i=!0;let a,o;if(n)for(o=n.length-1;o>=0;o--)a=t.g=n[o],i=Se(a,r,!0,t)&&i;if(a=t.g=e,i=Se(a,r,!0,t)&&i,i=Se(a,r,!1,t)&&i,n)for(o=0;o<n.length;o++)a=t.g=n[o],i=Se(a,r,!1,t)&&i}be.prototype.N=function(){if(be.Z.N.call(this),this.i){var e=this.i;for(let t in e.g){let n=e.g[t];for(let e=0;e<n.length;e++)te(n[e]);delete e.g[t],e.h--}}this.G=null},be.prototype.J=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},be.prototype.K=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};function Se(e,t,n,r){if(t=e.i.g[String(t)],!t)return!0;t=t.concat();let i=!0;for(let a=0;a<t.length;++a){let o=t[a];if(o&&!o.da&&o.capture==n){let t=o.listener,n=o.ha||o.src;o.fa&&oe(e.i,o),i=t.call(n,r)!==!1&&i}}return i&&!r.defaultPrevented}function Ce(e,t){if(typeof e!=`function`)if(e&&typeof e.handleEvent==`function`)e=l(e.handleEvent,e);else throw Error(`Invalid listener argument`);return Number(t)>2147483647?-1:o.setTimeout(e,t||0)}function we(e){e.g=Ce(()=>{e.g=null,e.i&&(e.i=!1,we(e))},e.l);let t=e.h;e.h=null,e.m.apply(null,t)}class Te extends E{constructor(e,t){super(),this.m=e,this.l=t,this.h=null,this.i=!1,this.g=null}j(e){this.h=arguments,this.g?this.i=!0:we(this)}N(){super.N(),this.g&&(o.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Ee(e){E.call(this),this.h=e,this.g={}}d(Ee,E);var De=[];function Oe(e){ne(e.g,function(e,t){this.g.hasOwnProperty(t)&&me(e)},e),e.g={}}Ee.prototype.N=function(){Ee.Z.N.call(this),Oe(this)},Ee.prototype.handleEvent=function(){throw Error(`EventHandler.handleEvent not implemented`)};var ke=o.JSON.stringify,Ae=o.JSON.parse,je=class{stringify(e){return o.JSON.stringify(e,void 0)}parse(e){return o.JSON.parse(e,void 0)}};function Me(){}function Ne(){}var Pe={OPEN:`a`,hb:`b`,ERROR:`c`,tb:`d`};function Fe(){D.call(this,`d`)}d(Fe,D);function Ie(){D.call(this,`c`)}d(Ie,D);var Le={},Re=null;function ze(){return Re||=new be}Le.Ia=`serverreachability`;function Be(e){D.call(this,Le.Ia,e)}d(Be,D);function Ve(e){let t=ze();xe(t,new Be(t))}Le.STAT_EVENT=`statevent`;function He(e,t){D.call(this,Le.STAT_EVENT,e),this.stat=t}d(He,D);function Ue(e){let t=ze();xe(t,new He(t,e))}Le.Ja=`timingevent`;function We(e,t){D.call(this,Le.Ja,e),this.size=t}d(We,D);function Ge(e,t){if(typeof e!=`function`)throw Error(`Fn must not be null and must be a function`);return o.setTimeout(function(){e()},t)}function Ke(){this.g=!0}Ke.prototype.ua=function(){this.g=!1};function qe(e,t,n,r,i,a){e.info(function(){if(e.g)if(a){var o=``,s=a.split(`&`);for(let e=0;e<s.length;e++){var c=s[e].split(`=`);if(c.length>1){let e=c[0];c=c[1];let t=e.split(`_`);o=t.length>=2&&t[1]==`type`?o+(e+`=`+c+`&`):o+(e+`=redacted&`)}}}else o=null;else o=a;return`XMLHTTP REQ (`+r+`) [attempt `+i+`]: `+t+`
`+n+`
`+o})}function Je(e,t,n,r,i,a,o){e.info(function(){return`XMLHTTP RESP (`+r+`) [ attempt `+i+`]: `+t+`
`+n+`
`+a+` `+o})}function Ye(e,t,n,r){e.info(function(){return`XMLHTTP TEXT (`+t+`): `+Ze(e,n)+(r?` `+r:``)})}function Xe(e,t){e.info(function(){return`TIMEOUT: `+t})}Ke.prototype.info=function(){};function Ze(e,t){if(!e.g)return t;if(!t)return null;try{let a=JSON.parse(t);if(a){for(e=0;e<a.length;e++)if(Array.isArray(a[e])){var n=a[e];if(!(n.length<2)){var r=n[1];if(Array.isArray(r)&&!(r.length<1)){var i=r[0];if(i!=`noop`&&i!=`stop`&&i!=`close`)for(let e=1;e<r.length;e++)r[e]=``}}}}return ke(a)}catch{return t}}var Qe={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},$e={ib:`complete`,Fb:`success`,ERROR:`error`,Ga:`abort`,xb:`ready`,yb:`readystatechange`,TIMEOUT:`timeout`,sb:`incrementaldata`,wb:`progress`,lb:`downloadprogress`,Nb:`uploadprogress`},et;function tt(){}d(tt,Me),tt.prototype.g=function(){return new XMLHttpRequest},et=new tt;function nt(e){return encodeURIComponent(String(e))}function rt(e){var t=1;e=e.split(`:`);let n=[];for(;t>0&&e.length;)n.push(e.shift()),t--;return e.length&&n.push(e.join(`:`)),n}function it(e,t,n,r){this.j=e,this.i=t,this.l=n,this.S=r||1,this.V=new Ee(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new at}function at(){this.i=null,this.g=``,this.h=!1}var ot={},st={};function ct(e,t,n){e.M=1,e.A=R(kt(t)),e.u=n,e.R=!0,lt(e,null)}function lt(e,t){e.F=Date.now(),pt(e),e.B=kt(e.A);var n=e.B,r=e.S;Array.isArray(r)||(r=[String(r)]),Gt(n.i,`t`,r),e.C=0,n=e.j.L,e.h=new at,e.g=Ln(e.j,n?t:null,!e.u),e.P>0&&(e.O=new Te(l(e.Y,e,e.g),e.P)),t=e.V,n=e.g,r=e.ba;var i=`readystatechange`;Array.isArray(i)||(i&&(De[0]=i.toString()),i=De);for(let e=0;e<i.length;e++){let a=le(n,i[e],r||t.handleEvent,!1,t.h||t);if(!a)break;t.g[a.key]=a}t=e.J?P(e.J):{},e.u?(e.v||=`POST`,t[`Content-Type`]=`application/x-www-form-urlencoded`,e.g.ea(e.B,e.v,e.u,t)):(e.v=`GET`,e.g.ea(e.B,e.v,null,t)),Ve(),qe(e.i,e.v,e.B,e.l,e.S,e.u)}it.prototype.ba=function(e){e=e.target;let t=this.O;t&&mn(e)==3?t.j():this.Y(e)},it.prototype.Y=function(e){try{if(e==this.g)a:{let s=mn(this.g),c=this.g.ya(),l=this.g.ca();if(!(s<3)&&(s!=3||this.g&&(this.h.h||this.g.la()||hn(this.g)))){this.K||s!=4||c==7||Ve(c==8||l<=0?3:2),ht(this);var t=this.g.ca();this.X=t;var n=ut(this);if(this.o=t==200,Je(this.i,this.v,this.B,this.l,this.S,s,t),this.o){if(this.U&&!this.L){b:{if(this.g){var r,i=this.g;if((r=i.g?i.g.getResponseHeader(`X-HTTP-Initial-Response`):null)&&!k(r)){var a=r;break b}}a=null}if(e=a)Ye(this.i,this.l,e,`Initial handshake response via X-HTTP-Initial-Response`),this.L=!0,vt(this,e);else{this.o=!1,this.m=3,Ue(12),_t(this),gt(this);break a}}if(this.R){e=!0;let t;for(;!this.K&&this.C<n.length;)if(t=ft(this,n),t==st){s==4&&(this.m=4,Ue(14),e=!1),Ye(this.i,this.l,null,`[Incomplete Response]`);break}else if(t==ot){this.m=4,Ue(15),Ye(this.i,this.l,n,`[Invalid Chunk]`),e=!1;break}else Ye(this.i,this.l,t,null),vt(this,t);if(dt(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),s!=4||n.length!=0||this.h.h||(this.m=1,Ue(16),e=!1),this.o=this.o&&e,!e)Ye(this.i,this.l,n,`[Invalid Chunked Response]`),_t(this),gt(this);else if(n.length>0&&!this.W){this.W=!0;var o=this.j;o.g==this&&o.aa&&!o.P&&(o.j.info(`Great, no buffering proxy detected. Bytes received: `+n.length),kn(o),o.P=!0,Ue(11))}}else Ye(this.i,this.l,n,null),vt(this,n);s==4&&_t(this),this.o&&!this.K&&(s==4?Mn(this.j,this):(this.o=!1,pt(this)))}else gn(this.g),t==400&&n.indexOf(`Unknown SID`)>0?(this.m=3,Ue(12)):(this.m=0,Ue(13)),_t(this),gt(this)}}}catch{}};function ut(e){if(!dt(e))return e.g.la();let t=hn(e.g);if(t===``)return``;let n=``,r=t.length,i=mn(e.g)==4;if(!e.h.i){if(typeof TextDecoder>`u`)return _t(e),gt(e),``;e.h.i=new o.TextDecoder}for(let a=0;a<r;a++)e.h.h=!0,n+=e.h.i.decode(t[a],{stream:!(i&&a==r-1)});return t.length=0,e.h.g+=n,e.C=0,e.h.g}function dt(e){return e.g?e.v==`GET`&&e.M!=2&&e.j.Aa:!1}function ft(e,t){var n=e.C,r=t.indexOf(`
`,n);return r==-1?st:(n=Number(t.substring(n,r)),isNaN(n)?ot:(r+=1,r+n>t.length?st:(t=t.slice(r,r+n),e.C=r+n,t)))}it.prototype.cancel=function(){this.K=!0,_t(this)};function pt(e){e.T=Date.now()+e.H,mt(e,e.H)}function mt(e,t){if(e.D!=null)throw Error(`WatchDog timer not null`);e.D=Ge(l(e.aa,e),t)}function ht(e){e.D&&=(o.clearTimeout(e.D),null)}it.prototype.aa=function(){this.D=null;let e=Date.now();e-this.T>=0?(Xe(this.i,this.B),this.M!=2&&(Ve(),Ue(17)),_t(this),this.m=2,gt(this)):mt(this,this.T-e)};function gt(e){e.j.I==0||e.K||Mn(e.j,e)}function _t(e){ht(e);var t=e.O;t&&typeof t.dispose==`function`&&t.dispose(),e.O=null,Oe(e.V),e.g&&(t=e.g,e.g=null,t.abort(),t.dispose())}function vt(e,t){try{var n=e.j;if(n.I!=0&&(n.g==e||St(n.h,e))){if(!e.L&&St(n.h,e)&&n.I==3){try{var r=n.Ba.g.parse(t)}catch{r=null}if(Array.isArray(r)&&r.length==3){var i=r;if(i[0]==0){a:if(!n.v){if(n.g)if(n.g.F+3e3<e.F)jn(n),bn(n);else break a;On(n),Ue(18)}}else n.xa=i[1],0<n.xa-n.K&&i[2]<37500&&n.F&&n.A==0&&!n.C&&(n.C=Ge(l(n.Va,n),6e3));xt(n.h)<=1&&n.ta&&(n.ta=void 0)}else Pn(n,11)}else if((e.L||n.g==e)&&jn(n),!k(t))for(i=n.Ba.g.parse(t),t=0;t<i.length;t++){let l=i[t],u=l[0];if(!(u<=n.K))if(n.K=u,l=l[1],n.I==2)if(l[0]==`c`){n.M=l[1],n.ba=l[2];let t=l[3];t!=null&&(n.ka=t,n.j.info(`VER=`+n.ka));let i=l[4];i!=null&&(n.za=i,n.j.info(`SVER=`+n.za));let u=l[5];u!=null&&typeof u==`number`&&u>0&&(r=1.5*u,n.O=r,n.j.info(`backChannelRequestTimeoutMs_=`+r)),r=n;let d=e.g;if(d){let e=d.g?d.g.getResponseHeader(`X-Client-Wire-Protocol`):null;if(e){var a=r.h;a.g||e.indexOf(`spdy`)==-1&&e.indexOf(`quic`)==-1&&e.indexOf(`h2`)==-1||(a.j=a.l,a.g=new Set,a.h&&=(Ct(a,a.h),null))}if(r.G){let e=d.g?d.g.getResponseHeader(`X-HTTP-Session-Id`):null;e&&(r.wa=e,L(r.J,r.G,e))}}n.I=3,n.l&&n.l.ra(),n.aa&&(n.T=Date.now()-e.F,n.j.info(`Handshake RTT: `+n.T+`ms`)),r=n;var o=e;if(r.na=In(r,r.L?r.ba:null,r.W),o.L){wt(r.h,o);var s=o,c=r.O;c&&(s.H=c),s.D&&(ht(s),pt(s)),r.g=o}else Dn(r);n.i.length>0&&Sn(n)}else l[0]!=`stop`&&l[0]!=`close`||Pn(n,7);else n.I==3&&(l[0]==`stop`||l[0]==`close`?l[0]==`stop`?Pn(n,7):yn(n):l[0]!=`noop`&&n.l&&n.l.qa(l),n.A=0)}}Ve(4)}catch{}}var yt=class{constructor(e,t){this.g=e,this.map=t}};function I(e){this.l=e||10,o.PerformanceNavigationTiming?(e=o.performance.getEntriesByType(`navigation`),e=e.length>0&&(e[0].nextHopProtocol==`hq`||e[0].nextHopProtocol==`h2`)):e=!!(o.chrome&&o.chrome.loadTimes&&o.chrome.loadTimes()&&o.chrome.loadTimes().wasFetchedViaSpdy),this.j=e?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function bt(e){return e.h?!0:e.g?e.g.size>=e.j:!1}function xt(e){return e.h?1:e.g?e.g.size:0}function St(e,t){return e.h?e.h==t:e.g?e.g.has(t):!1}function Ct(e,t){e.g?e.g.add(t):e.h=t}function wt(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}I.prototype.cancel=function(){if(this.i=Tt(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let e of this.g.values())e.cancel();this.g.clear()}};function Tt(e){if(e.h!=null)return e.i.concat(e.h.G);if(e.g!=null&&e.g.size!==0){let t=e.i;for(let n of e.g.values())t=t.concat(n.G);return t}return p(e.i)}var Et=RegExp(`^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$`);function Dt(e,t){if(e){e=e.split(`&`);for(let n=0;n<e.length;n++){let r=e[n].indexOf(`=`),i,a=null;r>=0?(i=e[n].substring(0,r),a=e[n].substring(r+1)):i=e[n],t(i,a?decodeURIComponent(a.replace(/\+/g,` `)):``)}}}function Ot(e){this.g=this.o=this.j=``,this.u=null,this.m=this.h=``,this.l=!1;let t;e instanceof Ot?(this.l=e.l,At(this,e.j),this.o=e.o,this.g=e.g,jt(this,e.u),this.h=e.h,Mt(this,Kt(e.i)),this.m=e.m):e&&(t=String(e).match(Et))?(this.l=!1,At(this,t[1]||``,!0),this.o=z(t[2]||``),this.g=z(t[3]||``,!0),jt(this,t[4]),this.h=z(t[5]||``,!0),Mt(this,t[6]||``,!0),this.m=z(t[7]||``)):(this.l=!1,this.i=new Bt(null,this.l))}Ot.prototype.toString=function(){let e=[];var t=this.j;t&&e.push(Nt(t,Ft,!0),`:`);var n=this.g;return(n||t==`file`)&&(e.push(`//`),(t=this.o)&&e.push(Nt(t,Ft,!0),`@`),e.push(nt(n).replace(/%25([0-9a-fA-F]{2})/g,`%$1`)),n=this.u,n!=null&&e.push(`:`,String(n))),(n=this.h)&&(this.g&&n.charAt(0)!=`/`&&e.push(`/`),e.push(Nt(n,n.charAt(0)==`/`?Lt:It,!0))),(n=this.i.toString())&&e.push(`?`,n),(n=this.m)&&e.push(`#`,Nt(n,zt)),e.join(``)},Ot.prototype.resolve=function(e){let t=kt(this),n=!!e.j;n?At(t,e.j):n=!!e.o,n?t.o=e.o:n=!!e.g,n?t.g=e.g:n=e.u!=null;var r=e.h;if(n)jt(t,e.u);else if(n=!!e.h){if(r.charAt(0)!=`/`)if(this.g&&!this.h)r=`/`+r;else{var i=t.h.lastIndexOf(`/`);i!=-1&&(r=t.h.slice(0,i+1)+r)}if(i=r,i==`..`||i==`.`)r=``;else if(i.indexOf(`./`)!=-1||i.indexOf(`/.`)!=-1){r=i.lastIndexOf(`/`,0)==0,i=i.split(`/`);let e=[];for(let t=0;t<i.length;){let n=i[t++];n==`.`?r&&t==i.length&&e.push(``):n==`..`?((e.length>1||e.length==1&&e[0]!=``)&&e.pop(),r&&t==i.length&&e.push(``)):(e.push(n),r=!0)}r=e.join(`/`)}else r=i}return n?t.h=r:n=e.i.toString()!==``,n?Mt(t,Kt(e.i)):n=!!e.m,n&&(t.m=e.m),t};function kt(e){return new Ot(e)}function At(e,t,n){e.j=n?z(t,!0):t,e.j&&=e.j.replace(/:$/,``)}function jt(e,t){if(t){if(t=Number(t),isNaN(t)||t<0)throw Error(`Bad port number `+t);e.u=t}else e.u=null}function Mt(e,t,n){t instanceof Bt?(e.i=t,Jt(e.i,e.l)):(n||(t=Nt(t,Rt)),e.i=new Bt(t,e.l))}function L(e,t,n){e.i.set(t,n)}function R(e){return L(e,`zx`,Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),e}function z(e,t){return e?t?decodeURI(e.replace(/%25/g,`%2525`)):decodeURIComponent(e):``}function Nt(e,t,n){return typeof e==`string`?(e=encodeURI(e).replace(t,Pt),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,`%$1`)),e):null}function Pt(e){return e=e.charCodeAt(0),`%`+(e>>4&15).toString(16)+(e&15).toString(16)}var Ft=/[#\/\?@]/g,It=/[#\?:]/g,Lt=/[#\?]/g,Rt=/[#\?@]/g,zt=/#/g;function Bt(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function Vt(e){e.g||(e.g=new Map,e.h=0,e.i&&Dt(e.i,function(t,n){e.add(decodeURIComponent(t.replace(/\+/g,` `)),n)}))}e=Bt.prototype,e.add=function(e,t){Vt(this),this.i=null,e=qt(this,e);let n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this};function Ht(e,t){Vt(e),t=qt(e,t),e.g.has(t)&&(e.i=null,e.h-=e.g.get(t).length,e.g.delete(t))}function Ut(e,t){return Vt(e),t=qt(e,t),e.g.has(t)}e.forEach=function(e,t){Vt(this),this.g.forEach(function(n,r){n.forEach(function(n){e.call(t,n,r,this)},this)},this)};function Wt(e,t){Vt(e);let n=[];if(typeof t==`string`)Ut(e,t)&&(n=n.concat(e.g.get(qt(e,t))));else for(e=Array.from(e.g.values()),t=0;t<e.length;t++)n=n.concat(e[t]);return n}e.set=function(e,t){return Vt(this),this.i=null,e=qt(this,e),Ut(this,e)&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},e.get=function(e,t){return e?(e=Wt(this,e),e.length>0?String(e[0]):t):t};function Gt(e,t,n){Ht(e,t),n.length>0&&(e.i=null,e.g.set(qt(e,t),p(n)),e.h+=n.length)}e.toString=function(){if(this.i)return this.i;if(!this.g)return``;let e=[],t=Array.from(this.g.keys());for(let r=0;r<t.length;r++){var n=t[r];let i=nt(n);n=Wt(this,n);for(let t=0;t<n.length;t++){let r=i;n[t]!==``&&(r+=`=`+nt(n[t])),e.push(r)}}return this.i=e.join(`&`)};function Kt(e){let t=new Bt;return t.i=e.i,e.g&&(t.g=new Map(e.g),t.h=e.h),t}function qt(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}function Jt(e,t){t&&!e.j&&(Vt(e),e.i=null,e.g.forEach(function(e,t){let n=t.toLowerCase();t!=n&&(Ht(this,t),Gt(this,n,e))},e)),e.j=t}function Yt(e,t){let n=new Ke;if(o.Image){let r=new Image;r.onload=u(Zt,n,`TestLoadImage: loaded`,!0,t,r),r.onerror=u(Zt,n,`TestLoadImage: error`,!1,t,r),r.onabort=u(Zt,n,`TestLoadImage: abort`,!1,t,r),r.ontimeout=u(Zt,n,`TestLoadImage: timeout`,!1,t,r),o.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=e}else t(!1)}function Xt(e,t){let n=new Ke,r=new AbortController,i=setTimeout(()=>{r.abort(),Zt(n,`TestPingServer: timeout`,!1,t)},1e4);fetch(e,{signal:r.signal}).then(e=>{clearTimeout(i),e.ok?Zt(n,`TestPingServer: ok`,!0,t):Zt(n,`TestPingServer: server error`,!1,t)}).catch(()=>{clearTimeout(i),Zt(n,`TestPingServer: error`,!1,t)})}function Zt(e,t,n,r,i){try{i&&(i.onload=null,i.onerror=null,i.onabort=null,i.ontimeout=null),r(n)}catch{}}function Qt(){this.g=new je}function $t(e){this.i=e.Sb||null,this.h=e.ab||!1}d($t,Me),$t.prototype.g=function(){return new en(this.i,this.h)};function en(e,t){be.call(this),this.H=e,this.o=t,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText=``,this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F=`GET`,this.D=``,this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}d(en,be),e=en.prototype,e.open=function(e,t){if(this.readyState!=0)throw this.abort(),Error(`Error reopening a connection`);this.F=e,this.D=t,this.readyState=1,rn(this)},e.send=function(e){if(this.readyState!=1)throw this.abort(),Error(`need to call open() first. `);if(this.v.signal.aborted)throw this.abort(),Error(`Request was aborted.`);this.g=!0;let t={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};e&&(t.body=e),(this.H||o).fetch(new Request(this.D,t)).then(this.Pa.bind(this),this.ga.bind(this))},e.abort=function(){this.response=this.responseText=``,this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel(`Request was aborted.`).catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,nn(this)),this.readyState=0},e.Pa=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,rn(this)),this.g&&(this.readyState=3,rn(this),this.g)))if(this.responseType===`arraybuffer`)e.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(o.ReadableStream!==void 0&&`body`in e){if(this.j=e.body.getReader(),this.o){if(this.responseType)throw Error(`responseType must be empty for "streamBinaryChunks" mode responses.`);this.response=[]}else this.response=this.responseText=``,this.B=new TextDecoder;tn(this)}else e.text().then(this.Oa.bind(this),this.ga.bind(this))};function tn(e){e.j.read().then(e.Ma.bind(e)).catch(e.ga.bind(e))}e.Ma=function(e){if(this.g){if(this.o&&e.value)this.response.push(e.value);else if(!this.o){var t=e.value?e.value:new Uint8Array;(t=this.B.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?nn(this):rn(this),this.readyState==3&&tn(this)}},e.Oa=function(e){this.g&&(this.response=this.responseText=e,nn(this))},e.Na=function(e){this.g&&(this.response=e,nn(this))},e.ga=function(){this.g&&nn(this)};function nn(e){e.readyState=4,e.l=null,e.j=null,e.B=null,rn(e)}e.setRequestHeader=function(e,t){this.A.append(e,t)},e.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||``},e.getAllResponseHeaders=function(){if(!this.h)return``;let e=[],t=this.h.entries();for(var n=t.next();!n.done;)n=n.value,e.push(n[0]+`: `+n[1]),n=t.next();return e.join(`\r
`)};function rn(e){e.onreadystatechange&&e.onreadystatechange.call(e)}Object.defineProperty(en.prototype,`withCredentials`,{get:function(){return this.m===`include`},set:function(e){this.m=e?`include`:`same-origin`}});function an(e){let t=``;return ne(e,function(e,n){t+=n,t+=`:`,t+=e,t+=`\r
`}),t}function on(e,t,n){a:{for(r in n){var r=!1;break a}r=!0}r||(n=an(n),typeof e==`string`||L(e,t,n))}function sn(e){be.call(this),this.headers=new Map,this.L=e||null,this.h=!1,this.g=null,this.D=``,this.o=0,this.l=``,this.j=this.B=this.v=this.A=!1,this.m=null,this.F=``,this.H=!1}d(sn,be);var cn=/^https?$/i,ln=[`POST`,`PUT`];e=sn.prototype,e.Fa=function(e){this.H=e},e.ea=function(e,t,n,r){if(this.g)throw Error(`[goog.net.XhrIo] Object is active with another request=`+this.D+`; newUri=`+e);t=t?t.toUpperCase():`GET`,this.D=e,this.l=``,this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():et.g(),this.g.onreadystatechange=f(l(this.Ca,this));try{this.B=!0,this.g.open(t,String(e),!0),this.B=!1}catch(e){un(this,e);return}if(e=n||``,n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)n.set(i,r[i]);else if(typeof r.keys==`function`&&typeof r.get==`function`)for(let e of r.keys())n.set(e,r.get(e));else throw Error(`Unknown input type for opt_headers: `+String(r));r=Array.from(n.keys()).find(e=>e.toLowerCase()==`content-type`),i=o.FormData&&e instanceof o.FormData,!(Array.prototype.indexOf.call(ln,t,void 0)>=0)||r||i||n.set(`Content-Type`,`application/x-www-form-urlencoded;charset=utf-8`);for(let[e,t]of n)this.g.setRequestHeader(e,t);this.F&&(this.g.responseType=this.F),`withCredentials`in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&=(clearTimeout(this.m),null),this.v=!0,this.g.send(e),this.v=!1}catch(e){un(this,e)}};function un(e,t){e.h=!1,e.g&&(e.j=!0,e.g.abort(),e.j=!1),e.l=t,e.o=5,dn(e),pn(e)}function dn(e){e.A||(e.A=!0,xe(e,`complete`),xe(e,`error`))}e.abort=function(e){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=e||7,xe(this,`complete`),xe(this,`abort`),pn(this))},e.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),pn(this,!0)),sn.Z.N.call(this)},e.Ca=function(){this.u||(this.B||this.v||this.j?fn(this):this.Xa())},e.Xa=function(){fn(this)};function fn(e){if(e.h&&a!==void 0){if(e.v&&mn(e)==4)setTimeout(e.Ca.bind(e),0);else if(xe(e,`readystatechange`),mn(e)==4){e.h=!1;try{let a=e.ca();a:switch(a){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var t=!0;break a;default:t=!1}var n;if(!(n=t)){var r;if(r=a===0){let t=String(e.D).match(Et)[1]||null;!t&&o.self&&o.self.location&&(t=o.self.location.protocol.slice(0,-1)),r=!cn.test(t?t.toLowerCase():``)}n=r}if(n)xe(e,`complete`),xe(e,`success`);else{e.o=6;try{var i=mn(e)>2?e.g.statusText:``}catch{i=``}e.l=i+` [`+e.ca()+`]`,dn(e)}}finally{pn(e)}}}}function pn(e,t){if(e.g){e.m&&=(clearTimeout(e.m),null);let n=e.g;e.g=null,t||xe(e,`ready`);try{n.onreadystatechange=null}catch{}}}e.isActive=function(){return!!this.g};function mn(e){return e.g?e.g.readyState:0}e.ca=function(){try{return mn(this)>2?this.g.status:-1}catch{return-1}},e.la=function(){try{return this.g?this.g.responseText:``}catch{return``}},e.La=function(e){if(this.g){var t=this.g.responseText;return e&&t.indexOf(e)==0&&(t=t.substring(e.length)),Ae(t)}};function hn(e){try{if(!e.g)return null;if(`response`in e.g)return e.g.response;switch(e.F){case``:case`text`:return e.g.responseText;case`arraybuffer`:if(`mozResponseArrayBuffer`in e.g)return e.g.mozResponseArrayBuffer}return null}catch{return null}}function gn(e){let t={};e=(e.g&&mn(e)>=2&&e.g.getAllResponseHeaders()||``).split(`\r
`);for(let r=0;r<e.length;r++){if(k(e[r]))continue;var n=rt(e[r]);let i=n[0];if(n=n[1],typeof n!=`string`)continue;n=n.trim();let a=t[i]||[];t[i]=a,a.push(n)}N(t,function(e){return e.join(`, `)})}e.ya=function(){return this.o},e.Ha=function(){return typeof this.l==`string`?this.l:String(this.l)};function _n(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function vn(e){this.za=0,this.i=[],this.j=new Ke,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=_n(`failFast`,!1,e),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=_n(`baseRetryDelayMs`,5e3,e),this.Za=_n(`retryDelaySeedMs`,1e4,e),this.Ta=_n(`forwardChannelMaxRetries`,2,e),this.va=_n(`forwardChannelRequestTimeoutMs`,2e4,e),this.ma=e&&e.xmlHttpFactory||void 0,this.Ua=e&&e.Rb||void 0,this.Aa=e&&e.useFetchStreams||!1,this.O=void 0,this.L=e&&e.supportsCrossDomainXhr||!1,this.M=``,this.h=new I(e&&e.concurrentRequestLimit),this.Ba=new Qt,this.S=e&&e.fastHandshake||!1,this.R=e&&e.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=e&&e.Pb||!1,e&&e.ua&&this.j.ua(),e&&e.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&e&&e.detectBufferingProxy||!1,this.ia=void 0,e&&e.longPollingTimeout&&e.longPollingTimeout>0&&(this.ia=e.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}e=vn.prototype,e.ka=8,e.I=1,e.connect=function(e,t,n,r){Ue(0),this.W=e,this.H=t||{},n&&r!==void 0&&(this.H.OSID=n,this.H.OAID=r),this.F=this.X,this.J=In(this,null,this.W),Sn(this)};function yn(e){if(xn(e),e.I==3){var t=e.V++,n=kt(e.J);if(L(n,`SID`,e.M),L(n,`RID`,t),L(n,`TYPE`,`terminate`),Tn(e,n),t=new it(e,e.j,t),t.M=2,t.A=R(kt(n)),n=!1,o.navigator&&o.navigator.sendBeacon)try{n=o.navigator.sendBeacon(t.A.toString(),``)}catch{}!n&&o.Image&&(new Image().src=t.A,n=!0),n||(t.g=Ln(t.j,null),t.g.ea(t.A)),t.F=Date.now(),pt(t)}Fn(e)}function bn(e){e.g&&=(kn(e),e.g.cancel(),null)}function xn(e){bn(e),e.v&&=(o.clearTimeout(e.v),null),jn(e),e.h.cancel(),e.m&&=(typeof e.m==`number`&&o.clearTimeout(e.m),null)}function Sn(e){if(!bt(e.h)&&!e.m){e.m=!0;var t=e.Ea;x||w(),S||=(x(),!0),C.add(t,e),e.D=0}}function Cn(e,t){return xt(e.h)>=e.h.j-(e.m?1:0)?!1:e.m?(e.i=t.G.concat(e.i),!0):e.I==1||e.I==2||e.D>=(e.Sa?0:e.Ta)?!1:(e.m=Ge(l(e.Ea,e,t),Nn(e,e.D)),e.D++,!0)}e.Ea=function(e){if(this.m)if(this.m=null,this.I==1){if(!e){this.V=Math.floor(Math.random()*1e5),e=this.V++;let i=new it(this,this.j,e),a=this.o;if(this.U&&(a?(a=P(a),ie(a,this.U)):a=this.U),this.u!==null||this.R||(i.J=a,a=null),this.S)a:{for(var t=0,n=0;n<this.i.length;n++){b:{var r=this.i[n];if(`__data__`in r.map&&(r=r.map.__data__,typeof r==`string`)){r=r.length;break b}r=void 0}if(r===void 0)break;if(t+=r,t>4096){t=n;break a}if(t===4096||n===this.i.length-1){t=n+1;break a}}t=1e3}else t=1e3;t=En(this,i,t),n=kt(this.J),L(n,`RID`,e),L(n,`CVER`,22),this.G&&L(n,`X-HTTP-Session-Id`,this.G),Tn(this,n),a&&(this.R?t=`headers=`+nt(an(a))+`&`+t:this.u&&on(n,this.u,a)),Ct(this.h,i),this.Ra&&L(n,`TYPE`,`init`),this.S?(L(n,`$req`,t),L(n,`SID`,`null`),i.U=!0,ct(i,n,null)):ct(i,n,t),this.I=2}}else this.I==3&&(e?wn(this,e):this.i.length==0||bt(this.h)||wn(this))};function wn(e,t){var n=t?t.l:e.V++;let r=kt(e.J);L(r,`SID`,e.M),L(r,`RID`,n),L(r,`AID`,e.K),Tn(e,r),e.u&&e.o&&on(r,e.u,e.o),n=new it(e,e.j,n,e.D+1),e.u===null&&(n.J=e.o),t&&(e.i=t.G.concat(e.i)),t=En(e,n,1e3),n.H=Math.round(e.va*.5)+Math.round(e.va*.5*Math.random()),Ct(e.h,n),ct(n,r,t)}function Tn(e,t){e.H&&ne(e.H,function(e,n){L(t,n,e)}),e.l&&ne({},function(e,n){L(t,n,e)})}function En(e,t,n){n=Math.min(e.i.length,n);let r=e.l?l(e.l.Ka,e.l,e):null;a:{var i=e.i;let t=-1;for(;;){let e=[`count=`+n];t==-1?n>0?(t=i[0].g,e.push(`ofs=`+t)):t=0:e.push(`ofs=`+t);let c=!0;for(let l=0;l<n;l++){var a=i[l].g;let n=i[l].map;if(a-=t,a<0)t=Math.max(0,i[l].g-100),c=!1;else try{a=`req`+a+`_`||``;try{var o=n instanceof Map?n:Object.entries(n);for(let[t,n]of o){let r=n;s(n)&&(r=ke(n)),e.push(a+t+`=`+encodeURIComponent(r))}}catch(t){throw e.push(a+`type=_badmap`),t}}catch{r&&r(n)}}if(c){o=e.join(`&`);break a}}o=void 0}return e=e.i.splice(0,n),t.G=e,o}function Dn(e){if(!e.g&&!e.v){e.Y=1;var t=e.Da;x||w(),S||=(x(),!0),C.add(t,e),e.A=0}}function On(e){return e.g||e.v||e.A>=3?!1:(e.Y++,e.v=Ge(l(e.Da,e),Nn(e,e.A)),e.A++,!0)}e.Da=function(){if(this.v=null,An(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var e=4*this.T;this.j.info(`BP detection timer enabled: `+e),this.B=Ge(l(this.Wa,this),e)}},e.Wa=function(){this.B&&(this.B=null,this.j.info(`BP detection timeout reached.`),this.j.info(`Buffering proxy detected and switch to long-polling!`),this.F=!1,this.P=!0,Ue(10),bn(this),An(this))};function kn(e){e.B!=null&&(o.clearTimeout(e.B),e.B=null)}function An(e){e.g=new it(e,e.j,`rpc`,e.Y),e.u===null&&(e.g.J=e.o),e.g.P=0;var t=kt(e.na);L(t,`RID`,`rpc`),L(t,`SID`,e.M),L(t,`AID`,e.K),L(t,`CI`,e.F?`0`:`1`),!e.F&&e.ia&&L(t,`TO`,e.ia),L(t,`TYPE`,`xmlhttp`),Tn(e,t),e.u&&e.o&&on(t,e.u,e.o),e.O&&(e.g.H=e.O);var n=e.g;e=e.ba,n.M=1,n.A=R(kt(t)),n.u=null,n.R=!0,lt(n,e)}e.Va=function(){this.C!=null&&(this.C=null,bn(this),On(this),Ue(19))};function jn(e){e.C!=null&&(o.clearTimeout(e.C),e.C=null)}function Mn(e,t){var n=null;if(e.g==t){jn(e),kn(e),e.g=null;var r=2}else if(St(e.h,t))n=t.G,wt(e.h,t),r=1;else return;if(e.I!=0){if(t.o)if(r==1){n=t.u?t.u.length:0,t=Date.now()-t.F;var i=e.D;r=ze(),xe(r,new We(r,n)),Sn(e)}else Dn(e);else if(i=t.m,i==3||i==0&&t.X>0||!(r==1&&Cn(e,t)||r==2&&On(e)))switch(n&&n.length>0&&(t=e.h,t.i=t.i.concat(n)),i){case 1:Pn(e,5);break;case 4:Pn(e,10);break;case 3:Pn(e,6);break;default:Pn(e,2)}}}function Nn(e,t){let n=e.Qa+Math.floor(Math.random()*e.Za);return e.isActive()||(n*=2),n*t}function Pn(e,t){if(e.j.info(`Error code `+t),t==2){var n=l(e.bb,e),r=e.Ua;let t=!r;r=new Ot(r||`//www.google.com/images/cleardot.gif`),o.location&&o.location.protocol==`http`||At(r,`https`),R(r),t?Yt(r.toString(),n):Xt(r.toString(),n)}else Ue(2);e.I=0,e.l&&e.l.pa(t),Fn(e),xn(e)}e.bb=function(e){e?(this.j.info(`Successfully pinged google.com`),Ue(2)):(this.j.info(`Failed to ping google.com`),Ue(1))};function Fn(e){if(e.I=0,e.ja=[],e.l){let t=Tt(e.h);(t.length!=0||e.i.length!=0)&&(m(e.ja,t),m(e.ja,e.i),e.h.i.length=0,p(e.i),e.i.length=0),e.l.oa()}}function In(e,t,n){var r=n instanceof Ot?kt(n):new Ot(n);if(r.g!=``)t&&(r.g=t+`.`+r.g),jt(r,r.u);else{var i=o.location;r=i.protocol,t=t?t+`.`+i.hostname:i.hostname,i=+i.port;let e=new Ot(null);r&&At(e,r),t&&(e.g=t),i&&jt(e,i),n&&(e.h=n),r=e}return n=e.G,t=e.wa,n&&t&&L(r,n,t),L(r,`VER`,e.ka),Tn(e,r),r}function Ln(e,t,n){if(t&&!e.L)throw Error(`Can't create secondary domain capable XhrIo object.`);return t=e.Aa&&!e.ma?new sn(new $t({ab:n})):new sn(e.ma),t.Fa(e.L),t}e.isActive=function(){return!!this.l&&this.l.isActive(this)};function Rn(){}e=Rn.prototype,e.ra=function(){},e.qa=function(){},e.pa=function(){},e.oa=function(){},e.isActive=function(){return!0},e.Ka=function(){};function zn(){}zn.prototype.g=function(e,t){return new Bn(e,t)};function Bn(e,t){be.call(this),this.g=new vn(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e[`X-Client-Protocol`]=`webchannel`:e={"X-Client-Protocol":`webchannel`}),this.g.o=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e[`X-WebChannel-Content-Type`]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.sa&&(e?e[`X-WebChannel-Client-Profile`]=t.sa:e={"X-WebChannel-Client-Profile":t.sa}),this.g.U=e,(e=t&&t.Qb)&&!k(e)&&(this.g.u=e),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t&&=t.httpSessionIdParam)&&!k(t)&&(this.g.G=t,e=this.h,e!==null&&t in e&&(e=this.h,t in e&&delete e[t])),this.j=new Un(this)}d(Bn,be),Bn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Bn.prototype.close=function(){yn(this.g)},Bn.prototype.o=function(e){var t=this.g;if(typeof e==`string`){var n={};n.__data__=e,e=n}else this.v&&(n={},n.__data__=ke(e),e=n);t.i.push(new yt(t.Ya++,e)),t.I==3&&Sn(t)},Bn.prototype.N=function(){this.g.l=null,delete this.j,yn(this.g),delete this.g,Bn.Z.N.call(this)};function Vn(e){Fe.call(this),e.__headers__&&(this.headers=e.__headers__,this.statusCode=e.__status__,delete e.__headers__,delete e.__status__);var t=e.__sm__;if(t){a:{for(let n in t){e=n;break a}e=void 0}(this.i=e)&&(e=this.i,t=t!==null&&e in t?t[e]:void 0),this.data=t}else this.data=e}d(Vn,Fe);function Hn(){Ie.call(this),this.status=1}d(Hn,Ie);function Un(e){this.g=e}d(Un,Rn),Un.prototype.ra=function(){xe(this.g,`a`)},Un.prototype.qa=function(e){xe(this.g,new Vn(e))},Un.prototype.pa=function(e){xe(this.g,new Hn)},Un.prototype.oa=function(){xe(this.g,`b`)},zn.prototype.createWebChannel=zn.prototype.g,Bn.prototype.send=Bn.prototype.o,Bn.prototype.open=Bn.prototype.m,Bn.prototype.close=Bn.prototype.close,Fo=Do.createWebChannelTransport=function(){return new zn},Po=Do.getStatEventTarget=function(){return ze()},No=Do.Event=Le,Mo=Do.Stat={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Qe.NO_ERROR=0,Qe.TIMEOUT=8,Qe.HTTP_ERROR=6,jo=Do.ErrorCode=Qe,$e.COMPLETE=`complete`,Ao=Do.EventType=$e,Ne.EventType=Pe,Pe.OPEN=`a`,Pe.CLOSE=`b`,Pe.ERROR=`c`,Pe.MESSAGE=`d`,be.prototype.listen=be.prototype.J,ko=Do.WebChannel=Ne,Do.FetchXmlHttpFactory=$t,sn.prototype.listenOnce=sn.prototype.K,sn.prototype.getLastError=sn.prototype.Ha,sn.prototype.getLastErrorCode=sn.prototype.ya,sn.prototype.getStatus=sn.prototype.ca,sn.prototype.getResponseJson=sn.prototype.La,sn.prototype.getResponseText=sn.prototype.la,sn.prototype.send=sn.prototype.ea,sn.prototype.setWithCredentials=sn.prototype.Fa,Oo=Do.XhrIo=sn}).apply(Eo===void 0?typeof self<`u`?self:typeof window<`u`?window:{}:Eo);var Io=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?`uid:`+this.uid:`anonymous-user`}isEqual(e){return e.uid===this.uid}};Io.UNAUTHENTICATED=new Io(null),Io.GOOGLE_CREDENTIALS=new Io(`google-credentials-uid`),Io.FIRST_PARTY=new Io(`first-party-uid`),Io.MOCK_USER=new Io(`mock-user`);var Lo=`12.8.0`;function Ro(e){Lo=e}var zo=new wt(`@firebase/firestore`);function Bo(){return zo.logLevel}function U(e,...t){if(zo.logLevel<=I.DEBUG){let n=t.map(Uo);zo.debug(`Firestore (${Lo}): ${e}`,...n)}}function Vo(e,...t){if(zo.logLevel<=I.ERROR){let n=t.map(Uo);zo.error(`Firestore (${Lo}): ${e}`,...n)}}function Ho(e,...t){if(zo.logLevel<=I.WARN){let n=t.map(Uo);zo.warn(`Firestore (${Lo}): ${e}`,...n)}}function Uo(e){if(typeof e==`string`)return e;try{return function(e){return JSON.stringify(e)}(e)}catch{return e}}function Wo(e,t,n){let r=`Unexpected state`;typeof t==`string`?r=t:n=t,Go(e,r,n)}function Go(e,t,n){let r=`FIRESTORE (${Lo}) INTERNAL ASSERTION FAILED: ${t} (ID: ${e.toString(16)})`;if(n!==void 0)try{r+=` CONTEXT: `+JSON.stringify(n)}catch{r+=` CONTEXT: `+n}throw Vo(r),Error(r)}function Ko(e,t,n,r){let i=`Unexpected state`;typeof n==`string`?i=n:r=n,e||Go(t,i,r)}function qo(e,t){return e}var W={OK:`ok`,CANCELLED:`cancelled`,UNKNOWN:`unknown`,INVALID_ARGUMENT:`invalid-argument`,DEADLINE_EXCEEDED:`deadline-exceeded`,NOT_FOUND:`not-found`,ALREADY_EXISTS:`already-exists`,PERMISSION_DENIED:`permission-denied`,UNAUTHENTICATED:`unauthenticated`,RESOURCE_EXHAUSTED:`resource-exhausted`,FAILED_PRECONDITION:`failed-precondition`,ABORTED:`aborted`,OUT_OF_RANGE:`out-of-range`,UNIMPLEMENTED:`unimplemented`,INTERNAL:`internal`,UNAVAILABLE:`unavailable`,DATA_LOSS:`data-loss`},G=class extends ot{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}},Jo=class{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}},Yo=class{constructor(e,t){this.user=t,this.type=`OAuth`,this.headers=new Map,this.headers.set(`Authorization`,`Bearer ${e}`)}},Xo=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(Io.UNAUTHENTICATED)))}shutdown(){}},Zo=class{constructor(e){this.t=e,this.currentUser=Io.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Ko(this.o===void 0,42304);let n=this.i,r=e=>this.i===n?Promise.resolve():(n=this.i,t(e)),i=new Jo;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new Jo,e.enqueueRetryable((()=>r(this.currentUser)))};let a=()=>{let t=i;e.enqueueRetryable((async()=>{await t.promise,await r(this.currentUser)}))},o=e=>{U(`FirebaseAuthCredentialsProvider`,`Auth detected`),this.auth=e,this.o&&(this.auth.addAuthTokenListener(this.o),a())};this.t.onInit((e=>o(e))),setTimeout((()=>{if(!this.auth){let e=this.t.getImmediate({optional:!0});e?o(e):(U(`FirebaseAuthCredentialsProvider`,`Auth not yet detected`),i.resolve(),i=new Jo)}}),0),a()}getToken(){let e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((t=>this.i===e?t?(Ko(typeof t.accessToken==`string`,31837,{l:t}),new Yo(t.accessToken,this.currentUser)):null:(U(`FirebaseAuthCredentialsProvider`,`getToken aborted due to token change.`),this.getToken()))):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){let e=this.auth&&this.auth.getUid();return Ko(e===null||typeof e==`string`,2055,{h:e}),new Io(e)}},Qo=class{constructor(e,t,n){this.P=e,this.T=t,this.I=n,this.type=`FirstParty`,this.user=Io.FIRST_PARTY,this.R=new Map}A(){return this.I?this.I():null}get headers(){this.R.set(`X-Goog-AuthUser`,this.P);let e=this.A();return e&&this.R.set(`Authorization`,e),this.T&&this.R.set(`X-Goog-Iam-Authorization-Token`,this.T),this.R}},$o=class{constructor(e,t,n){this.P=e,this.T=t,this.I=n}getToken(){return Promise.resolve(new Qo(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(Io.FIRST_PARTY)))}shutdown(){}invalidateToken(){}},es=class{constructor(e){this.value=e,this.type=`AppCheck`,this.headers=new Map,e&&e.length>0&&this.headers.set(`x-firebase-appcheck`,this.value)}},ts=class{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,An(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){Ko(this.o===void 0,3512);let n=e=>{e.error!=null&&U(`FirebaseAppCheckTokenProvider`,`Error getting App Check token; using placeholder token instead. Error: ${e.error.message}`);let n=e.token!==this.m;return this.m=e.token,U(`FirebaseAppCheckTokenProvider`,`Received ${n?`new`:`existing`} token.`),n?t(e.token):Promise.resolve()};this.o=t=>{e.enqueueRetryable((()=>n(t)))};let r=e=>{U(`FirebaseAppCheckTokenProvider`,`AppCheck detected`),this.appCheck=e,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((e=>r(e))),setTimeout((()=>{if(!this.appCheck){let e=this.V.getImmediate({optional:!0});e?r(e):U(`FirebaseAppCheckTokenProvider`,`AppCheck not yet detected`)}}),0)}getToken(){if(this.p)return Promise.resolve(new es(this.p));let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((e=>e?(Ko(typeof e.token==`string`,44558,{tokenResult:e}),this.m=e.token,new es(e.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}};function ns(e){let t=typeof self<`u`&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&typeof t.getRandomValues==`function`)t.getRandomValues(n);else for(let t=0;t<e;t++)n[t]=Math.floor(256*Math.random());return n}var rs=class{static newId(){let e=``;for(;e.length<20;){let t=ns(40);for(let n=0;n<t.length;++n)e.length<20&&t[n]<248&&(e+=`ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789`.charAt(t[n]%62))}return e}};function is(e,t){return e<t?-1:e>t?1:0}function as(e,t){let n=Math.min(e.length,t.length);for(let r=0;r<n;r++){let n=e.charAt(r),i=t.charAt(r);if(n!==i)return cs(n)===cs(i)?is(n,i):cs(n)?1:-1}return is(e.length,t.length)}var os=55296,ss=57343;function cs(e){let t=e.charCodeAt(0);return t>=os&&t<=ss}function ls(e,t,n){return e.length===t.length&&e.every(((e,r)=>n(e,t[r])))}var us=`__name__`,ds=class e{constructor(e,t,n){t===void 0?t=0:t>e.length&&Wo(637,{offset:t,range:e.length}),n===void 0?n=e.length-t:n>e.length-t&&Wo(1746,{length:n,range:e.length-t}),this.segments=e,this.offset=t,this.len=n}get length(){return this.len}isEqual(t){return e.comparator(this,t)===0}child(t){let n=this.segments.slice(this.offset,this.limit());return t instanceof e?t.forEach((e=>{n.push(e)})):n.push(t),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,n){let r=Math.min(t.length,n.length);for(let i=0;i<r;i++){let r=e.compareSegments(t.get(i),n.get(i));if(r!==0)return r}return is(t.length,n.length)}static compareSegments(t,n){let r=e.isNumericId(t),i=e.isNumericId(n);return r&&!i?-1:!r&&i?1:r&&i?e.extractNumericId(t).compare(e.extractNumericId(n)):as(t,n)}static isNumericId(e){return e.startsWith(`__id`)&&e.endsWith(`__`)}static extractNumericId(e){return To.fromString(e.substring(4,e.length-2))}},fs=class e extends ds{construct(t,n,r){return new e(t,n,r)}canonicalString(){return this.toArray().join(`/`)}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join(`/`)}static fromString(...t){let n=[];for(let e of t){if(e.indexOf(`//`)>=0)throw new G(W.INVALID_ARGUMENT,`Invalid segment (${e}). Paths must not contain // in them.`);n.push(...e.split(`/`).filter((e=>e.length>0)))}return new e(n)}static emptyPath(){return new e([])}},ps=/^[_a-zA-Z][_a-zA-Z0-9]*$/,ms=class e extends ds{construct(t,n,r){return new e(t,n,r)}static isValidIdentifier(e){return ps.test(e)}canonicalString(){return this.toArray().map((t=>(t=t.replace(/\\/g,`\\\\`).replace(/`/g,"\\`"),e.isValidIdentifier(t)||(t="`"+t+"`"),t))).join(`.`)}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===`__name__`}static keyField(){return new e([us])}static fromServerFormat(t){let n=[],r=``,i=0,a=()=>{if(r.length===0)throw new G(W.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=``},o=!1;for(;i<t.length;){let e=t[i];if(e===`\\`){if(i+1===t.length)throw new G(W.INVALID_ARGUMENT,`Path has trailing escape character: `+t);let e=t[i+1];if(e!==`\\`&&e!==`.`&&e!=="`")throw new G(W.INVALID_ARGUMENT,`Path has invalid escape sequence: `+t);r+=e,i+=2}else e==="`"?(o=!o,i++):e!==`.`||o?(r+=e,i++):(a(),i++)}if(a(),o)throw new G(W.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new e(n)}static emptyPath(){return new e([])}},hs=class e{constructor(e){this.path=e}static fromPath(t){return new e(fs.fromString(t))}static fromName(t){return new e(fs.fromString(t).popFirst(5))}static empty(){return new e(fs.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&fs.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return fs.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(t){return new e(new fs(t.slice()))}};function gs(e,t,n,r){if(!0===t&&!0===r)throw new G(W.INVALID_ARGUMENT,`${e} and ${n} cannot be used together.`)}function _s(e){return typeof e==`object`&&!!e&&(Object.getPrototypeOf(e)===Object.prototype||Object.getPrototypeOf(e)===null)}function vs(e,t){let n={typeString:e};return t&&(n.value=t),n}function ys(e,t){if(!_s(e))throw new G(W.INVALID_ARGUMENT,`JSON must be an object`);let n;for(let r in t)if(t[r]){let i=t[r].typeString,a=`value`in t[r]?{value:t[r].value}:void 0;if(!(r in e)){n=`JSON missing required field: '${r}'`;break}let o=e[r];if(i&&typeof o!==i){n=`JSON field '${r}' must be a ${i}.`;break}if(a!==void 0&&o!==a.value){n=`Expected '${r}' field to equal '${a.value}'`;break}}if(n)throw new G(W.INVALID_ARGUMENT,n);return!0}var bs=-62135596800,xs=1e6,Ss=class e{static now(){return e.fromMillis(Date.now())}static fromDate(t){return e.fromMillis(t.getTime())}static fromMillis(t){let n=Math.floor(t/1e3);return new e(n,Math.floor((t-1e3*n)*xs))}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0||t>=1e9)throw new G(W.INVALID_ARGUMENT,`Timestamp nanoseconds out of range: `+t);if(e<bs||e>=253402300800)throw new G(W.INVALID_ARGUMENT,`Timestamp seconds out of range: `+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/xs}_compareTo(e){return this.seconds===e.seconds?is(this.nanoseconds,e.nanoseconds):is(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return`Timestamp(seconds=`+this.seconds+`, nanoseconds=`+this.nanoseconds+`)`}toJSON(){return{type:e._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(t){if(ys(t,e._jsonSchema))return new e(t.seconds,t.nanoseconds)}valueOf(){let e=this.seconds-bs;return String(e).padStart(12,`0`)+`.`+String(this.nanoseconds).padStart(9,`0`)}};Ss._jsonSchemaVersion=`firestore/timestamp/1.0`,Ss._jsonSchema={type:vs(`string`,Ss._jsonSchemaVersion),seconds:vs(`number`),nanoseconds:vs(`number`)};var Cs=class e{static fromTimestamp(t){return new e(t)}static min(){return new e(new Ss(0,0))}static max(){return new e(new Ss(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return`SnapshotVersion(`+this.timestamp.toString()+`)`}toTimestamp(){return this.timestamp}},ws=-1,Ts=class{constructor(e,t,n,r){this.indexId=e,this.collectionGroup=t,this.fields=n,this.indexState=r}};Ts.UNKNOWN_ID=-1;function Es(e,t){let n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1;return new Os(Cs.fromTimestamp(r===1e9?new Ss(n+1,0):new Ss(n,r)),hs.empty(),t)}function Ds(e){return new Os(e.readTime,e.key,ws)}var Os=class e{constructor(e,t,n){this.readTime=e,this.documentKey=t,this.largestBatchId=n}static min(){return new e(Cs.min(),hs.empty(),ws)}static max(){return new e(Cs.max(),hs.empty(),ws)}};function ks(e,t){let n=e.readTime.compareTo(t.readTime);return n===0?(n=hs.comparator(e.documentKey,t.documentKey),n===0?is(e.largestBatchId,t.largestBatchId):n):n}var As=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}},K=class e{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)}),(e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)}))}catch(e){return this.next(void 0,e)}next(t,n){return this.callbackAttached&&Wo(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(t,this.result):new e(((e,r)=>{this.nextCallback=n=>{this.wrapSuccess(t,n).next(e,r)},this.catchCallback=t=>{this.wrapFailure(n,t).next(e,r)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(t){try{let n=t();return n instanceof e?n:e.resolve(n)}catch(t){return e.reject(t)}}wrapSuccess(t,n){return t?this.wrapUserFunction((()=>t(n))):e.resolve(n)}wrapFailure(t,n){return t?this.wrapUserFunction((()=>t(n))):e.reject(n)}static resolve(t){return new e(((e,n)=>{e(t)}))}static reject(t){return new e(((e,n)=>{n(t)}))}static waitFor(t){return new e(((e,n)=>{let r=0,i=0,a=!1;t.forEach((t=>{++r,t.next((()=>{++i,a&&i===r&&e()}),(e=>n(e)))})),a=!0,i===r&&e()}))}static or(t){let n=e.resolve(!1);for(let r of t)n=n.next((t=>t?e.resolve(t):r()));return n}static forEach(e,t){let n=[];return e.forEach(((e,r)=>{n.push(t.call(this,e,r))})),this.waitFor(n)}static mapArray(t,n){return new e(((e,r)=>{let i=t.length,a=Array(i),o=0;for(let s=0;s<i;s++){let c=s;n(t[c]).next((t=>{a[c]=t,++o,o===i&&e(a)}),(e=>r(e)))}}))}static doWhile(t,n){return new e(((e,r)=>{let i=()=>{!0===t()?n().next((()=>{i()}),r):e()};i()}))}};function js(e){let t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(`.`).slice(0,2).join(`.`):`-1`;return Number(n)}function Ms(e){return e.name===`IndexedDbTransactionError`}var Ns=class{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=e=>this.ae(e),this.ue=e=>t.writeSequenceNumber(e))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){let e=++this.previousValue;return this.ue&&this.ue(e),e}};Ns.ce=-1;var Ps=-1;function Fs(e){return e==null}function Is(e){return e===0&&1/e==-1/0}function Ls(e){let t=0;for(let n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function Rs(e,t){for(let n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function zs(e){for(let t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}var Bs=class e{constructor(e,t){this.comparator=e,this.root=t||Hs.EMPTY}insert(t,n){return new e(this.comparator,this.root.insert(t,n,this.comparator).copy(null,null,Hs.BLACK,null,null))}remove(t){return new e(this.comparator,this.root.remove(t,this.comparator).copy(null,null,Hs.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){let n=this.comparator(e,t.key);if(n===0)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}indexOf(e){let t=0,n=this.root;for(;!n.isEmpty();){let r=this.comparator(e,n.key);if(r===0)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,n)=>(e(t,n),!1)))}toString(){let e=[];return this.inorderTraversal(((t,n)=>(e.push(`${t}:${n}`),!1))),`{${e.join(`, `)}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Vs(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Vs(this.root,e,this.comparator,!1)}getReverseIterator(){return new Vs(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Vs(this.root,e,this.comparator,!0)}},Vs=class{constructor(e,t,n,r){this.isReverse=r,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=t?n(e.key,t):1,t&&r&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},Hs=class e{constructor(t,n,r,i,a){this.key=t,this.value=n,this.color=r??e.RED,this.left=i??e.EMPTY,this.right=a??e.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,n,r,i,a){return new e(t??this.key,n??this.value,r??this.color,i??this.left,a??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let r=this,i=n(e,r.key);return r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):i===0?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n)),r.fixUp()}removeMin(){if(this.left.isEmpty())return e.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,n){let r,i=this;if(n(t,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(t,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(t,i.key)===0){if(i.right.isEmpty())return e.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(t,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let t=this.copy(null,null,e.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){let t=this.copy(null,null,e.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){return 2**this.check()<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Wo(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Wo(14113,{key:this.key,value:this.value});let e=this.left.check();if(e!==this.right.check())throw Wo(27949);return e+(this.isRed()?0:1)}};Hs.EMPTY=null,Hs.RED=!0,Hs.BLACK=!1,Hs.EMPTY=new class{constructor(){this.size=0}get key(){throw Wo(57766)}get value(){throw Wo(16141)}get color(){throw Wo(16727)}get left(){throw Wo(29726)}get right(){throw Wo(36894)}copy(e,t,n,r,i){return this}insert(e,t,n){return new Hs(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var Us=class e{constructor(e){this.comparator=e,this.data=new Bs(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,n)=>(e(t),!1)))}forEachInRange(e,t){let n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){let r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}forEachWhile(e,t){let n;for(n=t===void 0?this.data.getIterator():this.data.getIteratorFrom(t);n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){let t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Ws(this.data.getIterator())}getIteratorFrom(e){return new Ws(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((e=>{t=t.add(e)})),t}isEqual(t){if(!(t instanceof e)||this.size!==t.size)return!1;let n=this.data.getIterator(),r=t.data.getIterator();for(;n.hasNext();){let e=n.getNext().key,t=r.getNext().key;if(this.comparator(e,t)!==0)return!1}return!0}toArray(){let e=[];return this.forEach((t=>{e.push(t)})),e}toString(){let e=[];return this.forEach((t=>e.push(t))),`SortedSet(`+e.toString()+`)`}copy(t){let n=new e(this.comparator);return n.data=t,n}},Ws=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}},Gs=class e{constructor(e){this.fields=e,e.sort(ms.comparator)}static empty(){return new e([])}unionWith(t){let n=new Us(ms.comparator);for(let e of this.fields)n=n.add(e);for(let e of t)n=n.add(e);return new e(n.toArray())}covers(e){for(let t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return ls(this.fields,e.fields,((e,t)=>e.isEqual(t)))}},Ks=class extends Error{constructor(){super(...arguments),this.name=`Base64DecodeError`}},qs=class e{constructor(e){this.binaryString=e}static fromBase64String(t){return new e(function(e){try{return atob(e)}catch(e){throw typeof DOMException<`u`&&e instanceof DOMException?new Ks(`Invalid base64 string: `+e):e}}(t))}static fromUint8Array(t){return new e(function(e){let t=``;for(let n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(t))}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(e){return btoa(e)}(this.binaryString)}toUint8Array(){return function(e){let t=new Uint8Array(e.length);for(let n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return is(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};qs.EMPTY_BYTE_STRING=new qs(``);var Js=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ys(e){if(Ko(!!e,39018),typeof e==`string`){let t=0,n=Js.exec(e);if(Ko(!!n,46558,{timestamp:e}),n[1]){let e=n[1];e=(e+`000000000`).substr(0,9),t=Number(e)}let r=new Date(e);return{seconds:Math.floor(r.getTime()/1e3),nanos:t}}return{seconds:Xs(e.seconds),nanos:Xs(e.nanos)}}function Xs(e){return typeof e==`number`?e:typeof e==`string`?Number(e):0}function Zs(e){return typeof e==`string`?qs.fromBase64String(e):qs.fromUint8Array(e)}var Qs=`server_timestamp`,$s=`__type__`,ec=`__previous_value__`,tc=`__local_write_time__`;function nc(e){return(e?.mapValue?.fields||{})[$s]?.stringValue===Qs}function rc(e){let t=e.mapValue.fields[ec];return nc(t)?rc(t):t}function ic(e){let t=Ys(e.mapValue.fields[tc].timestampValue);return new Ss(t.seconds,t.nanos)}var ac=`(default)`,oc=class e{constructor(e,t){this.projectId=e,this.database=t||ac}static empty(){return new e(``,``)}get isDefaultDatabase(){return this.database===ac}isEqual(t){return t instanceof e&&t.projectId===this.projectId&&t.database===this.database}};function sc(e,t){if(!Object.prototype.hasOwnProperty.apply(e.options,[`projectId`]))throw new G(W.INVALID_ARGUMENT,`"projectId" not provided in firebase.initializeApp.`);return new oc(e.options.projectId,t)}var cc=`__type__`,lc=`__max__`,uc={mapValue:{fields:{__type__:{stringValue:lc}}}},dc=`__vector__`,fc=`value`;function pc(e){return`nullValue`in e?0:`booleanValue`in e?1:`integerValue`in e||`doubleValue`in e?2:`timestampValue`in e?3:`stringValue`in e?5:`bytesValue`in e?6:`referenceValue`in e?7:`geoPointValue`in e?8:`arrayValue`in e?9:`mapValue`in e?nc(e)?4:Ec(e)?9007199254740991:wc(e)?10:11:Wo(28295,{value:e})}function mc(e,t){if(e===t)return!0;let n=pc(e);if(n!==pc(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return ic(e).isEqual(ic(t));case 3:return function(e,t){if(typeof e.timestampValue==`string`&&typeof t.timestampValue==`string`&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;let n=Ys(e.timestampValue),r=Ys(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return Zs(e.bytesValue).isEqual(Zs(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return Xs(e.geoPointValue.latitude)===Xs(t.geoPointValue.latitude)&&Xs(e.geoPointValue.longitude)===Xs(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if(`integerValue`in e&&`integerValue`in t)return Xs(e.integerValue)===Xs(t.integerValue);if(`doubleValue`in e&&`doubleValue`in t){let n=Xs(e.doubleValue),r=Xs(t.doubleValue);return n===r?Is(n)===Is(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return ls(e.arrayValue.values||[],t.arrayValue.values||[],mc);case 10:case 11:return function(e,t){let n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(Ls(n)!==Ls(r))return!1;for(let e in n)if(n.hasOwnProperty(e)&&(r[e]===void 0||!mc(n[e],r[e])))return!1;return!0}(e,t);default:return Wo(52216,{left:e})}}function hc(e,t){return(e.values||[]).find((e=>mc(e,t)))!==void 0}function gc(e,t){if(e===t)return 0;let n=pc(e),r=pc(t);if(n!==r)return is(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return is(e.booleanValue,t.booleanValue);case 2:return function(e,t){let n=Xs(e.integerValue||e.doubleValue),r=Xs(t.integerValue||t.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(e,t);case 3:return _c(e.timestampValue,t.timestampValue);case 4:return _c(ic(e),ic(t));case 5:return as(e.stringValue,t.stringValue);case 6:return function(e,t){let n=Zs(e),r=Zs(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){let n=e.split(`/`),r=t.split(`/`);for(let e=0;e<n.length&&e<r.length;e++){let t=is(n[e],r[e]);if(t!==0)return t}return is(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){let n=is(Xs(e.latitude),Xs(t.latitude));return n===0?is(Xs(e.longitude),Xs(t.longitude)):n}(e.geoPointValue,t.geoPointValue);case 9:return vc(e.arrayValue,t.arrayValue);case 10:return function(e,t){let n=e.fields||{},r=t.fields||{},i=n[fc]?.arrayValue,a=r[fc]?.arrayValue,o=is(i?.values?.length||0,a?.values?.length||0);return o===0?vc(i,a):o}(e.mapValue,t.mapValue);case 11:return function(e,t){if(e===uc.mapValue&&t===uc.mapValue)return 0;if(e===uc.mapValue)return 1;if(t===uc.mapValue)return-1;let n=e.fields||{},r=Object.keys(n),i=t.fields||{},a=Object.keys(i);r.sort(),a.sort();for(let e=0;e<r.length&&e<a.length;++e){let t=as(r[e],a[e]);if(t!==0)return t;let o=gc(n[r[e]],i[a[e]]);if(o!==0)return o}return is(r.length,a.length)}(e.mapValue,t.mapValue);default:throw Wo(23264,{he:n})}}function _c(e,t){if(typeof e==`string`&&typeof t==`string`&&e.length===t.length)return is(e,t);let n=Ys(e),r=Ys(t),i=is(n.seconds,r.seconds);return i===0?is(n.nanos,r.nanos):i}function vc(e,t){let n=e.values||[],r=t.values||[];for(let e=0;e<n.length&&e<r.length;++e){let t=gc(n[e],r[e]);if(t)return t}return is(n.length,r.length)}function yc(e){return bc(e)}function bc(e){return`nullValue`in e?`null`:`booleanValue`in e?``+e.booleanValue:`integerValue`in e?``+e.integerValue:`doubleValue`in e?``+e.doubleValue:`timestampValue`in e?function(e){let t=Ys(e);return`time(${t.seconds},${t.nanos})`}(e.timestampValue):`stringValue`in e?e.stringValue:`bytesValue`in e?function(e){return Zs(e).toBase64()}(e.bytesValue):`referenceValue`in e?function(e){return hs.fromName(e).toString()}(e.referenceValue):`geoPointValue`in e?function(e){return`geo(${e.latitude},${e.longitude})`}(e.geoPointValue):`arrayValue`in e?function(e){let t=`[`,n=!0;for(let r of e.values||[])n?n=!1:t+=`,`,t+=bc(r);return t+`]`}(e.arrayValue):`mapValue`in e?function(e){let t=Object.keys(e.fields||{}).sort(),n=`{`,r=!0;for(let i of t)r?r=!1:n+=`,`,n+=`${i}:${bc(e.fields[i])}`;return n+`}`}(e.mapValue):Wo(61005,{value:e})}function xc(e){return!!e&&`integerValue`in e}function Sc(e){return!!e&&`arrayValue`in e}function Cc(e){return!!e&&`mapValue`in e}function wc(e){return(e?.mapValue?.fields||{})[cc]?.stringValue===dc}function Tc(e){if(e.geoPointValue)return{geoPointValue:{...e.geoPointValue}};if(e.timestampValue&&typeof e.timestampValue==`object`)return{timestampValue:{...e.timestampValue}};if(e.mapValue){let t={mapValue:{fields:{}}};return Rs(e.mapValue.fields,((e,n)=>t.mapValue.fields[e]=Tc(n))),t}if(e.arrayValue){let t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=Tc(e.arrayValue.values[n]);return t}return{...e}}function Ec(e){return(((e.mapValue||{}).fields||{}).__type__||{}).stringValue===lc}var Dc=class e{constructor(e){this.value=e}static empty(){return new e({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let n=0;n<e.length-1;++n)if(t=(t.mapValue.fields||{})[e.get(n)],!Cc(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Tc(t)}setAll(e){let t=ms.emptyPath(),n={},r=[];e.forEach(((e,i)=>{if(!t.isImmediateParentOf(i)){let e=this.getFieldsMap(t);this.applyChanges(e,n,r),n={},r=[],t=i.popLast()}e?n[i.lastSegment()]=Tc(e):r.push(i.lastSegment())}));let i=this.getFieldsMap(t);this.applyChanges(i,n,r)}delete(e){let t=this.field(e.popLast());Cc(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return mc(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let n=0;n<e.length;++n){let r=t.mapValue.fields[e.get(n)];Cc(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}applyChanges(e,t,n){Rs(t,((t,n)=>e[t]=n));for(let t of n)delete e[t]}clone(){return new e(Tc(this.value))}},Oc=class e{constructor(e,t,n,r,i,a,o){this.key=e,this.documentType=t,this.version=n,this.readTime=r,this.createTime=i,this.data=a,this.documentState=o}static newInvalidDocument(t){return new e(t,0,Cs.min(),Cs.min(),Cs.min(),Dc.empty(),0)}static newFoundDocument(t,n,r,i){return new e(t,1,n,Cs.min(),r,i,0)}static newNoDocument(t,n){return new e(t,2,n,Cs.min(),Cs.min(),Dc.empty(),0)}static newUnknownDocument(t,n){return new e(t,3,n,Cs.min(),Cs.min(),Dc.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Cs.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Dc.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Dc.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Cs.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(t){return t instanceof e&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new e(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}},kc=class{constructor(e,t){this.position=e,this.inclusive=t}};function Ac(e,t,n){let r=0;for(let i=0;i<e.position.length;i++){let a=t[i],o=e.position[i];if(r=a.field.isKeyField()?hs.comparator(hs.fromName(o.referenceValue),n.key):gc(o,n.data.field(a.field)),a.dir===`desc`&&(r*=-1),r!==0)break}return r}function jc(e,t){if(e===null)return t===null;if(t===null||e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!mc(e.position[n],t.position[n]))return!1;return!0}var Mc=class{constructor(e,t=`asc`){this.field=e,this.dir=t}};function Nc(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}var Pc=class{},q=class e extends Pc{constructor(e,t,n){super(),this.field=e,this.op=t,this.value=n}static create(t,n,r){return t.isKeyField()?n===`in`||n===`not-in`?this.createKeyFieldInFilter(t,n,r):new Hc(t,n,r):n===`array-contains`?new Kc(t,r):n===`in`?new qc(t,r):n===`not-in`?new Jc(t,r):n===`array-contains-any`?new Yc(t,r):new e(t,n,r)}static createKeyFieldInFilter(e,t,n){return t===`in`?new Uc(e,n):new Wc(e,n)}matches(e){let t=e.data.field(this.field);return this.op===`!=`?t!==null&&t.nullValue===void 0&&this.matchesComparison(gc(t,this.value)):t!==null&&pc(this.value)===pc(t)&&this.matchesComparison(gc(t,this.value))}matchesComparison(e){switch(this.op){case`<`:return e<0;case`<=`:return e<=0;case`==`:return e===0;case`!=`:return e!==0;case`>`:return e>0;case`>=`:return e>=0;default:return Wo(47266,{operator:this.op})}}isInequality(){return[`<`,`<=`,`>`,`>=`,`!=`,`not-in`].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},Fc=class e extends Pc{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(t,n){return new e(t,n)}matches(e){return Ic(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}};function Ic(e){return e.op===`and`}function Lc(e){return Rc(e)&&Ic(e)}function Rc(e){for(let t of e.filters)if(t instanceof Fc)return!1;return!0}function zc(e){if(e instanceof q)return e.field.canonicalString()+e.op.toString()+yc(e.value);if(Lc(e))return e.filters.map((e=>zc(e))).join(`,`);{let t=e.filters.map((e=>zc(e))).join(`,`);return`${e.op}(${t})`}}function Bc(e,t){return e instanceof q?function(e,t){return t instanceof q&&e.op===t.op&&e.field.isEqual(t.field)&&mc(e.value,t.value)}(e,t):e instanceof Fc?function(e,t){return t instanceof Fc&&e.op===t.op&&e.filters.length===t.filters.length?e.filters.reduce(((e,n,r)=>e&&Bc(n,t.filters[r])),!0):!1}(e,t):void Wo(19439)}function Vc(e){return e instanceof q?function(e){return`${e.field.canonicalString()} ${e.op} ${yc(e.value)}`}(e):e instanceof Fc?function(e){return e.op.toString()+` {`+e.getFilters().map(Vc).join(` ,`)+`}`}(e):`Filter`}var Hc=class extends q{constructor(e,t,n){super(e,t,n),this.key=hs.fromName(n.referenceValue)}matches(e){let t=hs.comparator(e.key,this.key);return this.matchesComparison(t)}},Uc=class extends q{constructor(e,t){super(e,`in`,t),this.keys=Gc(`in`,t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}},Wc=class extends q{constructor(e,t){super(e,`not-in`,t),this.keys=Gc(`not-in`,t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}};function Gc(e,t){return(t.arrayValue?.values||[]).map((e=>hs.fromName(e.referenceValue)))}var Kc=class extends q{constructor(e,t){super(e,`array-contains`,t)}matches(e){let t=e.data.field(this.field);return Sc(t)&&hc(t.arrayValue,this.value)}},qc=class extends q{constructor(e,t){super(e,`in`,t)}matches(e){let t=e.data.field(this.field);return t!==null&&hc(this.value.arrayValue,t)}},Jc=class extends q{constructor(e,t){super(e,`not-in`,t)}matches(e){if(hc(this.value.arrayValue,{nullValue:`NULL_VALUE`}))return!1;let t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!hc(this.value.arrayValue,t)}},Yc=class extends q{constructor(e,t){super(e,`array-contains-any`,t)}matches(e){let t=e.data.field(this.field);return!(!Sc(t)||!t.arrayValue.values)&&t.arrayValue.values.some((e=>hc(this.value.arrayValue,e)))}},Xc=class{constructor(e,t=null,n=[],r=[],i=null,a=null,o=null){this.path=e,this.collectionGroup=t,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=a,this.endAt=o,this.Te=null}};function Zc(e,t=null,n=[],r=[],i=null,a=null,o=null){return new Xc(e,t,n,r,i,a,o)}function Qc(e){let t=qo(e);if(t.Te===null){let e=t.path.canonicalString();t.collectionGroup!==null&&(e+=`|cg:`+t.collectionGroup),e+=`|f:`,e+=t.filters.map((e=>zc(e))).join(`,`),e+=`|ob:`,e+=t.orderBy.map((e=>function(e){return e.field.canonicalString()+e.dir}(e))).join(`,`),Fs(t.limit)||(e+=`|l:`,e+=t.limit),t.startAt&&(e+=`|lb:`,e+=t.startAt.inclusive?`b:`:`a:`,e+=t.startAt.position.map((e=>yc(e))).join(`,`)),t.endAt&&(e+=`|ub:`,e+=t.endAt.inclusive?`a:`:`b:`,e+=t.endAt.position.map((e=>yc(e))).join(`,`)),t.Te=e}return t.Te}function $c(e,t){if(e.limit!==t.limit||e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++)if(!Nc(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let n=0;n<e.filters.length;n++)if(!Bc(e.filters[n],t.filters[n]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!jc(e.startAt,t.startAt)&&jc(e.endAt,t.endAt)}var el=class{constructor(e,t=null,n=[],r=[],i=null,a=`F`,o=null,s=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=n,this.filters=r,this.limit=i,this.limitType=a,this.startAt=o,this.endAt=s,this.Ie=null,this.Ee=null,this.Re=null,this.startAt,this.endAt}};function tl(e,t,n,r,i,a,o,s){return new el(e,t,n,r,i,a,o,s)}function nl(e){return new el(e)}function rl(e){return e.filters.length===0&&e.limit===null&&e.startAt==null&&e.endAt==null&&(e.explicitOrderBy.length===0||e.explicitOrderBy.length===1&&e.explicitOrderBy[0].field.isKeyField())}function il(e){return hs.isDocumentKey(e.path)&&e.collectionGroup===null&&e.filters.length===0}function al(e){return e.collectionGroup!==null}function ol(e){let t=qo(e);if(t.Ie===null){t.Ie=[];let e=new Set;for(let n of t.explicitOrderBy)t.Ie.push(n),e.add(n.field.canonicalString());let n=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:`asc`;(function(e){let t=new Us(ms.comparator);return e.filters.forEach((e=>{e.getFlattenedFilters().forEach((e=>{e.isInequality()&&(t=t.add(e.field))}))})),t})(t).forEach((r=>{e.has(r.canonicalString())||r.isKeyField()||t.Ie.push(new Mc(r,n))})),e.has(ms.keyField().canonicalString())||t.Ie.push(new Mc(ms.keyField(),n))}return t.Ie}function sl(e){let t=qo(e);return t.Ee||=cl(t,ol(e)),t.Ee}function cl(e,t){if(e.limitType===`F`)return Zc(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);{t=t.map((e=>{let t=e.dir===`desc`?`asc`:`desc`;return new Mc(e.field,t)}));let n=e.endAt?new kc(e.endAt.position,e.endAt.inclusive):null,r=e.startAt?new kc(e.startAt.position,e.startAt.inclusive):null;return Zc(e.path,e.collectionGroup,t,e.filters,e.limit,n,r)}}function ll(e,t,n){return new el(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function ul(e,t){return $c(sl(e),sl(t))&&e.limitType===t.limitType}function dl(e){return`${Qc(sl(e))}|lt:${e.limitType}`}function fl(e){return`Query(target=${function(e){let t=e.path.canonicalString();return e.collectionGroup!==null&&(t+=` collectionGroup=`+e.collectionGroup),e.filters.length>0&&(t+=`, filters: [${e.filters.map((e=>Vc(e))).join(`, `)}]`),Fs(e.limit)||(t+=`, limit: `+e.limit),e.orderBy.length>0&&(t+=`, orderBy: [${e.orderBy.map((e=>function(e){return`${e.field.canonicalString()} (${e.dir})`}(e))).join(`, `)}]`),e.startAt&&(t+=`, startAt: `,t+=e.startAt.inclusive?`b:`:`a:`,t+=e.startAt.position.map((e=>yc(e))).join(`,`)),e.endAt&&(t+=`, endAt: `,t+=e.endAt.inclusive?`a:`:`b:`,t+=e.endAt.position.map((e=>yc(e))).join(`,`)),`Target(${t})`}(sl(e))}; limitType=${e.limitType})`}function pl(e,t){return t.isFoundDocument()&&function(e,t){let n=t.key.path;return e.collectionGroup===null?hs.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n):t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n)}(e,t)&&function(e,t){for(let n of ol(e))if(!n.field.isKeyField()&&t.data.field(n.field)===null)return!1;return!0}(e,t)&&function(e,t){for(let n of e.filters)if(!n.matches(t))return!1;return!0}(e,t)&&function(e,t){return!(e.startAt&&!function(e,t,n){let r=Ac(e,t,n);return e.inclusive?r<=0:r<0}(e.startAt,ol(e),t)||e.endAt&&!function(e,t,n){let r=Ac(e,t,n);return e.inclusive?r>=0:r>0}(e.endAt,ol(e),t))}(e,t)}function ml(e){return(t,n)=>{let r=!1;for(let i of ol(e)){let e=hl(i,t,n);if(e!==0)return e;r||=i.field.isKeyField()}return 0}}function hl(e,t,n){let r=e.field.isKeyField()?hs.comparator(t.key,n.key):function(e,t,n){let r=t.data.field(e),i=n.data.field(e);return r!==null&&i!==null?gc(r,i):Wo(42886)}(e.field,t,n);switch(e.dir){case`asc`:return r;case`desc`:return-1*r;default:return Wo(19790,{direction:e.dir})}}var gl=class{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){let t=this.mapKeyFn(e),n=this.inner[t];if(n!==void 0){for(let[t,r]of n)if(this.equalsFn(t,e))return r}}has(e){return this.get(e)!==void 0}set(e,t){let n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return this.inner[n]=[[e,t]],void this.innerSize++;for(let n=0;n<r.length;n++)if(this.equalsFn(r[n][0],e))return void(r[n]=[e,t]);r.push([e,t]),this.innerSize++}delete(e){let t=this.mapKeyFn(e),n=this.inner[t];if(n===void 0)return!1;for(let r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return n.length===1?delete this.inner[t]:n.splice(r,1),this.innerSize--,!0;return!1}forEach(e){Rs(this.inner,((t,n)=>{for(let[t,r]of n)e(t,r)}))}isEmpty(){return zs(this.inner)}size(){return this.innerSize}},_l=new Bs(hs.comparator);function vl(){return _l}var yl=new Bs(hs.comparator);function bl(...e){let t=yl;for(let n of e)t=t.insert(n.key,n);return t}function xl(e){let t=yl;return e.forEach(((e,n)=>t=t.insert(e,n.overlayedDocument))),t}function Sl(){return wl()}function Cl(){return wl()}function wl(){return new gl((e=>e.toString()),((e,t)=>e.isEqual(t)))}new Bs(hs.comparator);var Tl=new Us(hs.comparator);function El(...e){let t=Tl;for(let n of e)t=t.add(n);return t}var Dl=new Us(is);function Ol(){return Dl}function kl(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:`NaN`};if(t===1/0)return{doubleValue:`Infinity`};if(t===-1/0)return{doubleValue:`-Infinity`}}return{doubleValue:Is(t)?`-0`:t}}function Al(e){return{integerValue:``+e}}var jl=class{constructor(){this._=void 0}};function Ml(e,t,n){return e instanceof Fl?function(e,t){let n={fields:{[$s]:{stringValue:Qs},[tc]:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&nc(t)&&(t=rc(t)),t&&(n.fields[ec]=t),{mapValue:n}}(n,t):e instanceof Il?Ll(e,t):e instanceof Rl?J(e,t):function(e,t){let n=Pl(e,t),r=zl(n)+zl(e.Ae);return xc(n)&&xc(e.Ae)?Al(r):kl(e.serializer,r)}(e,t)}function Nl(e,t,n){return e instanceof Il?Ll(e,t):e instanceof Rl?J(e,t):n}function Pl(e,t){return e instanceof Y?function(e){return xc(e)||function(e){return!!e&&`doubleValue`in e}(e)}(t)?t:{integerValue:0}:null}var Fl=class extends jl{},Il=class extends jl{constructor(e){super(),this.elements=e}};function Ll(e,t){let n=Bl(t);for(let t of e.elements)n.some((e=>mc(e,t)))||n.push(t);return{arrayValue:{values:n}}}var Rl=class extends jl{constructor(e){super(),this.elements=e}};function J(e,t){let n=Bl(t);for(let t of e.elements)n=n.filter((e=>!mc(e,t)));return{arrayValue:{values:n}}}var Y=class extends jl{constructor(e,t){super(),this.serializer=e,this.Ae=t}};function zl(e){return Xs(e.integerValue||e.doubleValue)}function Bl(e){return Sc(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}function Vl(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof Il&&t instanceof Il||e instanceof Rl&&t instanceof Rl?ls(e.elements,t.elements,mc):e instanceof Y&&t instanceof Y?mc(e.Ae,t.Ae):e instanceof Fl&&t instanceof Fl}(e.transform,t.transform)}var Hl=class e{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new e}static exists(t){return new e(void 0,t)}static updateTime(t){return new e(t)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function Ul(e,t){return e.updateTime===void 0?e.exists===void 0||e.exists===t.isFoundDocument():t.isFoundDocument()&&t.version.isEqual(e.updateTime)}var Wl=class{};function Gl(e,t){if(!e.hasLocalMutations||t&&t.fields.length===0)return null;if(t===null)return e.isNoDocument()?new eu(e.key,Hl.none()):new Yl(e.key,e.data,Hl.none());{let n=e.data,r=Dc.empty(),i=new Us(ms.comparator);for(let e of t.fields)if(!i.has(e)){let t=n.field(e);t===null&&e.length>1&&(e=e.popLast(),t=n.field(e)),t===null?r.delete(e):r.set(e,t),i=i.add(e)}return new Xl(e.key,r,new Gs(i.toArray()),Hl.none())}}function Kl(e,t,n){e instanceof Yl?function(e,t,n){let r=e.value.clone(),i=Ql(e.fieldTransforms,t,n.transformResults);r.setAll(i),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):e instanceof Xl?function(e,t,n){if(!Ul(e.precondition,t))return void t.convertToUnknownDocument(n.version);let r=Ql(e.fieldTransforms,t,n.transformResults),i=t.data;i.setAll(Zl(e)),i.setAll(r),t.convertToFoundDocument(n.version,i).setHasCommittedMutations()}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function ql(e,t,n,r){return e instanceof Yl?function(e,t,n,r){if(!Ul(e.precondition,t))return n;let i=e.value.clone(),a=$l(e.fieldTransforms,r,t);return i.setAll(a),t.convertToFoundDocument(t.version,i).setHasLocalMutations(),null}(e,t,n,r):e instanceof Xl?function(e,t,n,r){if(!Ul(e.precondition,t))return n;let i=$l(e.fieldTransforms,r,t),a=t.data;return a.setAll(Zl(e)),a.setAll(i),t.convertToFoundDocument(t.version,a).setHasLocalMutations(),n===null?null:n.unionWith(e.fieldMask.fields).unionWith(e.fieldTransforms.map((e=>e.field)))}(e,t,n,r):function(e,t,n){return Ul(e.precondition,t)?(t.convertToNoDocument(t.version).setHasLocalMutations(),null):n}(e,t,n)}function Jl(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return e===void 0&&t===void 0||!(!e||!t)&&ls(e,t,((e,t)=>Vl(e,t)))}(e.fieldTransforms,t.fieldTransforms)&&(e.type===0?e.value.isEqual(t.value):e.type!==1||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}var Yl=class extends Wl{constructor(e,t,n,r=[]){super(),this.key=e,this.value=t,this.precondition=n,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}},Xl=class extends Wl{constructor(e,t,n,r,i=[]){super(),this.key=e,this.data=t,this.fieldMask=n,this.precondition=r,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}};function Zl(e){let t=new Map;return e.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){let r=e.data.field(n);t.set(n,r)}})),t}function Ql(e,t,n){let r=new Map;Ko(e.length===n.length,32656,{Ve:n.length,de:e.length});for(let i=0;i<n.length;i++){let a=e[i],o=a.transform,s=t.data.field(a.field);r.set(a.field,Nl(o,s,n[i]))}return r}function $l(e,t,n){let r=new Map;for(let i of e){let e=i.transform,a=n.data.field(i.field);r.set(i.field,Ml(e,a,t))}return r}var eu=class extends Wl{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},tu=class{constructor(e,t,n,r){this.batchId=e,this.localWriteTime=t,this.baseMutations=n,this.mutations=r}applyToRemoteDocument(e,t){let n=t.mutationResults;for(let t=0;t<this.mutations.length;t++){let r=this.mutations[t];r.key.isEqual(e.key)&&Kl(r,e,n[t])}}applyToLocalView(e,t){for(let n of this.baseMutations)n.key.isEqual(e.key)&&(t=ql(n,e,t,this.localWriteTime));for(let n of this.mutations)n.key.isEqual(e.key)&&(t=ql(n,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){let n=Cl();return this.mutations.forEach((r=>{let i=e.get(r.key),a=i.overlayedDocument,o=this.applyToLocalView(a,i.mutatedFields);o=t.has(r.key)?null:o;let s=Gl(a,o);s!==null&&n.set(r.key,s),a.isValidDocument()||a.convertToNoDocument(Cs.min())})),n}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),El())}isEqual(e){return this.batchId===e.batchId&&ls(this.mutations,e.mutations,((e,t)=>Jl(e,t)))&&ls(this.baseMutations,e.baseMutations,((e,t)=>Jl(e,t)))}},nu=class{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}},ru,X;function iu(e){if(e===void 0)return Vo(`GRPC error has no .code`),W.UNKNOWN;switch(e){case ru.OK:return W.OK;case ru.CANCELLED:return W.CANCELLED;case ru.UNKNOWN:return W.UNKNOWN;case ru.DEADLINE_EXCEEDED:return W.DEADLINE_EXCEEDED;case ru.RESOURCE_EXHAUSTED:return W.RESOURCE_EXHAUSTED;case ru.INTERNAL:return W.INTERNAL;case ru.UNAVAILABLE:return W.UNAVAILABLE;case ru.UNAUTHENTICATED:return W.UNAUTHENTICATED;case ru.INVALID_ARGUMENT:return W.INVALID_ARGUMENT;case ru.NOT_FOUND:return W.NOT_FOUND;case ru.ALREADY_EXISTS:return W.ALREADY_EXISTS;case ru.PERMISSION_DENIED:return W.PERMISSION_DENIED;case ru.FAILED_PRECONDITION:return W.FAILED_PRECONDITION;case ru.ABORTED:return W.ABORTED;case ru.OUT_OF_RANGE:return W.OUT_OF_RANGE;case ru.UNIMPLEMENTED:return W.UNIMPLEMENTED;case ru.DATA_LOSS:return W.DATA_LOSS;default:return Wo(39323,{code:e})}}(X=ru||={})[X.OK=0]=`OK`,X[X.CANCELLED=1]=`CANCELLED`,X[X.UNKNOWN=2]=`UNKNOWN`,X[X.INVALID_ARGUMENT=3]=`INVALID_ARGUMENT`,X[X.DEADLINE_EXCEEDED=4]=`DEADLINE_EXCEEDED`,X[X.NOT_FOUND=5]=`NOT_FOUND`,X[X.ALREADY_EXISTS=6]=`ALREADY_EXISTS`,X[X.PERMISSION_DENIED=7]=`PERMISSION_DENIED`,X[X.UNAUTHENTICATED=16]=`UNAUTHENTICATED`,X[X.RESOURCE_EXHAUSTED=8]=`RESOURCE_EXHAUSTED`,X[X.FAILED_PRECONDITION=9]=`FAILED_PRECONDITION`,X[X.ABORTED=10]=`ABORTED`,X[X.OUT_OF_RANGE=11]=`OUT_OF_RANGE`,X[X.UNIMPLEMENTED=12]=`UNIMPLEMENTED`,X[X.INTERNAL=13]=`INTERNAL`,X[X.UNAVAILABLE=14]=`UNAVAILABLE`,X[X.DATA_LOSS=15]=`DATA_LOSS`,new To([4294967295,4294967295],0);var au=class{constructor(e,t){this.databaseId=e,this.useProto3Json=t}};function ou(e){return Ko(!!e,49232),Cs.fromTimestamp(function(e){let t=Ys(e);return new Ss(t.seconds,t.nanos)}(e))}function su(e,t){let n=function(e){return new fs([`projects`,e.projectId,`databases`,e.database])}(e).child(`documents`);return t===void 0?n:n.child(t)}function cu(e){let t=fs.fromString(e);return Ko(mu(t),10190,{key:t.toString()}),t}function lu(e){let t=cu(e);return t.length===4?fs.emptyPath():uu(t)}function uu(e){return Ko(e.length>4&&e.get(4)===`documents`,29091,{key:e.toString()}),e.popFirst(5)}function du(e){let t=lu(e.parent),n=e.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){Ko(r===1,65062);let e=n.from[0];e.allDescendants?i=e.collectionId:t=t.child(e.collectionId)}let a=[];n.where&&(a=function(e){let t=fu(e);return t instanceof Fc&&Lc(t)?t.getFilters():[t]}(n.where));let o=[];n.orderBy&&(o=function(e){return e.map((e=>function(e){return new Mc(pu(e.field),function(e){switch(e){case`ASCENDING`:return`asc`;case`DESCENDING`:return`desc`;default:return}}(e.direction))}(e)))}(n.orderBy));let s=null;n.limit&&(s=function(e){let t;return t=typeof e==`object`?e.value:e,Fs(t)?null:t}(n.limit));let c=null;n.startAt&&(c=function(e){let t=!!e.before;return new kc(e.values||[],t)}(n.startAt));let l=null;return n.endAt&&(l=function(e){let t=!e.before;return new kc(e.values||[],t)}(n.endAt)),tl(t,i,o,a,s,`F`,c,l)}function fu(e){return e.unaryFilter===void 0?e.fieldFilter===void 0?e.compositeFilter===void 0?Wo(30097,{filter:e}):function(e){return Fc.create(e.compositeFilter.filters.map((e=>fu(e))),function(e){switch(e){case`AND`:return`and`;case`OR`:return`or`;default:return Wo(1026)}}(e.compositeFilter.op))}(e):function(e){return q.create(pu(e.fieldFilter.field),function(e){switch(e){case`EQUAL`:return`==`;case`NOT_EQUAL`:return`!=`;case`GREATER_THAN`:return`>`;case`GREATER_THAN_OR_EQUAL`:return`>=`;case`LESS_THAN`:return`<`;case`LESS_THAN_OR_EQUAL`:return`<=`;case`ARRAY_CONTAINS`:return`array-contains`;case`IN`:return`in`;case`NOT_IN`:return`not-in`;case`ARRAY_CONTAINS_ANY`:return`array-contains-any`;case`OPERATOR_UNSPECIFIED`:return Wo(58110);default:return Wo(50506)}}(e.fieldFilter.op),e.fieldFilter.value)}(e):function(e){switch(e.unaryFilter.op){case`IS_NAN`:let t=pu(e.unaryFilter.field);return q.create(t,`==`,{doubleValue:NaN});case`IS_NULL`:let n=pu(e.unaryFilter.field);return q.create(n,`==`,{nullValue:`NULL_VALUE`});case`IS_NOT_NAN`:let r=pu(e.unaryFilter.field);return q.create(r,`!=`,{doubleValue:NaN});case`IS_NOT_NULL`:let i=pu(e.unaryFilter.field);return q.create(i,`!=`,{nullValue:`NULL_VALUE`});case`OPERATOR_UNSPECIFIED`:return Wo(61313);default:return Wo(60726)}}(e)}function pu(e){return ms.fromServerFormat(e.fieldPath)}function mu(e){return e.length>=4&&e.get(0)===`projects`&&e.get(2)===`databases`}var hu=class{constructor(e){this.yt=e}};function gu(e){let t=du({parent:e.parent,structuredQuery:e.structuredQuery});return e.limitType===`LAST`?ll(t,t.limit,`L`):t}var _u=class{constructor(){}Dt(e,t){this.Ct(e,t),t.vt()}Ct(e,t){if(`nullValue`in e)this.Ft(t,5);else if(`booleanValue`in e)this.Ft(t,10),t.Mt(e.booleanValue?1:0);else if(`integerValue`in e)this.Ft(t,15),t.Mt(Xs(e.integerValue));else if(`doubleValue`in e){let n=Xs(e.doubleValue);isNaN(n)?this.Ft(t,13):(this.Ft(t,15),Is(n)?t.Mt(0):t.Mt(n))}else if(`timestampValue`in e){let n=e.timestampValue;this.Ft(t,20),typeof n==`string`&&(n=Ys(n)),t.xt(`${n.seconds||``}`),t.Mt(n.nanos||0)}else if(`stringValue`in e)this.Ot(e.stringValue,t),this.Nt(t);else if(`bytesValue`in e)this.Ft(t,30),t.Bt(Zs(e.bytesValue)),this.Nt(t);else if(`referenceValue`in e)this.Lt(e.referenceValue,t);else if(`geoPointValue`in e){let n=e.geoPointValue;this.Ft(t,45),t.Mt(n.latitude||0),t.Mt(n.longitude||0)}else `mapValue`in e?Ec(e)?this.Ft(t,2**53-1):wc(e)?this.kt(e.mapValue,t):(this.Kt(e.mapValue,t),this.Nt(t)):`arrayValue`in e?(this.qt(e.arrayValue,t),this.Nt(t)):Wo(19022,{Ut:e})}Ot(e,t){this.Ft(t,25),this.$t(e,t)}$t(e,t){t.xt(e)}Kt(e,t){let n=e.fields||{};this.Ft(t,55);for(let e of Object.keys(n))this.Ot(e,t),this.Ct(n[e],t)}kt(e,t){let n=e.fields||{};this.Ft(t,53);let r=fc,i=n[r].arrayValue?.values?.length||0;this.Ft(t,15),t.Mt(Xs(i)),this.Ot(r,t),this.Ct(n[r],t)}qt(e,t){let n=e.values||[];this.Ft(t,50);for(let e of n)this.Ct(e,t)}Lt(e,t){this.Ft(t,37),hs.fromName(e).path.forEach((e=>{this.Ft(t,60),this.$t(e,t)}))}Ft(e,t){e.Mt(t)}Nt(e){e.Mt(2)}};_u.Wt=new _u;var vu=class{constructor(){this.Sn=new yu}addToCollectionParentIndex(e,t){return this.Sn.add(t),K.resolve()}getCollectionParents(e,t){return K.resolve(this.Sn.getEntries(t))}addFieldIndex(e,t){return K.resolve()}deleteFieldIndex(e,t){return K.resolve()}deleteAllFieldIndexes(e){return K.resolve()}createTargetIndexes(e,t){return K.resolve()}getDocumentsMatchingTarget(e,t){return K.resolve(null)}getIndexType(e,t){return K.resolve(0)}getFieldIndexes(e,t){return K.resolve([])}getNextCollectionGroupToUpdate(e){return K.resolve(null)}getMinOffset(e,t){return K.resolve(Os.min())}getMinOffsetFromCollectionGroup(e,t){return K.resolve(Os.min())}updateCollectionGroup(e,t,n){return K.resolve()}updateIndexEntries(e,t){return K.resolve()}},yu=class{constructor(){this.index={}}add(e){let t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new Us(fs.comparator),i=!r.has(n);return this.index[t]=r.add(n),i}has(e){let t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}getEntries(e){return(this.index[e]||new Us(fs.comparator)).toArray()}};new Uint8Array;var bu=41943040,xu=class e{static withCacheSize(t){return new e(t,e.DEFAULT_COLLECTION_PERCENTILE,e.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=n}};xu.DEFAULT_COLLECTION_PERCENTILE=10,xu.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,xu.DEFAULT=new xu(bu,xu.DEFAULT_COLLECTION_PERCENTILE,xu.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),xu.DISABLED=new xu(-1,0,0);var Su=class e{constructor(e){this.sr=e}next(){return this.sr+=2,this.sr}static _r(){return new e(0)}static ar(){return new e(-1)}},Cu=1048576,wu=class{constructor(){this.changes=new gl((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Oc.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();let n=this.changes.get(t);return n===void 0?this.getFromCache(e,t):K.resolve(n)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}},Tu=class{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}},Eu=class{constructor(e,t,n,r){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=n,this.indexManager=r}getDocument(e,t){let n=null;return this.documentOverlayCache.getOverlay(e,t).next((r=>(n=r,this.remoteDocumentCache.getEntry(e,t)))).next((e=>(n!==null&&ql(n.mutation,e,Gs.empty(),Ss.now()),e)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((t=>this.getLocalViewOfDocuments(e,t,El()).next((()=>t))))}getLocalViewOfDocuments(e,t,n=El()){let r=Sl();return this.populateOverlays(e,r,t).next((()=>this.computeViews(e,t,r,n).next((e=>{let t=bl();return e.forEach(((e,n)=>{t=t.insert(e,n.overlayedDocument)})),t}))))}getOverlayedDocuments(e,t){let n=Sl();return this.populateOverlays(e,n,t).next((()=>this.computeViews(e,t,n,El())))}populateOverlays(e,t,n){let r=[];return n.forEach((e=>{t.has(e)||r.push(e)})),this.documentOverlayCache.getOverlays(e,r).next((e=>{e.forEach(((e,n)=>{t.set(e,n)}))}))}computeViews(e,t,n,r){let i=vl(),a=wl(),o=function(){return wl()}();return t.forEach(((e,t)=>{let o=n.get(t.key);r.has(t.key)&&(o===void 0||o.mutation instanceof Xl)?i=i.insert(t.key,t):o===void 0?a.set(t.key,Gs.empty()):(a.set(t.key,o.mutation.getFieldMask()),ql(o.mutation,t,o.mutation.getFieldMask(),Ss.now()))})),this.recalculateAndSaveOverlays(e,i).next((e=>(e.forEach(((e,t)=>a.set(e,t))),t.forEach(((e,t)=>o.set(e,new Tu(t,a.get(e)??null)))),o)))}recalculateAndSaveOverlays(e,t){let n=wl(),r=new Bs(((e,t)=>e-t)),i=El();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((e=>{for(let i of e)i.keys().forEach((e=>{let a=t.get(e);if(a===null)return;let o=n.get(e)||Gs.empty();o=i.applyToLocalView(a,o),n.set(e,o);let s=(r.get(i.batchId)||El()).add(e);r=r.insert(i.batchId,s)}))})).next((()=>{let a=[],o=r.getReverseIterator();for(;o.hasNext();){let r=o.getNext(),s=r.key,c=r.value,l=Cl();c.forEach((e=>{if(!i.has(e)){let r=Gl(t.get(e),n.get(e));r!==null&&l.set(e,r),i=i.add(e)}})),a.push(this.documentOverlayCache.saveOverlays(e,s,l))}return K.waitFor(a)})).next((()=>n))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((t=>this.recalculateAndSaveOverlays(e,t)))}getDocumentsMatchingQuery(e,t,n,r){return il(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):al(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n,r):this.getDocumentsMatchingCollectionQuery(e,t,n,r)}getNextDocuments(e,t,n,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,r).next((i=>{let a=r-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,r-i.size):K.resolve(Sl()),o=ws,s=i;return a.next((t=>K.forEach(t,((t,n)=>(o<n.largestBatchId&&(o=n.largestBatchId),i.get(t)?K.resolve():this.remoteDocumentCache.getEntry(e,t).next((e=>{s=s.insert(t,e)}))))).next((()=>this.populateOverlays(e,t,i))).next((()=>this.computeViews(e,s,t,El()))).next((e=>({batchId:o,changes:xl(e)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new hs(t)).next((e=>{let t=bl();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t}))}getDocumentsMatchingCollectionGroupQuery(e,t,n,r){let i=t.collectionGroup,a=bl();return this.indexManager.getCollectionParents(e,i).next((o=>K.forEach(o,(o=>{let s=function(e,t){return new el(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,o.child(i));return this.getDocumentsMatchingCollectionQuery(e,s,n,r).next((e=>{e.forEach(((e,t)=>{a=a.insert(e,t)}))}))})).next((()=>a))))}getDocumentsMatchingCollectionQuery(e,t,n,r){let i;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId).next((a=>(i=a,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,n,i,r)))).next((e=>{i.forEach(((t,n)=>{let r=n.getKey();e.get(r)===null&&(e=e.insert(r,Oc.newInvalidDocument(r)))}));let n=bl();return e.forEach(((e,r)=>{let a=i.get(e);a!==void 0&&ql(a.mutation,r,Gs.empty(),Ss.now()),pl(t,r)&&(n=n.insert(e,r))})),n}))}},Du=class{constructor(e){this.serializer=e,this.Nr=new Map,this.Br=new Map}getBundleMetadata(e,t){return K.resolve(this.Nr.get(t))}saveBundleMetadata(e,t){return this.Nr.set(t.id,function(e){return{id:e.id,version:e.version,createTime:ou(e.createTime)}}(t)),K.resolve()}getNamedQuery(e,t){return K.resolve(this.Br.get(t))}saveNamedQuery(e,t){return this.Br.set(t.name,function(e){return{name:e.name,query:gu(e.bundledQuery),readTime:ou(e.readTime)}}(t)),K.resolve()}},Ou=class{constructor(){this.overlays=new Bs(hs.comparator),this.Lr=new Map}getOverlay(e,t){return K.resolve(this.overlays.get(t))}getOverlays(e,t){let n=Sl();return K.forEach(t,(t=>this.getOverlay(e,t).next((e=>{e!==null&&n.set(t,e)})))).next((()=>n))}saveOverlays(e,t,n){return n.forEach(((n,r)=>{this.bt(e,t,r)})),K.resolve()}removeOverlaysForBatchId(e,t,n){let r=this.Lr.get(n);return r!==void 0&&(r.forEach((e=>this.overlays=this.overlays.remove(e))),this.Lr.delete(n)),K.resolve()}getOverlaysForCollection(e,t,n){let r=Sl(),i=t.length+1,a=new hs(t.child(``)),o=this.overlays.getIteratorFrom(a);for(;o.hasNext();){let e=o.getNext().value,a=e.getKey();if(!t.isPrefixOf(a.path))break;a.path.length===i&&e.largestBatchId>n&&r.set(e.getKey(),e)}return K.resolve(r)}getOverlaysForCollectionGroup(e,t,n,r){let i=new Bs(((e,t)=>e-t)),a=this.overlays.getIterator();for(;a.hasNext();){let e=a.getNext().value;if(e.getKey().getCollectionGroup()===t&&e.largestBatchId>n){let t=i.get(e.largestBatchId);t===null&&(t=Sl(),i=i.insert(e.largestBatchId,t)),t.set(e.getKey(),e)}}let o=Sl(),s=i.getIterator();for(;s.hasNext()&&(s.getNext().value.forEach(((e,t)=>o.set(e,t))),!(o.size()>=r)););return K.resolve(o)}bt(e,t,n){let r=this.overlays.get(n.key);if(r!==null){let e=this.Lr.get(r.largestBatchId).delete(n.key);this.Lr.set(r.largestBatchId,e)}this.overlays=this.overlays.insert(n.key,new nu(t,n));let i=this.Lr.get(t);i===void 0&&(i=El(),this.Lr.set(t,i)),this.Lr.set(t,i.add(n.key))}},ku=class{constructor(){this.sessionToken=qs.EMPTY_BYTE_STRING}getSessionToken(e){return K.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,K.resolve()}},Au=class{constructor(){this.kr=new Us(ju.Kr),this.qr=new Us(ju.Ur)}isEmpty(){return this.kr.isEmpty()}addReference(e,t){let n=new ju(e,t);this.kr=this.kr.add(n),this.qr=this.qr.add(n)}$r(e,t){e.forEach((e=>this.addReference(e,t)))}removeReference(e,t){this.Wr(new ju(e,t))}Qr(e,t){e.forEach((e=>this.removeReference(e,t)))}Gr(e){let t=new hs(new fs([])),n=new ju(t,e),r=new ju(t,e+1),i=[];return this.qr.forEachInRange([n,r],(e=>{this.Wr(e),i.push(e.key)})),i}zr(){this.kr.forEach((e=>this.Wr(e)))}Wr(e){this.kr=this.kr.delete(e),this.qr=this.qr.delete(e)}jr(e){let t=new hs(new fs([])),n=new ju(t,e),r=new ju(t,e+1),i=El();return this.qr.forEachInRange([n,r],(e=>{i=i.add(e.key)})),i}containsKey(e){let t=new ju(e,0),n=this.kr.firstAfterOrEqual(t);return n!==null&&e.isEqual(n.key)}},ju=class{constructor(e,t){this.key=e,this.Hr=t}static Kr(e,t){return hs.comparator(e.key,t.key)||is(e.Hr,t.Hr)}static Ur(e,t){return is(e.Hr,t.Hr)||hs.comparator(e.key,t.key)}},Mu=class{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Yn=1,this.Jr=new Us(ju.Kr)}checkEmpty(e){return K.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,n,r){let i=this.Yn;this.Yn++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let a=new tu(i,t,n,r);this.mutationQueue.push(a);for(let t of r)this.Jr=this.Jr.add(new ju(t.key,i)),this.indexManager.addToCollectionParentIndex(e,t.key.path.popLast());return K.resolve(a)}lookupMutationBatch(e,t){return K.resolve(this.Zr(t))}getNextMutationBatchAfterBatchId(e,t){let n=t+1,r=this.Xr(n),i=r<0?0:r;return K.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return K.resolve(this.mutationQueue.length===0?Ps:this.Yn-1)}getAllMutationBatches(e){return K.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){let n=new ju(t,0),r=new ju(t,1/0),i=[];return this.Jr.forEachInRange([n,r],(e=>{let t=this.Zr(e.Hr);i.push(t)})),K.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new Us(is);return t.forEach((e=>{let t=new ju(e,0),r=new ju(e,1/0);this.Jr.forEachInRange([t,r],(e=>{n=n.add(e.Hr)}))})),K.resolve(this.Yr(n))}getAllMutationBatchesAffectingQuery(e,t){let n=t.path,r=n.length+1,i=n;hs.isDocumentKey(i)||(i=i.child(``));let a=new ju(new hs(i),0),o=new Us(is);return this.Jr.forEachWhile((e=>{let t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(o=o.add(e.Hr)),!0)}),a),K.resolve(this.Yr(o))}Yr(e){let t=[];return e.forEach((e=>{let n=this.Zr(e);n!==null&&t.push(n)})),t}removeMutationBatch(e,t){Ko(this.ei(t.batchId,`removed`)===0,55003),this.mutationQueue.shift();let n=this.Jr;return K.forEach(t.mutations,(r=>{let i=new ju(r.key,t.batchId);return n=n.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)})).next((()=>{this.Jr=n}))}nr(e){}containsKey(e,t){let n=new ju(t,0),r=this.Jr.firstAfterOrEqual(n);return K.resolve(t.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,K.resolve()}ei(e,t){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){let t=this.Xr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}},Nu=class{constructor(e){this.ti=e,this.docs=function(){return new Bs(hs.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){let n=t.key,r=this.docs.get(n),i=r?r.size:0,a=this.ti(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:a}),this.size+=a-i,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){let t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){let n=this.docs.get(t);return K.resolve(n?n.document.mutableCopy():Oc.newInvalidDocument(t))}getEntries(e,t){let n=vl();return t.forEach((e=>{let t=this.docs.get(e);n=n.insert(e,t?t.document.mutableCopy():Oc.newInvalidDocument(e))})),K.resolve(n)}getDocumentsMatchingQuery(e,t,n,r){let i=vl(),a=t.path,o=new hs(a.child(`__id-9223372036854775808__`)),s=this.docs.getIteratorFrom(o);for(;s.hasNext();){let{key:e,value:{document:o}}=s.getNext();if(!a.isPrefixOf(e.path))break;e.path.length>a.length+1||ks(Ds(o),n)<=0||(r.has(o.key)||pl(t,o))&&(i=i.insert(o.key,o.mutableCopy()))}return K.resolve(i)}getAllFromCollectionGroup(e,t,n,r){Wo(9500)}ni(e,t){return K.forEach(this.docs,(e=>t(e)))}newChangeBuffer(e){return new Pu(this)}getSize(e){return K.resolve(this.size)}},Pu=class extends wu{constructor(e){super(),this.Mr=e}applyChanges(e){let t=[];return this.changes.forEach(((n,r)=>{r.isValidDocument()?t.push(this.Mr.addEntry(e,r)):this.Mr.removeEntry(n)})),K.waitFor(t)}getFromCache(e,t){return this.Mr.getEntry(e,t)}getAllFromCache(e,t){return this.Mr.getEntries(e,t)}},Fu=class{constructor(e){this.persistence=e,this.ri=new gl((e=>Qc(e)),$c),this.lastRemoteSnapshotVersion=Cs.min(),this.highestTargetId=0,this.ii=0,this.si=new Au,this.targetCount=0,this.oi=Su._r()}forEachTarget(e,t){return this.ri.forEach(((e,n)=>t(n))),K.resolve()}getLastRemoteSnapshotVersion(e){return K.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return K.resolve(this.ii)}allocateTargetId(e){return this.highestTargetId=this.oi.next(),K.resolve(this.highestTargetId)}setTargetsMetadata(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.ii&&(this.ii=t),K.resolve()}lr(e){this.ri.set(e.target,e);let t=e.targetId;t>this.highestTargetId&&(this.oi=new Su(t),this.highestTargetId=t),e.sequenceNumber>this.ii&&(this.ii=e.sequenceNumber)}addTargetData(e,t){return this.lr(t),this.targetCount+=1,K.resolve()}updateTargetData(e,t){return this.lr(t),K.resolve()}removeTargetData(e,t){return this.ri.delete(t.target),this.si.Gr(t.targetId),--this.targetCount,K.resolve()}removeTargets(e,t,n){let r=0,i=[];return this.ri.forEach(((a,o)=>{o.sequenceNumber<=t&&n.get(o.targetId)===null&&(this.ri.delete(a),i.push(this.removeMatchingKeysForTargetId(e,o.targetId)),r++)})),K.waitFor(i).next((()=>r))}getTargetCount(e){return K.resolve(this.targetCount)}getTargetData(e,t){let n=this.ri.get(t)||null;return K.resolve(n)}addMatchingKeys(e,t,n){return this.si.$r(t,n),K.resolve()}removeMatchingKeys(e,t,n){this.si.Qr(t,n);let r=this.persistence.referenceDelegate,i=[];return r&&t.forEach((t=>{i.push(r.markPotentiallyOrphaned(e,t))})),K.waitFor(i)}removeMatchingKeysForTargetId(e,t){return this.si.Gr(t),K.resolve()}getMatchingKeysForTargetId(e,t){let n=this.si.jr(t);return K.resolve(n)}containsKey(e,t){return K.resolve(this.si.containsKey(t))}},Iu=class{constructor(e,t){this._i={},this.overlays={},this.ai=new Ns(0),this.ui=!1,this.ui=!0,this.ci=new ku,this.referenceDelegate=e(this),this.li=new Fu(this),this.indexManager=new vu,this.remoteDocumentCache=function(e){return new Nu(e)}((e=>this.referenceDelegate.hi(e))),this.serializer=new hu(t),this.Pi=new Du(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ui=!1,Promise.resolve()}get started(){return this.ui}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new Ou,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let n=this._i[e.toKey()];return n||(n=new Mu(t,this.referenceDelegate),this._i[e.toKey()]=n),n}getGlobalsCache(){return this.ci}getTargetCache(){return this.li}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Pi}runTransaction(e,t,n){U(`MemoryPersistence`,`Starting transaction:`,e);let r=new Lu(this.ai.next());return this.referenceDelegate.Ti(),n(r).next((e=>this.referenceDelegate.Ii(r).next((()=>e)))).toPromise().then((e=>(r.raiseOnCommittedEvent(),e)))}Ei(e,t){return K.or(Object.values(this._i).map((n=>()=>n.containsKey(e,t))))}},Lu=class extends As{constructor(e){super(),this.currentSequenceNumber=e}},Ru=class e{constructor(e){this.persistence=e,this.Ri=new Au,this.Ai=null}static Vi(t){return new e(t)}get di(){if(this.Ai)return this.Ai;throw Wo(60996)}addReference(e,t,n){return this.Ri.addReference(n,t),this.di.delete(n.toString()),K.resolve()}removeReference(e,t,n){return this.Ri.removeReference(n,t),this.di.add(n.toString()),K.resolve()}markPotentiallyOrphaned(e,t){return this.di.add(t.toString()),K.resolve()}removeTarget(e,t){this.Ri.Gr(t.targetId).forEach((e=>this.di.add(e.toString())));let n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,t.targetId).next((e=>{e.forEach((e=>this.di.add(e.toString())))})).next((()=>n.removeTargetData(e,t)))}Ti(){this.Ai=new Set}Ii(e){let t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return K.forEach(this.di,(n=>{let r=hs.fromPath(n);return this.mi(e,r).next((e=>{e||t.removeEntry(r,Cs.min())}))})).next((()=>(this.Ai=null,t.apply(e))))}updateLimboDocument(e,t){return this.mi(e,t).next((e=>{e?this.di.delete(t.toString()):this.di.add(t.toString())}))}hi(e){return 0}mi(e,t){return K.or([()=>K.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ei(e,t)])}},zu=class e{constructor(e,t,n,r){this.targetId=e,this.fromCache=t,this.Ts=n,this.Is=r}static Es(t,n){let r=El(),i=El();for(let e of n.docChanges)switch(e.type){case 0:r=r.add(e.doc.key);break;case 1:i=i.add(e.doc.key)}return new e(t,n.fromCache,r,i)}},Bu=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}},Vu=class{constructor(){this.Rs=!1,this.As=!1,this.Vs=100,this.ds=function(){return nt()?8:js(Ye())>0?6:4}()}initialize(e,t){this.fs=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,n,r){let i={result:null};return this.gs(e,t).next((e=>{i.result=e})).next((()=>{if(!i.result)return this.ps(e,t,r,n).next((e=>{i.result=e}))})).next((()=>{if(i.result)return;let n=new Bu;return this.ys(e,t,n).next((r=>{if(i.result=r,this.As)return this.ws(e,t,n,r.size)}))})).next((()=>i.result))}ws(e,t,n,r){return n.documentReadCount<this.Vs?(Bo()<=I.DEBUG&&U(`QueryEngine`,`SDK will not create cache indexes for query:`,fl(t),`since it only creates cache indexes for collection contains`,`more than or equal to`,this.Vs,`documents`),K.resolve()):(Bo()<=I.DEBUG&&U(`QueryEngine`,`Query:`,fl(t),`scans`,n.documentReadCount,`local documents and returns`,r,`documents as results.`),n.documentReadCount>this.ds*r?(Bo()<=I.DEBUG&&U(`QueryEngine`,`The SDK decides to create cache indexes for query:`,fl(t),`as using cache indexes may help improve performance.`),this.indexManager.createTargetIndexes(e,sl(t))):K.resolve())}gs(e,t){if(rl(t))return K.resolve(null);let n=sl(t);return this.indexManager.getIndexType(e,n).next((r=>r===0?null:(t.limit!==null&&r===1&&(t=ll(t,null,`F`),n=sl(t)),this.indexManager.getDocumentsMatchingTarget(e,n).next((r=>{let i=El(...r);return this.fs.getDocuments(e,i).next((r=>this.indexManager.getMinOffset(e,n).next((n=>{let a=this.bs(t,r);return this.Ss(t,a,i,n.readTime)?this.gs(e,ll(t,null,`F`)):this.Ds(e,a,t,n)}))))})))))}ps(e,t,n,r){return rl(t)||r.isEqual(Cs.min())?K.resolve(null):this.fs.getDocuments(e,n).next((i=>{let a=this.bs(t,i);return this.Ss(t,a,n,r)?K.resolve(null):(Bo()<=I.DEBUG&&U(`QueryEngine`,`Re-using previous result from %s to execute query: %s`,r.toString(),fl(t)),this.Ds(e,a,t,Es(r,ws)).next((e=>e)))}))}bs(e,t){let n=new Us(ml(e));return t.forEach(((t,r)=>{pl(e,r)&&(n=n.add(r))})),n}Ss(e,t,n,r){if(e.limit===null)return!1;if(n.size!==t.size)return!0;let i=e.limitType===`F`?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}ys(e,t,n){return Bo()<=I.DEBUG&&U(`QueryEngine`,`Using full collection scan to execute query:`,fl(t)),this.fs.getDocumentsMatchingQuery(e,t,Os.min(),n)}Ds(e,t,n,r){return this.fs.getDocumentsMatchingQuery(e,n,r).next((e=>(t.forEach((t=>{e=e.insert(t.key,t)})),e)))}},Hu=`LocalStore`,Uu=class{constructor(e,t,n,r){this.persistence=e,this.Cs=t,this.serializer=r,this.vs=new Bs(is),this.Fs=new gl((e=>Qc(e)),$c),this.Ms=new Map,this.xs=e.getRemoteDocumentCache(),this.li=e.getTargetCache(),this.Pi=e.getBundleCache(),this.Os(n)}Os(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Eu(this.xs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.xs.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction(`Collect garbage`,`readwrite-primary`,(t=>e.collect(t,this.vs)))}};function Wu(e,t,n,r){return new Uu(e,t,n,r)}async function Gu(e,t){let n=qo(e);return await n.persistence.runTransaction(`Handle user change`,`readonly`,(e=>{let r;return n.mutationQueue.getAllMutationBatches(e).next((i=>(r=i,n.Os(t),n.mutationQueue.getAllMutationBatches(e)))).next((t=>{let i=[],a=[],o=El();for(let e of r){i.push(e.batchId);for(let t of e.mutations)o=o.add(t.key)}for(let e of t){a.push(e.batchId);for(let t of e.mutations)o=o.add(t.key)}return n.localDocuments.getDocuments(e,o).next((e=>({Ns:e,removedBatchIds:i,addedBatchIds:a})))}))}))}var Ku=class{constructor(){this.activeTargetIds=Ol()}Qs(e){this.activeTargetIds=this.activeTargetIds.add(e)}Gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}},qu=class{constructor(){this.vo=new Ku,this.Fo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,n){}addLocalQueryTarget(e,t=!0){return t&&this.vo.Qs(e),this.Fo[e]||`not-current`}updateQueryState(e,t,n){this.Fo[e]=t}removeLocalQueryTarget(e){this.vo.Gs(e)}isLocalQueryTarget(e){return this.vo.activeTargetIds.has(e)}clearQueryState(e){delete this.Fo[e]}getAllActiveQueryTargets(){return this.vo.activeTargetIds}isActiveQueryTarget(e){return this.vo.activeTargetIds.has(e)}start(){return this.vo=new Ku,Promise.resolve()}handleUserChange(e,t,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}},Ju=class{Mo(e){}shutdown(){}},Yu=`ConnectivityMonitor`,Xu=class{constructor(){this.xo=()=>this.Oo(),this.No=()=>this.Bo(),this.Lo=[],this.ko()}Mo(e){this.Lo.push(e)}shutdown(){window.removeEventListener(`online`,this.xo),window.removeEventListener(`offline`,this.No)}ko(){window.addEventListener(`online`,this.xo),window.addEventListener(`offline`,this.No)}Oo(){U(Yu,`Network connectivity changed: AVAILABLE`);for(let e of this.Lo)e(0)}Bo(){U(Yu,`Network connectivity changed: UNAVAILABLE`);for(let e of this.Lo)e(1)}static v(){return typeof window<`u`&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}},Zu=null;function Qu(){return Zu===null?Zu=function(){return 268435456+Math.round(2147483648*Math.random())}():Zu++,`0x`+Zu.toString(16)}var $u=`RestConnection`,ed={BatchGetDocuments:`batchGet`,Commit:`commit`,RunQuery:`runQuery`,RunAggregationQuery:`runAggregationQuery`,ExecutePipeline:`executePipeline`},td=class{get Ko(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;let t=e.ssl?`https`:`http`,n=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.qo=t+`://`+e.host,this.Uo=`projects/${n}/databases/${r}`,this.$o=this.databaseId.database===ac?`project_id=${n}`:`project_id=${n}&database_id=${r}`}Wo(e,t,n,r,i){let a=Qu(),o=this.Qo(e,t.toUriEncodedString());U($u,`Sending RPC '${e}' ${a}:`,o,n);let s={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.$o};this.Go(s,r,i);let{host:c}=new URL(o),l=Je(c);return this.zo(e,o,s,n,l).then((t=>(U($u,`Received RPC '${e}' ${a}: `,t),t)),(t=>{throw Ho($u,`RPC '${e}' ${a} failed with error: `,t,`url: `,o,`request:`,n),t}))}jo(e,t,n,r,i,a){return this.Wo(e,t,n,r,i)}Go(e,t,n){e[`X-Goog-Api-Client`]=function(){return`gl-js/ fire/`+Lo}(),e[`Content-Type`]=`text/plain`,this.databaseInfo.appId&&(e[`X-Firebase-GMPID`]=this.databaseInfo.appId),t&&t.headers.forEach(((t,n)=>e[n]=t)),n&&n.headers.forEach(((t,n)=>e[n]=t))}Qo(e,t){let n=ed[e],r=`${this.qo}/v1/${t}:${n}`;return this.databaseInfo.apiKey&&(r=`${r}?key=${encodeURIComponent(this.databaseInfo.apiKey)}`),r}terminate(){}},nd=class{constructor(e){this.Ho=e.Ho,this.Jo=e.Jo}Zo(e){this.Xo=e}Yo(e){this.e_=e}t_(e){this.n_=e}onMessage(e){this.r_=e}close(){this.Jo()}send(e){this.Ho(e)}i_(){this.Xo()}s_(){this.e_()}o_(e){this.n_(e)}__(e){this.r_(e)}},rd=`WebChannelConnection`,id=(e,t,n)=>{e.listen(t,(e=>{try{n(e)}catch(e){setTimeout((()=>{throw e}),0)}}))},ad=class e extends td{constructor(e){super(e),this.a_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}static u_(){e.c_||=(id(Po(),No.STAT_EVENT,(e=>{e.stat===Mo.PROXY?U(rd,`STAT_EVENT: detected buffering proxy`):e.stat===Mo.NOPROXY&&U(rd,`STAT_EVENT: detected no buffering proxy`)})),!0)}zo(e,t,n,r,i){let a=Qu();return new Promise(((i,o)=>{let s=new Oo;s.setWithCredentials(!0),s.listenOnce(Ao.COMPLETE,(()=>{try{switch(s.getLastErrorCode()){case jo.NO_ERROR:let t=s.getResponseJson();U(rd,`XHR for RPC '${e}' ${a} received:`,JSON.stringify(t)),i(t);break;case jo.TIMEOUT:U(rd,`RPC '${e}' ${a} timed out`),o(new G(W.DEADLINE_EXCEEDED,`Request time out`));break;case jo.HTTP_ERROR:let n=s.getStatus();if(U(rd,`RPC '${e}' ${a} failed with status:`,n,`response text:`,s.getResponseText()),n>0){let e=s.getResponseJson();Array.isArray(e)&&(e=e[0]);let t=e?.error;t&&t.status&&t.message?o(new G(function(e){let t=e.toLowerCase().replace(/_/g,`-`);return Object.values(W).indexOf(t)>=0?t:W.UNKNOWN}(t.status),t.message)):o(new G(W.UNKNOWN,`Server responded with status `+s.getStatus()))}else o(new G(W.UNAVAILABLE,`Connection failed.`));break;default:Wo(9055,{l_:e,streamId:a,h_:s.getLastErrorCode(),P_:s.getLastError()})}}finally{U(rd,`RPC '${e}' ${a} completed.`)}}));let c=JSON.stringify(r);U(rd,`RPC '${e}' ${a} sending request:`,r),s.send(t,`POST`,c,n,15)}))}T_(t,n,r){let i=Qu(),a=[this.qo,`/`,`google.firestore.v1.Firestore`,`/`,t,`/channel`],o=this.createWebChannelTransport(),s={httpSessionIdParam:`gsessionid`,initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(s.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(s.useFetchStreams=!0),this.Go(s.initMessageHeaders,n,r),s.encodeInitMessageHeaders=!0;let l=a.join(``);U(rd,`Creating RPC '${t}' stream ${i}: ${l}`,s);let u=o.createWebChannel(l,s);this.I_(u);let d=!1,f=!1,p=new nd({Ho:e=>{f?U(rd,`Not sending because RPC '${t}' stream ${i} is closed:`,e):(d||=(U(rd,`Opening RPC '${t}' stream ${i} transport.`),u.open(),!0),U(rd,`RPC '${t}' stream ${i} sending:`,e),u.send(e))},Jo:()=>u.close()});return id(u,ko.EventType.OPEN,(()=>{f||(U(rd,`RPC '${t}' stream ${i} transport opened.`),p.i_())})),id(u,ko.EventType.CLOSE,(()=>{f||(f=!0,U(rd,`RPC '${t}' stream ${i} transport closed`),p.o_(),this.E_(u))})),id(u,ko.EventType.ERROR,(e=>{f||(f=!0,Ho(rd,`RPC '${t}' stream ${i} transport errored. Name:`,e.name,`Message:`,e.message),p.o_(new G(W.UNAVAILABLE,`The operation could not be completed`)))})),id(u,ko.EventType.MESSAGE,(e=>{if(!f){let n=e.data[0];Ko(!!n,16349);let r=n,a=r?.error||r[0]?.error;if(a){U(rd,`RPC '${t}' stream ${i} received error:`,a);let e=a.status,n=function(e){let t=ru[e];if(t!==void 0)return iu(t)}(e),r=a.message;n===void 0&&(n=W.INTERNAL,r=`Unknown error status: `+e+` with message `+a.message),f=!0,p.o_(new G(n,r)),u.close()}else U(rd,`RPC '${t}' stream ${i} received:`,n),p.__(n)}})),e.u_(),setTimeout((()=>{p.s_()}),0),p}terminate(){this.a_.forEach((e=>e.close())),this.a_=[]}I_(e){this.a_.push(e)}E_(e){this.a_=this.a_.filter((t=>t===e))}Go(e,t,n){super.Go(e,t,n),this.databaseInfo.apiKey&&(e[`x-goog-api-key`]=this.databaseInfo.apiKey)}createWebChannelTransport(){return Fo()}};function od(e){return new ad(e)}function sd(){return typeof document<`u`?document:null}function cd(e){return new au(e,!0)}ad.c_=!1;var ld=class{constructor(e,t,n=1e3,r=1.5,i=6e4){this.Ci=e,this.timerId=t,this.R_=n,this.A_=r,this.V_=i,this.d_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.d_=0}g_(){this.d_=this.V_}p_(e){this.cancel();let t=Math.floor(this.d_+this.y_()),n=Math.max(0,Date.now()-this.f_),r=Math.max(0,t-n);r>0&&U(`ExponentialBackoff`,`Backing off for ${r} ms (base delay: ${this.d_} ms, delay with jitter: ${t} ms, last attempt: ${n} ms ago)`),this.m_=this.Ci.enqueueAfterDelay(this.timerId,r,(()=>(this.f_=Date.now(),e()))),this.d_*=this.A_,this.d_<this.R_&&(this.d_=this.R_),this.d_>this.V_&&(this.d_=this.V_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.d_}},ud=class{},dd=class extends ud{constructor(e,t,n,r){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=n,this.serializer=r,this.ia=!1}sa(){if(this.ia)throw new G(W.FAILED_PRECONDITION,`The client has already been terminated.`)}Wo(e,t,n,r){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([i,a])=>this.connection.Wo(e,su(t,n),r,i,a))).catch((e=>{throw e.name===`FirebaseError`?(e.code===W.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new G(W.UNKNOWN,e.toString())}))}jo(e,t,n,r,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([a,o])=>this.connection.jo(e,su(t,n),r,a,o,i))).catch((e=>{throw e.name===`FirebaseError`?(e.code===W.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new G(W.UNKNOWN,e.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}};function fd(e,t,n,r){return new dd(e,t,n,r)}var pd=class{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state=`Unknown`,this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca(`Unknown`),this._a=this.asyncQueue.enqueueAfterDelay(`online_state_timeout`,1e4,(()=>(this._a=null,this.la(`Backend didn't respond within 10 seconds.`),this.ca(`Offline`),Promise.resolve()))))}ha(e){this.state===`Online`?this.ca(`Unknown`):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca(`Offline`)))}set(e){this.Pa(),this.oa=0,e===`Online`&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){let t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Vo(t),this.aa=!1):U(`OnlineStateTracker`,t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}},md=`RemoteStore`,hd=class{constructor(e,t,n,r,i){this.localStore=e,this.datastore=t,this.asyncQueue=n,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.Ra=[],this.Aa=i,this.Aa.Mo((e=>{n.enqueueAndForget((async()=>{vd(this)&&(U(md,`Restarting streams for network reachability change.`),await async function(e){let t=qo(e);t.Ea.add(4),await _d(t),t.Va.set(`Unknown`),t.Ea.delete(4),await gd(t)}(this))}))})),this.Va=new pd(n,r)}};async function gd(e){if(vd(e))for(let t of e.Ra)await t(!0)}async function _d(e){for(let t of e.Ra)await t(!1)}function vd(e){return qo(e).Ea.size===0}async function yd(e,t){let n=qo(e);t?(n.Ea.delete(2),await gd(n)):t||(n.Ea.add(2),await _d(n),n.Va.set(`Unknown`))}var bd=class e{constructor(e,t,n,r,i){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=n,this.op=r,this.removalCallback=i,this.deferred=new Jo,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((e=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(t,n,r,i,a){let o=new e(t,n,Date.now()+r,i,a);return o.start(r),o}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new G(W.CANCELLED,`Operation cancelled`+(e?`: `+e:``))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle===null?Promise.resolve():(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e))))))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}},Z=class{constructor(){this.queries=xd(),this.onlineState=`Unknown`,this.Ca=new Set}terminate(){(function(e,t){let n=qo(e),r=n.queries;n.queries=xd(),r.forEach(((e,n)=>{for(let e of n.ba)e.onError(t)}))})(this,new G(W.ABORTED,`Firestore shutting down`))}};function xd(){return new gl((e=>dl(e)),ul)}function Sd(e){e.Ca.forEach((e=>{e.next()}))}var Cd,wd;(wd=Cd||={}).Ma=`default`,wd.Cache=`cache`;var Td=`SyncEngine`,Ed=class{constructor(e,t,n,r,i,a){this.localStore=e,this.remoteStore=t,this.eventManager=n,this.sharedClientState=r,this.currentUser=i,this.maxConcurrentLimboResolutions=a,this.Pu={},this.Tu=new gl((e=>dl(e)),ul),this.Iu=new Map,this.Eu=new Set,this.Ru=new Bs(hs.comparator),this.Au=new Map,this.Vu=new Au,this.du={},this.mu=new Map,this.fu=Su.ar(),this.onlineState=`Unknown`,this.gu=void 0}get isPrimaryClient(){return!0===this.gu}};function Dd(e,t,n){let r=qo(e);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){let e=[];r.Tu.forEach(((n,r)=>{let i=r.view.va(t);i.snapshot&&e.push(i.snapshot)})),function(e,t){let n=qo(e);n.onlineState=t;let r=!1;n.queries.forEach(((e,n)=>{for(let e of n.ba)e.va(t)&&(r=!0)})),r&&Sd(n)}(r.eventManager,t),e.length&&r.Pu.J_(e),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}async function Od(e,t,n){let r=qo(e),i=[],a=[],o=[];r.Tu.isEmpty()||(r.Tu.forEach(((e,s)=>{o.push(r.pu(s,t,n).then((e=>{if((e||n)&&r.isPrimaryClient){let t=e?!e.fromCache:n?.targetChanges.get(s.targetId)?.current;r.sharedClientState.updateQueryState(s.targetId,t?`current`:`not-current`)}if(e){i.push(e);let t=zu.Es(s.targetId,e);a.push(t)}})))})),await Promise.all(o),r.Pu.J_(i),await async function(e,t){let n=qo(e);try{await n.persistence.runTransaction(`notifyLocalViewChanges`,`readwrite`,(e=>K.forEach(t,(t=>K.forEach(t.Ts,(r=>n.persistence.referenceDelegate.addReference(e,t.targetId,r))).next((()=>K.forEach(t.Is,(r=>n.persistence.referenceDelegate.removeReference(e,t.targetId,r)))))))))}catch(e){if(!Ms(e))throw e;U(Hu,`Failed to update sequence numbers: `+e)}for(let e of t){let t=e.targetId;if(!e.fromCache){let e=n.vs.get(t),r=e.snapshotVersion,i=e.withLastLimboFreeSnapshotVersion(r);n.vs=n.vs.insert(t,i)}}}(r.localStore,a))}async function kd(e,t){let n=qo(e);if(!n.currentUser.isEqual(t)){U(Td,`User change. New user:`,t.toKey());let e=await Gu(n.localStore,t);n.currentUser=t,function(e,t){e.mu.forEach((e=>{e.forEach((e=>{e.reject(new G(W.CANCELLED,t))}))})),e.mu.clear()}(n,`'waitForPendingWrites' promise is rejected due to a user change.`),n.sharedClientState.handleUserChange(t,e.removedBatchIds,e.addedBatchIds),await Od(n,e.Ns)}}var Ad=class{constructor(){this.kind=`memory`,this.synchronizeTabs=!1}async initialize(e){this.serializer=cd(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return Wu(this.persistence,new Vu,e.initialUser,this.serializer)}Cu(e){return new Iu(Ru.Vi,this.serializer)}Du(e){return new qu}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}};Ad.provider={build:()=>new Ad};var jd=class{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=e=>Dd(this.syncEngine,e,1),this.remoteStore.remoteSyncer.handleCredentialChange=kd.bind(null,this.syncEngine),await yd(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new Z}()}createDatastore(e){let t=cd(e.databaseInfo.databaseId),n=od(e.databaseInfo);return fd(e.authCredentials,e.appCheckCredentials,n,t)}createRemoteStore(e){return function(e,t,n,r,i){return new hd(e,t,n,r,i)}(this.localStore,this.datastore,e.asyncQueue,(e=>Dd(this.syncEngine,e,0)),function(){return Xu.v()?new Xu:new Ju}())}createSyncEngine(e,t){return function(e,t,n,r,i,a,o){let s=new Ed(e,t,n,r,i,a);return o&&(s.gu=!0),s}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){await async function(e){let t=qo(e);U(md,`RemoteStore shutting down.`),t.Ea.add(5),await _d(t),t.Aa.shutdown(),t.Va.set(`Unknown`)}(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}};jd.provider={build:()=>new jd};function Md(e){let t={};return e.timeoutSeconds!==void 0&&(t.timeoutSeconds=e.timeoutSeconds),t}var Nd=`ComponentProvider`,Pd=new Map,Fd=`firestore.googleapis.com`,Id=!0,Ld=class{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new G(W.INVALID_ARGUMENT,`Can't provide ssl option if host option is not set`);this.host=Fd,this.ssl=Id}else this.host=e.host,this.ssl=e.ssl??Id;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=bu;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<Cu)throw new G(W.INVALID_ARGUMENT,`cacheSizeBytes must be at least 1048576`);this.cacheSizeBytes=e.cacheSizeBytes}gs(`experimentalForceLongPolling`,e.experimentalForceLongPolling,`experimentalAutoDetectLongPolling`,e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Md(e.experimentalLongPollingOptions??{}),function(e){if(e.timeoutSeconds!==void 0){if(isNaN(e.timeoutSeconds))throw new G(W.INVALID_ARGUMENT,`invalid long polling timeout: ${e.timeoutSeconds} (must not be NaN)`);if(e.timeoutSeconds<5)throw new G(W.INVALID_ARGUMENT,`invalid long polling timeout: ${e.timeoutSeconds} (minimum allowed value is 5)`);if(e.timeoutSeconds>30)throw new G(W.INVALID_ARGUMENT,`invalid long polling timeout: ${e.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(e,t){return e.timeoutSeconds===t.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},Rd=class{constructor(e,t,n,r){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=n,this._app=r,this.type=`firestore-lite`,this._persistenceKey=`(lite)`,this._settings=new Ld({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask=`notTerminated`}get app(){if(!this._app)throw new G(W.FAILED_PRECONDITION,`Firestore was not initialized using the Firebase SDK. 'app' is not available`);return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==`notTerminated`}_setSettings(e){if(this._settingsFrozen)throw new G(W.FAILED_PRECONDITION,`Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.`);this._settings=new Ld(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(e){if(!e)return new Xo;switch(e.type){case`firstParty`:return new $o(e.sessionIndex||`0`,e.iamToken||null,e.authTokenFactory||null);case`provider`:return e.client;default:throw new G(W.INVALID_ARGUMENT,`makeAuthCredentialsProvider failed due to invalid credential type`)}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask===`notTerminated`&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask===`notTerminated`?await this._terminate():this._terminateTask=`notTerminated`}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){let t=Pd.get(e);t&&(U(Nd,`Removing Datastore`),Pd.delete(e),t.terminate())}(this),Promise.resolve()}},zd=class e{constructor(e,t,n){this.converter=t,this._query=n,this.type=`query`,this.firestore=e}withConverter(t){return new e(this.firestore,t,this._query)}},Bd=class e{constructor(e,t,n){this.converter=t,this._key=n,this.type=`document`,this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Vd(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new e(this.firestore,t,this._key)}toJSON(){return{type:e._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(t,n,r){if(ys(n,e._jsonSchema))return new e(t,r||null,new hs(fs.fromString(n.referencePath)))}};Bd._jsonSchemaVersion=`firestore/documentReference/1.0`,Bd._jsonSchema={type:vs(`string`,Bd._jsonSchemaVersion),referencePath:vs(`string`)};var Vd=class e extends zd{constructor(e,t,n){super(e,t,nl(n)),this._path=n,this.type=`collection`}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new Bd(this.firestore,null,new hs(e))}withConverter(t){return new e(this.firestore,t,this._path)}},Hd=`AsyncQueue`,Ud=class{constructor(e=Promise.resolve()){this.Yu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new ld(this,`async_queue_retry`),this._c=()=>{let e=sd();e&&U(Hd,`Visibility state changed to `+e.visibilityState),this.M_.w_()},this.ac=e;let t=sd();t&&typeof t.addEventListener==`function`&&t.addEventListener(`visibilitychange`,this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;let t=sd();t&&typeof t.removeEventListener==`function`&&t.removeEventListener(`visibilitychange`,this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));let t=new Jo;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Yu.push(e),this.lc())))}async lc(){if(this.Yu.length!==0){try{await this.Yu[0](),this.Yu.shift(),this.M_.reset()}catch(e){if(!Ms(e))throw e;U(Hd,`Operation failed with retryable error: `+e)}this.Yu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){let t=this.ac.then((()=>(this.rc=!0,e().catch((e=>{throw this.nc=e,this.rc=!1,Vo(`INTERNAL UNHANDLED ERROR: `,Wd(e)),e})).then((e=>(this.rc=!1,e))))));return this.ac=t,t}enqueueAfterDelay(e,t,n){this.uc(),this.oc.indexOf(e)>-1&&(t=0);let r=bd.createAndSchedule(this,e,t,n,(e=>this.hc(e)));return this.tc.push(r),r}uc(){this.nc&&Wo(47125,{Pc:Wd(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(let t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((e,t)=>e.targetTimeMs-t.targetTimeMs));for(let t of this.tc)if(t.skipDelay(),e!==`all`&&t.timerId===e)break;return this.Tc()}))}Rc(e){this.oc.push(e)}hc(e){let t=this.tc.indexOf(e);this.tc.splice(t,1)}};function Wd(e){let t=e.message||``;return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+`
`+e.stack),t}var Gd=class extends Rd{constructor(e,t,n,r){super(e,t,n,r),this.type=`firestore`,this._queue=new Ud,this._persistenceKey=r?.name||`[DEFAULT]`}async _terminate(){if(this._firestoreClient){let e=this._firestoreClient.terminate();this._queue=new Ud(e),this._firestoreClient=void 0,await e}}},Kd=class e{constructor(e){this._byteString=e}static fromBase64String(t){try{return new e(qs.fromBase64String(t))}catch(e){throw new G(W.INVALID_ARGUMENT,`Failed to construct data from Base64 string: `+e)}}static fromUint8Array(t){return new e(qs.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return`Bytes(base64: `+this.toBase64()+`)`}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:e._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(t){if(ys(t,e._jsonSchema))return e.fromBase64String(t.bytes)}};Kd._jsonSchemaVersion=`firestore/bytes/1.0`,Kd._jsonSchema={type:vs(`string`,Kd._jsonSchemaVersion),bytes:vs(`string`)};var qd=class{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new G(W.INVALID_ARGUMENT,`Invalid field name at argument $(i + 1). Field names must not be empty.`);this._internalPath=new ms(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}},Jd=class e{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new G(W.INVALID_ARGUMENT,`Latitude must be a number between -90 and 90, but was: `+e);if(!isFinite(t)||t<-180||t>180)throw new G(W.INVALID_ARGUMENT,`Longitude must be a number between -180 and 180, but was: `+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return is(this._lat,e._lat)||is(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:e._jsonSchemaVersion}}static fromJSON(t){if(ys(t,e._jsonSchema))return new e(t.latitude,t.longitude)}};Jd._jsonSchemaVersion=`firestore/geoPoint/1.0`,Jd._jsonSchema={type:vs(`string`,Jd._jsonSchemaVersion),latitude:vs(`number`),longitude:vs(`number`)};var Yd=class e{constructor(e){this._values=(e||[]).map((e=>e))}toArray(){return this._values.map((e=>e))}isEqual(e){return function(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;++n)if(e[n]!==t[n])return!1;return!0}(this._values,e._values)}toJSON(){return{type:e._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(t){if(ys(t,e._jsonSchema)){if(Array.isArray(t.vectorValues)&&t.vectorValues.every((e=>typeof e==`number`)))return new e(t.vectorValues);throw new G(W.INVALID_ARGUMENT,`Expected 'vectorValues' field to be a number array`)}}};Yd._jsonSchemaVersion=`firestore/vectorValue/1.0`,Yd._jsonSchema={type:vs(`string`,Yd._jsonSchemaVersion),vectorValues:vs(`object`)};function Xd(e,t,n){if((t=_t(t))instanceof qd)return t._internalPath;if(typeof t==`string`)return Qd(e,t);throw $d(`Field path arguments must be of type string or `,e,!1,void 0,n)}var Zd=RegExp(`[~\\*/\\[\\]]`);function Qd(e,t,n){if(t.search(Zd)>=0)throw $d(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,e,!1,void 0,n);try{return new qd(...t.split(`.`))._internalPath}catch{throw $d(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,e,!1,void 0,n)}}function $d(e,t,n,r,i){let a=r&&!r.isEmpty(),o=i!==void 0,s=`Function ${t}() called with invalid data`;n&&(s+=" (via `toFirestore()`)"),s+=`. `;let c=``;return(a||o)&&(c+=` (found`,a&&(c+=` in field ${r}`),o&&(c+=` in document ${i}`),c+=`)`),new G(W.INVALID_ARGUMENT,s+e+c)}var ef=`@firebase/firestore`,tf=`4.10.0`,nf=class{constructor(e,t,n,r,i){this._firestore=e,this._userDataWriter=t,this._key=n,this._document=r,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new Bd(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new rf(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}_fieldsProto(){return this._document?.data.clone().value.mapValue.fields??void 0}get(e){if(this._document){let t=this._document.data.field(Xd(`DocumentSnapshot.get`,e));if(t!==null)return this._userDataWriter.convertValue(t)}}},rf=class extends nf{data(){return super.data()}},af=class{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},of=class e extends nf{constructor(e,t,n,r,i,a){super(e,t,n,r,a),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let t=new sf(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){let n=this._document.data.field(Xd(`DocumentSnapshot.get`,e));if(n!==null)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new G(W.FAILED_PRECONDITION,`DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().`);let t=this._document,n={};return n.type=e._jsonSchemaVersion,n.bundle=``,n.bundleSource=`DocumentSnapshot`,n.bundleName=this._key.toString(),!t||!t.isValidDocument()||!t.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(t.data.value.mapValue.fields,`previous`),n.bundle=(this._firestore,this.ref.path,`NOT SUPPORTED`),n)}};of._jsonSchemaVersion=`firestore/documentSnapshot/1.0`,of._jsonSchema={type:vs(`string`,of._jsonSchemaVersion),bundleSource:vs(`string`,`DocumentSnapshot`),bundleName:vs(`string`),bundle:vs(`string`)};var sf=class extends of{data(e={}){return super.data(e)}},cf=class e{constructor(e,t,n,r){this._firestore=e,this._userDataWriter=t,this._snapshot=r,this.metadata=new af(r.hasPendingWrites,r.fromCache),this.query=n}get docs(){let e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((n=>{e.call(t,new sf(this._firestore,this._userDataWriter,n.key,n,new af(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){let t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new G(W.INVALID_ARGUMENT,`To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().`);return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){let t=0;return e._snapshot.docChanges.map((n=>{let r=new sf(e._firestore,e._userDataWriter,n.doc.key,n.doc,new af(e._snapshot.mutatedKeys.has(n.doc.key),e._snapshot.fromCache),e.query.converter);return n.doc,{type:`added`,doc:r,oldIndex:-1,newIndex:t++}}))}{let n=e._snapshot.oldDocs;return e._snapshot.docChanges.filter((e=>t||e.type!==3)).map((t=>{let r=new sf(e._firestore,e._userDataWriter,t.doc.key,t.doc,new af(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter),i=-1,a=-1;return t.type!==0&&(i=n.indexOf(t.doc.key),n=n.delete(t.doc.key)),t.type!==1&&(n=n.add(t.doc),a=n.indexOf(t.doc.key)),{type:lf(t.type),doc:r,oldIndex:i,newIndex:a}}))}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new G(W.FAILED_PRECONDITION,`QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().`);let t={};t.type=e._jsonSchemaVersion,t.bundleSource=`QuerySnapshot`,t.bundleName=rs.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;let n=[],r=[],i=[];return this.docs.forEach((e=>{e._document!==null&&(n.push(e._document),r.push(this._userDataWriter.convertObjectMap(e._document.data.value.mapValue.fields,`previous`)),i.push(e.ref.path))})),t.bundle=(this._firestore,this.query._query,t.bundleName,`NOT SUPPORTED`),t}};function lf(e){switch(e){case 0:return`added`;case 2:case 3:return`modified`;case 1:return`removed`;default:return Wo(61501,{type:e})}}cf._jsonSchemaVersion=`firestore/querySnapshot/1.0`,cf._jsonSchema={type:vs(`string`,cf._jsonSchemaVersion),bundleSource:vs(`string`,`QuerySnapshot`),bundleName:vs(`string`),bundle:vs(`string`)},(function(e,t=!0){Ro(Mn),kn(new vt(`firestore`,((e,{instanceIdentifier:n,options:r})=>{let i=e.getProvider(`app`).getImmediate(),a=new Gd(new Zo(e.getProvider(`auth-internal`)),new ts(i,e.getProvider(`app-check-internal`)),sc(i,n),i);return r={useFetchStreams:t,...r},a._setSettings(r),a}),`PUBLIC`).setMultipleInstances(!0)),Nn(ef,tf,e),Nn(ef,tf,`esm2020`)})();var uf={lastUpdated:`2026-01-29T21:25:38.905Z`,count:7,files:[{id:`vault-1769721938903-472`,filename:`PHASE 1 THE ENGINE.pdf`,path:`/Course-factoryPERFECT/materials/PHASE 1 THE ENGINE.pdf`,title:`PHASE 1 THE ENGINE`,type:`pdf`,size:`1682.7 KB`,date:`2026-01-28`},{id:`vault-1769721938904-429`,filename:`PHASE 2 THE DRIVE.pdf`,path:`/Course-factoryPERFECT/materials/PHASE 2 THE DRIVE.pdf`,title:`PHASE 2 THE DRIVE`,type:`pdf`,size:`4277.5 KB`,date:`2026-01-28`},{id:`vault-1769721938904-852`,filename:`PHASE 3 THE FOCUS.pdf`,path:`/Course-factoryPERFECT/materials/PHASE 3 THE FOCUS.pdf`,title:`PHASE 3 THE FOCUS`,type:`pdf`,size:`2676.6 KB`,date:`2026-01-28`},{id:`vault-1769721938905-931`,filename:`PHASE 4 THE TOOLKIT.pdf`,path:`/Course-factoryPERFECT/materials/PHASE 4 THE TOOLKIT.pdf`,title:`PHASE 4 THE TOOLKIT`,type:`pdf`,size:`5613.4 KB`,date:`2026-01-28`},{id:`vault-1769721938905-400`,filename:`README.txt`,path:`/Course-factoryPERFECT/materials/README.txt`,title:`README`,type:`txt`,size:`0.2 KB`,date:`2026-01-29`},{id:`vault-1769721938905-230`,filename:`test-vault-doc.pdf`,path:`/Course-factoryPERFECT/materials/test-vault-doc.pdf`,title:`Test Vault Doc`,type:`pdf`,size:`0.6 KB`,date:`2026-01-29`},{id:`vault-1769721938905-330`,filename:`What is sports psychology.pdf`,path:`/Course-factoryPERFECT/materials/What is sports psychology.pdf`,title:`What Is Sports Psychology`,type:`pdf`,size:`4983.2 KB`,date:`2026-01-28`}]},df=o((e=>{var t=Symbol.for(`react.transitional.element`),n=Symbol.for(`react.fragment`);function r(e,n,r){var i=null;if(r!==void 0&&(i=``+r),n.key!==void 0&&(i=``+n.key),`key`in n)for(var a in r={},n)a!==`key`&&(r[a]=n[a]);else r=n;return n=r.ref,{$$typeof:t,type:e,key:i,ref:n===void 0?null:n,props:r}}e.Fragment=n,e.jsx=r,e.jsxs=r})),Q=o(((e,t)=>{t.exports=df()}))(),ff=({onSelect:e,onClose:t})=>{let[n,r]=(0,C.useState)(``),i=(uf?.files||[]).filter(e=>e.title.toLowerCase().includes(n.toLowerCase())||e.filename.toLowerCase().includes(n.toLowerCase()));return(0,Q.jsx)(`div`,{className:`fixed inset-0 bg-black/80 z-[60] flex items-center justify-center p-4 backdrop-blur-sm`,children:(0,Q.jsxs)(`div`,{className:`bg-white border-4 border-black w-full max-w-2xl max-h-[80vh] flex flex-col shadow-[8px_8px_0px_0px_rgba(0,0,0,1)] animate-in fade-in zoom-in duration-200`,children:[(0,Q.jsxs)(`div`,{className:`bg-yellow-400 border-b-4 border-black p-4 flex justify-between items-center`,children:[(0,Q.jsxs)(`div`,{className:`flex items-center gap-3`,children:[(0,Q.jsx)(`div`,{className:`bg-black text-white p-1`,children:(0,Q.jsx)(he,{size:24})}),(0,Q.jsx)(`h2`,{className:`font-black text-xl uppercase tracking-tighter`,children:`Asset Vault`})]}),(0,Q.jsx)(`button`,{onClick:t,className:`hover:bg-red-500 hover:text-white p-2 border-2 border-transparent hover:border-black transition-all`,children:(0,Q.jsx)(Me,{size:24})})]}),(0,Q.jsx)(`div`,{className:`p-4 border-b-4 border-black bg-gray-50`,children:(0,Q.jsxs)(`div`,{className:`relative`,children:[(0,Q.jsx)(Se,{className:`absolute left-3 top-3 text-gray-500`,size:20}),(0,Q.jsx)(`input`,{type:`text`,placeholder:`SEARCH LOCAL ASSETS...`,className:`w-full bg-white border-2 border-black p-2 pl-10 font-bold focus:outline-none focus:ring-4 focus:ring-yellow-400/50 transition-all`,value:n,onChange:e=>r(e.target.value),autoFocus:!0})]})}),(0,Q.jsxs)(`div`,{className:`overflow-y-auto p-4 space-y-2 flex-1 bg-white`,children:[i.map(t=>(0,Q.jsxs)(`div`,{onClick:()=>e(t),className:`group flex items-center justify-between p-3 border-2 border-black hover:bg-blue-600 hover:text-white cursor-pointer transition-all hover:translate-x-1 hover:-translate-y-1 hover:shadow-[4px_4px_0px_0px_rgba(0,0,0,1)]`,children:[(0,Q.jsxs)(`div`,{className:`flex items-center gap-3`,children:[(0,Q.jsx)(ce,{size:20,className:`group-hover:scale-110 transition-transform`}),(0,Q.jsxs)(`div`,{children:[(0,Q.jsx)(`div`,{className:`font-bold leading-tight`,children:t.title}),(0,Q.jsxs)(`div`,{className:`text-xs opacity-60 font-mono mt-0.5 group-hover:opacity-90`,children:[t.filename,`  `,t.size]})]})]}),(0,Q.jsx)(`div`,{className:`opacity-0 group-hover:opacity-100 font-black text-sm uppercase tracking-widest bg-white text-black px-2 py-0.5 border border-black`,children:`SELECT`})]},t.id)),i.length===0&&(0,Q.jsxs)(`div`,{className:`text-center p-12 text-gray-400 font-mono border-2 border-dashed border-gray-300 flex flex-col items-center gap-2`,children:[(0,Q.jsx)(M,{size:32}),(0,Q.jsxs)(`div`,{children:[`NO ASSETS FOUND`,(0,Q.jsxs)(`div`,{className:`text-xs mt-1`,children:[`Run `,(0,Q.jsx)(`span`,{className:`bg-gray-200 px-1 text-black`,children:`SCAN_VAULT.bat`}),` to update index`]})]})]})]}),(0,Q.jsxs)(`div`,{className:`p-2 bg-gray-100 border-t-4 border-black text-xs font-mono text-center flex justify-between px-4`,children:[(0,Q.jsxs)(`span`,{children:[`UPDATED: `,uf.lastUpdated?uf.lastUpdated.split(`T`)[0]:`NEVER`]}),(0,Q.jsxs)(`span`,{children:[uf.count||0,` ITEMS`]})]})]})})},{useState:$,useEffect:pf,useRef:mf}=C,hf=()=>{let[e,t]=$([]);return{toasts:e,showToast:(e,n=`info`,r=4e3)=>{let i=Date.now()+Math.random(),a={id:i,message:e,type:n,duration:r};return t(e=>[...e,a]),setTimeout(()=>{t(e=>e.filter(e=>e.id!==i))},r),i},removeToast:e=>{t(t=>t.filter(t=>t.id!==e))}}},gf=({toasts:e,removeToast:t})=>e.length===0?null:(0,Q.jsx)(`div`,{className:`fixed top-4 right-4 z-[9999] space-y-2 max-w-md`,children:e.map(e=>{let n={success:`bg-emerald-600 border-emerald-500 text-white`,error:`bg-rose-600 border-rose-500 text-white`,warning:`bg-amber-600 border-amber-500 text-white`,info:`bg-sky-600 border-sky-500 text-white`},r={success:te,error:me,warning:ke,info:we}[e.type]||we;return(0,Q.jsxs)(`div`,{className:`${n[e.type]||n.info} border-2 rounded-lg p-4 shadow-2xl flex items-start gap-3 animate-in slide-in-from-right fade-in duration-300`,children:[(0,Q.jsx)(r,{size:20,className:`flex-shrink-0 mt-0.5`}),(0,Q.jsx)(`div`,{className:`flex-1 min-w-0`,children:(0,Q.jsx)(`p`,{className:`text-sm font-bold`,children:e.message})}),(0,Q.jsx)(`button`,{onClick:()=>t(e.id),className:`flex-shrink-0 hover:opacity-70 transition-opacity`,children:(0,Q.jsx)(Me,{size:16})})]},e.id)})}),_f={"Current Course":{name:`Mental Fitness`,modules:[{id:`item-1768749223001`,title:`Course Materials`,type:`standalone`,code:{id:`view-materials`},materials:[{id:`mat-00`,number:`00`,title:`What is Sports Psychology?`,description:`The Diagnostic & Baseline Protocol.`,viewUrl:`/Course-factoryPERFECT/materials/What is sports psychology.pdf`,downloadUrl:`/Course-factoryPERFECT/materials/What is sports psychology.pdf`,color:`slate`,hidden:!1,order:0},{id:`mat-01`,number:`01`,title:`The Engine`,description:`Values, Identity & Foundation.`,viewUrl:`/Course-factoryPERFECT/materials/PHASE 1 THE ENGINE.pdf`,downloadUrl:`/Course-factoryPERFECT/materials/PHASE 1 THE ENGINE.pdf`,color:`rose`,hidden:!1,order:1},{id:`mat-02`,number:`02`,title:`The Drive`,description:`Motivation, 7/10 Task & Maintenance.`,viewUrl:`/Course-factoryPERFECT/materials/PHASE 2 THE DRIVE.pdf`,downloadUrl:`/Course-factoryPERFECT/materials/PHASE 2 THE DRIVE.pdf`,color:`amber`,hidden:!1,order:2},{id:`mat-03`,number:`03`,title:`The Focus`,description:`Spotlight, Cues & The Fortress.`,viewUrl:`/Course-factoryPERFECT/materials/PHASE 3 THE FOCUS.pdf`,downloadUrl:`/Course-factoryPERFECT/materials/PHASE 3 THE FOCUS.pdf`,color:`emerald`,hidden:!1,order:3},{id:`mat-04`,number:`04`,title:`The Toolkit`,description:`Confidence & Visualization Protocols.`,viewUrl:`/Course-factoryPERFECT/materials/PHASE 4 THE TOOLKIT.pdf`,downloadUrl:`/Course-factoryPERFECT/materials/PHASE 4 THE TOOLKIT.pdf`,color:`sky`,hidden:!1,order:4}],html:`<div id="view-materials" class="w-full h-full custom-scroll p-8 md:p-12">
            <div class="max-w-5xl mx-auto space-y-8">
                <div class="mb-12">
                    <h2 class="text-3xl font-black text-white italic uppercase tracking-tighter">Course <span class="text-sky-500">Materials</span></h2>
                    <p class="text-xs text-slate-400 font-mono uppercase tracking-widest mt-2">Access lectures, presentations, and briefing documents.</p>
                </div>
                <div id="pdf-viewer-container" class="hidden mb-12 bg-black rounded-xl border border-slate-700 overflow-hidden shadow-2xl">
                    <div class="flex justify-between items-center p-3 bg-slate-800 border-b border-slate-700">
                        <span id="viewer-title" class="text-xs font-bold text-white uppercase tracking-widest px-2">Document Viewer</span>
                        <button onclick="closeViewer()" class="text-xs text-rose-400 hover:text-white font-bold uppercase tracking-widest px-2">Close X</button>
                    </div>
                    <iframe id="pdf-frame" src="" width="100%" height="600" style="border:none;"></iframe>
                </div>
                <div class="grid grid-cols-1 gap-4" id="materials-container">
                    <p class="text-center text-slate-500 italic py-8">Materials will be generated dynamically when you compile the site.</p>
                </div>
            </div>
        </div>`,css:``,script:`
        // Dynamic Materials Renderer (runs in builder and compiled site)
        function renderMaterials() {
            // This will be populated by the compile process
            // For now, shows placeholder in builder
            const container = document.getElementById('materials-container');
            if (!container) return;
            
            // Check if we're in the compiled site with materials data
            if (window.courseMaterials && window.courseMaterials.length > 0) {
                container.innerHTML = window.courseMaterials.map(mat => {
                    const colorClass = mat.color || 'slate';
                    const borderClass = colorClass !== 'slate' ? 'border-l-4 border-l-' + colorClass + '-500' : '';
                    const bgClass = colorClass !== 'slate' ? 'bg-' + colorClass + '-500/10' : 'bg-slate-800';
                    const borderColorClass = colorClass !== 'slate' ? 'border-' + colorClass + '-500/20' : 'border-slate-700';
                    const textColorClass = colorClass !== 'slate' ? 'text-' + colorClass + '-500' : 'text-slate-500';
                    const buttonColorClass = colorClass !== 'slate' ? 'bg-' + colorClass + '-600 hover:bg-' + colorClass + '-500' : 'bg-sky-600 hover:bg-sky-500';
                    
                    const viewBtn = mat.viewUrl ? '<button data-pdf-url="' + (mat.viewUrl || '').replace(/"/g, '&quot;') + '" data-pdf-title="' + (mat.title || '').replace(/"/g, '&quot;') + '" class="flex-1 bg-slate-800 hover:bg-slate-700 text-white text-[10px] font-bold uppercase tracking-widest py-3 px-6 rounded-lg border border-slate-600 transition-all">View</button>' : '';
                    const downloadBtn = mat.downloadUrl ? '<a href="' + mat.downloadUrl + '" target="_blank" class="flex-1 ' + buttonColorClass + ' text-white text-[10px] font-bold uppercase tracking-widest py-3 px-6 rounded-lg transition-all text-center flex items-center justify-center">Download</a>' : '';
                    
                    return '<div class="material-card flex flex-col md:flex-row items-center justify-between gap-6 ' + borderClass + '">' +
                        '<div class="flex items-center gap-6">' +
                            '<div class="w-12 h-12 rounded-lg ' + bgClass + ' flex items-center justify-center ' + textColorClass + ' font-black italic text-xl border ' + borderColorClass + '">' + mat.number + '</div>' +
                            '<div>' +
                                '<h3 class="text-lg font-bold text-white uppercase italic">' + mat.title + '</h3>' +
                                '<p class="text-xs text-slate-400 font-mono">' + mat.description + '</p>' +
                            '</div>' +
                        '</div>' +
                        '<div class="flex gap-3 w-full md:w-auto">' +
                            viewBtn +
                            downloadBtn +
                        '</div>' +
                    '</div>';
                }).join('');
            }
        }
        
        function openPDF(url, title) {
            const container = document.getElementById('pdf-viewer-container');
            // Convert /view to /preview for iframe embedding
            const previewUrl = url.replace('/view', '/preview');
            document.getElementById('pdf-frame').src = previewUrl;
            document.getElementById('viewer-title').innerText = "VIEWING: " + title;
            container.classList.remove('hidden');
            container.scrollIntoView({ behavior: 'smooth' });
        }

        function closeViewer() {
            document.getElementById('pdf-viewer-container').classList.add('hidden');
            document.getElementById('pdf-frame').src = "";
        }
        
        // Try to render materials on load
        if (document.readyState === 'loading') {
            document.addEventListener('DOMContentLoaded', renderMaterials);
        } else {
            renderMaterials();
        }`},{id:`item-assessments`,title:`Assessments`,type:`standalone`,assessments:[],html:`<div id="view-assessments" class="w-full h-full custom-scroll p-8 md:p-12">
            <div class="max-w-5xl mx-auto space-y-8">
                <div class="mb-12">
                    <h2 class="text-3xl font-black text-white italic uppercase tracking-tighter">Assessment <span class="text-purple-500">Center</span></h2>
                    <p class="text-xs text-slate-400 font-mono uppercase tracking-widest mt-2">Quizzes, tests, and reflection exercises.</p>
                </div>
                <div id="assessments-container" class="space-y-6">
                    <p class="text-center text-slate-500 italic py-8">Assessments will be generated dynamically when you compile the site.</p>
                </div>
            </div>
        </div>`,css:``,script:`
        // Dynamic Assessments Renderer
        function renderAssessments() {
            const container = document.getElementById('assessments-container');
            if (!container) return;
            
            if (window.courseAssessments && window.courseAssessments.length > 0) {
                container.innerHTML = window.courseAssessments.map(assessment => {
                    return '<div class="assessment-wrapper mb-8">' + assessment.html + '</div>';
                }).join('');
                
                // Execute assessment scripts
                window.courseAssessments.forEach((assessment, idx) => {
                    if (assessment.script) {
                        try {
                            eval(assessment.script);
                        } catch(e) {
                            console.error('Assessment script error:', e);
                        }
                    }
                });
            }
        }
        
        if (document.readyState === 'loading') {
            document.addEventListener('DOMContentLoaded', renderAssessments);
        } else {
            renderAssessments();
        }`},{id:`item-1768750987350`,title:`Phase 1: The Engine`,type:`standalone`,html:`<div id="view-phase1" class="w-full h-full custom-scroll hidden p-4 md:p-8">
            <div class="max-w-6xl mx-auto">
                <header class="mb-8 text-center"><h1 class="text-3xl font-black italic tracking-tighter text-white uppercase mb-2 text-sky-500">Elite Operator Toolkit</h1><p class="text-[10px] font-mono uppercase tracking-[0.3em] text-slate-500 mb-6 font-bold underline decoration-sky-500/30 underline-offset-4">Regulation Engine: Tactical Assignment</p><div class="flex flex-wrap justify-center gap-3 mb-6 bg-slate-900/50 p-3 rounded-xl border border-slate-800 max-w-2xl mx-auto"><div class="flex items-center gap-2 px-3"><div id="p1-save-indicator" class="w-2 h-2 rounded-full bg-slate-600"></div><span id="p1-save-text" class="text-[9px] uppercase font-bold text-slate-500 tracking-widest">System Ready</span></div><div class="w-px h-6 bg-slate-800 mx-2 hidden sm:block"></div><button onclick="p1_downloadBackup()" class="flex items-center gap-2 bg-slate-800 hover:bg-slate-700 text-white px-3 py-1.5 rounded-lg text-[10px] uppercase font-bold tracking-wider transition-colors border border-slate-700">Save Backup File</button><button onclick="document.getElementById('p1-file-upload').click()" class="flex items-center gap-2 bg-slate-800 hover:bg-slate-700 text-sky-400 px-3 py-1.5 rounded-lg text-[10px] uppercase font-bold tracking-wider transition-colors border border-slate-700">Load Backup</button><input type="file" id="p1-file-upload" accept=".json" style="display: none;" onchange="p1_loadBackup(this)"></div><div class="flex justify-center gap-2 overflow-x-auto pb-2 px-2"><button onclick="p1_showStep(0)" class="mod-nav-btn active px-4 py-2 rounded-lg border border-slate-700 text-[10px] font-bold uppercase tracking-widest mono transition-all flex-shrink-0">Briefing</button><button onclick="p1_showStep(1)" class="mod-nav-btn px-4 py-2 rounded-lg border border-slate-700 text-[10px] font-bold uppercase tracking-widest mono transition-all flex-shrink-0">01 Stress Reset</button><button onclick="p1_showStep(2)" class="mod-nav-btn px-4 py-2 rounded-lg border border-slate-700 text-[10px] font-bold uppercase tracking-widest mono transition-all flex-shrink-0">02 Arousal</button><button onclick="p1_showStep(3)" class="mod-nav-btn px-4 py-2 rounded-lg border border-slate-800 text-[10px] font-bold uppercase tracking-widest mono transition-all flex-shrink-0">03 Targeting</button><button onclick="p1_showStep(4)" class="mod-nav-btn px-4 py-2 rounded-lg border border-slate-800 text-[10px] font-bold uppercase tracking-widest mono transition-all flex-shrink-0">04 Confidence</button><button onclick="p1_showStep(5)" class="mod-nav-btn px-4 py-2 rounded-lg border border-slate-800 text-[10px] font-bold uppercase tracking-widest mono transition-all flex-shrink-0">Review & Print</button></div></header>
                <div class="glass rounded-3xl shadow-2xl overflow-hidden min-h-[500px]">
                    <div id="p1-step0" class="step-content active"><div class="relative px-6 py-4 border-b border-slate-800 bg-slate-900/50"><div class="absolute top-0 left-0 w-full h-1 bg-sky-500"></div><h2 class="text-xl font-bold text-white uppercase italic tracking-tight">System Briefing: The Regulation Engine</h2></div><div class="p-8 space-y-8 text-center"><div class="max-w-3xl mx-auto space-y-6 text-left"><p class="text-slate-400 text-sm italic leading-relaxed">Elite performance is defined by the ability to regulate your internal operating system under pressure. While physical skill sets the floor, your mental fitness sets the ceiling. This assignment uses four <strong>Manual Overrides</strong> to ensure you stay in your <strong>Ideal Performance State (IPS)</strong>.</p><div class="bg-sky-500/10 border border-sky-500/30 p-4 rounded-xl flex flex-col gap-4 mb-2"><h3 class="text-sky-400 font-bold uppercase text-[10px] tracking-widest">Dashboard Logic: Read then Regulate</h3><div class="grid grid-cols-1 md:grid-cols-2 gap-4"><div class="p-3 bg-slate-900/50 rounded border border-slate-700"><span class="text-[9px] font-black text-rose-400 uppercase block mb-1">Somatic Indicators (Body)</span><p class="text-[10px] text-slate-400">Cold hands, butterflies, muscle tension, sweating.</p></div><div class="p-3 bg-slate-900/50 rounded border border-slate-700"><span class="text-[9px] font-black text-amber-400 uppercase block mb-1">Cognitive Indicators (Mind)</span><p class="text-[10px] text-slate-400">Negative self-talk, doubt, inability to concentrate.</p></div></div></div><div class="flex justify-center pt-6"><button onclick="p1_showStep(1)" class="bg-sky-600 px-12 py-4 rounded-xl text-white font-black uppercase text-xs tracking-[0.2em] hover:bg-sky-500 transition-all shadow-lg active:scale-95">Initialize Stations</button></div></div></div></div>
<div id="p1-step1" class="step-content"><div class="relative px-6 py-4 border-b border-slate-800 bg-slate-900/50"><div class="absolute top-0 left-0 w-full h-1 bg-rose-500"></div><h2 class="text-xl font-bold text-white uppercase italic tracking-tight">Station 01: The Stress Loop Reset</h2></div><div class="p-8 space-y-8"><div class="grid grid-cols-1 md:grid-cols-2 gap-10"><div class="space-y-4"><h3 class="text-[10px] font-bold text-slate-500 uppercase mono italic underline tracking-widest">The Pivot Point</h3><p class="text-sm text-slate-300 leading-relaxed">Breathing is your manual override switch. It intercepts the Stress Process Loop at the moment a demand is perceived as a "threat." <strong class="text-rose-400">The goal is to identify a specific time you can execute this trigger and how the breath anchor will help you stay present in the moment.</strong></p><div class="bg-rose-500/10 p-3 rounded border border-rose-500/30"><span class="text-[9px] text-rose-300 font-bold uppercase">Warning:</span><p class="text-[10px] text-rose-200">Unchecked loop acceleration leads to performance crash.</p></div></div><div class="space-y-6"><div><label class="block text-[10px] font-bold uppercase text-sky-500 mb-2 mono">Deployment Scenario</label><input type="text" id="p1_breath_scenario" oninput="p1_saveData()" placeholder="When exactly will you use this? (e.g. Between points...)" class="w-full rounded-lg p-3 text-xs italic"><p class="helper-text">Identify a specific time you can execute this trigger.</p></div><div><label class="block text-[10px] font-bold uppercase text-sky-500 mb-2 mono">Centering Action Detail</label><textarea id="p1_breath_detail" oninput="p1_saveData()" placeholder="Describe your rhythmic diaphragmatic breathing habit..." class="w-full h-32 rounded-lg p-3 text-xs italic resize-none"></textarea><p class="helper-text">How will this breath anchor help you stay present in the moment?</p></div></div></div><div class="flex justify-between pt-4"><button onclick="p1_showStep(0)" class="text-slate-500 font-bold uppercase text-[10px] tracking-widest">&larr; Back</button><button onclick="p1_showStep(2)" class="bg-sky-600 px-8 py-3 rounded-lg text-white font-bold uppercase text-[10px] tracking-widest">Next Station &rarr;</button></div></div></div>
                    <div id="p1-step2" class="step-content"><div class="relative px-6 py-4 border-b border-slate-800 bg-slate-900/50"><div class="absolute top-0 left-0 w-full h-1 bg-amber-500"></div><h2 class="text-xl font-bold text-white uppercase italic tracking-tight">Station 02: Arousal Volume Control</h2></div><div class="p-8 space-y-8"><div class="grid grid-cols-1 md:grid-cols-2 gap-10"><div class="space-y-4"><h3 class="text-[10px] font-bold text-slate-500 uppercase mono italic underline tracking-widest">The Inverted-U</h3><p class="text-sm text-slate-300 leading-relaxed">Performance peaks at moderate arousal. You must 'down-regulate' to discharge tension or 'up-regulate' to wake the nervous system.</p></div><div class="space-y-6"><div><label class="block text-[10px] font-bold uppercase text-amber-500 mb-2 mono">Down-Regulation (Relaxation)</label><p class="text-[10px] text-slate-400 italic mb-2"><strong>PMR (Progressive Muscle Relaxation)</strong> is a technique where you systematically tense and then relax specific muscle groups to release physical tension.</p><textarea id="p1_relax_plan" oninput="p1_saveData()" placeholder="List muscle groups for your PMR routine..." class="w-full h-24 rounded-lg p-3 text-xs italic resize-none"></textarea><p class="helper-text">Describe your routine to discharge somatic tension.</p></div><div><label class="block text-[10px] font-bold uppercase text-rose-500 mb-2 mono">Up-Regulation (Activation)</label><p class="text-[10px] text-slate-400 italic mb-2"><strong>Up-Regulation</strong> involves using physical actions or environmental triggers to increase heart rate and alertness when energy is too low.</p><textarea id="p1_active_plan" oninput="p1_saveData()" placeholder="List your 'Psych-Up' triggers (Music, Cues, Physical actions)..." class="w-full h-24 rounded-lg p-3 text-xs italic resize-none"></textarea><p class="helper-text">Triggers used to discharge apathy and enter the zone.</p></div></div></div><div class="flex justify-between pt-4"><button onclick="p1_showStep(1)" class="text-slate-500 font-bold uppercase text-[10px] tracking-widest"> Back</button><button onclick="p1_showStep(3)" class="bg-sky-600 px-8 py-3 rounded-lg text-white font-bold uppercase text-[10px] tracking-widest">Next Station </button></div></div></div>
                    <div id="p1-step3" class="step-content"><div class="relative px-6 py-4 border-b border-slate-800 bg-slate-900/50"><div class="absolute top-0 left-0 w-full h-1 bg-emerald-500"></div><h2 class="text-xl font-bold text-white uppercase italic tracking-tight">Station 03: The Focus Filter</h2></div><div class="p-8 space-y-8"><div class="grid grid-cols-1 md:grid-cols-2 gap-10"><div class="space-y-4"><h3 class="text-[10px] font-bold text-slate-500 uppercase mono italic underline tracking-widest">Attentional Narrowing</h3><p class="text-sm text-slate-300 leading-relaxed">Under high stress, your peripheral vision and mental focus shrinkoften called <strong>"Tunnel Vision."</strong> You lose the big picture. Cue words act as "Decoder Keys" that force the system to lock back onto task-relevant targets.</p><div class="bg-emerald-500/10 p-3 rounded border border-emerald-500/30"><span class="text-[9px] text-emerald-300 font-bold uppercase">The Goal:</span><p class="text-[10px] text-emerald-200">Shift from internal worry (Emotion) to external cues (Action).</p></div></div><div class="space-y-6"><div><label class="block text-[10px] font-bold uppercase text-sky-400 mb-2 mono">Instructional Decoder</label><input type="text" id="p1_cue_inst" oninput="p1_saveData()" placeholder="e.g., 'Elbows in', 'Smooth'..." class="w-full rounded-lg p-3 text-xs font-black italic"><p class="helper-text">Create a 1-2 word key specifically to FIX sloppy mechanics or technical errors.</p></div><div><label class="block text-[10px] font-bold uppercase text-amber-500 mb-2 mono">Motivational Decoder</label><input type="text" id="p1_cue_mot" oninput="p1_saveData()" placeholder="e.g., 'Power', 'Explode'..." class="w-full rounded-lg p-3 text-xs font-black italic"><p class="helper-text">Create a 1-2 word key specifically to FIX low energy or effort when drive is fading.</p></div><div><label class="block text-[10px] font-bold uppercase text-slate-400 mb-2 mono italic underline">Radar Jamming Scenario</label><textarea id="p1_jam_scenario" oninput="p1_saveData()" placeholder="Describe a specific high-pressure moment where you lose focus..." class="w-full h-24 rounded-lg p-3 text-xs italic resize-none"></textarea><p class="helper-text">Identify the exact moment panic sets in and which cue breaks the jam.</p></div></div></div><div class="flex justify-between pt-4"><button onclick="p1_showStep(2)" class="text-slate-500 font-bold uppercase text-[10px] tracking-widest"> Back</button><button onclick="p1_showStep(4)" class="bg-sky-600 px-8 py-3 rounded-lg text-white font-bold uppercase text-[10px] tracking-widest">Next Station </button></div></div></div>
                    <div id="p1-step4" class="step-content"><div class="relative px-6 py-4 border-b border-slate-800 bg-slate-900/50"><div class="absolute top-0 left-0 w-full h-1 bg-sky-500"></div><h2 class="text-xl font-bold text-white uppercase italic tracking-tight">Station 04: Confidence Builder</h2></div><div class="p-8 space-y-8"><div class="grid grid-cols-1 md:grid-cols-2 gap-10"><div class="space-y-4"><h3 class="text-[10px] font-bold text-slate-500 uppercase mono italic underline tracking-widest">Certainty Logic</h3><p class="text-sm text-slate-300 leading-relaxed">Uncertainty generates anxiety; Certainty generates confidence. You cannot control the outcome (Winning), but you can control the process (Mechanics). By shifting your focus to what you control, you build a "High Confidence" state.</p><div class="bg-slate-900 p-4 border border-slate-700 rounded-xl space-y-2"><h4 class="text-[10px] font-black text-white uppercase">S.M.A.R.T. Definition</h4><ul class="text-[9px] text-slate-400 space-y-1 font-mono"><li><strong class="text-sky-400">S</strong>PECIFIC: Clear and defined.</li><li><strong class="text-sky-400">M</strong>EASURABLE: Can be tracked.</li><li><strong class="text-sky-400">A</strong>CHIEVABLE: Realistic to your skill.</li><li><strong class="text-sky-400">R</strong>ELEVANT: Matters to your sport.</li><li><strong class="text-sky-400">T</strong>IME-BOUND: Has a deadline.</li></ul></div></div><div class="space-y-6"><div class="p-4 bg-emerald-500/10 border border-emerald-500/30 rounded-xl"><label class="block text-[10px] font-bold uppercase text-emerald-400 mb-2 mono underline italic">Process Goal (100% Control)</label><input type="text" id="p1_goal_proc" oninput="p1_saveData()" placeholder="Specific form or mechanics goal..." class="w-full rounded-lg p-3 text-xs font-black italic"><p class="helper-text">This goal builds high confidence because it is entirely under your power.</p></div><div class="grid grid-cols-2 gap-4"><div class="p-4 bg-slate-900 border border-slate-800 rounded-xl"><label class="block text-[10px] font-bold uppercase text-amber-500 mb-2 mono">Performance Goal</label><input type="text" id="p1_goal_perf" oninput="p1_saveData()" placeholder="e.g. 80% accuracy..." class="w-full rounded-lg p-2 text-xs italic"><p class="helper-text">Partial Control.</p></div><div class="p-4 bg-slate-900 border border-slate-800 rounded-xl"><label class="block text-[10px] font-bold uppercase text-rose-500 mb-2 mono">Outcome Goal</label><input type="text" id="p1_goal_out" oninput="p1_saveData()" placeholder="e.g. Winning..." class="w-full rounded-lg p-2 text-xs italic"><p class="helper-text">Low Control.</p></div></div><div><label class="block text-[10px] font-bold uppercase text-white mb-2 mono italic underline leading-none">Final S.M.A.R.T. Goal Statement</label><textarea id="p1_smart_final" oninput="p1_saveData()" placeholder="Write out your full goal statement here using the SMART criteria above..." class="w-full h-24 rounded-lg p-3 text-xs italic resize-none border-2 border-slate-700 focus:border-sky-500"></textarea><p class="helper-text">Combine your goals into one clear sentence.</p></div></div></div><div class="flex justify-between pt-4"><button onclick="p1_showStep(3)" class="text-slate-500 font-bold uppercase text-[10px] tracking-widest"> Back</button><button onclick="p1_showStep(5)" class="bg-sky-600 px-8 py-3 rounded-lg text-white font-bold uppercase text-[10px] tracking-widest">Review & Export </button></div></div>
                    </div>
                    <div id="p1-step5" class="step-content"><div class="relative px-6 py-4 border-b border-slate-800 bg-slate-900/50"><div class="absolute top-0 left-0 w-full h-1 bg-emerald-500"></div><h2 class="text-xl font-bold text-white uppercase italic tracking-tight">Final Review & Rubric</h2></div><div class="p-8 space-y-12"><div class="grid grid-cols-1 lg:grid-cols-2 gap-8"><div><label class="block text-[10px] font-bold uppercase text-slate-500 mb-4 tracking-widest mono italic underline underline-offset-2">Mental Fitness Assessment</label><div id="sc-container" class="space-y-4"></div><div class="border-t border-slate-800 mt-6 pt-6 flex justify-between items-center"><span class="text-[10px] uppercase font-bold text-slate-500 tracking-[0.2em]">Readiness Score</span><div class="text-4xl font-black italic text-emerald-500 leading-none"><span id="p1-total-score">00</span><span class="text-xl text-slate-700 font-normal not-italic">/25</span></div></div></div><div class="space-y-6"><label class="block text-[10px] font-bold uppercase text-sky-400 mb-2 tracking-widest mono italic underline leading-none underline-offset-4">Integration Narrative (Required)</label><textarea id="p1_final_narrative" oninput="p1_saveData()" placeholder="Explain how you will use these four stations to monitor your indicators and regulate your performance state..." class="w-full h-[240px] rounded-xl p-4 text-sm resize-none text-slate-200 border-2 border-sky-500/20 focus:border-sky-500 transition-all"></textarea><p class="helper-text">Prove your understanding: How do these tools prevent the "Crash"?</p></div></div><div class="border-t border-slate-800 pt-8"><label class="block text-[10px] font-bold uppercase text-emerald-500 mb-4 tracking-widest mono italic underline underline-offset-4">Tactical Rubric</label><div class="overflow-x-auto glass rounded-2xl border border-slate-800 shadow-xl"><table class="w-full text-left text-[10px] border-collapse min-w-[700px]"><thead><tr class="bg-slate-900 border-b border-slate-800"><th class="p-4 text-slate-500 uppercase font-black">Criteria</th><th class="p-4 text-emerald-400 uppercase font-black tracking-widest">Proficient (4-5)</th><th class="p-4 text-amber-400 uppercase font-black tracking-widest">Developing (2-3)</th><th class="p-4 text-rose-400 uppercase font-black tracking-widest">Emerging (0-1)</th></tr></thead><tbody class="text-[10px] leading-relaxed italic text-slate-400"><tr class="border-b border-slate-800/50"><td class="p-4 font-bold uppercase text-white mono">Stress Reset</td><td onclick="p1_setScore('reset', 5)" id="reset-5" class="rubric-cell p-4">Centering action is clearly defined (diaphragm) with a specific time trigger. Breath anchor logic is clear.</td><td onclick="p1_setScore('reset', 3)" id="reset-3" class="rubric-cell p-4">Breathing technique mentioned but lacks specific trigger or physiological detail.</td><td onclick="p1_setScore('reset', 1)" id="reset-1" class="rubric-cell p-4">Missing centering action or trigger.</td></tr><tr class="border-b border-slate-800/50"><td class="p-4 font-bold uppercase text-white mono">Arousal Tuning</td><td onclick="p1_setScore('tune', 5)" id="tune-5" class="rubric-cell p-4">Clear distinction between Up/Down regulation. PMR definition is accurate. Tools are actionable.</td><td onclick="p1_setScore('tune', 3)" id="tune-3" class="rubric-cell p-4">Tools identified but generic. Lacks personal specificity or clear definition of PMR.</td><td onclick="p1_setScore('tune', 1)" id="tune-1" class="rubric-cell p-4">Incomplete tuning strategies.</td></tr><tr class="border-b border-slate-800/50"><td class="p-4 font-bold uppercase text-white mono">Targeting (Cues)</td><td onclick="p1_setScore('focus', 5)" id="focus-5" class="rubric-cell p-4">Instructional (Technical) & Motivational (Energy) cues are distinct. Scenario breaks the 'jam'.</td><td onclick="p1_setScore('focus', 3)" id="focus-3" class="rubric-cell p-4">Cues are too long or vague. No distinction between instructional/motivational function.</td><td onclick="p1_setScore('focus', 1)" id="focus-1" class="rubric-cell p-4">Missing cues or scenario.</td></tr><tr class="border-b border-slate-800/50"><td class="p-4 font-bold uppercase text-white mono">Confidence</td><td onclick="p1_setScore('goals', 5)" id="goals-5" class="rubric-cell p-4">Full SMART statement is written. Process goal is 100% controllable.</td><td onclick="p1_setScore('goals', 3)" id="goals-3" class="rubric-cell p-4">Process goal relies on partial external factors. SMART statement missing or incomplete.</td><td onclick="p1_setScore('goals', 1)" id="goals-1" class="rubric-cell p-4">Goals are confused (e.g. Outcome listed as Process).</td></tr><tr><td class="p-4 font-bold uppercase text-white mono">Integration</td><td onclick="p1_setScore('intel', 5)" id="intel-5" class="rubric-cell p-4">Narrative demonstrates understanding of the Dashboard (Somatic/Cognitive) and Regulation.</td><td onclick="p1_setScore('intel', 3)" id="intel-3" class="rubric-cell p-4">Restates definitions without demonstrating personal application or logic.</td><td onclick="p1_setScore('intel', 1)" id="intel-1" class="rubric-cell p-4">Incomplete narrative.</td></tr></tbody></table></div></div><div class="flex flex-col md:flex-row gap-4 pt-8"><button onclick="p1_showStep(1)" class="flex-1 text-slate-500 font-bold uppercase text-[10px] tracking-widest hover:text-white transition-colors border border-slate-800 rounded-xl py-4"> Start Over</button><button onclick="p1_generatePDF()" class="flex-[2] bg-emerald-600 hover:bg-emerald-500 text-white font-black uppercase tracking-widest py-4 rounded-xl shadow-lg active:scale-95">Generate Tactical Report</button></div></div></div>
                </div>
            </div>
        </div>`,script:`const p1_cats = [ { id: 'reset', label: 'Stress Reset' }, { id: 'tune', label: 'Arousal' }, { id: 'focus', label: 'Targeting' }, { id: 'goals', label: 'Confidence' }, { id: 'intel', label: 'Integration' } ];
        let p1_scores = { reset: 0, tune: 0, focus: 0, goals: 0, intel: 0 };
        function p1_showStep(n) {
            document.querySelectorAll('#view-phase1 .step-content').forEach(s => s.classList.remove('active'));
            document.getElementById('p1-step' + n).classList.add('active');
            document.querySelectorAll('#view-phase1 .mod-nav-btn').forEach((b, i) => b.classList.toggle('active', i === n));
        }
        function p1_setScore(cat, val) {
            p1_scores[cat] = val;
            const group = document.getElementById(\`group-\${cat}\`);
            if(group) { group.querySelectorAll('button').forEach((b, i) => b.classList.toggle('active', (i+1) === val)); }
            const total = Object.values(p1_scores).reduce((a, b) => a + b, 0);
            document.getElementById('p1-total-score').innerText = total.toString().padStart(2, '0');
            p1_saveData();
        }
        function p1_getFormData() {
             return { b_scenario: document.getElementById('p1_breath_scenario').value, b_detail: document.getElementById('p1_breath_detail').value, relax: document.getElementById('p1_relax_plan').value, active: document.getElementById('p1_active_plan').value, inst: document.getElementById('p1_cue_inst').value, mot: document.getElementById('p1_cue_mot').value, jam: document.getElementById('p1_jam_scenario').value, proc: document.getElementById('p1_goal_proc').value, perf: document.getElementById('p1_goal_perf').value, out: document.getElementById('p1_goal_out').value, smart_final: document.getElementById('p1_smart_final').value, narr: document.getElementById('p1_final_narrative').value, scores: p1_scores };
        }
        function p1_saveData() { localStorage.setItem('elite_operator_v3_p1', JSON.stringify(p1_getFormData())); document.getElementById('p1-save-text').innerText = "Saved"; setTimeout(() => document.getElementById('p1-save-text').innerText = "System Ready", 1000); }
        function p1_populate(data) { if(!data) return; if(data.b_scenario) document.getElementById('p1_breath_scenario').value = data.b_scenario; if(data.b_detail) document.getElementById('p1_breath_detail').value = data.b_detail; if(data.relax) document.getElementById('p1_relax_plan').value = data.relax; if(data.active) document.getElementById('p1_active_plan').value = data.active; if(data.inst) document.getElementById('p1_cue_inst').value = data.inst; if(data.mot) document.getElementById('p1_cue_mot').value = data.mot; if(data.jam) document.getElementById('p1_jam_scenario').value = data.jam; if(data.proc) document.getElementById('p1_goal_proc').value = data.proc; if(data.perf) document.getElementById('p1_goal_perf').value = data.perf; if(data.out) document.getElementById('p1_goal_out').value = data.out; if(data.smart_final) document.getElementById('p1_smart_final').value = data.smart_final; if(data.narr) document.getElementById('p1_final_narrative').value = data.narr; if(data.scores) { p1_scores = data.scores; Object.keys(p1_scores).forEach(c => { if(p1_scores[c]>0) p1_setScore(c, p1_scores[c]); }); } }
        function p1_downloadBackup() { const data = p1_getFormData(); const blob = new Blob([JSON.stringify(data)], { type: "application/json" }); const url = URL.createObjectURL(blob); const a = document.createElement('a'); a.href = url; a.download = "phase1-backup.json"; a.click(); }
        function p1_loadBackup(input) { const file = input.files[0]; if(!file) return; const reader = new FileReader(); reader.onload = (e) => { p1_populate(JSON.parse(e.target.result)); alert("Phase 1 Data Loaded"); }; reader.readAsText(file); }
        function p1_generatePDF() { 
            const data = p1_getFormData(); 
            const total = Object.values(p1_scores).reduce((a, b) => a + b, 0);
            const scoreDetails = p1_cats.map(c => \`<div style="display:flex; justify-content:space-between; border-bottom:1px solid #eee; padding:6px 0;"><span style="font-size:10px; font-weight:bold; color:#666; text-transform:uppercase;">\${c.label}</span><span style="font-weight:900; font-style:italic;">\${p1_scores[c.id] || 0}/5</span></div>\`).join('');
            const html = \`<!DOCTYPE html><html><head><title>Elite Operator Report</title><link href="https://cdn.tailwindcss.com" rel="stylesheet"><style>body{font-family:sans-serif;padding:40px;color:black;background:white;line-height:1.3}.header{border-bottom:5px solid black;padding-bottom:10px;margin-bottom:25px}.section{margin-bottom:20px;border-left:4px solid black;padding-left:15px}.label{font-size:8px;font-weight:bold;text-transform:uppercase;color:#888}.val{font-size:13px;font-weight:900;font-style:italic;border-bottom:1px solid #ddd;margin-bottom:8px;min-height:18px;color:#111}.narr-val{font-size:11px;line-height:1.4;padding:12px;background:#f9f9f9;border-radius:8px;border:1px solid #eee;margin-top:5px}</style></head><body><div style="max-width:800px;margin:auto"><div class="header flex justify-between items-end"><div><h1 class="text-3xl font-black italic uppercase">Operator Report</h1><p style="font-size:10px;letter-spacing:3px;text-transform:uppercase;font-weight:bold">Regulation Engine Tactical Assessment</p></div><div style="text-align:right"><p style="font-size:10px;text-transform:uppercase;font-weight:bold">Mental Fitness Score</p><p style="font-size:40px;font-weight:900;font-style:italic;line-height:1">\${total}/25</p></div></div><div class="grid grid-cols-2 gap-8"><div class="section" style="border-left-color:#f43f5e"><h2 style="font-size:12px;font-weight:900;text-transform:uppercase;margin-bottom:10px;color:#f43f5e">01 Stress Loop Reset</h2><div class="label">Deployment Scenario</div><div class="val">\${data.b_scenario||'...'}</div><div class="label">Centering Action</div><div class="val">\${data.b_detail||'...'}</div></div><div class="section" style="border-left-color:#f59e0b"><h2 style="font-size:12px;font-weight:900;text-transform:uppercase;margin-bottom:10px;color:#f59e0b">02 Arousal Tuning</h2><div class="label">Down-Regulation (PMR)</div><div class="val">\${data.relax||'...'}</div><div class="label">Up-Regulation (Active)</div><div class="val">\${data.active||'...'}</div></div></div><div class="grid grid-cols-2 gap-8"><div class="section" style="border-left-color:#10b981"><h2 style="font-size:12px;font-weight:900;text-transform:uppercase;margin-bottom:10px;color:#10b981">03 Targeting (Cues)</h2><div class="label">Instructional Cue</div><div class="val">\${data.inst||'...'}</div><div class="label">Motivational Cue</div><div class="val">\${data.mot||'...'}</div><div class="label">Jamming Scenario</div><div class="val" style="font-size:11px">\${data.jam||'...'}</div></div><div class="section" style="border-left-color:#0ea5e9"><h2 style="font-size:12px;font-weight:900;text-transform:uppercase;margin-bottom:10px;color:#0ea5e9">04 Confidence (SMART)</h2><div class="label">Process Goal (100% Control)</div><div class="val">\${data.proc||'...'}</div><div class="label">Full SMART Statement</div><div class="val" style="font-size:11px">\${data.smart_final||'...'}</div></div></div><div class="section"><h2 style="font-size:12px;font-weight:900;text-transform:uppercase;margin-bottom:5px">Integration Narrative</h2><div class="narr-val">\${data.narr||'---'}</div></div><div style="margin-top:20px;border-top:2px solid black;padding-top:15px"><h2 style="font-size:10px;font-weight:900;text-transform:uppercase;margin-bottom:8px">Evaluation Breakdown</h2>\${scoreDetails}</div></div><script>window.onload=function(){setTimeout(function(){window.print()},500)};<\\/script></body></html>\`; 
            const win = window.open('','_blank'); win.document.write(html); win.document.close(); 
        }`,css:``},{id:`item-x`,title:`Empty Module`,type:`standalone`,html:``,css:``,script:``}],materials:[]},"Course Settings":{courseName:`Mental Fitness`,courseCode:``,instructor:``,academicYear:``,accentColor:`sky`,backgroundColor:`slate-900`,headingTextColor:`white`,secondaryTextColor:`slate-400`,assessmentTextColor:`white`,assessmentBoxColor:`slate-900`,defaultMaterialTheme:`dark`,buttonColor:`sky-600`,containerColor:`slate-900/80`,fontFamily:`inter`,customCSS:``,compilationDefaults:{includeMaterials:!0,includeAssessments:!0,includeToolkit:!0,enableProgressTracking:!0},exportSettings:{filenamePattern:`{courseName}_compiled`,includeTimestamp:!0},layoutSettings:{showSidebar:!0,showFooter:!0,navPosition:`side`}},"Global Toolkit":[{id:`feat-darkmode`,title:`Dark Mode`,enabled:!0,hiddenFromUser:!0,userToggleable:!1,includeUi:!1,category:`theme`,description:`Sets site theme to dark mode by default`,code:{id:`tool-darkmode`,html:``,script:`(function(){
            document.documentElement.setAttribute('data-theme', 'dark');
            document.body.style.background = '#020617';
          })();`}},{id:`feat-calculator`,title:`Calculator`,enabled:!0,hiddenFromUser:!1,userToggleable:!0,includeUi:!0,category:`utility`,description:`Simple calculator widget`,code:{id:`tool-calculator`,html:`<div id="tool-calculator" class="hidden fixed bottom-4 right-4 bg-slate-800 border border-slate-700 rounded-xl p-4 shadow-2xl z-50">
            <div class="flex items-center justify-between mb-3">
              <h3 class="text-sm font-bold text-white">Calculator</h3>
              <button onclick="toggleTool('calculator')" class="text-slate-400 hover:text-white">&times;</button>
            </div>
            <input id="calc-display" type="text" readonly class="w-full mb-2 p-2 bg-slate-900 border border-slate-700 rounded text-right text-white" value="0">
            <div class="grid grid-cols-4 gap-2">
              <button onclick="calcInput('7')" class="p-2 bg-slate-700 hover:bg-slate-600 rounded text-white">7</button>
              <button onclick="calcInput('8')" class="p-2 bg-slate-700 hover:bg-slate-600 rounded text-white">8</button>
              <button onclick="calcInput('9')" class="p-2 bg-slate-700 hover:bg-slate-600 rounded text-white">9</button>
              <button onclick="calcInput('/')" class="p-2 bg-blue-600 hover:bg-blue-500 rounded text-white">/</button>
              <button onclick="calcInput('4')" class="p-2 bg-slate-700 hover:bg-slate-600 rounded text-white">4</button>
              <button onclick="calcInput('5')" class="p-2 bg-slate-700 hover:bg-slate-600 rounded text-white">5</button>
              <button onclick="calcInput('6')" class="p-2 bg-slate-700 hover:bg-slate-600 rounded text-white">6</button>
              <button onclick="calcInput('*')" class="p-2 bg-blue-600 hover:bg-blue-500 rounded text-white"></button>
              <button onclick="calcInput('1')" class="p-2 bg-slate-700 hover:bg-slate-600 rounded text-white">1</button>
              <button onclick="calcInput('2')" class="p-2 bg-slate-700 hover:bg-slate-600 rounded text-white">2</button>
              <button onclick="calcInput('3')" class="p-2 bg-slate-700 hover:bg-slate-600 rounded text-white">3</button>
              <button onclick="calcInput('-')" class="p-2 bg-blue-600 hover:bg-blue-500 rounded text-white"></button>
              <button onclick="calcInput('0')" class="p-2 bg-slate-700 hover:bg-slate-600 rounded text-white">0</button>
              <button onclick="calcInput('.')" class="p-2 bg-slate-700 hover:bg-slate-600 rounded text-white">.</button>
              <button onclick="calcEquals()" class="p-2 bg-emerald-600 hover:bg-emerald-500 rounded text-white">=</button>
              <button onclick="calcInput('+')" class="p-2 bg-blue-600 hover:bg-blue-500 rounded text-white">+</button>
              <button onclick="calcClear()" class="col-span-4 p-2 bg-rose-600 hover:bg-rose-500 rounded text-white">Clear</button>
            </div>
          </div>`,script:`let calcValue = '0';
          function calcInput(val) {
            if (calcValue === '0') calcValue = val;
            else calcValue += val;
            document.getElementById('calc-display').value = calcValue;
          }
          function calcEquals() {
            try {
              calcValue = eval(calcValue).toString();
              document.getElementById('calc-display').value = calcValue;
            } catch(e) { calcValue = 'Error'; }
          }
          function calcClear() {
            calcValue = '0';
            document.getElementById('calc-display').value = calcValue;
          }`}},{id:`feat-timer`,title:`Timer`,enabled:!0,hiddenFromUser:!1,userToggleable:!0,includeUi:!0,category:`utility`,description:`Simple countdown timer`,code:{id:`tool-timer`,html:`<div id="tool-timer" class="hidden fixed bottom-4 left-4 bg-slate-800 border border-slate-700 rounded-xl p-4 shadow-2xl z-50 w-64">
            <div class="flex items-center justify-between mb-3">
              <h3 class="text-sm font-bold text-white">Timer</h3>
              <button onclick="toggleTool('timer')" class="text-slate-400 hover:text-white">&times;</button>
            </div>
            <div id="timer-display" class="text-4xl font-bold text-center text-white mb-3">05:00</div>
            <div class="flex gap-2">
              <button onclick="startTimer()" class="flex-1 bg-emerald-600 hover:bg-emerald-500 text-white py-2 rounded">Start</button>
              <button onclick="pauseTimer()" class="flex-1 bg-amber-600 hover:bg-amber-500 text-white py-2 rounded">Pause</button>
              <button onclick="resetTimer()" class="flex-1 bg-rose-600 hover:bg-rose-500 text-white py-2 rounded">Reset</button>
            </div>
          </div>`,script:`let timerSeconds = 300;
          let timerInterval = null;
          function startTimer() {
            if (timerInterval) return;
            timerInterval = setInterval(() => {
              if (timerSeconds > 0) {
                timerSeconds--;
                const mins = Math.floor(timerSeconds / 60);
                const secs = timerSeconds % 60;
                document.getElementById('timer-display').textContent = mins.toString().padStart(2,'0') + ':' + secs.toString().padStart(2,'0');
              } else {
                clearInterval(timerInterval);
                timerInterval = null;
                alert('Timer finished!');
              }
            }, 1000);
          }
          function pauseTimer() {
            clearInterval(timerInterval);
            timerInterval = null;
          }
          function resetTimer() {
            clearInterval(timerInterval);
            timerInterval = null;
            timerSeconds = 300;
            document.getElementById('timer-display').textContent = '05:00';
          }`}},{id:`feat-print`,title:`Print Page`,enabled:!0,hiddenFromUser:!1,userToggleable:!1,includeUi:!1,category:`utility`,description:`Adds print button to toolbar`,code:{id:`tool-print`,html:`<button onclick="window.print()" class="fixed top-4 right-4 bg-slate-800 hover:bg-slate-700 border border-slate-700 text-white px-4 py-2 rounded-lg text-sm font-bold shadow-lg z-50"> Print</button>`,script:``}}]},vf=e=>{let t={sky:{hex:`#0ea5e9`,dark:`#0284c7`,light:`#38bdf8`},rose:{hex:`#f43f5e`,dark:`#e11d48`,light:`#fb7185`},emerald:{hex:`#10b981`,dark:`#059669`,light:`#34d399`},amber:{hex:`#f59e0b`,dark:`#d97706`,light:`#fbbf24`},purple:{hex:`#a855f7`,dark:`#9333ea`,light:`#c084fc`},indigo:{hex:`#6366f1`,dark:`#4f46e5`,light:`#818cf8`},pink:{hex:`#ec4899`,dark:`#db2777`,light:`#f472b6`},teal:{hex:`#14b8a6`,dark:`#0d9488`,light:`#2dd4bf`}};return t[e]||t.sky},yf=e=>{let t={inter:{url:`https://fonts.googleapis.com/css?family=Inter:ital,wght@0,400;0,700;1,400;1,900&display=swap`,css:`font-family: 'Inter', sans-serif;`},roboto:{url:`https://fonts.googleapis.com/css?family=Roboto:ital,wght@0,400;0,700;1,400;1,900&display=swap`,css:`font-family: 'Roboto', sans-serif;`},opensans:{url:`https://fonts.googleapis.com/css?family=Open+Sans:ital,wght@0,400;0,700;1,400;1,700&display=swap`,css:`font-family: 'Open Sans', sans-serif;`},lato:{url:`https://fonts.googleapis.com/css?family=Lato:ital,wght@0,400;0,700;1,400;1,700&display=swap`,css:`font-family: 'Lato', sans-serif;`},montserrat:{url:`https://fonts.googleapis.com/css?family=Montserrat:ital,wght@0,400;0,700;1,400;1,700&display=swap`,css:`font-family: 'Montserrat', sans-serif;`},poppins:{url:`https://fonts.googleapis.com/css?family=Poppins:ital,wght@0,400;0,700;1,400;1,700&display=swap`,css:`font-family: 'Poppins', sans-serif;`},raleway:{url:`https://fonts.googleapis.com/css?family=Raleway:ital,wght@0,400;0,700;1,400;1,700&display=swap`,css:`font-family: 'Raleway', sans-serif;`},nunito:{url:`https://fonts.googleapis.com/css?family=Nunito:ital,wght@0,400;0,700;1,400;1,700&display=swap`,css:`font-family: 'Nunito', sans-serif;`}};return t[e]||t.inter},bf=e=>{let{courseName:t=`Course Factory`,courseNameUpper:n=`COURSE FACTORY`,accentColor:r=`sky`,backgroundColor:i=`slate-900`,fontFamily:a=`inter`,customCSS:o=``,courseInfo:s=``,navItems:c=``,content:l=``,scripts:u=``,progressTracking:d=``,containerBgRgba:f=null,layoutSettings:p={showSidebar:!0,showFooter:!0,navPosition:`side`}}=e,m=vf(r),h=yf(a),g={"slate-900":`#0f172a`,"slate-950":`#020617`,"zinc-900":`#18181b`,"neutral-900":`#171717`,"stone-900":`#1c1917`,"gray-900":`#111827`,"slate-50":`#f8fafc`,"zinc-50":`#fafafa`,"neutral-50":`#fafafa`,"stone-50":`#fafaf9`,"gray-50":`#f9fafb`,white:`#ffffff`},_=g[i]||g[`slate-900`],v=[`slate-50`,`zinc-50`,`neutral-50`,`stone-50`,`gray-50`,`white`].includes(i),y=v?`#0f172a`:`#e2e8f0`,b=(e,t=1)=>{if(!e)return`rgba(15, 23, 42, ${t})`;let n=e.replace(`#`,``);return n.length===6?`rgba(${parseInt(n.slice(0,2),16)}, ${parseInt(n.slice(2,4),16)}, ${parseInt(n.slice(4,6),16)}, ${t})`:`rgba(15, 23, 42, ${t})`},x=b(_,v?.92:.95),S=v?`rgba(15, 23, 42, 0.12)`:`rgba(51, 65, 85, 0.5)`,C=v?b(_,.98):`rgba(30, 41, 59, 0.95)`,w=f||b(v?`#ffffff`:`#0f172a`,.8),T=p?.showSidebar!==!1,E=p?.showFooter!==!1,D=(p?.navPosition||`side`)===`top`,O=`        /* --- GLOBAL & SHARED STYLES --- */
        html, body { background-color: ${_} !important; }
        body { ${h.css} color: ${y}; margin: 0; height: 100vh; overflow: hidden; }
        :root { --cf-container-bg: ${w}; }
        .mono { font-family: 'JetBrains Mono', monospace; }
        .glass-panel { background: ${x}; border-right: 1px solid ${S}; }
        .custom-scroll { overflow-y: auto; }
        .glass { background: rgba(15, 23, 42, 0.8); backdrop-filter: blur(10px); border: 1px solid rgba(51, 65, 85, 0.5); }
        input:not(.assessment-input), textarea:not(.assessment-input), select:not(.assessment-input) { background: #0f172a !important; border: 1px solid #1e293b !important; transition: all 0.2s; color: #e2e8f0; }
        input:not(.assessment-input):focus, textarea:not(.assessment-input):focus, select:not(.assessment-input):focus { border-color: ${m.hex} !important; outline: none; box-shadow: 0 0 0 1px ${m.hex}; }
        
        /* Navigation */
        .nav-item { display: flex; align-items: center; gap: 12px; width: 100%; padding: 16px; color: #64748b; font-size: 11px; text-transform: uppercase; letter-spacing: 0.1em; font-weight: 700; transition: all 0.2s; border-left: 2px solid transparent; }
        .nav-item:hover { background: rgba(30, 41, 59, 0.5); color: #e2e8f0; }
        .nav-item.active { background: rgba(14, 165, 233, 0.1); color: ${m.light}; border-left: 2px solid ${m.light}; }

        /* Module Buttons & Tabs */
        .score-btn, .mod-nav-btn, .nav-btn { background: #0f172a; border: 1px solid #1e293b; color: #64748b; transition: all 0.2s; }
        .score-btn:hover, .mod-nav-btn:hover, .nav-btn:hover { border-color: ${m.hex}; color: white; }
        .score-btn.active, .mod-nav-btn.active, .nav-btn.active { background: ${m.hex}; color: #000; font-weight: 900; border-color: ${m.hex}; }
        
        /* Layout Helpers */
        .phase-header { border-left: 4px solid #334155; padding-left: 1rem; margin-bottom: 1rem; }
        .phase-header.active { border-color: ${m.hex}; }
        .step-content { display: none; }
        .step-content.active { display: block; }
        .rubric-cell { cursor: pointer; transition: all 0.2s; border: 1px solid transparent; }
        .rubric-cell:hover { background: rgba(255,255,255,0.05); }
        .active-proficient { background: rgba(16, 185, 129, 0.2); border: 1px solid #10b981; color: #10b981; }
        .active-developing { background: rgba(245, 158, 11, 0.2); border: 1px solid #f59e0b; color: #f59e0b; }
        .active-emerging { background: rgba(244, 63, 94, 0.2); border: 1px solid #f43f5e; color: #f43f5e; }
        .helper-text { font-size: 8px; color: #64748b; font-style: italic; margin-top: 4px; line-height: 1.2; text-transform: uppercase; letter-spacing: 0.05em; font-weight: 700; }
        .info-card { background: rgba(30, 41, 59, 0.4); border-left: 3px solid ${m.hex}; padding: 1.5rem; border-radius: 0.75rem; }
        .top-ten-input { font-size: 0.75rem; padding: 0.5rem !important; border-radius: 0.375rem !important; }
        
        /* Animations */
        @keyframes pulse-green { 0% { box-shadow: 0 0 0 0 rgba(16, 185, 129, 0.7); } 70% { box-shadow: 0 0 0 6px rgba(16, 185, 129, 0); } 100% { box-shadow: 0 0 0 0 rgba(16, 185, 129, 0); } }
        .status-saved { animation: pulse-green 2s infinite; }
        .scan-line { height: 2px; width: 100%; background: rgba(0, 255, 65, 0.2); position: absolute; animation: scan 3s linear infinite; pointer-events: none; }
        @keyframes scan { 0% { top: 0%; } 100% { top: 100%; } }
        
        /* Sidebar Toggle - Works on ALL screen sizes */
        .sidebar-toggle { 
            position: fixed; 
            top: 1rem; 
            left: 1rem; 
            z-index: 100; 
            background: ${x}; 
            border: 1px solid ${S}; 
            color: ${y}; 
            padding: 0.75rem; 
            border-radius: 0.5rem; 
            cursor: pointer; 
            font-size: 1.25rem; 
            transition: all 0.3s;
            display: flex;
            align-items: center;
            justify-content: center;
            width: 44px;
            height: 44px;
        }
        .sidebar-toggle:hover { background: ${C}; border-color: ${m.hex}; }

        /* Materials & Assessments Container Colors */
        /* Material cards use per-material theme (Phase 1 card theme); do NOT override. */
        #view-assessments .assessment-card {
            background: var(--cf-container-bg) !important;
        }
        #view-assessments .assessment-container [class*="bg-slate-9"],
        #view-assessments .assessment-container [class*="bg-slate-8"],
        #view-assessments .assessment-container [class*="bg-slate-7"],
        #view-assessments .assessment-container [class*="bg-slate-6"],
        #view-assessments .assessment-container [class*="bg-gray-9"],
        #view-assessments .assessment-container [class*="bg-gray-8"],
        #view-assessments .assessment-container [class*="bg-gray-7"] {
            background: var(--cf-container-bg) !important;
        }
        
        /* Overlay for mobile */
        .sidebar-overlay { display: none; position: fixed; inset: 0; background: rgba(0, 0, 0, 0.7); z-index: 60; backdrop-filter: blur(4px); pointer-events: none; }
        .sidebar-overlay.active { display: block; pointer-events: auto; }
        
        /* Sidebar - Collapsible on all sizes */
        #sidebar-nav {
            transition: width 0.3s ease, min-width 0.3s ease, opacity 0.3s ease, transform 0.3s ease;
            min-width: 16rem;
            overflow: hidden;
        }
        #sidebar-nav.collapsed {
            width: 0 !important;
            min-width: 0 !important;
            opacity: 0;
            pointer-events: none;
            transform: translateX(-100%);
        }
        
        /* Content fills available space */
        #content-container {
            flex: 1;
            transition: all 0.3s ease;
            width: 100%;
            background: ${_} !important;
            background-color: ${_} !important;
        }
        
        /* Toggle button position */
        .sidebar-toggle {
            transition: left 0.3s ease;
        }
        body:not(.sidebar-collapsed) .sidebar-toggle {
            left: calc(16rem + 1rem); /* 16rem = w-64 sidebar width + margin */
        }
        body.sidebar-collapsed .sidebar-toggle {
            left: 1rem;
        }
        
        @media (max-width: 768px) {
            /* On mobile, sidebar overlays content */
            #sidebar-nav { 
                position: fixed; 
                left: 0;
                top: 0; 
                bottom: 0; 
                z-index: 80; 
                width: 80% !important;
                max-width: 280px;
                min-width: 0;
            }
            #sidebar-nav:not(.collapsed) {
                opacity: 1;
                transform: translateX(0);
            }
            #sidebar-nav.collapsed {
                transform: translateX(-100%);
                width: 80% !important;
            }
            /* Toggle always on left on mobile */
            .sidebar-toggle,
            body:not(.sidebar-collapsed) .sidebar-toggle,
            body.sidebar-collapsed .sidebar-toggle {
                left: 1rem !important;
            }
            #content-container {
                width: 100% !important;
            }
        }`,k=D?`flex flex-col`:`flex`,A=T&&!D?`    <button class="sidebar-toggle" onclick="toggleSidebar()" aria-label="Toggle navigation" title="Toggle Menu">&#9776;</button>
    <div class="sidebar-overlay" id="sidebar-overlay" onclick="toggleSidebar()"></div>`:``,j=T&&!D?`    <div id="sidebar-nav" class="w-64 glass-panel flex flex-col h-full z-50">
        <div class="p-8 border-b border-slate-800">
            <h1 class="text-xl font-black italic text-white tracking-tighter uppercase leading-none"><span class="text-${r}-500">${t}</span></h1>
            <p class="text-[10px] text-slate-500 mt-2 mono uppercase tracking-widest">Master Console v2.0</p>${s}
        </div>
        <nav class="flex-1 overflow-y-auto py-4 space-y-1" id="main-nav">
            <div class="px-4 py-2 mt-4 text-[9px] font-bold text-slate-600 uppercase tracking-widest mono">System Modules</div>
            ${c}
        </nav>
${E?`        <div class="p-6 border-t border-slate-800 text-center"><p class="text-[9px] text-slate-600 italic">"Recognition is the trigger for regulation."</p></div>`:``}
    </div>`:``,M=D?`    <header class="w-full border-b border-slate-800 backdrop-blur-sm" style="background: ${_}; background-color: ${_};">
        <div class="max-w-[1800px] mx-auto px-6 py-4 flex items-center justify-between gap-4">
            <div>
                <h1 class="text-lg font-bold flex items-center gap-2 text-white"><span class="text-${r}-500">${t}</span></h1>
                <p class="text-[10px] text-slate-500 uppercase tracking-wider mt-1 font-mono">MASTER CONSOLE</p>
            </div>
            <nav class="flex-1 overflow-x-auto">
                <div class="flex items-center gap-2 justify-end min-w-max">
                    ${c}
                </div>
            </nav>
        </div>
    </header>`:``,ee=E&&(D||!T)?`    <footer class="w-full border-t border-slate-800 backdrop-blur-sm" style="background: ${_}; background-color: ${_};">
        <div class="max-w-[1800px] mx-auto px-6 py-4 text-[10px] text-slate-500 uppercase tracking-widest text-center">
            Master Console v2.0
        </div>
    </footer>`:``;return`<!DOCTYPE html>
<html lang="en" style="background: ${_} !important; background-color: ${_} !important;">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>${n} | MASTER CONSOLE</title>
    <script src="https://cdn.tailwindcss.com"><\/script>
    <link href="${h.url}" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css?family=JetBrains+Mono:wght@700&display=swap" rel="stylesheet">
    <style>
        ${O}${o?`\n        /* Custom CSS from Settings */\n        ${o}`:``}
    </style>
    <script>
        // Force background color after Tailwind loads
        (function() {
            function setBackground() {
                document.documentElement.style.backgroundColor = '${_}';
                document.documentElement.style.background = '${_}';
                document.body.style.backgroundColor = '${_}';
                document.body.style.background = '${_}';
            }
            setBackground();
            if (document.readyState === 'loading') {
                document.addEventListener('DOMContentLoaded', setBackground);
            }
            setTimeout(setBackground, 100);
            setTimeout(setBackground, 500);
        })();
    <\/script>
</head>
<body class="${k}" style="background: ${_} !important; background-color: ${_} !important;">
    <!-- Sidebar Toggle Button (Works on ALL screen sizes) -->
${A}

${M}
${j}

    <div class="flex-1 relative h-full overflow-hidden" id="content-container">
        ${l}
        <iframe id="view-external" class="w-full h-full hidden" src=""></iframe>
    </div>

${ee}

    <!-- MODULE SCRIPTS CONTAINER -->
    <script id="module-scripts">
        ${u}${d?`
        `+d:``}
    <\/script>

    <script>
        // --- SIDEBAR TOGGLE (Works on ALL screen sizes) ---
        function toggleSidebar() {
            const sidebar = document.getElementById('sidebar-nav');
            const overlay = document.getElementById('sidebar-overlay');
            const body = document.body;
            
            if (sidebar) {
                const isCollapsed = sidebar.classList.toggle('collapsed');
                body.classList.toggle('sidebar-collapsed', isCollapsed);
                
                // Show overlay on mobile when sidebar is open
                if (overlay && window.innerWidth <= 768) {
                    overlay.classList.toggle('active', !isCollapsed);
                }
                
                // Save preference
                try {
                    localStorage.setItem('sidebarCollapsed', isCollapsed ? 'true' : 'false');
                } catch(e) {}
            }
        }
        
        // Initialize sidebar state from localStorage
        document.addEventListener('DOMContentLoaded', function() {
            const sidebar = document.getElementById('sidebar-nav');
            const body = document.body;
            
            try {
                const savedState = localStorage.getItem('sidebarCollapsed');
                // On mobile, default to collapsed. On desktop, respect saved preference
                if (window.innerWidth <= 768) {
                    sidebar.classList.add('collapsed');
                    body.classList.add('sidebar-collapsed');
                } else if (savedState === 'true') {
                    sidebar.classList.add('collapsed');
                    body.classList.add('sidebar-collapsed');
                }
            } catch(e) {}
            
            // Prevent overlay clicks from propagating to sidebar
            if (sidebar) {
                sidebar.addEventListener('click', function(e) {
                    e.stopPropagation();
                });
            }
        });
        
        // --- CORE NAVIGATION LOGIC ---
        function switchView(view) {
            console.log(' [switchView] Switching to view:', view);
            
            // 1. Close sidebar on mobile after selecting a view
            if (window.innerWidth <= 768) {
                const sidebar = document.getElementById('sidebar-nav');
                const overlay = document.getElementById('sidebar-overlay');
                if (sidebar && !sidebar.classList.contains('collapsed')) {
                    sidebar.classList.add('collapsed');
                    document.body.classList.add('sidebar-collapsed');
                    if (overlay) overlay.classList.remove('active');
                }
            }
            
            // 2. Update Nav Buttons
            document.querySelectorAll('.nav-item').forEach(b => b.classList.remove('active'));
            const navBtn = document.getElementById('nav-' + view);
            if(navBtn) navBtn.classList.add('active');
            
            // 3. Hide All Views (both native divs and iframe containers)
            const allViews = document.querySelectorAll('[id^="view-"]');
            console.log(' [switchView] Hiding', allViews.length, 'views');
            allViews.forEach(v => v.classList.add('hidden'));

            // 4. Show Target View
            const target = document.getElementById('view-' + view);
            if(target) {
                target.classList.remove('hidden');
                console.log(' [switchView] Showing view:', 'view-' + view);
            } else {
                console.error(' [switchView] View not found:', 'view-' + view);
            }
            
            // Backward compatibility: Call module init if available
            if (window.COURSE_FACTORY_MODULES && window.COURSE_FACTORY_MODULES[view] && window.COURSE_FACTORY_MODULES[view].init) {
                try {
                    window.COURSE_FACTORY_MODULES[view].init();
                } catch(e) {
                    console.error('Module init error:', e);
                }
            }
        }

        function openPDF(url, title) {
            const container = document.getElementById('pdf-viewer-container');
            // Convert /view to /preview for iframe embedding
            const previewUrl = url.replace('/view', '/preview');
            document.getElementById('pdf-frame').src = previewUrl;
            document.getElementById('viewer-title').innerText = "VIEWING: " + title;
            container.classList.remove('hidden');
            container.scrollIntoView({ behavior: 'smooth' });
        }

        function closeViewer() {
            document.getElementById('pdf-viewer-container').classList.add('hidden');
            document.getElementById('pdf-frame').src = "";
        }
        
        // ========================================
        // GLOBAL AUTOSAVE SYSTEM
        // ========================================
        (function() {
            // Course-specific storage key (prevents collisions between courses)
            const COURSE_KEY = 'CF_' + '${t}'.replace(/[^a-zA-Z0-9]/g, '_') + '_v1';
            let hasExported = false;
            let saveTimeout = null;
            
            // Get all input state from the parent document (not iframes - they handle themselves)
            function getAllInputState() {
                const state = {};
                // Only target inputs NOT inside iframes
                document.querySelectorAll('#content-container input, #content-container textarea, #content-container select').forEach((el, i) => {
                    // Skip if inside an iframe (parent document only)
                    if (el.closest('iframe')) return;
                    
                    const key = el.id || el.name || ('field_' + i + '_' + (el.className || '').slice(0, 20));
                    if (el.type === 'checkbox' || el.type === 'radio') {
                        if (el.checked) state[key] = el.type === 'radio' ? el.value : true;
                    } else {
                        if (el.value) state[key] = el.value;
                    }
                });
                return state;
            }
            
            // Restore input state
            function restoreInputState(state) {
                if (!state || typeof state !== 'object') return;
                
                document.querySelectorAll('#content-container input, #content-container textarea, #content-container select').forEach((el, i) => {
                    if (el.closest('iframe')) return;
                    
                    const key = el.id || el.name || ('field_' + i + '_' + (el.className || '').slice(0, 20));
                    const savedValue = state[key];
                    
                    if (savedValue !== undefined) {
                        if (el.type === 'checkbox') {
                            el.checked = !!savedValue;
                        } else if (el.type === 'radio') {
                            el.checked = (el.value === savedValue);
                        } else {
                            el.value = savedValue;
                        }
                        // Trigger change event so any listeners update
                        el.dispatchEvent(new Event('change', { bubbles: true }));
                    }
                });
            }
            
            // Save to localStorage
            function saveNow() {
                try {
                    const state = getAllInputState();
                    if (Object.keys(state).length > 0) {
                        localStorage.setItem(COURSE_KEY, JSON.stringify({
                            timestamp: Date.now(),
                            course: '${t}',
                            state: state
                        }));
                        console.log(' [Autosave] Saved', Object.keys(state).length, 'fields');
                    }
                } catch(e) {
                    console.warn('Autosave failed:', e);
                }
            }
            
            // Debounced save (prevents saving on every keystroke)
            function debouncedSave() {
                clearTimeout(saveTimeout);
                saveTimeout = setTimeout(saveNow, 1000); // Save 1 second after last change
            }
            
            // Load saved state
            function loadSaved() {
                try {
                    const raw = localStorage.getItem(COURSE_KEY);
                    if (raw) {
                        const { state, timestamp } = JSON.parse(raw);
                        if (state) {
                            restoreInputState(state);
                            const savedDate = new Date(timestamp);
                            console.log(' [Autosave] Restored from', savedDate.toLocaleString());
                        }
                    }
                } catch(e) {
                    console.warn('Load saved failed:', e);
                }
            }
            
            // Mark work as exported (disables unsaved warning)
            window.markWorkSaved = function() {
                hasExported = true;
                console.log(' [Autosave] Work marked as saved/exported');
            };
            
            // Initialize on DOM ready
            function init() {
                // 1. Load saved state
                setTimeout(loadSaved, 100); // Small delay to let DOM settle
                
                // 2. Autosave on any input change
                document.addEventListener('input', debouncedSave);
                document.addEventListener('change', debouncedSave);
                
                // 3. Save before page unload
                window.addEventListener('pagehide', saveNow);
                window.addEventListener('beforeunload', function(e) {
                    saveNow(); // Always save
                    
                    // Warn if not exported and has content
                    if (!hasExported) {
                        const state = getAllInputState();
                        if (Object.keys(state).length > 0) {
                            e.preventDefault();
                            e.returnValue = 'You have unsaved work. Are you sure you want to leave?';
                            return e.returnValue;
                        }
                    }
                });
                
                console.log(' [Autosave] Initialized for course: ${t}');
            }
            
            if (document.readyState === 'loading') {
                document.addEventListener('DOMContentLoaded', init);
            } else {
                init();
            }
        })();
    <\/script>
</body>
</html>`},xf=({label:e,code:t,height:n=`h-32`})=>{let[r,i]=$(!1);return(0,Q.jsxs)(`div`,{className:`mt-4 border border-slate-700 rounded-lg overflow-hidden bg-slate-950`,children:[(0,Q.jsxs)(`div`,{className:`flex justify-between items-center px-4 py-2 bg-slate-900 border-b border-slate-700`,children:[(0,Q.jsx)(`span`,{className:`text-xs font-mono text-slate-400 uppercase`,children:e}),(0,Q.jsxs)(`button`,{onClick:()=>{let e=document.createElement(`textarea`);e.value=typeof t==`string`?t:JSON.stringify(t,null,2),e.style.position=`fixed`,e.style.left=`-9999px`,e.style.top=`0`,document.body.appendChild(e),e.focus(),e.select();try{document.execCommand(`copy`)&&(i(!0),setTimeout(()=>i(!1),2e3))}catch(e){console.error(`Copy failed`,e)}document.body.removeChild(e)},className:`flex items-center gap-1 text-xs text-blue-400 hover:text-blue-300 transition-colors`,children:[r?(0,Q.jsx)(k,{size:14}):(0,Q.jsx)(P,{size:14}),r?`Copied!`:`Copy Code`]})]}),(0,Q.jsx)(`pre`,{className:`p-4 overflow-x-auto text-sm font-mono text-slate-300 leading-relaxed whitespace-pre-wrap ${n}`,children:typeof t==`string`?t:JSON.stringify(t,null,2)})]})},Sf=({active:e,labelA:t,labelB:n,labelC:r,onToggle:i,iconA:a,iconB:o,iconC:s})=>(0,Q.jsxs)(`div`,{className:`flex bg-slate-900 p-1 rounded-lg border border-slate-700 mb-6`,children:[(0,Q.jsxs)(`button`,{onClick:()=>i(`A`),className:`flex-1 flex items-center justify-center gap-2 py-2 px-4 rounded-md text-xs font-bold transition-all ${e===`A`?`bg-blue-600 text-white shadow-lg`:`text-slate-500 hover:text-slate-300`}`,children:[(0,Q.jsx)(a,{size:14}),` `,t]}),(0,Q.jsxs)(`button`,{onClick:()=>i(`B`),className:`flex-1 flex items-center justify-center gap-2 py-2 px-4 rounded-md text-xs font-bold transition-all ${e===`B`?`bg-purple-600 text-white shadow-lg`:`text-slate-500 hover:text-slate-300`}`,children:[(0,Q.jsx)(o,{size:14}),` `,n]}),r&&(0,Q.jsxs)(`button`,{onClick:()=>i(`C`),className:`flex-1 flex items-center justify-center gap-2 py-2 px-4 rounded-md text-xs font-bold transition-all ${e===`C`?`bg-pink-600 text-white shadow-lg`:`text-slate-500 hover:text-slate-300`}`,children:[(0,Q.jsx)(s,{size:14}),` `,r]})]});function Cf(e){return e.type===`standalone`||e.type===`external`?e.type:e.html&&!e.code?.html?`standalone`:(e.code,`legacy`)}function wf(e){if(!e)return``;let t=document.createElement(`div`);return t.textContent=e,t.innerHTML}function Tf(e){if(!e||!e.trim())return{isValid:!1,safeUrl:`#`,error:`Empty URL`};let t=e.trim(),n=t.toLowerCase();for(let e of[`javascript:`,`data:`,`vbscript:`,`file:`,`about:`])if(n.startsWith(e))return{isValid:!1,safeUrl:`#`,error:`Dangerous protocol: ${e}`};try{let e=new URL(t);return![`http:`,`https:`,``].includes(e.protocol)&&e.protocol!==``?{isValid:!1,safeUrl:`#`,error:`Unsupported protocol: ${e.protocol}`}:{isValid:!0,safeUrl:t}}catch{return{isValid:!0,safeUrl:wf(t)}}}function Ef(e){if(!e)return``;let t=(e.mediaType||``).toLowerCase();return t===`book`?`BOOK`:t===`pdf`?`PDF`:t===`video`?`VID`:t===`slides`?`SLD`:e.number||``}function Df(e){let t=Cf(e);if(t===`standalone`)return{html:e.html||``,css:e.css||``,script:e.script||``,type:`standalone`};if(t===`external`){let t=``;return t=e.linkType===`iframe`?`<div id="${e.id}" class="w-full h-full" style="min-height: 600px;">
        <iframe src="${e.url}" width="100%" height="100%" style="border:none;" frameborder="0"></iframe>
      </div>`:`<div id="${e.id}" class="w-full h-full p-8 text-center">
        <h2 class="text-2xl font-bold text-white mb-4">${e.title||`External Module`}</h2>
        <p class="text-slate-400 mb-6">This module opens in a new tab.</p>
        <a href="${e.url}" target="_blank" rel="noopener noreferrer" 
           class="inline-block bg-sky-600 hover:bg-sky-500 text-white px-8 py-4 rounded-lg text-sm font-bold uppercase transition-all">
          Open ${e.title||`Module`}
        </a>
      </div>`,{html:t,css:``,script:``,type:`external`}}let n=e.code||{};if(typeof n==`string`)try{n=JSON.parse(n)}catch(e){console.error(`Failed to parse module code:`,e),n={}}return{html:n.html||e.html||``,css:n.css||e.css||``,script:n.script||e.script||``,type:`legacy`}}function Of(e){return e?e.trim():``}function kf(e,t=!1){let n=[],r=[];if(!e.id||!e.id.trim()?n.push(`Module ID is required`):(!e.id.startsWith(`view-`)&&!e.id.startsWith(`item-`)&&r.push(`Module ID should start with "view-" or "item-"`),/^[a-z0-9-_]+$/i.test(e.id)||n.push(`Module ID can only contain letters, numbers, hyphens, and underscores`)),(!e.title||!e.title.trim())&&n.push(`Module title is required`),e.type===`standalone`)e.rawHtml&&e.rawHtml.trim()||e.html&&e.html.trim()||n.push(`Standalone modules must have HTML content`);else if(e.type===`external`){if(!e.url||!e.url.trim())n.push(`External modules must have a URL`);else try{new URL(e.url)}catch{n.push(`Invalid URL format`)}(!e.linkType||![`iframe`,`newtab`].includes(e.linkType))&&n.push(`External modules must specify linkType as "iframe" or "newtab"`)}else if(!e.type)if(!e.code)n.push(`Legacy modules must have a code property`);else{let t=e.code;if(typeof t==`string`)try{t=JSON.parse(t)}catch{return n.push(`Invalid code JSON format`),{isValid:!1,errors:n,warnings:r}}(!t.html||!t.html.trim())&&n.push(`Legacy modules must have code.html`)}return e.script&&(e.script.includes(`document.write`)&&!e.script.includes(`pw.document.write`)&&!e.script.includes(`win.document.write`)&&r.push(`Using document.write() in the main window can cause issues. Ensure this is used on a popup window only.`),e.script.includes(`window.location`)&&!e.script.includes(`preventDefault`)&&r.push(`Direct window.location changes may break navigation`)),e.css&&/^[^{}@]+{/gm.test(e.css)&&e.id&&!e.css.includes(`#`+e.id)&&r.push(`Some CSS selectors may not be scoped to the module ID - may cause conflicts`),{isValid:n.length===0,errors:n,warnings:r}}function Af(e){let t=[],n=[],r=new Map,i=e[`Current Course`]?.modules||[],a=e[`Global Toolkit`]||[],o=(e,n,i)=>{if(!e||!e.trim())return;let a=r.get(e);a?t.push({message:`Duplicate ID "${e}" (also used in ${a.context})`,context:n}):r.set(e,{context:n,type:i})};return i.forEach((e,r)=>{let i=`Module "${e.title||e.id||`Untitled`}"`;o(e.id,i,`module`);let a=kf(e,!1);a.errors.forEach(e=>t.push({message:e,context:i})),a.warnings.forEach(e=>n.push({message:e,context:i}))}),a.forEach((e,r)=>{let i=`Toolkit "${e.title||e.id||`Untitled`}"`;o(e.id,i,`toolkit`);let a=kf(e,!1);a.errors.forEach(e=>t.push({message:e,context:i})),a.warnings.forEach(e=>n.push({message:e,context:i}))}),{isValid:t.length===0,errors:t,warnings:n}}var jf=(e,t)=>{if(!e)return null;let n=t||{},r=n.courseName||n.__courseName||`Course`,i=n.accentColor||`sky`,a=n.backgroundColor||`slate-900`,o=n.fontFamily||`inter`,s=n.customCSS||``,c=(n.__toolkit||[]).filter(e=>e.enabled),l=Array.isArray(n.__materials)?n.__materials:e.materials||[],u=yf(o),d={"slate-900":`#0f172a`,"slate-950":`#020617`,"zinc-900":`#18181b`,"neutral-900":`#171717`,"stone-900":`#1c1917`,"gray-900":`#111827`,"slate-50":`#f8fafc`,"zinc-50":`#fafafa`,"neutral-50":`#fafafa`,"stone-50":`#fafaf9`,"gray-50":`#f9fafb`,white:`#ffffff`},f=d[a]||d[`slate-900`],p=[`slate-50`,`zinc-50`,`neutral-50`,`stone-50`,`gray-50`,`white`].includes(a),m=p?`text-slate-900`:`text-white`,h=p?`text-slate-600`:`text-slate-400`,g=p?`border-slate-300`:`border-slate-700`,_=n.headingTextColor||(p?`slate-900`:`white`),v=n.secondaryTextColor||(p?`slate-600`:`slate-400`),y=n.buttonColor||`${i}-600`,b=n.containerColor||(p?`white/80`:`slate-900/80`),x=e=>e.startsWith(`text-`)?e:`text-${e}`,S=e=>e.startsWith(`bg-`)?e.slice(3):e,C=(e,t=1)=>{if(!e)return`rgba(15, 23, 42, ${t})`;let n=e.replace(`#`,``);return n.length===6?`rgba(${parseInt(n.slice(0,2),16)}, ${parseInt(n.slice(2,4),16)}, ${parseInt(n.slice(4,6),16)}, ${t})`:`rgba(15, 23, 42, ${t})`},w=e=>{let t=(e||``).toString().trim();if(!t)return{base:p?`white`:`slate-900`,alpha:.8,alphaRaw:`80`};let n=t;n.startsWith(`bg-`)&&(n=n.slice(3)),n.startsWith(`text-`)&&(n=n.slice(5));let r=n.split(`/`),i=r[0]||(p?`white`:`slate-900`),a=r[1]||null;return{base:i,alpha:a?Math.max(0,Math.min(1,parseInt(a,10)/100)):1,alphaRaw:a}},T={...d,"slate-800":`#1e293b`,"slate-700":`#334155`,"slate-600":`#475569`,"slate-500":`#64748b`,"gray-800":`#1f2937`,"gray-700":`#374151`,"gray-600":`#4b5563`,"zinc-800":`#27272a`},E=x(_),D=x(v),O=S(y),k=`bg-${O}`,A=O.endsWith(`-600`)?`hover:bg-${O.replace(/-600$/,`-500`)}`:`hover:bg-${O}`,j=D,M=w(b),ee=M.alphaRaw?`bg-${M.base}/${M.alphaRaw}`:`bg-${M.base}`,te=C(T[M.base]||(p?`#ffffff`:`#0f172a`),M.alpha),ne=n.ignoreAssetBaseUrl?``:(n.assetBaseUrl||``).replace(/\/$/,``);if(e.type===`external`){let t=Tf(e.url||``).safeUrl,n=wf(e.title||`External Module`);return e.linkType===`iframe`?`<!DOCTYPE html>
<html>
<head>
  <style>
    body { margin: 0; padding: 0; background: ${f}; ${u.css} }
    iframe { width: 100%; height: 100vh; border: none; }
  </style>
</head>
<body>
  <iframe src="${t}" width="100%" height="100%" style="border:none;"></iframe>
</body>
</html>`:`<!DOCTYPE html>
<html>
<head>
  <style>
    body { background: ${f}; color: ${p?`#0f172a`:`#e2e8f0`}; ${u.css}; padding: 40px; text-align: center; min-height: 100vh; display: flex; flex-direction: column; align-items: center; justify-content: center; }
    a { color: #0ea5e9; text-decoration: underline; }
  </style>
</head>
<body>
  <h2 style="font-size: 1.5rem; font-weight: bold; margin-bottom: 1rem;">${n}</h2>
  <p style="margin-bottom: 1.5rem; color: #94a3b8;">This module opens in a new tab.</p>
  <a href="${t}" target="_blank" rel="noopener noreferrer">Open ${n} -></a>
</body>
</html>`}let N=e.code||{};if(typeof N==`string`)try{N=JSON.parse(N)}catch{}let P=N.id===`view-materials`,re=e.id===`item-assessments`||e.title===`Assessments`,ie=``,ae=``,oe=``;if(P){let e=l.filter(e=>!e.hidden).sort((e,t)=>(e.order||0)-(t.order||0)),t=e.filter(e=>e.digitalContent),r={};t.forEach(e=>{r[e.id]=e.digitalContent});let i=JSON.stringify(r).replace(/`/g,"\\`").replace(/\$\{/g,"\\${").replace(/</g,`\\u003c`).replace(/>/g,`\\u003e`),a=n.defaultMaterialTheme||`dark`,o={dark:{cardBg:`bg-slate-900`,cardBorder:`border-slate-700`,heading:`text-white`,body:`text-slate-400`},light:{cardBg:`bg-white`,cardBorder:`border-slate-300`,heading:`text-slate-900`,body:`text-slate-600`},muted:{cardBg:`bg-slate-800`,cardBorder:`border-slate-700`,heading:`text-slate-200`,body:`text-slate-500`},"high-contrast-light":{cardBg:`bg-white`,cardBorder:`border-slate-300`,heading:`text-black`,body:`text-slate-800`},"high-contrast-dark":{cardBg:`bg-black`,cardBorder:`border-slate-600`,heading:`text-white`,body:`text-slate-300`}},s=e.map(e=>{let t=o[e.themeOverride!=null&&e.themeOverride!==``?e.themeOverride:a]||o.dark,n=e.color||`slate`,r=n===`slate`?``:`border-l-4 border-l-${n}-500`,i=n===`slate`?`bg-slate-800`:`bg-${n}-500/10`,s=n===`slate`?`border-slate-700`:`border-${n}-500/20`,c=n===`slate`?t.body:`text-${n}-500`,l=`${k} ${A}`,u=Ef(e)||e.number||``,d=e.mediaType&&e.mediaType!==`number`?`text-[9px] font-black uppercase tracking-widest`:`font-black italic text-xl`,f=e.viewUrl||``,p=e.downloadUrl||``;if(ne)try{let e=new URL(ne),t=e.pathname.replace(/\/$/,``);f.startsWith(`/`)&&(f=t&&t!==`/`&&f.startsWith(t)?e.origin+f:ne+f),p.startsWith(`/`)&&(p=t&&t!==`/`&&p.startsWith(t)?e.origin+p:ne+p)}catch{f.startsWith(`/`)&&(f=ne+f),p.startsWith(`/`)&&(p=ne+p)}let m=f.replace(/'/g,`\\'`),h=(e.title||``).replace(/'/g,`\\'`),g=e.id||`mat-${Date.now()}`,_=``;return e.viewUrl&&(_+=`<button onclick="openPDF('${m}', '${h}')" class="flex-1 ${k} ${A} ${j} text-[10px] font-bold uppercase tracking-widest py-3 px-6 rounded-lg border border-slate-600 transition-all">View Slides</button>`),e.downloadUrl&&(_+=`<a href="${p}" target="_blank" class="flex-1 ${l} ${j} text-[10px] font-bold uppercase tracking-widest py-3 px-6 rounded-lg transition-all text-center flex items-center justify-center">Download</a>`),e.digitalContent&&(_+=`<button data-digital-reader="${g}" class="digital-reader-btn flex-1 ${k} ${A} ${j} text-[10px] font-bold uppercase tracking-widest py-3 px-6 rounded-lg transition-all flex items-center justify-center gap-2">Read</button>`),`<div class="material-card flex flex-col md:flex-row items-center justify-between gap-6 p-6 ${t.cardBg} rounded-xl border ${t.cardBorder} ${r}">
        <div class="flex items-center gap-6">
          <div class="w-12 h-12 rounded-lg ${i} flex items-center justify-center ${c} ${d} border ${s}">${u}</div>
          <div>
            <h3 class="text-lg font-bold ${t.heading} uppercase italic">${e.title}</h3>
            <p class="text-xs ${t.body} font-mono">${e.description||``}</p>
          </div>
        </div>
        <div class="flex gap-3 w-full md:w-auto">${_}</div>
      </div>`}).join(`
`);ie=`
      <div class="space-y-8">
        <div class="mb-8">
          <h2 class="text-3xl font-black ${E} italic uppercase tracking-tighter">Course Materials</h2>
          <p class="text-xs ${D} font-mono uppercase tracking-widest mt-2">Access lectures, presentations, and briefing documents.</p>
        </div>
        <div id="pdf-viewer-container" class="hidden mb-8 ${p?`bg-white`:`bg-black`} rounded-xl border ${g} overflow-hidden shadow-2xl">
          <div class="flex justify-between items-center p-3 ${p?`bg-slate-100`:`bg-slate-800`} border-b ${g}">
            <span id="viewer-title" class="text-xs font-bold text-white uppercase tracking-widest px-2">Document Viewer</span>
            <button onclick="closeViewer()" class="text-xs text-rose-400 hover:${p?`text-slate-900`:`text-white`} font-bold uppercase tracking-widest px-2">Close X</button>
          </div>
          <iframe id="pdf-frame" src="" width="100%" height="600" style="border:none;"></iframe>
        </div>
        <div id="digital-reader-container" class="hidden mb-8 ${p?`bg-white`:`bg-slate-900`} rounded-xl border border-emerald-500/30 overflow-hidden shadow-2xl">
          <div class="flex justify-between items-center p-3 ${p?`bg-slate-100`:`bg-slate-800`} border-b border-emerald-500/30">
            <span id="reader-title" class="text-xs font-bold text-emerald-400 uppercase tracking-widest px-2 flex items-center gap-2">Digital Resource</span>
            <button onclick="closeDigitalReader()" class="text-xs text-rose-400 hover:${p?`text-slate-900`:`text-white`} font-bold uppercase tracking-widest px-2">Close X</button>
          </div>
          <div class="flex" style="height: 600px;">
            <div id="reader-toc" class="w-64 ${p?`bg-slate-50`:`bg-slate-950`} border-r ${g} p-4 overflow-y-auto hidden md:block">
              <h4 class="text-xs font-bold ${h} uppercase tracking-wider mb-4">Contents</h4>
              <div id="reader-toc-items" class="space-y-1"></div>
            </div>
            <div id="reader-content" class="flex-1 p-6 md:p-8 overflow-y-auto">
              <div id="reader-body" class="prose ${p?`prose-slate`:`prose-invert`} max-w-none"></div>
              <div class="flex justify-between items-center mt-8 pt-4 border-t ${g}">
                <button id="prev-btn" onclick="prevChapter()" class="px-4 py-2 ${p?`bg-slate-200 hover:bg-slate-300 text-slate-900`:`bg-slate-800 hover:bg-slate-700 text-white`} text-xs font-bold uppercase rounded-lg transition-all disabled:opacity-30">Previous</button>
                <span id="reader-progress" class="text-xs ${h}"></span>
                <button id="next-btn" onclick="nextChapter()" class="px-4 py-2 bg-emerald-600 hover:bg-emerald-500 text-white text-xs font-bold uppercase rounded-lg transition-all disabled:opacity-30">Next</button>
              </div>
            </div>
          </div>
        </div>
        <div id="materials-list" class="grid grid-cols-1 gap-4">
          ${e.length>0?s:`<p class="text-center ${D} italic py-8">No materials available.</p>`}
        </div>
      </div>`;let c=``;t.length>0&&(c=`
      var DIGITAL_CONTENT = ${i};
      var currentReader = { matId: null, chapterIdx: 0, data: null };

      function openDigitalReader(matId) {
        var content = DIGITAL_CONTENT[matId];
        if (!content) { console.error('No digital content for', matId); return; }

        currentReader = { matId: matId, chapterIdx: 0, data: content };

        document.getElementById('reader-title').innerText = (content.title || 'Digital Resource');

        var tocHTML = '';
        (content.chapters || []).forEach(function(ch, idx) {
          tocHTML += '<button onclick="goToChapter(' + idx + ')" class="toc-item w-full text-left px-3 py-2 rounded text-xs hover:bg-slate-800 transition-colors ' + (idx === 0 ? 'bg-emerald-900/50 text-emerald-400' : 'text-slate-400') + '">' +
            '<span class="font-bold">' + (ch.number || (idx + 1)) + '.</span> ' + ch.title +
          '</button>';
        });
        document.getElementById('reader-toc-items').innerHTML = tocHTML;

        renderChapter(0);

        document.getElementById('digital-reader-container').classList.remove('hidden');
        document.getElementById('materials-list').classList.add('hidden');
        document.getElementById('pdf-viewer-container').classList.add('hidden');
      }

      function closeDigitalReader() {
        document.getElementById('digital-reader-container').classList.add('hidden');
        document.getElementById('materials-list').classList.remove('hidden');
        currentReader = { matId: null, chapterIdx: 0, data: null };
      }

      function renderChapter(idx) {
        if (!currentReader.data || !currentReader.data.chapters) return;
        var chapters = currentReader.data.chapters;
        if (idx < 0 || idx >= chapters.length) return;

        currentReader.chapterIdx = idx;
        var chapter = chapters[idx];

        var html = '<h2 class="text-2xl font-bold text-white mb-2">' + (chapter.number || (idx + 1)) + '. ' + chapter.title + '</h2>';

        (chapter.sections || []).forEach(function(sec) {
          html += '<div class="mt-6">';
          if (sec.heading) {
            html += '<h3 class="text-lg font-bold text-emerald-400 mb-3">' + sec.heading + '</h3>';
          }
          var content = (sec.content || '').replace(/\\n/g, '<br>').replace(/\\*\\*(.+?)\\*\\*/g, '<strong>$1</strong>').replace(/\\*(.+?)\\*/g, '<em>$1</em>').replace(/^- /gm, '- ');
          html += '<div class="text-slate-300 leading-relaxed whitespace-pre-line">' + content + '</div>';
          html += '</div>';
        });

        document.getElementById('reader-body').innerHTML = html;

        document.querySelectorAll('.toc-item').forEach(function(btn, i) {
          if (i === idx) {
            btn.classList.add('bg-emerald-900/50', 'text-emerald-400');
            btn.classList.remove('text-slate-400');
          } else {
            btn.classList.remove('bg-emerald-900/50', 'text-emerald-400');
            btn.classList.add('text-slate-400');
          }
        });

        document.getElementById('prev-btn').disabled = idx === 0;
        document.getElementById('next-btn').disabled = idx === chapters.length - 1;
        document.getElementById('reader-progress').textContent = 'Chapter ' + (idx + 1) + ' of ' + chapters.length;

        document.getElementById('reader-content').scrollTop = 0;
      }

      function goToChapter(idx) {
        renderChapter(idx);
      }

      function prevChapter() {
        if (currentReader.chapterIdx > 0) {
          renderChapter(currentReader.chapterIdx - 1);
        }
      }

      function nextChapter() {
        if (currentReader.data && currentReader.data.chapters && currentReader.chapterIdx < currentReader.data.chapters.length - 1) {
          renderChapter(currentReader.chapterIdx + 1);
        }
      }

      document.addEventListener('click', function(e) {
        var readerBtn = e.target.closest('[data-digital-reader]');
        if (readerBtn) {
          e.preventDefault();
          openDigitalReader(readerBtn.getAttribute('data-digital-reader'));
          return;
        }
      });`),oe=`
      function openPDF(url, title) {
        var container = document.getElementById('pdf-viewer-container');
        var previewUrl = url.replace('/view', '/preview');
        document.getElementById('pdf-frame').src = previewUrl;
        document.getElementById('viewer-title').innerText = "VIEWING: " + title;
        container.classList.remove('hidden');
        container.scrollIntoView({ behavior: 'smooth' });
      }
      function closeViewer() {
        document.getElementById('pdf-viewer-container').classList.add('hidden');
        document.getElementById('pdf-frame').src = "";
      }
      ${c}`}else if(re){let t=(e.assessments||[]).filter(e=>!e.hidden).sort((e,t)=>(e.order||0)-(t.order||0)),r=ee,a=t.map((e,t)=>{let n=e.type===`quiz`?`Multiple Choice`:e.type===`longanswer`?`Long Answer`:e.type===`print`?`Print & Submit`:`Mixed Assessment`;return`<div class="assessment-card p-6 ${r} rounded-xl border ${g} hover:border-${i}-500 transition-all cursor-pointer group" onclick="showAssessment(${t})">
        <div class="flex items-center justify-between">
          <div class="flex-1">
            <div class="flex items-center gap-3 mb-2">
              <span class="text-[10px] font-black uppercase tracking-widest ${D}">${e.type===`quiz`?`MC`:e.type===`longanswer`?`LA`:e.type===`print`?`PRINT`:`MIX`}</span>
              <div>
                <h3 class="text-xl font-bold ${E} group-hover:text-${i}-400 transition-colors">${e.title}</h3>
                <p class="text-xs ${D} uppercase tracking-wider">${n}</p>
              </div>
            </div>
          </div>
          <div class="text-${i}-400 group-hover:translate-x-1 transition-transform">
            <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path>
            </svg>
          </div>
        </div>
      </div>`}).join(`
`),o=t.map((e,t)=>`<div id="assessment-${t}" class="assessment-container hidden">
        <button onclick="backToAssessmentList()" class="mb-6 inline-flex items-center gap-2 ${k} ${A} ${j} font-bold text-[10px] uppercase tracking-widest px-4 py-2 rounded-lg transition-colors">
          <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"></path>
          </svg>
          Back to Assessments
        </button>
        ${e.html||``}
      </div>`).join(`
`),s=t.map(e=>e.script||``).filter(e=>e).join(`
`),c=n.assessmentTextColor||`white`,l=n.assessmentBoxColor||`slate-900`,u={white:`#ffffff`,black:`#000000`,"slate-950":`#020617`,"slate-900":`#0f172a`,"slate-800":`#1e293b`,"slate-700":`#334155`,"slate-600":`#475569`,"slate-500":`#64748b`,"slate-400":`#94a3b8`,"slate-300":`#cbd5e1`,"slate-200":`#e2e8f0`,"slate-100":`#f1f5f9`,"slate-50":`#f8fafc`,"gray-900":`#111827`,"gray-800":`#1f2937`,"gray-700":`#374151`,"gray-600":`#4b5563`,"gray-500":`#6b7280`,"gray-400":`#9ca3af`,"gray-300":`#d1d5db`,"gray-200":`#e5e7eb`,"gray-100":`#f3f4f6`,"gray-50":`#f9fafb`},d=t.map(e=>{let t=e.textColorOverride!=null&&e.textColorOverride!==``?e.textColorOverride:c,n=e.boxColorOverride!=null&&e.boxColorOverride!==``?e.boxColorOverride:l,r=e.generatedId;if(!r&&(e.html||``).match(/id="(quiz_|mixed_)\\d+"/)){let t=(e.html||``).match(/id="((?:quiz_|mixed_)\\d+)"/);r=t?t[1]:null}if(!r)return``;let i=u[t]||u.white,a=u[n]||u[`slate-900`],o=[`white`,`slate-50`,`slate-100`,`slate-200`,`slate-300`,`slate-400`,`gray-50`,`gray-100`,`gray-200`,`gray-300`,`gray-400`].includes(n)?`#cbd5e1`:`#334155`;return`#${r} .assessment-input,#${r} textarea.assessment-input,#${r} input.assessment-input{color:${i} !important;background-color:${a} !important;border-color:${o} !important;}`}).filter(Boolean).join(`
`);ie=`
      <div class="space-y-8">
        ${d?`<style>/* per-assessment overrides */\n${d}</style>`:``}
        <div class="mb-8">
          <h2 class="text-3xl font-black ${E} italic uppercase tracking-tighter">Assessment Center</h2>
          <p class="text-xs ${D} font-mono uppercase tracking-widest mt-2">Quizzes, tests, and reflection exercises.</p>
        </div>
        <div id="assessment-list" class="grid grid-cols-1 gap-4">
          ${t.length>0?a:`<p class="text-center ${D} italic py-8">No assessments available.</p>`}
        </div>
        ${o}
      </div>`,oe=`
      function showAssessment(index) {
        document.getElementById('assessment-list').classList.add('hidden');
        document.querySelectorAll('.assessment-container').forEach(function(c) { c.classList.add('hidden'); });
        var target = document.getElementById('assessment-' + index);
        if (target) target.classList.remove('hidden');
        window.scrollTo(0, 0);
      }
      function backToAssessmentList() {
        document.querySelectorAll('.assessment-container').forEach(function(c) { c.classList.add('hidden'); });
        document.getElementById('assessment-list').classList.remove('hidden');
        window.scrollTo(0, 0);
      }
      ${s}`}else if(e.rawHtml)ie=`<div class="w-full rounded-xl overflow-hidden border border-slate-700 shadow-2xl">
      <iframe srcdoc="${e.rawHtml.replace(/"/g,`&quot;`).replace(/'/g,`&#39;`)}" class="w-full border-0" style="min-height: 80vh; height: 100%;" sandbox="allow-scripts allow-same-origin allow-forms allow-popups allow-modals allow-downloads"></iframe>
    </div>`;else{let t=e.html||e.code&&e.code.html||``,n=e.css||e.code&&e.code.css||``,r=e.script||e.code&&e.code.script||``;ie=t,ae=n,oe=r}let se=``,F=``;c.forEach(e=>{e.code&&(e.code.script&&(se+=e.code.script+`
`),e.code.html&&e.includeUi&&(F+=e.code.html+`
`))});let ce=`
(function() {
  var MODULE_KEY = 'CF_Module_${(e.title||e.id||`module`).replace(/[^a-zA-Z0-9]/g,`_`)}_v1';
  var saveTimeout = null;
  function getAllInputState() {
    var state = {};
    document.querySelectorAll('input, textarea, select').forEach(function(el, i) {
      var key = el.id || el.name || ('field_' + i);
      if (el.type === 'checkbox' || el.type === 'radio') {
        if (el.checked) state[key] = el.type === 'radio' ? el.value : true;
      } else {
        if (el.value) state[key] = el.value;
      }
    });
    return state;
  }
  function restoreInputState(state) {
    if (!state || typeof state !== 'object') return;
    document.querySelectorAll('input, textarea, select').forEach(function(el, i) {
      var key = el.id || el.name || ('field_' + i);
      var savedValue = state[key];
      if (savedValue !== undefined) {
        if (el.type === 'checkbox') {
          el.checked = !!savedValue;
        } else if (el.type === 'radio') {
          el.checked = (el.value === savedValue);
        } else {
          el.value = savedValue;
        }
      }
    });
  }
  function saveNow() {
    try {
      var state = getAllInputState();
      if (Object.keys(state).length > 0) {
        localStorage.setItem(MODULE_KEY, JSON.stringify({
          timestamp: Date.now(),
          state: state
        }));
      }
    } catch (e) {}
  }
  function debouncedSave() {
    clearTimeout(saveTimeout);
    saveTimeout = setTimeout(saveNow, 800);
  }
  function loadSaved() {
    try {
      var raw = localStorage.getItem(MODULE_KEY);
      if (raw) {
        var parsed = JSON.parse(raw);
        if (parsed && parsed.state) restoreInputState(parsed.state);
      }
    } catch (e) {}
  }
  function init() {
    loadSaved();
    document.addEventListener('input', debouncedSave);
    document.addEventListener('change', debouncedSave);
    window.addEventListener('pagehide', saveNow);
  }
  if (document.readyState === 'loading') {
    document.addEventListener('DOMContentLoaded', init);
  } else {
    init();
  }
})();`;return`<!DOCTYPE html>
<html lang="en" style="background: ${f} !important; background-color: ${f} !important;">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>${e.title} | ${r}</title>
  <script src="https://cdn.tailwindcss.com"><\/script>
  <link href="${u.url}" rel="stylesheet">
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }
    html, body {
      background: ${f} !important;
      background-color: ${f} !important;
      ${u.css}
    }
    body {
      min-height: 100vh;
    }
    .custom-scroll::-webkit-scrollbar { width: 6px; }
    .custom-scroll::-webkit-scrollbar-track { background: ${p?`#e2e8f0`:`#1e293b`}; }
    .custom-scroll::-webkit-scrollbar-thumb { background: ${p?`#94a3b8`:`#475569`}; border-radius: 3px; }
    .glass { background: ${p?`rgba(255, 255, 255, 0.8)`:`rgba(15, 23, 42, 0.8)`}; backdrop-filter: blur(10px); }
    .material-card { transition: all 0.2s; }
    .material-card:hover { transform: translateY(-2px); box-shadow: 0 10px 40px rgba(0,0,0,0.3); }
    .assessment-container [class*="bg-slate-9"],
    .assessment-container [class*="bg-slate-8"],
    .assessment-container [class*="bg-slate-7"],
    .assessment-container [class*="bg-slate-6"],
    .assessment-container [class*="bg-gray-9"],
    .assessment-container [class*="bg-gray-8"],
    .assessment-container [class*="bg-gray-7"] {
      background: var(--cf-container-bg) !important;
    }
    :root { --cf-container-bg: ${te}; }
    ${ae}
    ${s?`\n    /* Custom CSS from Settings */\n    ${s}`:``}
  </style>
  <script>
    (function() {
      function setBackground() {
        document.documentElement.style.backgroundColor = '${f}';
        document.documentElement.style.background = '${f}';
        document.body.style.backgroundColor = '${f}';
        document.body.style.background = '${f}';
      }
      setBackground();
      if (document.readyState === 'loading') {
        document.addEventListener('DOMContentLoaded', setBackground);
      }
      setTimeout(setBackground, 100);
      setTimeout(setBackground, 500);
    })();
  <\/script>
</head>
<body class="${m} custom-scroll" style="background: ${f} !important; background-color: ${f} !important;">
  <header class="sticky top-0 z-50 ${p?`bg-white/95`:`bg-slate-900/95`} backdrop-blur border-b ${g}">
    <div class="max-w-6xl mx-auto px-6 py-4 flex items-center justify-between">
      <a href="../index.html" class="flex items-center gap-2 ${h} hover:text-${i}-400 transition-colors text-sm font-bold">
        <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"></path>
        </svg>
        Back to Course
      </a>
      <h1 class="text-sm font-bold ${m} uppercase tracking-wider">${e.title}</h1>
    </div>
  </header>

  <main class="max-w-6xl mx-auto px-6 py-8">
    ${ie}
  </main>

  ${F}

  <script>
    ${se}
    ${oe}
    ${ce}
  <\/script>
</body>
</html>`},Mf=({projectData:e,setProjectData:t})=>{let n=e?.[`Course Settings`]?.layoutSettings||{showSidebar:!0,showFooter:!0,navPosition:`side`},r=(e,n)=>{t(t=>({...t,"Course Settings":{...t[`Course Settings`],layoutSettings:{showSidebar:!0,showFooter:!0,navPosition:`side`,...t[`Course Settings`]?.layoutSettings||{},[e]:n}}}))};return(0,Q.jsx)(`div`,{className:`space-y-6 animate-in fade-in duration-500`,children:(0,Q.jsxs)(`div`,{className:`bg-slate-800 p-6 rounded-lg border border-slate-700`,children:[(0,Q.jsx)(`div`,{className:`flex items-center justify-between mb-4`,children:(0,Q.jsxs)(`h2`,{className:`text-xl font-bold text-white flex items-center gap-2`,children:[(0,Q.jsx)(ue,{className:`text-blue-400`}),` Phase 0: Master Shell`]})}),(0,Q.jsxs)(`div`,{className:`space-y-4`,children:[(0,Q.jsxs)(`div`,{className:`p-4 bg-slate-900/60 rounded-lg border border-slate-700 space-y-3`,children:[(0,Q.jsxs)(`div`,{className:`flex items-center justify-between`,children:[(0,Q.jsxs)(`div`,{children:[(0,Q.jsx)(`p`,{className:`text-sm font-bold text-white`,children:`Show Sidebar`}),(0,Q.jsx)(`p`,{className:`text-[10px] text-slate-500`,children:`Controls left navigation panel`})]}),(0,Q.jsx)(`button`,{onClick:()=>r(`showSidebar`,!n.showSidebar),className:`px-3 py-1 rounded-full text-xs font-bold border transition-colors ${n.showSidebar?`bg-emerald-600/20 border-emerald-500 text-emerald-300`:`bg-slate-700 border-slate-600 text-slate-400`}`,children:n.showSidebar?`On`:`Off`})]}),(0,Q.jsxs)(`div`,{className:`flex items-center justify-between`,children:[(0,Q.jsxs)(`div`,{children:[(0,Q.jsx)(`p`,{className:`text-sm font-bold text-white`,children:`Show Footer`}),(0,Q.jsx)(`p`,{className:`text-[10px] text-slate-500`,children:`Controls global footer bar`})]}),(0,Q.jsx)(`button`,{onClick:()=>r(`showFooter`,!n.showFooter),className:`px-3 py-1 rounded-full text-xs font-bold border transition-colors ${n.showFooter?`bg-emerald-600/20 border-emerald-500 text-emerald-300`:`bg-slate-700 border-slate-600 text-slate-400`}`,children:n.showFooter?`On`:`Off`})]}),(0,Q.jsxs)(`div`,{children:[(0,Q.jsx)(`label`,{className:`block text-[10px] font-bold text-slate-400 uppercase mb-2`,children:`Navigation Style`}),(0,Q.jsxs)(`select`,{value:n.navPosition,onChange:e=>r(`navPosition`,e.target.value),className:`w-full bg-slate-950 border border-slate-700 rounded p-2 text-white text-xs`,children:[(0,Q.jsx)(`option`,{value:`side`,children:`Side (Left)`}),(0,Q.jsx)(`option`,{value:`top`,children:`Top (Header)`})]})]})]}),(0,Q.jsx)(`p`,{className:`text-[10px] text-slate-500 italic`,children:`Changes here update the Master Shell layout without touching raw HTML.`})]})]})})},Nf=({onImport:e})=>{let[t,n]=$(``),[r,i]=$([]),[a,o]=$({}),s=(e,t)=>{if(!t)return``;let n=e.split(`
`),r=[],i=!1,a=0,o=RegExp(`^(function|const|let|var)\\s+${t}`),s=RegExp(`^(function|const|let|var)\\s+`);for(let e=0;e<n.length;e++){let t=n[e],c=t.trim();if(o.test(c)&&(i=!0),i&&s.test(c)&&!o.test(c)&&a===0&&(i=!1),i){r.push(t);let e=c.replace(/"[^"]*"/g,``).replace(/'[^']*'/g,``).replace(/`[^`]*`/g,``),n=(e.match(/{/g)||[]).length,i=(e.match(/}/g)||[]).length;a+=n-i}}return r.join(`
`)};return(0,Q.jsx)(`div`,{className:`space-y-4 animate-in fade-in slide-in-from-right-8 mb-8`,children:(0,Q.jsxs)(`div`,{className:`bg-indigo-900/20 p-6 rounded-xl border border-indigo-500/50`,children:[(0,Q.jsxs)(`h3`,{className:`text-sm font-bold text-indigo-400 mb-2 flex items-center gap-2`,children:[(0,Q.jsx)(re,{size:16}),` Batch Monolith Importer (V7-GapParser)`]}),(0,Q.jsxs)(`p`,{className:`text-xs text-slate-400 mb-4`,children:[`Paste the full `,(0,Q.jsx)(`code`,{className:`bg-slate-800 px-1 rounded`,children:`index.html`}),` code below. This version uses line-by-line Gap Parsing to safely extract code blocks.`]}),r.length===0?(0,Q.jsxs)(Q.Fragment,{children:[(0,Q.jsx)(`textarea`,{value:t,onChange:e=>n(e.target.value),className:`w-full bg-slate-950 border border-slate-700 rounded-lg p-3 text-xs text-slate-300 font-mono h-48 focus:border-indigo-500 outline-none resize-y mb-4`,placeholder:`<!DOCTYPE html>...`}),(0,Q.jsx)(`button`,{onClick:()=>{try{let e=new DOMParser().parseFromString(t,`text/html`),n=Array.from(e.querySelectorAll(`script`)).map(e=>e.textContent).join(`

`),r=Array.from(e.querySelectorAll(`[id^="view-"]`)),a=Array.from(e.querySelectorAll(`.nav-item`)),c=r.map(e=>{let t=e.id,r=t.replace(`view-`,``),i=r.toUpperCase(),o=a.find(e=>{let t=e.getAttribute(`onclick`)||``;return t.includes(`'${r}'`)||t.includes(`"${r}"`)||e.id===`nav-${r}`});o&&(i=o.innerText.trim());let c=e.outerHTML.match(/onclick="([a-zA-Z0-9]+)_[a-zA-Z0-9]+\(/),l=c?c[1]+`_`:null,u=``;if(l)u=s(n,l);else if(t===`view-materials`){let e=n.match(/function openPDF[\s\S]*?closeViewer[\s\S]*?}/);e&&(u=e[0])}return{id:t,title:i,html:e.innerHTML.trim(),script:u,selected:!0}});i(c);let l={};c.forEach((e,t)=>l[t]=!0),o(l)}catch(e){alert(`Error parsing HTML: `+e.message)}},disabled:!t,className:`w-full bg-indigo-600 hover:bg-indigo-500 text-white font-bold py-3 rounded-lg text-xs disabled:opacity-50`,children:`Scan Code`})]}):(0,Q.jsxs)(`div`,{className:`space-y-4`,children:[(0,Q.jsx)(`div`,{className:`max-h-96 overflow-y-auto space-y-2 pr-2 custom-scroll bg-slate-950/50 p-2 rounded-lg border border-slate-800`,children:r.map((e,t)=>(0,Q.jsxs)(`label`,{className:`flex items-start gap-3 p-3 bg-slate-900 rounded border border-slate-800 cursor-pointer hover:border-indigo-500 transition-colors group`,children:[(0,Q.jsx)(`input`,{type:`checkbox`,checked:!!a[t],onChange:e=>o({...a,[t]:e.target.checked}),className:`mt-1`}),(0,Q.jsxs)(`div`,{className:`flex-1`,children:[(0,Q.jsxs)(`div`,{className:`flex justify-between items-center`,children:[(0,Q.jsx)(`div`,{className:`text-xs font-bold text-white group-hover:text-indigo-300 transition-colors`,children:e.title}),(0,Q.jsx)(`div`,{className:`text-[9px] px-1.5 py-0.5 rounded font-bold uppercase ${e.script.length>50?`bg-emerald-900/30 text-emerald-400`:`bg-rose-900/30 text-rose-400`}`,children:e.script.length>50?`JS Found`:`No JS / Global`})]}),(0,Q.jsx)(`div`,{className:`text-[10px] text-slate-500 font-mono mt-1`,children:e.id}),e.script.length>0&&(0,Q.jsxs)(`div`,{className:`mt-2 p-2 bg-black/50 rounded text-[9px] font-mono text-slate-600 truncate border border-slate-800`,children:[e.script.substring(0,100).replace(/\n/g,` `),`...`]})]})]},t))}),(0,Q.jsxs)(`div`,{className:`flex gap-2`,children:[(0,Q.jsx)(`button`,{onClick:()=>i([]),className:`flex-1 bg-slate-800 text-slate-400 py-3 rounded-lg text-xs font-bold hover:bg-slate-700 hover:text-white transition-colors`,children:`Cancel`}),(0,Q.jsxs)(`button`,{onClick:()=>{e(r.filter((e,t)=>a[t])),i([]),n(``)},className:`flex-1 bg-emerald-600 text-white py-3 rounded-lg text-xs font-bold shadow-lg shadow-emerald-900/20 hover:bg-emerald-500 transition-colors`,children:[`Import `,Object.values(a).filter(e=>e).length,` Modules`]})]})]})]})})},Pf=e=>{let t=[];try{let n=e.trim().replace(/^```json/,``).replace(/^```/,``).replace(/```$/,``),r=JSON.parse(n);return t=(Array.isArray(r)?r:r.questions||r.data||[]).map(e=>{let t=String(e.question||e.q||`Untitled Question`),n=Array.isArray(e.options)?e.options.map(e=>String(e||``)):[],r=n.length>0;return{type:r?`multiple-choice`:`long-answer`,question:t,options:n,correct:r?typeof e.correct==`string`?isNaN(e.correct)?e.correct.toUpperCase().charCodeAt(0)-65:parseInt(e.correct):e.correct||0:0}}),{data:t,success:!0}}catch{let t=e.split(`
`).filter(e=>e.trim()),n=[],r=null;return t.forEach(e=>{let t=e.trim();/^(Q?\d+[\.)]|Question\s+\d+)/i.test(t)?(r&&n.push(r),r={type:`long-answer`,question:t.replace(/^(Q?\d+[\.)]|Question\s+\d+)\s*/,``),options:[],correct:0}):/^[a-d][\.)\)]\s/i.test(t)||t.startsWith(`- `)?r&&(r.options.length===0&&(r.type=`multiple-choice`),r.options.push(t.replace(/^[a-d][\.)\)]\s/i,``).replace(/^- \s/,``))):/^(ans|answer|correct):\s*([a-d])/i.test(t)&&r?r.correct=t.match(/([a-d])/i)[1].toUpperCase().charCodeAt(0)-65:r&&r.options.length===0&&(r.question+=` `+t)}),r&&n.push(r),{data:n,success:n.length>0}}},Ff=({projectData:e,setProjectData:t,scannerNotes:n,setScannerNotes:r,addMaterial:i,editMaterial:a,deleteMaterial:o,moveMaterial:s,toggleMaterialHidden:c,addAssessment:l,editAssessment:u,deleteAssessment:d,moveAssessment:f,toggleAssessmentHidden:p,addQuestionToMaster:m,moveQuestion:h,deleteQuestion:g,updateQuestion:_,clearMasterAssessment:v,masterQuestions:y,setMasterQuestions:b,masterAssessmentTitle:x,setMasterAssessmentTitle:S,currentQuestionType:C,setCurrentQuestionType:w,currentQuestion:T,setCurrentQuestion:E,editingQuestion:D,setEditingQuestion:k,generateMixedAssessment:A,generatedAssessment:j,setGeneratedAssessment:M,assessmentType:N,setAssessmentType:ie,assessmentTitle:F,setAssessmentTitle:ce,quizQuestions:de,setQuizQuestions:fe,printInstructions:pe,setPrintInstructions:me,editingAssessment:he,setEditingAssessment:Ce,migrateCode:we,setMigrateCode:De,migratePrompt:Ae,setMigratePrompt:Pe,migrateOutput:Fe,setMigrateOutput:Ie,isVaultOpen:Le,setIsVaultOpen:Re,setVaultTargetField:ze,vaultTargetField:Be})=>{let[Ve,He]=$(`MODULE_MANAGER`),[Ue,We]=$(`B`),[Ge,Ke]=$(``),[qe,Je]=$([]),[Ye,Xe]=$(`standalone`),[Ze,Qe]=$(``),[$e,et]=$(``),[tt,nt]=$(``),[rt,it]=$(``),[at,ot]=$(`iframe`),[st,ct]=$(null),[lt,ut]=$(``),[dt,ft]=$(!1),[pt,mt]=$(null),[ht,gt]=$(``),[_t,vt]=$(``),[yt,I]=$(``),[bt,xt]=$(``),[St,Ct]=$(null),[wt,Tt]=$(null),[Et,Dt]=$(!1),[Ot,kt]=$(``),At=[{value:``,label:`Use course default`},{value:`white`,label:`White`,swatch:`bg-white border-slate-300`,text:`text-slate-900`},{value:`slate-900`,label:`Slate 900`,swatch:`bg-slate-900 border-slate-700`,text:`text-white`},{value:`slate-800`,label:`Slate 800`,swatch:`bg-slate-800 border-slate-700`,text:`text-white`},{value:`slate-700`,label:`Slate 700`,swatch:`bg-slate-700 border-slate-600`,text:`text-white`},{value:`slate-600`,label:`Slate 600`,swatch:`bg-slate-600 border-slate-500`,text:`text-white`},{value:`slate-400`,label:`Slate 400`,swatch:`bg-slate-400 border-slate-300`,text:`text-white`},{value:`slate-300`,label:`Slate 300`,swatch:`bg-slate-300 border-slate-200`,text:`text-slate-900`},{value:`slate-200`,label:`Slate 200`,swatch:`bg-slate-200 border-slate-100`,text:`text-slate-900`},{value:`gray-900`,label:`Gray 900`,swatch:`bg-gray-900 border-gray-700`,text:`text-white`},{value:`gray-700`,label:`Gray 700`,swatch:`bg-gray-700 border-gray-600`,text:`text-white`},{value:`black`,label:`Black`,swatch:`bg-black border-slate-700`,text:`text-white`}],jt=[{value:``,label:`Use course default`},{value:`dark`,label:`Dark`},{value:`light`,label:`Light`},{value:`muted`,label:`Muted`},{value:`high-contrast-light`,label:`High contrast (light)`},{value:`high-contrast-dark`,label:`High contrast (dark)`}],[Mt,L]=$(null),[R,z]=$({number:``,title:``,description:``,viewUrl:``,downloadUrl:``,color:`slate`,mediaType:`number`,themeOverride:null,assignedModules:[],hasDigitalContent:!1,digitalContent:null,digitalContentJson:``}),[Nt,Pt]=$(``),[Ft,It]=$(``),[Lt,Rt]=$(null),[zt,Bt]=$(null),[Vt,Ht]=$(`MODULE`),Ut=e=>{let n=e.map(e=>{let t={id:e.id,html:e.html,script:e.script};return{id:e.id||`item-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,title:e.title,code:t,history:[{timestamp:new Date().toISOString(),title:e.title,code:t}]}});t(e=>({...e,"Current Course":{...e[`Current Course`],modules:[...e[`Current Course`].modules,...n]}})),Ct(`success`),setTimeout(()=>Ct(null),3e3),Dt(!1)},Wt=e=>{Be===`view`?z(t=>({...t,viewUrl:e.path})):Be===`download`&&z(t=>({...t,downloadUrl:e.path})),Re(!1),ze(null)},Gt=()=>{fe([...de,{question:``,options:[``,``,``,``],correct:0}])},Kt=(e,t,n)=>{let r=[...de];if(t===`question`||t===`correct`)r[e][t]=n;else if(t.startsWith(`option-`)){let i=parseInt(t.split(`-`)[1]);r[e].options[i]=n}fe(r)},qt=()=>{let t=`quiz_${Date.now()}`,n=e[`Course Settings`]||{},r=n.backgroundColor||`slate-950`,i=n.accentColor||`sky`,a=r.includes(`white`)||r.includes(`slate-100`)||r.includes(`slate-50`),o=n.headingTextColor||(a?`slate-900`:`white`),s=n.secondaryTextColor||(a?`slate-600`:`slate-400`),c=n.assessmentTextColor||`white`,l=n.buttonColor||`${i}-600`,u=e=>e.startsWith(`text-`)?e:`text-${e}`,d=e=>e.startsWith(`bg-`)?e.slice(3):e,f=u(o),p=u(s),m=u(c),h=m,g=d(l),_=`bg-${g}`,v=g.endsWith(`-600`)?`hover:bg-${g.replace(/-600$/,`-500`)}`:`hover:bg-${g}`,y=a?`text-slate-900`:`text-white`,b=a?`bg-white`:`bg-slate-900`,x=a?`border-slate-300`:`border-slate-700`,S=a?`bg-slate-100`:`bg-slate-800`,C=a?`hover:bg-slate-200`:`hover:bg-slate-750`,w=a?`bg-white`:`bg-slate-950`,T=m,E=a?`bg-white`:`bg-slate-900`,D=a?`border-slate-300`:`border-slate-700`;if(N===`quiz`){let e=de.map((e,t)=>`
      <div class="mb-8 p-6 ${b} rounded-xl border ${x}">
        <h3 class="text-lg font-bold ${f} mb-4">${t+1}. ${e.question}</h3>
        <div class="space-y-2">
          ${e.options.map((e,n)=>`
            <label class="flex items-center gap-3 p-3 ${S} rounded-lg cursor-pointer ${C} transition-colors">
              <input type="radio" name="q${t}" value="${n}" class="w-4 h-4 assessment-input" />
              <span class="${h}">${e}</span>
            </label>
          `).join(``)}
        </div>
      </div>
    `).join(``);de.map(e=>e.correct);let n=`<div id="${t}" class="w-full h-full custom-scroll p-8">
      <div class="max-w-4xl mx-auto">
        <header class="mb-8">
          <h1 class="text-3xl font-black ${f} italic mb-2">${F}</h1>
          <p class="text-sm ${p}">Select the best answer for each question.</p>
        </header>
        <form id="${t}-form" class="space-y-6">
          ${e}
        </form>
        
        <!-- Action Buttons -->
        <div class="flex flex-wrap gap-3 mt-8 no-print">
          <button type="button" onclick="${t}_reset()" class="${_} ${v} ${y} font-bold py-3 px-6 rounded-lg flex items-center gap-2">
             Reset
          </button>
          <button type="button" onclick="${t}_generateReport()" class="${_} ${v} ${y} font-bold py-3 px-6 rounded-lg flex items-center gap-2">
             Print & Submit
          </button>
        </div>
        
        <!-- Reset Confirmation Modal -->
        <div id="${t}-reset-modal" class="fixed inset-0 bg-black/80 z-50 flex items-center justify-center hidden">
          <div class="${E} border ${D} rounded-xl p-6 max-w-md mx-4">
            <h3 class="text-lg font-bold ${f} mb-4">Reset Assessment?</h3>
            <p class="${h} mb-6">Are you sure you want to reset all your answers? This cannot be undone.</p>
            <div class="flex gap-3">
              <button onclick="document.getElementById('${t}-reset-modal').classList.add('hidden')" class="flex-1 ${_} ${v} ${y} font-bold py-2 rounded">Cancel</button>
              <button onclick="${t}_confirmReset()" class="flex-1 bg-rose-600 hover:bg-rose-500 text-white font-bold py-2 rounded">Reset</button>
            </div>
          </div>
        </div>
      </div>
    </div>`,r=`
    // Reset function - shows confirmation modal
    function ${t}_reset() {
      var modal = document.getElementById('${t}-reset-modal');
      if (modal) modal.classList.remove('hidden');
    }
    
    // Confirm Reset
    function ${t}_confirmReset() {
      document.getElementById('${t}-reset-modal').classList.add('hidden');
      var form = document.getElementById('${t}-form');
      if (form) form.reset();
    }
    
    // Generate Report - creates a clean printable page
    function ${t}_generateReport() {
      var container = document.getElementById('${t}');
      if (!container) { alert('Assessment not found'); return; }
      
      // Build questions HTML with selected answers
      var questionsHTML = '';
      var questions = container.querySelectorAll('[class*="mb-8 p-6"]');
      var qNum = 1;
      
      questions.forEach(function(q) {
        var questionText = q.querySelector('h3')?.textContent || 'Question ' + qNum;
        var selectedRadio = q.querySelector('input[type="radio"]:checked');
        var answer = '';
        
        if (selectedRadio) {
          var label = selectedRadio.closest('label');
          answer = label ? label.textContent.trim() : 'Selected Option';
        }
        
        if (questionText.trim()) {
          questionsHTML += '<div style="margin-bottom:25px; border-left:4px solid #333; padding-left:15px;">' +
            '<h3 style="font-size:14px; font-weight:bold; margin-bottom:10px; color:#333;">' + questionText + '</h3>' +
            '<div style="background:#f9f9f9; padding:15px; border-radius:8px; border:1px solid #ddd; min-height:40px; font-size:13px;">' + 
            (answer || '<em style="color:#999;">No answer selected</em>') + 
            '</div></div>';
          qNum++;
        }
      });
      
      var printHTML = '<!DOCTYPE html><html><head><title>${F} - Submission</title>' +
        '<style>body { font-family: Arial, sans-serif; padding: 40px; color: #333; background: white; line-height: 1.5; max-width: 800px; margin: 0 auto; }' +
        '.header { border-bottom: 4px solid #333; padding-bottom: 15px; margin-bottom: 25px; }' +
        '.header h1 { font-size: 24px; font-weight: 900; text-transform: uppercase; font-style: italic; margin: 0; }' +
        '</style></head><body>' +
        '<div class="header"><h1>${F}</h1><p style="font-size:11px; text-transform:uppercase; letter-spacing:2px; color:#666; margin-top:5px;">Multiple Choice Assessment</p></div>' +
        '<div class="questions">' + questionsHTML + '</div>' +
        '<div style="margin-top:40px; border-top:2px solid #333; padding-top:20px; text-align:center;">' +
        '<p style="font-size:10px; text-transform:uppercase; letter-spacing:2px; color:#999;">End of Submission</p></div>' +
        '<script>window.onload = function() { setTimeout(function() { window.print(); }, 500); }<\\/script></body></html>';
      
      var pw = window.open('', '_blank');
      if (pw) { pw.document.open(); pw.document.write(printHTML); pw.document.close(); }
      else { alert('Please allow popups to print.'); }
    }
    `;M(JSON.stringify({id:t,html:n,script:r,type:`quiz`,title:F},null,2))}else if(N===`longanswer`){let e=`<div id="${t}" class="w-full h-full custom-scroll p-8">
        <div class="max-w-4xl mx-auto">
          <header class="mb-8">
            <h1 class="text-3xl font-black ${f} italic mb-2 print-title">${F}</h1>
            <p class="text-sm ${p} no-print">Complete all questions. Your responses are auto-saved.</p>
          </header>
          
          <!-- Student Info -->
          <div class="grid grid-cols-2 gap-4 mb-8 p-6 ${b} rounded-xl border ${x} print-header">
            <div>
              <label class="block text-xs font-bold ${p} uppercase mb-2">Student Name</label>
              <input 
                type="text" 
                id="${t}-student-name"
                placeholder="Enter your name..."
                class="w-full ${w} border ${x} rounded p-3 ${T} text-sm focus:border-${i}-500 focus:outline-none assessment-input"
              />
            </div>
            <div>
              <label class="block text-xs font-bold ${p} uppercase mb-2">Date</label>
              <input 
                type="date" 
                id="${t}-student-date"
                class="w-full ${w} border ${x} rounded p-3 ${T} text-sm focus:border-${i}-500 focus:outline-none assessment-input"
              />
            </div>
          </div>

          <!-- Questions -->
          <div class="space-y-6">
            ${de.map((e,n)=>`
        <div class="mb-8 p-6 ${b} rounded-xl border ${x} print-section">
          <h3 class="text-lg font-bold ${f} mb-4 print-question">${n+1}. ${e.question}</h3>
          <textarea 
            id="${t}-answer-${n}" 
            placeholder="Type your answer here..."
            class="w-full h-48 ${w} border ${x} rounded-lg p-4 ${T} resize-none focus:border-${i}-500 focus:outline-none print-response assessment-input"
          ></textarea>
          <p class="text-xs ${p} italic mt-2 no-print">Auto-saved to browser</p>
        </div>
      `).join(``)}
          </div>

          <!-- Action Buttons -->
          <div class="flex flex-wrap gap-3 mt-8 no-print">
            <button type="button" onclick="${t}_reset()" class="${_} ${v} ${y} font-bold py-3 px-6 rounded-lg flex items-center gap-2">
              Reset
            </button>
            <button type="button" onclick="${t}_download()" class="${_} ${v} ${y} font-bold py-3 px-6 rounded-lg flex items-center gap-2">
              Download Backup
            </button>
            <button type="button" onclick="document.getElementById('${t}-upload').click()" class="${_} ${v} ${y} font-bold py-3 px-6 rounded-lg flex items-center gap-2">
              Upload Backup
            </button>
            <button type="button" onclick="${t}_generateReport()" class="${_} ${v} ${y} font-bold py-3 px-6 rounded-lg flex items-center gap-2">
              Print & Submit
            </button>
          </div>
          <input type="file" id="${t}-upload" accept=".json" style="display: none;" onchange="${t}_loadBackup(this)" />

          <!-- Status Messages -->
          <div id="${t}-loaded" class="hidden mt-6 p-4 rounded-xl bg-blue-900/20 border border-blue-500">
            <p class="text-blue-400 font-bold">Backup loaded successfully!</p>
          </div>

          <!-- Reset Confirmation Modal -->
          <div id="${t}-reset-modal" class="fixed inset-0 bg-black/80 z-50 flex items-center justify-center hidden">
            <div class="${E} border ${D} rounded-xl p-6 max-w-md mx-4">
              <h3 class="text-lg font-bold ${f} mb-4">Reset Assessment?</h3>
              <p class="${h} mb-6">Are you sure you want to reset all your answers? This cannot be undone.</p>
              <div class="flex gap-3">
                <button onclick="document.getElementById('${t}-reset-modal').classList.add('hidden')" class="flex-1 ${_} ${v} ${y} font-bold py-2 rounded">Cancel</button>
                <button onclick="${t}_confirmReset()" class="flex-1 bg-rose-600 hover:bg-rose-500 text-white font-bold py-2 rounded">Reset</button>
              </div>
            </div>
          </div>

          <!-- Print Instructions -->
          <div class="mt-8 p-4 bg-amber-900/20 border border-amber-500/30 rounded-lg no-print">
            <p class="text-amber-300 text-sm">
              <strong>Instructions:</strong> Complete all questions, then click "Print & Submit" to generate a clean printable report.
            </p>
          </div>
        </div>
      </div>`,n=`
      var ${t}_count = ${de.length};
      
      // Initialize: Load saved data on page load
      window.addEventListener('load', function() {
        ${t}_loadFromLocalStorage();
      });
      
      // Reset function - shows confirmation modal
      function ${t}_reset() {
        var modal = document.getElementById('${t}-reset-modal');
        if (modal) modal.classList.remove('hidden');
      }
      
      // Confirm Reset
      function ${t}_confirmReset() {
        document.getElementById('${t}-reset-modal').classList.add('hidden');
        var nameField = document.getElementById('${t}-student-name');
        var dateField = document.getElementById('${t}-student-date');
        if (nameField) { nameField.value = ''; localStorage.removeItem('${t}-student-name'); }
        if (dateField) { dateField.value = ''; localStorage.removeItem('${t}-student-date'); }
        for (var i = 0; i < ${t}_count; i++) {
          var textarea = document.getElementById('${t}-answer-' + i);
          if (textarea) { textarea.value = ''; localStorage.removeItem('${t}-answer-' + i); }
        }
      }
      
      // Auto-save on input for all fields
      function ${t}_setupAutoSave() {
        var nameField = document.getElementById('${t}-student-name');
        var dateField = document.getElementById('${t}-student-date');
        if (nameField) {
          nameField.addEventListener('input', function() {
            localStorage.setItem('${t}-student-name', this.value);
          });
        }
        if (dateField) {
          dateField.addEventListener('input', function() {
            localStorage.setItem('${t}-student-date', this.value);
          });
        }
        
        for (var i = 0; i < ${t}_count; i++) {
          (function(idx) {
            var textarea = document.getElementById('${t}-answer-' + idx);
            if (textarea) {
              textarea.addEventListener('input', function() {
                localStorage.setItem('${t}-answer-' + idx, this.value);
              });
            }
          })(i);
        }
      }
      
      // Load from localStorage
      function ${t}_loadFromLocalStorage() {
        var nameField = document.getElementById('${t}-student-name');
        var dateField = document.getElementById('${t}-student-date');
        
        if (nameField) {
          var savedName = localStorage.getItem('${t}-student-name');
          if (savedName) nameField.value = savedName;
        }
        if (dateField) {
          var savedDate = localStorage.getItem('${t}-student-date');
          if (savedDate) dateField.value = savedDate;
        }
        
        for (var i = 0; i < ${t}_count; i++) {
          var textarea = document.getElementById('${t}-answer-' + i);
          if (textarea) {
            var saved = localStorage.getItem('${t}-answer-' + i);
            if (saved) textarea.value = saved;
          }
        }
        
        ${t}_setupAutoSave();
      }
      
      // Download Backup
      function ${t}_download() {
        var data = {
          studentName: document.getElementById('${t}-student-name')?.value || '',
          studentDate: document.getElementById('${t}-student-date')?.value || '',
          answers: []
        };
        
        for (var i = 0; i < ${t}_count; i++) {
          var textarea = document.getElementById('${t}-answer-' + i);
          data.answers.push(textarea ? textarea.value : '');
        }
        
        var blob = new Blob([JSON.stringify(data, null, 2)], { type: 'application/json' });
        var url = URL.createObjectURL(blob);
        var a = document.createElement('a');
        a.href = url;
        a.download = '${F.replace(/[^a-z0-9]/gi,`_`)}_backup.json';
        a.click();
        URL.revokeObjectURL(url);
      }
      
      // Load Backup
      function ${t}_loadBackup(input) {
        var file = input.files[0];
        if (!file) return;
        
        var reader = new FileReader();
        reader.onload = function(e) {
          try {
            var data = JSON.parse(e.target.result);
            
            var nameField = document.getElementById('${t}-student-name');
            var dateField = document.getElementById('${t}-student-date');
            
            if (nameField && data.studentName) {
              nameField.value = data.studentName;
              localStorage.setItem('${t}-student-name', data.studentName);
            }
            if (dateField && data.studentDate) {
              dateField.value = data.studentDate;
              localStorage.setItem('${t}-student-date', data.studentDate);
            }
            
            data.answers.forEach(function(answer, i) {
              var textarea = document.getElementById('${t}-answer-' + i);
              if (textarea) {
                textarea.value = answer;
                localStorage.setItem('${t}-answer-' + i, answer);
              }
            });
            
            var loadedDiv = document.getElementById('${t}-loaded');
            if (loadedDiv) {
              loadedDiv.classList.remove('hidden');
              setTimeout(function() { loadedDiv.classList.add('hidden'); }, 3000);
            }
          } catch(err) {
            alert('Error loading backup file.');
          }
        };
        reader.readAsText(file);
      }
      
      // Generate Report - creates a clean printable page in new window
      function ${t}_generateReport() {
        var container = document.getElementById('${t}');
        if (!container) { alert('Assessment not found'); return; }
        
        var studentName = document.getElementById('${t}-student-name')?.value || 'Not Provided';
        var studentDate = document.getElementById('${t}-student-date')?.value || new Date().toLocaleDateString();
        
        var questionsHTML = '';
        var questions = container.querySelectorAll('.print-section');
        
        questions.forEach(function(q, idx) {
          var questionText = q.querySelector('.print-question')?.textContent || 'Question ' + (idx+1);
          var textarea = q.querySelector('textarea');
          var answer = textarea ? textarea.value : '';
          
          questionsHTML += '<div style="margin-bottom:25px; border-left:4px solid #333; padding-left:15px;">' +
            '<h3 style="font-size:14px; font-weight:bold; margin-bottom:10px; color:#333;">' + questionText + '</h3>' +
            '<div style="background:#f9f9f9; padding:15px; border-radius:8px; border:1px solid #ddd; min-height:80px; white-space:pre-wrap; font-size:13px;">' + 
            (answer || '<em style="color:#999;">No answer provided</em>') + 
            '</div></div>';
        });
        
        var printHTML = '<!DOCTYPE html><html><head><title>${F} - Submission</title>' +
          '<style>body { font-family: Arial, sans-serif; padding: 40px; color: #333; background: white; line-height: 1.5; max-width: 800px; margin: 0 auto; }' +
          '.header { border-bottom: 4px solid #333; padding-bottom: 15px; margin-bottom: 25px; }' +
          '.header h1 { font-size: 24px; font-weight: 900; text-transform: uppercase; font-style: italic; margin: 0; }' +
          '.student-info { display: grid; grid-template-columns: 1fr 1fr; gap: 15px; margin-bottom: 30px; padding: 20px; background: #f5f5f5; border-radius: 8px; }' +
          '.student-info div { font-size: 14px; }' +
          '.student-info strong { display: block; font-size: 11px; text-transform: uppercase; color: #666; margin-bottom: 4px; }</style></head><body>' +
          '<div class="header"><h1>${F}</h1><p style="font-size:11px; text-transform:uppercase; letter-spacing:2px; color:#666; margin-top:5px;">Long Answer Assessment</p></div>' +
          '<div class="student-info"><div><strong>Student Name</strong>' + studentName + '</div><div><strong>Date</strong>' + studentDate + '</div></div>' +
          '<div class="questions">' + questionsHTML + '</div>' +
          '<div style="margin-top:40px; border-top:2px solid #333; padding-top:20px; text-align:center;">' +
          '<p style="font-size:10px; text-transform:uppercase; letter-spacing:2px; color:#999;">End of Submission</p></div>' +
          '<script>window.onload = function() { setTimeout(function() { window.print(); }, 500); }<\\/script></body></html>';
        
        var pw = window.open('', '_blank');
        if (pw) { pw.document.open(); pw.document.write(printHTML); pw.document.close(); }
        else { alert('Please allow popups to print.'); }
      }
      `;M(JSON.stringify({id:t,html:e,script:n,type:`longanswer`,title:F},null,2))}else if(N===`print`){let e=`<div id="${t}" class="w-full h-full custom-scroll p-8">
        <div class="max-w-4xl mx-auto">
          <header class="mb-8">
            <h1 class="text-3xl font-black ${f} italic mb-2">${F}</h1>
            <p class="text-sm ${p}">Complete this assignment and submit to your instructor.</p>
          </header>
          <div class="p-8 ${b} rounded-xl border ${x}">
            <h3 class="text-lg font-bold ${f} mb-4">Instructions:</h3>
            <ol class="list-decimal list-inside space-y-2 ${h} mb-8">
              ${pe||`<li>Complete all required work on a separate sheet</li>
              <li>Review your answers carefully</li>
              <li>Print this page as a cover sheet</li>
              <li>Attach your work and submit</li>`}
            </ol>
            <div class="border-t ${x} pt-6 space-y-4">
              <div><span class="font-bold ${f}">Student Name:</span> <span class="inline-block border-b ${x} w-64 ml-2"></span></div>
              <div><span class="font-bold ${f}">Date:</span> <span class="inline-block border-b ${x} w-48 ml-2"></span></div>
              <div><span class="font-bold ${f}">Assignment:</span> <span class="text-${i}-400">${F}</span></div>
                </div>
          </div>
          <div class="mt-6 flex gap-4">
            <button type="button" onclick="window.print()" class="${_} ${v} ${y} font-bold py-3 px-8 rounded-lg">Print & Submit</button>
          </div>
          <div class="mt-4 p-4 bg-amber-900/20 border border-amber-500/30 rounded-lg">
            <p class="text-amber-300 text-sm"><strong>Reminder:</strong> Print this page, complete the assignment, and submit to your instructor.</p>
                </div>
            </div>
        </div>`,n=`console.log('Print & Submit assessment loaded: ${F}');`;M(JSON.stringify({id:t,html:e,script:n,type:`print`,title:F},null,2)),me(``)}},Jt=(e=null)=>{Tt(null);let n=e||yt,r=bt;if(!n||!r){Tt(`Missing Title or Code content.`);return}let i=n;try{typeof n==`string`&&(n.trim().startsWith(`{`)||n.trim().startsWith(`[`))&&(i=JSON.parse(n))}catch{Tt(`Invalid JSON format. Please check your syntax.`);return}let a={id:ht||(i.id?i.id:`item-${Date.now()}`),title:r,code:i,history:[{timestamp:new Date().toISOString(),title:r,code:i}]},o=kf(a,!0);if(!o.isValid){Tt(`Validation failed: `+o.errors.join(`, `)),o.warnings.length>0&&console.warn(`Module warnings:`,o.warnings);return}o.warnings.length>0&&console.warn(`Module warnings:`,o.warnings),t(e=>{let t={...e};if(Ve===`MODULE`||Ve===`ASSESSMENT`||Ve===`AI_MODULE`&&Vt===`MODULE`){let e=t[`Current Course`].modules||[];t[`Current Course`]={...t[`Current Course`],modules:[...e,a]}}else t[`Global Toolkit`]=[...t[`Global Toolkit`]||[],a];return t}),I(``),xt(``),gt(``),vt(``),Ct(`success`),setTimeout(()=>Ct(null),3e3)},Yt=()=>{try{if(!tt.trim()){ct(`error`),ut(`Please provide a Module ID (e.g., view-focus-phase3)`);return}if(!Ze.trim()){ct(`error`),ut(`Please paste your complete HTML file`);return}let n=tt.startsWith(`view-`)?tt:`view-${tt}`;if(e[`Current Course`].modules?.find(e=>e.id===n)){ct(`error`),ut(`Module ID "${n}" already exists! Use a different ID.`);return}let r=Ze.trim();if(!r.includes(`<`)||!r.includes(`>`)){ct(`error`),ut(`This does not appear to be valid HTML`);return}let i=rt.trim();if(!i){let e=r.match(/<title>([^<]+)<\/title>/i);i=e?e[1].trim():n.replace(`view-`,``).replace(/-/g,` `)}let a={id:n,title:i,type:`standalone`,rawHtml:r,html:``,css:``,script:``,history:[{timestamp:new Date().toISOString(),title:i,rawHtml:r}]};t(e=>{let t={...e},n=t[`Current Course`].modules||[];return t[`Current Course`]={...t[`Current Course`],modules:[...n,a]},t}),Qe(``),nt(``),it(``),ct(`success`),ut(` Module "${i}" added successfully! It will run in an isolated iframe.`),setTimeout(()=>{ct(null),ut(``)},3e3)}catch(e){ct(`error`),ut(`Error: `+e.message),console.error(`Module manager error:`,e)}},Xt=()=>{try{if(!tt.trim()){ct(`error`),ut(`Please provide a Module ID (e.g., view-biology-ch1)`);return}if(!$e.trim()){ct(`error`),ut(`Please provide a URL`);return}try{new URL($e)}catch{ct(`error`),ut(`Invalid URL format. Please include http:// or https://`);return}let n=tt.startsWith(`view-`)?tt:`view-${tt}`;if(e[`Current Course`].modules?.find(e=>e.id===n)){ct(`error`),ut(`Module ID "${n}" already exists! Use a different ID.`);return}let r={id:n,title:rt||n.replace(`view-`,``).replace(/-/g,` `),type:`external`,url:$e,linkType:at,history:[{timestamp:new Date().toISOString(),title:rt||n.replace(`view-`,``).replace(/-/g,` `),url:$e,linkType:at}]},i=kf(r,!0);if(!i.isValid){ct(`error`),ut(`Validation failed: `+i.errors.join(`, `)),i.warnings.length>0&&console.warn(`Module warnings:`,i.warnings);return}i.warnings.length>0&&console.warn(`Module warnings:`,i.warnings),t(e=>{let t={...e},n=t[`Current Course`].modules||[];return t[`Current Course`]={...t[`Current Course`],modules:[...n,r]},t}),et(``),nt(``),it(``),ct(`success`),ut(` External link module "${r.title}" added successfully!`),setTimeout(()=>{ct(null),ut(``)},3e3)}catch(e){ct(`error`),ut(`Error: `+e.message),console.error(`Module manager error:`,e)}},Zt=async e=>{if(!e||!e.trim()){mt({success:!1,message:`Please enter a URL first`});return}ft(!0),mt(null);try{let t=e.trim();!t.startsWith(`http://`)&&!t.startsWith(`https://`)&&(t=`https://`+t),new URL(t);let n=new AbortController,r=setTimeout(()=>n.abort(),5e3);try{await fetch(t,{method:`HEAD`,mode:`no-cors`,signal:n.signal}),clearTimeout(r),mt({success:!0,message:`URL format is valid. Note: Cannot verify accessibility due to browser security (CORS).`})}catch(e){clearTimeout(r),e.name===`AbortError`?mt({success:!1,message:`Request timed out. URL may be unreachable or slow.`}):mt({success:!0,message:`URL format is valid. Cannot verify accessibility due to browser security.`})}}catch(e){mt({success:!1,message:`Invalid URL format: `+e.message})}finally{ft(!1)}},Qt=`I have a large HTML file I am pasting below. I am not a coder.
Please scan the file and list out every "${Ve===`MODULE`?`Module View`:`Functional Feature`}" inside it.
For each one, tell me:
1. The HTML ID of the container div (e.g., id="view-something").
2. The specific Javascript Function Prefix used (e.g., function p1_saveData -> prefix is "p1_").

Format the output as a simple list I can copy.`;_t.trim()?`${_t}`:`${ht}`;let $t=`I have a large "Monolith" HTML file (which I will paste below). 
I need to extract ONE specific ${Ve.toLowerCase()} from it to create a standalone component file.

**Task:**
1. Extract the HTML Element with ID: "${ht}".
2. Extract ALL JavaScript logic required for this element to function.
3. **CRITICAL RE-FACTORING STEPS:**
   - **Change Variables to VAR:** You MUST change any top-level state variables (like scores, category lists, settings) from \`const\` or \`let\` to \`var\`. (e.g., change \`const p1_scores = ...\` to \`var p1_scores = ...\`). This ensures the HTML buttons can see them.
   - **Attach Functions to Window:** After EACH function definition, add \`window.functionName = functionName;\` to make it accessible in Google Sites' sandboxed iframes. Example:
     \`\`\`javascript
     function ${_t||`prefix_`}calculate() { ... }
     window.${_t||`prefix_`}calculate = ${_t||`prefix_`}calculate;
     \`\`\`
   - **Verify Selectors:** Check that the JS selectors (e.g., \`getElementById\`) actually match the IDs in the HTML you extracted. If the JS looks for a button but the HTML is a table cell, update the JS to match the HTML.
   - **Add Initialization Block:** At the END of the script, add an initialization block to force immediate execution in sandboxed environments. If the original code has initialization (DOMContentLoaded listeners, function calls at the bottom), preserve it. If not, add this:
     \`\`\`javascript
     // Force script execution in sandboxed environments
     if (document.readyState === 'loading') {
         document.addEventListener('DOMContentLoaded', function() {
             console.log(' ${ht} module loaded');
         });
     } else {
         console.log(' ${ht} module loaded');
     }
     \`\`\`

**Output Format:**
{
  "id": "${ht}",
  "html": "<div>... (The full inner HTML) ...</div>",
  "script": "// State Variables (Must be var)\\nvar ${_t||`prefix_`}scores = { ... };\\n\\n// Functions (with window attachment)\\nfunction ${_t||`prefix_`}update() { ... }\\nwindow.${_t||`prefix_`}update = ${_t||`prefix_`}update;\\n\\n// Initialization (REQUIRED)\\nif (document.readyState === 'loading') {...}"
}`,en=Ve===`MODULE`?`Current Course`:`Global Toolkit`,tn=`I need to update the "CourseFactoryDashboard.tsx" file.
Please add the following data to the \`PROJECT_DATA\` object.

**Target:** ${en} (${Ve})
**Data:**
\`\`\`javascript
{
  id: "${ht||`item-x`}",
  title: "${bt}",
  code: ${yt} 
}
\`\`\`

**Instructions:**
1. Locate \`PROJECT_DATA\` at the top.
2. Insert this object into the correct array (modules or Global Toolkit).
3. Ensure the 'code' property is inserted as a raw Object (not a string).
4. Do NOT modify the rest of the file.`;return(0,Q.jsxs)(`div`,{className:`space-y-6 animate-in fade-in duration-500`,children:[(0,Q.jsxs)(`div`,{className:`bg-slate-800 p-6 rounded-lg border border-slate-700`,children:[(0,Q.jsxs)(`h2`,{className:`text-xl font-bold text-white mb-4 flex items-center gap-2`,children:[(0,Q.jsx)(se,{className:`text-yellow-400`}),` Phase 1: Harvest`]}),(0,Q.jsxs)(`div`,{className:`flex flex-col md:flex-row justify-between items-center gap-4 mb-6`,children:[(0,Q.jsxs)(`div`,{className:`flex gap-2 bg-slate-900 p-1 rounded-lg border border-slate-700 w-full md:w-auto overflow-x-auto`,children:[(0,Q.jsxs)(`button`,{onClick:()=>{Dt(!1),He(`FEATURE`)},className:`flex items-center justify-center gap-2 py-2 px-3 rounded-md text-xs font-bold transition-all whitespace-nowrap ${!Et&&Ve===`FEATURE`?`bg-orange-600 text-white shadow-lg`:`text-slate-500 hover:text-slate-300`}`,children:[(0,Q.jsx)(je,{size:14}),` Feature`]}),(0,Q.jsxs)(`button`,{onClick:()=>{Dt(!1),He(`ASSESSMENT`)},className:`flex items-center justify-center gap-2 py-2 px-3 rounded-md text-xs font-bold transition-all whitespace-nowrap ${!Et&&Ve===`ASSESSMENT`?`bg-purple-600 text-white shadow-lg`:`text-slate-500 hover:text-slate-300`}`,children:[(0,Q.jsx)(te,{size:14}),` Assessment`]}),(0,Q.jsxs)(`button`,{onClick:()=>{Dt(!1),He(`MATERIALS`)},className:`flex items-center justify-center gap-2 py-2 px-3 rounded-md text-xs font-bold transition-all whitespace-nowrap ${!Et&&Ve===`MATERIALS`?`bg-cyan-600 text-white shadow-lg`:`text-slate-500 hover:text-slate-300`}`,children:[(0,Q.jsx)(le,{size:14}),` Materials`]}),(0,Q.jsxs)(`button`,{onClick:()=>{Dt(!1),He(`AI_MODULE`)},className:`flex items-center justify-center gap-2 py-2 px-3 rounded-md text-xs font-bold transition-all whitespace-nowrap ${!Et&&Ve===`AI_MODULE`?`bg-emerald-600 text-white shadow-lg`:`text-slate-500 hover:text-slate-300`}`,children:[(0,Q.jsx)(Te,{size:14}),` AI Studio`]}),(0,Q.jsxs)(`button`,{onClick:()=>{Dt(!1),He(`MODULE_MANAGER`)},className:`flex items-center justify-center gap-2 py-2 px-3 rounded-md text-xs font-bold transition-all whitespace-nowrap ${!Et&&Ve===`MODULE_MANAGER`?`bg-indigo-600 text-white shadow-lg`:`text-slate-500 hover:text-slate-300`}`,children:[(0,Q.jsx)(O,{size:14}),` Module Manager`]})]}),(0,Q.jsxs)(`button`,{onClick:()=>Dt(!Et),className:`w-full md:w-auto flex items-center justify-center gap-2 py-2 px-4 rounded-lg border text-xs font-bold transition-all ${Et?`bg-indigo-600 border-indigo-500 text-white shadow-[0_0_15px_rgba(79,70,229,0.4)]`:`bg-slate-800 border-slate-700 text-slate-400 hover:text-white`}`,children:[(0,Q.jsx)(ue,{size:14}),` BATCH MODE`]})]}),Et?(0,Q.jsx)(Nf,{onImport:Ut}):(0,Q.jsxs)(Q.Fragment,{children:[Ve===`ASSESSMENT`&&(0,Q.jsx)(`div`,{className:`animate-in fade-in slide-in-from-right-4 duration-300 space-y-4`,children:(0,Q.jsxs)(`div`,{className:`p-4 bg-purple-900/20 border border-purple-700/50 rounded-lg`,children:[(0,Q.jsx)(`h3`,{className:`text-sm font-bold text-purple-400 mb-4`,children:`Assessment Center`}),(0,Q.jsxs)(`div`,{className:`flex gap-2 mb-6 border-b border-purple-800/50 pb-2 overflow-x-auto`,children:[(0,Q.jsxs)(`button`,{onClick:()=>We(`ADD`),className:`px-4 py-2 rounded-t text-xs font-bold transition-colors whitespace-nowrap ${Ue===`ADD`?`bg-purple-600 text-white`:`bg-transparent text-slate-400 hover:text-white`}`,children:[(0,Q.jsx)(_e,{size:14}),` Add Questions`]}),(0,Q.jsxs)(`button`,{onClick:()=>We(`MASTER`),className:`px-4 py-2 rounded-t text-xs font-bold transition-colors whitespace-nowrap ${Ue===`MASTER`?`bg-purple-600 text-white`:`bg-transparent text-slate-400 hover:text-white`}`,children:[(0,Q.jsx)(Te,{size:14}),` Master Assessment`]}),(0,Q.jsxs)(`button`,{onClick:()=>We(`MANAGE`),className:`px-4 py-2 rounded-t text-xs font-bold transition-colors whitespace-nowrap ${Ue===`MANAGE`?`bg-purple-600 text-white`:`bg-transparent text-slate-400 hover:text-white`}`,children:[(0,Q.jsx)(ne,{size:14}),` Manage`]}),(0,Q.jsxs)(`button`,{onClick:()=>We(`MIGRATE`),className:`px-4 py-2 rounded-t text-xs font-bold transition-colors whitespace-nowrap ${Ue===`MIGRATE`?`bg-purple-600 text-white`:`bg-transparent text-slate-400 hover:text-white`}`,children:[(0,Q.jsx)(ve,{size:14}),` Migrate`]}),(0,Q.jsxs)(`button`,{onClick:()=>We(`IMPORT`),className:`px-4 py-2 rounded-t text-xs font-bold transition-colors whitespace-nowrap ${Ue===`IMPORT`?`bg-purple-600 text-white`:`bg-transparent text-slate-400 hover:text-white`}`,children:[(0,Q.jsx)(se,{size:14}),` Smart Import`]})]}),Ue===`ADD`&&(0,Q.jsxs)(`div`,{className:`space-y-4`,children:[(0,Q.jsx)(`p`,{className:`text-xs text-slate-400 italic`,children:`Build individual questions to add to your Master Assessment.`}),(0,Q.jsxs)(`div`,{className:`flex gap-2 mb-4`,children:[(0,Q.jsxs)(`button`,{onClick:()=>{w(`multiple-choice`),E({question:``,options:[``,``,``,``],correct:0})},className:`flex-1 py-3 px-4 rounded text-xs font-bold transition-all ${C===`multiple-choice`?`bg-blue-600 text-white shadow-lg`:`bg-slate-800 text-slate-400 hover:bg-slate-700`}`,children:[(0,Q.jsx)(te,{size:14}),` Multiple Choice`]}),(0,Q.jsxs)(`button`,{onClick:()=>{w(`long-answer`),E({question:``,options:[``,``,``,``],correct:0})},className:`flex-1 py-3 px-4 rounded text-xs font-bold transition-all ${C===`long-answer`?`bg-emerald-600 text-white shadow-lg`:`bg-slate-800 text-slate-400 hover:bg-slate-700`}`,children:[(0,Q.jsx)(Ee,{size:14}),` Long Answer`]})]}),C===`multiple-choice`&&(0,Q.jsxs)(`div`,{className:`p-4 bg-blue-900/10 border border-blue-700/30 rounded-xl space-y-4`,children:[(0,Q.jsx)(`h4`,{className:`text-sm font-bold text-blue-400`,children:`Multiple Choice Question`}),(0,Q.jsxs)(`div`,{children:[(0,Q.jsx)(`label`,{className:`block text-xs font-bold text-slate-400 uppercase mb-2`,children:`Question`}),(0,Q.jsx)(`textarea`,{value:T.question,onChange:e=>E({...T,question:e.target.value}),placeholder:`Enter your question...`,className:`w-full bg-slate-950 border border-slate-700 rounded p-3 text-white text-sm h-20 resize-none`})]}),(0,Q.jsxs)(`div`,{children:[(0,Q.jsx)(`label`,{className:`block text-xs font-bold text-slate-400 uppercase mb-2`,children:`Answer Options`}),(0,Q.jsx)(`div`,{className:`space-y-2`,children:T.options.map((e,t)=>(0,Q.jsxs)(`div`,{className:`flex items-center gap-2`,children:[(0,Q.jsx)(`input`,{type:`radio`,name:`correct-answer`,checked:T.correct===t,onChange:()=>E({...T,correct:t}),className:`w-4 h-4`}),(0,Q.jsx)(`input`,{type:`text`,value:e,onChange:e=>{let n=[...T.options];n[t]=e.target.value,E({...T,options:n})},placeholder:`Option ${t+1}`,className:`flex-1 bg-slate-950 border border-slate-700 rounded p-2 text-white text-xs`})]},t))}),(0,Q.jsx)(`p`,{className:`text-[9px] text-slate-500 italic mt-2`,children:`Select the correct answer by clicking the radio button`})]}),(0,Q.jsxs)(`button`,{onClick:()=>{if(!T.question.trim()){alert(`Please enter a question`);return}if(T.options.some(e=>!e.trim())){alert(`Please fill in all answer options`);return}m({type:`multiple-choice`,question:T.question,options:T.options,correct:T.correct}),alert(` Question added to Master Assessment!`)},className:`w-full bg-blue-600 hover:bg-blue-500 text-white font-bold py-3 rounded flex items-center justify-center gap-2`,children:[(0,Q.jsx)(_e,{size:16}),` Add to Master Assessment`]})]}),C===`long-answer`&&(0,Q.jsxs)(`div`,{className:`p-4 bg-emerald-900/10 border border-emerald-700/30 rounded-xl space-y-4`,children:[(0,Q.jsx)(`h4`,{className:`text-sm font-bold text-emerald-400`,children:`Long Answer Question`}),(0,Q.jsxs)(`div`,{children:[(0,Q.jsx)(`label`,{className:`block text-xs font-bold text-slate-400 uppercase mb-2`,children:`Question / Prompt`}),(0,Q.jsx)(`textarea`,{value:T.question,onChange:e=>E({...T,question:e.target.value}),placeholder:`Enter your question or prompt...`,className:`w-full bg-slate-950 border border-slate-700 rounded p-3 text-white text-sm h-32 resize-none`}),(0,Q.jsx)(`p`,{className:`text-[9px] text-slate-500 italic mt-2`,children:`Students will see a large text area to respond`})]}),(0,Q.jsxs)(`button`,{onClick:()=>{if(!T.question.trim()){alert(`Please enter a question or prompt`);return}m({type:`long-answer`,question:T.question}),alert(` Question added to Master Assessment!`)},className:`w-full bg-emerald-600 hover:bg-emerald-500 text-white font-bold py-3 rounded flex items-center justify-center gap-2`,children:[(0,Q.jsx)(_e,{size:16}),` Add to Master Assessment`]})]}),(0,Q.jsx)(`div`,{className:`p-4 bg-purple-900/20 border border-purple-500/30 rounded-lg`,children:(0,Q.jsxs)(`p`,{className:`text-purple-300 text-xs`,children:[` `,(0,Q.jsx)(`strong`,{children:`Tip:`}),` Add all your questions here, then go to the "Master Assessment" tab to organize them and generate the final assessment.`]})})]}),Ue===`CREATE`&&(0,Q.jsxs)(Q.Fragment,{children:[(0,Q.jsxs)(`div`,{className:`mb-4`,children:[(0,Q.jsx)(`label`,{className:`block text-xs font-bold text-slate-400 uppercase mb-2`,children:`Assessment Title`}),(0,Q.jsx)(`input`,{type:`text`,value:F,onChange:e=>ce(e.target.value),placeholder:`e.g., Mental Fitness Quiz 1`,className:`w-full bg-slate-950 border border-slate-700 rounded p-3 text-white text-sm`})]}),(0,Q.jsxs)(`div`,{className:`flex gap-2 mb-4`,children:[(0,Q.jsx)(`button`,{onClick:()=>ie(`quiz`),className:`flex-1 py-2 px-3 rounded text-xs font-bold ${N===`quiz`?`bg-purple-600 text-white`:`bg-slate-800 text-slate-400`}`,children:`Multiple Choice`}),(0,Q.jsx)(`button`,{onClick:()=>ie(`longanswer`),className:`flex-1 py-2 px-3 rounded text-xs font-bold ${N===`longanswer`?`bg-purple-600 text-white`:`bg-slate-800 text-slate-400`}`,children:`Long Answer`}),(0,Q.jsx)(`button`,{onClick:()=>ie(`print`),className:`flex-1 py-2 px-3 rounded text-xs font-bold ${N===`print`?`bg-purple-600 text-white`:`bg-slate-800 text-slate-400`}`,children:`Print & Submit`})]})]}),Ue===`CREATE`&&N===`quiz`&&(0,Q.jsxs)(`div`,{className:`space-y-4`,children:[(0,Q.jsx)(`div`,{className:`max-h-96 overflow-y-auto space-y-3 p-3 bg-slate-950 rounded border border-slate-700`,children:de.map((e,t)=>(0,Q.jsxs)(`div`,{className:`p-3 bg-slate-900 rounded border border-slate-800`,children:[(0,Q.jsxs)(`div`,{className:`flex items-center justify-between mb-2`,children:[(0,Q.jsxs)(`span`,{className:`text-xs font-bold text-purple-400`,children:[`Question `,t+1]}),de.length>1&&(0,Q.jsx)(`button`,{onClick:()=>fe(de.filter((e,n)=>n!==t)),className:`text-rose-400 hover:text-rose-300`,children:(0,Q.jsx)(Oe,{size:12})})]}),(0,Q.jsx)(`input`,{type:`text`,value:e.question,onChange:e=>Kt(t,`question`,e.target.value),placeholder:`Enter question...`,className:`w-full bg-slate-950 border border-slate-700 rounded p-2 text-white text-xs mb-2`}),(0,Q.jsx)(`div`,{className:`space-y-1`,children:e.options.map((n,r)=>(0,Q.jsxs)(`div`,{className:`flex items-center gap-2`,children:[(0,Q.jsx)(`input`,{type:`radio`,name:`correct-${t}`,checked:e.correct===r,onChange:()=>Kt(t,`correct`,r),className:`w-3 h-3`}),(0,Q.jsx)(`input`,{type:`text`,value:n,onChange:e=>Kt(t,`option-${r}`,e.target.value),placeholder:`Option ${r+1}`,className:`flex-1 bg-slate-950 border border-slate-700 rounded p-2 text-white text-xs`})]},r))})]},t))}),(0,Q.jsxs)(`button`,{onClick:Gt,className:`w-full bg-slate-800 hover:bg-slate-700 text-white font-bold py-2 rounded text-xs flex items-center justify-center gap-2`,children:[(0,Q.jsx)(_e,{size:14}),` Add Question`]})]}),Ue===`CREATE`&&N===`longanswer`&&(0,Q.jsxs)(`div`,{className:`space-y-4`,children:[(0,Q.jsx)(`div`,{className:`max-h-96 overflow-y-auto space-y-3 p-3 bg-slate-950 rounded border border-slate-700`,children:de.map((e,t)=>(0,Q.jsxs)(`div`,{className:`p-3 bg-slate-900 rounded border border-slate-800`,children:[(0,Q.jsxs)(`div`,{className:`flex items-center justify-between mb-2`,children:[(0,Q.jsxs)(`span`,{className:`text-xs font-bold text-purple-400`,children:[`Prompt `,t+1]}),de.length>1&&(0,Q.jsx)(`button`,{onClick:()=>fe(de.filter((e,n)=>n!==t)),className:`text-rose-400 hover:text-rose-300`,children:(0,Q.jsx)(Oe,{size:12})})]}),(0,Q.jsx)(`textarea`,{value:e.question,onChange:e=>Kt(t,`question`,e.target.value),placeholder:`Enter your question or prompt...`,className:`w-full bg-slate-950 border border-slate-700 rounded p-2 text-white text-xs h-20 resize-none`}),(0,Q.jsx)(`p`,{className:`text-[9px] text-slate-500 italic mt-1`,children:`Students will see a large text area to respond to this prompt.`})]},t))}),(0,Q.jsxs)(`button`,{onClick:Gt,className:`w-full bg-slate-800 hover:bg-slate-700 text-white font-bold py-2 rounded text-xs flex items-center justify-center gap-2`,children:[(0,Q.jsx)(_e,{size:14}),` Add Prompt`]})]}),Ue===`CREATE`&&N===`print`&&(0,Q.jsxs)(`div`,{className:`space-y-4`,children:[(0,Q.jsx)(`label`,{className:`block text-xs font-bold text-slate-400 uppercase`,children:`Custom Instructions (Optional)`}),(0,Q.jsx)(`textarea`,{value:pe,onChange:e=>me(e.target.value),placeholder:`Enter custom instructions for students... (Leave blank for default)`,className:`w-full bg-slate-950 border border-slate-700 rounded p-3 text-white text-xs h-32 resize-none`}),(0,Q.jsx)(`p`,{className:`text-[9px] text-slate-500 italic`,children:`Default: Standard print & submit instructions with name/date fields`})]}),Ue===`CREATE`&&(0,Q.jsxs)(Q.Fragment,{children:[(0,Q.jsx)(`div`,{className:`flex gap-2 mt-4`,children:(0,Q.jsx)(`button`,{onClick:qt,disabled:!F||N===`quiz`&&de.some(e=>!e.question)||N===`longanswer`&&de.some(e=>!e.question),className:`flex-1 bg-purple-600 hover:bg-purple-500 text-white font-bold py-3 rounded text-xs disabled:opacity-50 disabled:cursor-not-allowed`,children:`Generate Assessment Code`})}),j&&(0,Q.jsxs)(`div`,{className:`mt-4`,children:[(0,Q.jsx)(xf,{label:`Assessment JSON Preview`,code:j,height:`h-64`}),(0,Q.jsxs)(`button`,{onClick:()=>{try{let e=JSON.parse(j);l({title:F,type:N,html:e.html,script:e.script,generatedId:e.id||null}),alert(`Assessment added successfully! Switching to Manage tab...`),M(``),ce(``),fe([{question:``,options:[``,``,``,``],correct:0}]),We(`MANAGE`)}catch(e){alert(` Error adding assessment. Please try again.`),console.error(e)}},className:`w-full mt-3 bg-emerald-600 hover:bg-emerald-500 text-white font-bold py-3 rounded text-xs flex items-center justify-center gap-2`,children:[(0,Q.jsx)(Ne,{size:14}),` Add Assessment to Assessments Module`]})]})]}),Ue===`MASTER`&&(0,Q.jsxs)(`div`,{className:`space-y-4`,children:[(0,Q.jsx)(`p`,{className:`text-xs text-slate-400 italic`,children:`Organize your questions and generate the final assessment.`}),(0,Q.jsxs)(`div`,{children:[(0,Q.jsx)(`label`,{className:`block text-xs font-bold text-slate-400 uppercase mb-2`,children:`Assessment Title`}),(0,Q.jsx)(`input`,{type:`text`,value:x,onChange:e=>S(e.target.value),placeholder:`e.g., Mental Fitness Comprehensive Test`,className:`w-full bg-slate-950 border border-slate-700 rounded p-3 text-white text-sm`})]}),(0,Q.jsxs)(`div`,{className:`border-t border-slate-700 pt-4`,children:[(0,Q.jsxs)(`div`,{className:`flex items-center justify-between mb-3`,children:[(0,Q.jsxs)(`h4`,{className:`text-xs font-bold text-slate-400 uppercase`,children:[`Questions (`,y.length,`)`]}),y.length>0&&(0,Q.jsx)(`button`,{onClick:v,className:`text-xs text-rose-400 hover:text-rose-300 font-bold`,children:`Clear All`})]}),y.length===0?(0,Q.jsxs)(`div`,{className:`text-center py-12 bg-slate-900/30 rounded-xl border border-slate-800`,children:[(0,Q.jsx)(`p`,{className:`text-sm text-slate-500 italic`,children:`No questions yet.`}),(0,Q.jsx)(`p`,{className:`text-xs text-slate-600 mt-2`,children:`Go to "Add Questions" tab to add questions.`})]}):(0,Q.jsx)(`div`,{className:`space-y-2`,children:y.sort((e,t)=>e.order-t.order).map((e,t)=>(0,Q.jsx)(`div`,{className:`p-4 bg-slate-900 rounded-lg border border-slate-800 hover:bg-slate-800/70 transition-colors`,children:(0,Q.jsxs)(`div`,{className:`flex items-start gap-3`,children:[(0,Q.jsx)(`div`,{className:`w-8 h-8 rounded flex items-center justify-center bg-purple-500/10 border border-purple-500/20 text-purple-400 font-bold text-sm flex-shrink-0`,children:t+1}),(0,Q.jsxs)(`div`,{className:`flex-1 min-w-0`,children:[(0,Q.jsx)(`div`,{className:`flex items-center gap-2 mb-1`,children:(0,Q.jsx)(`span`,{className:`text-[9px] font-bold uppercase px-2 py-1 rounded ${e.type===`multiple-choice`?`bg-blue-500/20 text-blue-400`:`bg-emerald-500/20 text-emerald-400`}`,children:e.type===`multiple-choice`?`MC`:`LA`})}),(0,Q.jsx)(`p`,{className:`text-sm text-slate-200 font-medium mb-1`,children:e.question}),e.type===`multiple-choice`&&(0,Q.jsxs)(`p`,{className:`text-[10px] text-slate-500`,children:[`Correct: `,e.options[e.correct]]})]}),(0,Q.jsxs)(`div`,{className:`flex items-center gap-1 flex-shrink-0`,children:[(0,Q.jsx)(`button`,{onClick:()=>h(e.id,`up`),disabled:t===0,className:`p-1.5 hover:bg-slate-700 rounded disabled:opacity-30`,title:`Move up`,children:(0,Q.jsx)(ee,{size:14})}),(0,Q.jsx)(`button`,{onClick:()=>h(e.id,`down`),disabled:t===y.length-1,className:`p-1.5 hover:bg-slate-700 rounded disabled:opacity-30 rotate-180`,title:`Move down`,children:(0,Q.jsx)(ee,{size:14})}),(0,Q.jsx)(`button`,{onClick:()=>k(e),className:`p-1.5 hover:bg-blue-900 hover:text-blue-400 rounded`,title:`Edit`,children:(0,Q.jsx)(ge,{size:14})}),(0,Q.jsx)(`button`,{onClick:()=>g(e.id),className:`p-1.5 hover:bg-rose-900 hover:text-rose-400 rounded`,title:`Delete`,children:(0,Q.jsx)(Oe,{size:14})})]})]})},e.id))})]}),y.length>0&&(0,Q.jsxs)(`button`,{onClick:()=>{if(!x.trim()){alert(`Please enter an assessment title`);return}A()},disabled:!x,className:`w-full bg-purple-600 hover:bg-purple-500 text-white font-bold py-4 rounded-lg flex items-center justify-center gap-2 disabled:opacity-50`,children:[(0,Q.jsx)(Te,{size:18}),` Generate Assessment Code`]}),j&&(0,Q.jsxs)(`div`,{className:`mt-4`,children:[(0,Q.jsx)(xf,{label:`Assessment JSON Preview`,code:j,height:`h-64`}),(0,Q.jsxs)(`button`,{onClick:()=>{try{let e=JSON.parse(j);l({title:x,type:`mixed`,html:e.html,script:e.script,questionCount:y.length,generatedId:e.id||null,source:`master`,masterAssessmentTitle:x,masterQuestionsSnapshot:y.map(e=>({...e,options:e.options?[...e.options]:[]}))}),alert(`Assessment added successfully! Switching to Manage tab...`),M(``),S(``),b([]),We(`MANAGE`)}catch(e){alert(` Error adding assessment. Please try again.`),console.error(e)}},className:`w-full mt-3 bg-emerald-600 hover:bg-emerald-500 text-white font-bold py-3 rounded text-xs flex items-center justify-center gap-2`,children:[(0,Q.jsx)(Ne,{size:14}),` Add Assessment to Module`]})]})]}),Ue===`MANAGE`&&(0,Q.jsxs)(`div`,{className:`space-y-4`,children:[(0,Q.jsx)(`p`,{className:`text-xs text-slate-400 italic`,children:`Manage assessments stored in the Assessments module.`}),(0,Q.jsx)(`div`,{className:`space-y-2`,children:(()=>{let t=e[`Current Course`].modules.find(e=>e.id===`item-assessments`)?.assessments||[];return t.length===0?(0,Q.jsx)(`p`,{className:`text-xs text-slate-500 italic text-center py-4`,children:`No assessments yet. Create one using "Create New" tab.`}):t.sort((e,t)=>e.order-t.order).map(e=>{let n=Array.isArray(e.masterQuestionsSnapshot)&&e.masterQuestionsSnapshot.length>0;return(0,Q.jsx)(`div`,{className:`p-3 bg-slate-900 rounded-lg border border-slate-800 hover:bg-slate-800/70 transition-colors`,children:(0,Q.jsxs)(`div`,{className:`flex items-center justify-between`,children:[(0,Q.jsxs)(`div`,{className:`flex items-center gap-3 flex-1`,children:[(0,Q.jsx)(`div`,{className:`w-8 h-8 rounded flex items-center justify-center text-purple-500 bg-purple-500/10 border border-purple-500/20 font-bold text-xs`,children:(0,Q.jsx)(te,{size:16})}),(0,Q.jsxs)(`div`,{className:`flex-1`,children:[(0,Q.jsxs)(`div`,{className:`text-sm font-medium ${e.hidden?`text-slate-500 line-through`:`text-slate-200`}`,children:[e.title,` `,e.hidden&&(0,Q.jsx)(`span`,{className:`text-[9px] text-slate-600`,children:`(HIDDEN)`})]}),(0,Q.jsxs)(`div`,{className:`text-[10px] text-slate-500`,children:[`Type: `,e.type===`quiz`?`Multiple Choice`:e.type===`longanswer`?`Long Answer`:`Print & Submit`]})]})]}),(0,Q.jsxs)(`div`,{className:`flex items-center gap-1`,children:[(0,Q.jsx)(`button`,{onClick:()=>p(e.id),className:`p-1.5 rounded transition-colors ${e.hidden?`bg-slate-700 text-slate-400`:`bg-emerald-900 text-emerald-400`}`,title:e.hidden?`Show`:`Hide`,children:e.hidden?(0,Q.jsx)(ae,{size:12}):(0,Q.jsx)(oe,{size:12})}),(0,Q.jsx)(`button`,{onClick:()=>f(e.id,`up`),disabled:e.order===0,className:`p-1.5 hover:bg-slate-700 rounded disabled:opacity-30`,title:`Move up`,children:(0,Q.jsx)(ee,{size:12})}),(0,Q.jsx)(`button`,{onClick:()=>f(e.id,`down`),disabled:e.order===t.length-1,className:`p-1.5 hover:bg-slate-700 rounded disabled:opacity-30 rotate-180`,title:`Move down`,children:(0,Q.jsx)(ee,{size:12})}),(0,Q.jsx)(`button`,{onClick:()=>{if(!n)return;let t=y.length>0||x.trim()?`This will replace your current Master Assessment questions and title. Continue?`:`Send this assessment back to Master Assessment for editing?`;confirm(t)&&(b(e.masterQuestionsSnapshot.map(e=>({...e,options:e.options?[...e.options]:[]})).sort((e,t)=>(e.order??0)-(t.order??0))),S(e.masterAssessmentTitle||e.title||``),M(``),k(null),We(`MASTER`))},disabled:!n,className:`p-1.5 rounded ${n?`hover:bg-slate-700`:`opacity-30 cursor-not-allowed`}`,title:n?`Send back to Master Assessment`:`No Master snapshot available`,children:(0,Q.jsx)(ye,{size:12})}),(0,Q.jsx)(`button`,{onClick:()=>{Ce(e)},className:`p-1.5 hover:bg-blue-900 hover:text-blue-400 rounded`,title:`Edit`,children:(0,Q.jsx)(ge,{size:12})}),(0,Q.jsx)(`button`,{onClick:()=>d(e.id),className:`p-1.5 hover:bg-rose-900 hover:text-rose-400 rounded`,title:`Delete`,children:(0,Q.jsx)(Oe,{size:12})})]})]})},e.id)})})()}),he&&(0,Q.jsx)(`div`,{className:`fixed inset-0 bg-black/80 backdrop-blur-sm z-50 flex items-center justify-center p-4`,onClick:()=>Ce(null),children:(0,Q.jsxs)(`div`,{className:`bg-slate-900 border border-slate-700 rounded-xl max-w-2xl w-full p-6 max-h-[90vh] overflow-y-auto`,onClick:e=>e.stopPropagation(),children:[(0,Q.jsxs)(`div`,{className:`flex items-center justify-between mb-6`,children:[(0,Q.jsxs)(`h3`,{className:`text-lg font-bold text-white flex items-center gap-2`,children:[(0,Q.jsx)(ge,{size:20,className:`text-purple-400`}),`Edit Assessment`]}),(0,Q.jsx)(`button`,{onClick:()=>Ce(null),className:`text-slate-400 hover:text-white transition-colors`,children:(0,Q.jsx)(Me,{size:24})})]}),(0,Q.jsxs)(`div`,{className:`space-y-4`,children:[(0,Q.jsxs)(`div`,{children:[(0,Q.jsx)(`label`,{className:`block text-xs font-bold text-slate-400 uppercase mb-2`,children:`Assessment Title`}),(0,Q.jsx)(`input`,{type:`text`,value:he.title,onChange:e=>Ce({...he,title:e.target.value}),className:`w-full bg-slate-950 border border-slate-700 rounded p-3 text-white text-sm`})]}),(0,Q.jsxs)(`div`,{children:[(0,Q.jsx)(`label`,{className:`block text-xs font-bold text-slate-400 uppercase mb-2`,children:`Assessment Type`}),(0,Q.jsxs)(`div`,{className:`text-sm text-slate-300 bg-slate-950 border border-slate-700 rounded p-3`,children:[he.type===`quiz`?`Multiple Choice`:he.type===`longanswer`?`Long Answer`:`Print & Submit`,(0,Q.jsx)(`span`,{className:`text-[10px] text-slate-500 block mt-1`,children:`Type cannot be changed after creation`})]})]}),(0,Q.jsxs)(`div`,{children:[(0,Q.jsx)(`label`,{className:`block text-xs font-bold text-slate-400 uppercase mb-2`,children:`Text Color Override`}),(0,Q.jsx)(`p`,{className:`text-[10px] text-slate-500 mb-1 italic`,children:`Overrides Phase 5 Assessment Text Color for this assessment only`}),(0,Q.jsx)(`select`,{value:he.textColorOverride??``,onChange:e=>Ce({...he,textColorOverride:e.target.value||null}),className:`w-full bg-slate-950 border border-slate-700 rounded p-3 text-white text-sm`,children:At.map(e=>(0,Q.jsx)(`option`,{value:e.value,children:e.label},e.value||`default`))})]}),(0,Q.jsxs)(`div`,{children:[(0,Q.jsx)(`label`,{className:`block text-xs font-bold text-slate-400 uppercase mb-2`,children:`Box Color Override`}),(0,Q.jsx)(`p`,{className:`text-[10px] text-slate-500 mb-1 italic`,children:`Overrides Phase 5 Assessment Box Color for this assessment only`}),(0,Q.jsx)(`select`,{value:he.boxColorOverride??``,onChange:e=>Ce({...he,boxColorOverride:e.target.value||null}),className:`w-full bg-slate-950 border border-slate-700 rounded p-3 text-white text-sm`,children:At.map(e=>(0,Q.jsx)(`option`,{value:e.value,children:e.label},`box-`+(e.value||`default`)))})]}),(0,Q.jsx)(`div`,{className:`p-4 bg-amber-900/20 border border-amber-500/30 rounded-lg`,children:(0,Q.jsxs)(`p`,{className:`text-amber-300 text-xs`,children:[(0,Q.jsx)(`strong`,{children:`Note:`}),` To edit questions/prompts, you'll need to recreate the assessment in the "Create New" tab with your changes.`]})}),(0,Q.jsxs)(`div`,{className:`flex gap-3 pt-4`,children:[(0,Q.jsx)(`button`,{onClick:()=>Ce(null),className:`flex-1 bg-slate-700 hover:bg-slate-600 text-white font-bold py-2 rounded`,children:`Cancel`}),(0,Q.jsxs)(`button`,{onClick:()=>{u(he.id,{title:he.title,textColorOverride:he.textColorOverride||null,boxColorOverride:he.boxColorOverride||null}),Ce(null)},className:`flex-1 bg-purple-600 hover:bg-purple-500 text-white font-bold py-2 rounded flex items-center justify-center gap-2`,children:[(0,Q.jsx)(be,{size:16}),` Save Changes`]})]})]})]})})]}),D&&(()=>{let e=D.type===`multiple-choice`,t=D.options?.length?D.options:[``,``,``,``],n=t.every(e=>e&&e.trim()),r=D.question?.trim()&&(!e||n),i=(e,t)=>{k(n=>{if(!n)return n;let r=n.options?[...n.options]:[``,``,``,``];return r[e]=t,{...n,options:r}})},a=e=>{k(t=>t&&(e===`multiple-choice`?{...t,type:e,options:t.options?.length?[...t.options]:[``,``,``,``],correct:typeof t.correct==`number`?t.correct:0}:{...t,type:e}))};return(0,Q.jsx)(`div`,{className:`fixed inset-0 bg-black/80 backdrop-blur-sm z-50 flex items-center justify-center p-4`,onClick:()=>k(null),children:(0,Q.jsxs)(`div`,{className:`bg-slate-900 border border-slate-700 rounded-xl max-w-2xl w-full p-6 max-h-[90vh] overflow-y-auto`,onClick:e=>e.stopPropagation(),children:[(0,Q.jsxs)(`div`,{className:`flex items-center justify-between mb-6`,children:[(0,Q.jsxs)(`h3`,{className:`text-lg font-bold text-white flex items-center gap-2`,children:[(0,Q.jsx)(ge,{size:20,className:`text-purple-400`}),`Edit Question`]}),(0,Q.jsx)(`button`,{onClick:()=>k(null),className:`text-slate-400 hover:text-white transition-colors`,children:(0,Q.jsx)(Me,{size:24})})]}),(0,Q.jsxs)(`div`,{className:`space-y-4`,children:[(0,Q.jsxs)(`div`,{className:`flex gap-2`,children:[(0,Q.jsxs)(`button`,{onClick:()=>a(`multiple-choice`),className:`flex-1 py-2 px-3 rounded text-xs font-bold transition-all ${e?`bg-blue-600 text-white shadow-lg`:`bg-slate-800 text-slate-400 hover:bg-slate-700`}`,children:[(0,Q.jsx)(te,{size:14}),` Multiple Choice`]}),(0,Q.jsxs)(`button`,{onClick:()=>a(`long-answer`),className:`flex-1 py-2 px-3 rounded text-xs font-bold transition-all ${e?`bg-slate-800 text-slate-400 hover:bg-slate-700`:`bg-emerald-600 text-white shadow-lg`}`,children:[(0,Q.jsx)(Ee,{size:14}),` Long Answer`]})]}),(0,Q.jsxs)(`div`,{children:[(0,Q.jsx)(`label`,{className:`block text-xs font-bold text-slate-400 uppercase mb-2`,children:`Question`}),(0,Q.jsx)(`textarea`,{value:D.question,onChange:e=>k({...D,question:e.target.value}),placeholder:`Enter your question or prompt...`,className:`w-full bg-slate-950 border border-slate-700 rounded p-3 text-white text-sm h-24 resize-none`})]}),e?(0,Q.jsxs)(`div`,{className:`p-4 bg-blue-900/10 border border-blue-700/30 rounded-xl space-y-3`,children:[(0,Q.jsxs)(`div`,{children:[(0,Q.jsx)(`label`,{className:`block text-xs font-bold text-slate-400 uppercase mb-2`,children:`Answer Options`}),(0,Q.jsx)(`div`,{className:`space-y-2`,children:t.map((e,t)=>(0,Q.jsxs)(`div`,{className:`flex items-center gap-2`,children:[(0,Q.jsx)(`input`,{type:`radio`,name:`editing-correct-answer`,checked:D.correct===t,onChange:()=>k({...D,correct:t}),className:`w-4 h-4`}),(0,Q.jsx)(`input`,{type:`text`,value:e,onChange:e=>i(t,e.target.value),placeholder:`Option ${t+1}`,className:`flex-1 bg-slate-950 border border-slate-700 rounded p-2 text-white text-xs`})]},t))})]}),(0,Q.jsx)(`p`,{className:`text-[9px] text-slate-500 italic`,children:`Select the correct answer by clicking the radio button.`})]}):(0,Q.jsx)(`p`,{className:`text-[9px] text-slate-500 italic`,children:`Students will see a large text area to respond to this prompt.`}),(0,Q.jsxs)(`div`,{className:`flex gap-3 pt-4`,children:[(0,Q.jsx)(`button`,{onClick:()=>k(null),className:`flex-1 bg-slate-700 hover:bg-slate-600 text-white font-bold py-2 rounded`,children:`Cancel`}),(0,Q.jsxs)(`button`,{onClick:()=>{_(D.id,{question:D.question.trim(),type:D.type,options:D.type===`multiple-choice`?(D.options||[``,``,``,``]).map(e=>e.trim()):D.options,correct:D.type===`multiple-choice`&&typeof D.correct==`number`?D.correct:0}),k(null)},disabled:!r,className:`flex-1 bg-purple-600 hover:bg-purple-500 text-white font-bold py-2 rounded flex items-center justify-center gap-2 disabled:opacity-50`,children:[(0,Q.jsx)(be,{size:16}),` Save Changes`]})]})]})]})})})(),Ue===`MIGRATE`&&(0,Q.jsxs)(`div`,{className:`space-y-4`,children:[(0,Q.jsx)(`p`,{className:`text-xs text-slate-400`,children:`Convert existing assessment code to work with the Assessment Center using AI Studio.`}),(0,Q.jsxs)(`div`,{className:`space-y-3`,children:[(0,Q.jsx)(`label`,{className:`block text-xs font-bold text-slate-400 uppercase`,children:`Paste Existing Assessment Code`}),(0,Q.jsx)(`textarea`,{value:we,onChange:e=>De(e.target.value),placeholder:`Paste your existing assessment HTML and JavaScript here...`,className:`w-full bg-slate-950 border border-slate-700 rounded p-3 text-white text-xs font-mono h-48 resize-none`}),(0,Q.jsxs)(`button`,{onClick:()=>{Pe(`I have an existing assessment that I need to adapt to work with my course builder system.

**ORIGINAL ASSESSMENT CODE:**
\`\`\`
${we}
\`\`\`

**REQUIREMENTS:**
1. Convert this to use our dark theme (slate-900 backgrounds, white text)
2. Use Tailwind CSS classes for all styling
3. Ensure it works with our assessment system structure
4. Return the code in this exact JSON format:
\`\`\`json
{
  "id": "assess-[unique-id]",
  "title": "[Assessment Title]",
  "type": "quiz", // or "longanswer" or "print"
  "html": "[Full HTML code here]",
  "script": "[Full JavaScript code here]"
}
\`\`\`

**STYLING GUIDELINES:**
- Use dark theme: bg-slate-900, bg-slate-950, text-white, text-slate-400
- Purple accents for assessment elements
- Rounded corners with rounded-lg, rounded-xl
- Borders with border-slate-700, border-slate-800
- Buttons: bg-purple-600 hover:bg-purple-500 text-white

Please convert the code following these guidelines and return ONLY the JSON.`)},disabled:!we.trim(),className:`w-full bg-purple-600 hover:bg-purple-500 text-white font-bold py-2 rounded text-xs disabled:opacity-50 flex items-center justify-center gap-2`,children:[(0,Q.jsx)(Te,{size:14}),` Generate AI Studio Prompt`]}),Ae&&(0,Q.jsxs)(`div`,{className:`space-y-2`,children:[(0,Q.jsx)(xf,{label:`AI Studio Prompt (Copy & Use in Google AI Studio)`,code:Ae,height:`h-48`}),(0,Q.jsxs)(`button`,{onClick:()=>{navigator.clipboard.writeText(Ae),alert(`Prompt copied! Paste it into Google AI Studio.`)},className:`w-full bg-slate-700 hover:bg-slate-600 text-white font-bold py-2 rounded text-xs flex items-center justify-center gap-2`,children:[(0,Q.jsx)(P,{size:14}),` Copy Prompt to Clipboard`]}),(0,Q.jsxs)(`div`,{className:`border-t border-slate-700 pt-3 mt-3`,children:[(0,Q.jsx)(`label`,{className:`block text-xs font-bold text-emerald-400 uppercase mb-2`,children:`Paste AI Studio Output`}),(0,Q.jsx)(`textarea`,{value:Fe,onChange:e=>Ie(e.target.value),placeholder:`Paste the JSON output from AI Studio here...`,className:`w-full bg-slate-950 border border-emerald-700 rounded p-3 text-white text-xs font-mono h-32 resize-none`}),(0,Q.jsxs)(`button`,{onClick:()=>{try{let e=JSON.parse(Fe);l({title:e.title,type:e.type,html:e.html,script:e.script,generatedId:e.id||null}),alert(`Assessment added successfully!`),De(``),Pe(``),Ie(``),We(`MANAGE`)}catch{alert(`Invalid JSON. Please check the output and try again.`)}},disabled:!Fe.trim(),className:`w-full mt-2 bg-emerald-600 hover:bg-emerald-500 text-white font-bold py-2 rounded text-xs disabled:opacity-50 flex items-center justify-center gap-2`,children:[(0,Q.jsx)(Ne,{size:14}),` Add Migrated Assessment`]})]})]})]}),(0,Q.jsxs)(`div`,{className:`mt-8 pt-6 border-t border-rose-900/50`,children:[(0,Q.jsxs)(`h4`,{className:`text-xs font-bold text-rose-400 uppercase tracking-wider mb-3 flex items-center gap-2`,children:[(0,Q.jsx)(ke,{size:14}),` Danger Zone`]}),(0,Q.jsxs)(`div`,{className:`p-4 bg-rose-950/30 border border-rose-900/50 rounded-lg space-y-3`,children:[(0,Q.jsxs)(`p`,{className:`text-xs text-rose-300`,children:[`Clear all saved data to start fresh. This will delete your current course, all modules, assessments, and settings. `,(0,Q.jsx)(`strong`,{children:`This cannot be undone.`})]}),(0,Q.jsxs)(`button`,{onClick:()=>{window.confirm(`\xA0 WARNING: This will permanently delete ALL your course data including:

 Course settings
 All modules
 All assessments
 All materials

Are you sure you want to continue?`)&&window.confirm(` FINAL CONFIRMATION: Type "DELETE" in the next prompt to confirm.

Click OK to proceed with deletion.`)&&(window.prompt(`Type DELETE to confirm:`)===`DELETE`?(localStorage.removeItem(`course_factory_v2_data`),localStorage.removeItem(`course_factory_backup`),Object.keys(localStorage).forEach(e=>{(e.startsWith(`courseProgress_`)||e.startsWith(`course_factory`))&&localStorage.removeItem(e)}),alert(` All data cleared! The page will now reload.`),window.location.reload()):alert(`Deletion cancelled. Your data is safe.`))},className:`w-full bg-rose-600 hover:bg-rose-500 text-white font-bold py-3 rounded text-sm flex items-center justify-center gap-2 transition-colors`,children:[(0,Q.jsx)(Oe,{size:16}),` Clear All Data & Start Fresh`]})]})]})]}),Ue===`IMPORT`&&(0,Q.jsxs)(`div`,{className:`grid grid-cols-1 lg:grid-cols-2 gap-6 animate-in fade-in`,children:[(0,Q.jsxs)(`div`,{className:`space-y-4`,children:[(0,Q.jsxs)(`div`,{className:`bg-slate-900 border border-purple-500/30 p-4 rounded-xl space-y-3`,children:[(0,Q.jsxs)(`h3`,{className:`text-sm font-bold text-purple-400 mb-2 flex items-center gap-2`,children:[(0,Q.jsx)(Te,{size:16}),` Option A: AI Super-Import`]}),(0,Q.jsxs)(`div`,{children:[(0,Q.jsx)(`p`,{className:`text-xs font-bold text-slate-300 mb-1`,children:`For Multiple-Choice Questions:`}),(0,Q.jsxs)(`div`,{className:`bg-black p-2 rounded border border-slate-700 relative group mb-2`,children:[(0,Q.jsxs)(`code`,{className:`text-[10px] text-emerald-400 font-mono block break-words`,children:[`Convert this quiz text into JSON. For multiple-choice: [`,`{`,` "question": "...", "options": ["A","B","C","D"], "correct": 0 `,`}`,`]. For long-answer: [`,`{`,` "question": "...", "options": [] `,`}`,`]. (Correct index: A=0, B=1, C=2, D=3). Output JSON ONLY.`]}),(0,Q.jsx)(`button`,{className:`absolute top-1 right-1 text-slate-500 hover:text-white`,onClick:()=>navigator.clipboard.writeText(`Convert this quiz text into JSON. For multiple-choice: [{ "question": "...", "options": ["A","B","C","D"], "correct": 0 }]. For long-answer/short-answer: [{ "question": "...", "options": [] }]. (Correct index: A=0, B=1, C=2, D=3). Output JSON ONLY.`),children:(0,Q.jsx)(P,{size:12})})]})]}),(0,Q.jsxs)(`div`,{children:[(0,Q.jsx)(`p`,{className:`text-xs font-bold text-slate-300 mb-1`,children:`For Long-Answer/Short-Answer Questions:`}),(0,Q.jsxs)(`div`,{className:`bg-black p-2 rounded border border-slate-700 relative group mb-2`,children:[(0,Q.jsxs)(`code`,{className:`text-[10px] text-cyan-400 font-mono block break-words`,children:[`Convert these open-ended questions into JSON: [`,`{`,` "question": "What is...?", "options": [] `,`}`,`]. Include ALL questions, even if they have no answer choices. Output JSON ONLY.`]}),(0,Q.jsx)(`button`,{className:`absolute top-1 right-1 text-slate-500 hover:text-white`,onClick:()=>navigator.clipboard.writeText(`Convert these open-ended questions into JSON: [{ "question": "What is...?", "options": [] }]. Include ALL questions, even if they have no answer choices. Output JSON ONLY.`),children:(0,Q.jsx)(P,{size:12})})]})]}),(0,Q.jsxs)(`div`,{children:[(0,Q.jsx)(`p`,{className:`text-xs font-bold text-amber-300 mb-1`,children:` For Mixed Types (Recommended):`}),(0,Q.jsxs)(`div`,{className:`bg-black p-2 rounded border border-amber-700 relative group`,children:[(0,Q.jsxs)(`code`,{className:`text-[10px] text-amber-400 font-mono block break-words`,children:[`Convert this mixed assessment into JSON. Multiple-choice: [`,`{`,` "question": "...", "options": ["A","B","C","D"], "correct": 0 `,`}`,`]. Long-answer: [`,`{`,` "question": "...", "options": [] `,`}`,`]. Include ALL questions in order. Output JSON ONLY.`]}),(0,Q.jsx)(`button`,{className:`absolute top-1 right-1 text-slate-500 hover:text-white`,onClick:()=>navigator.clipboard.writeText(`Convert this mixed assessment into JSON. For multiple-choice questions: [{ "question": "...", "options": ["A","B","C","D"], "correct": 0 }]. For long-answer/short-answer questions: [{ "question": "...", "options": [] }]. Include ALL questions in the order they appear. (Correct index: A=0, B=1, C=2, D=3). Output JSON ONLY.`),children:(0,Q.jsx)(P,{size:12})})]})]})]}),(0,Q.jsxs)(`div`,{className:`bg-slate-950 border border-slate-800 rounded-xl p-4`,children:[(0,Q.jsx)(`h3`,{className:`text-sm font-bold text-slate-300 mb-2`,children:`Paste Data (JSON or Text)`}),(0,Q.jsx)(`textarea`,{value:Ge,onChange:e=>{Ke(e.target.value),Je(Pf(e.target.value).data)},className:`w-full h-64 bg-slate-900 border border-slate-700 rounded-lg p-3 text-xs font-mono text-white focus:border-purple-500 outline-none resize-none`,placeholder:`Paste JSON here... OR Paste raw text like:
Multiple-choice:
1. Question?
a. Yes
b. No
Answer: A

Long-answer:
2. Explain your answer.`})]})]}),(0,Q.jsxs)(`div`,{className:`bg-slate-900 border border-slate-800 rounded-xl p-4 flex flex-col h-full`,children:[(0,Q.jsxs)(`div`,{className:`flex justify-between items-center mb-4`,children:[(0,Q.jsxs)(`h3`,{className:`text-sm font-bold text-white`,children:[`Preview (`,qe.length,` Qs)`]}),qe.length>0&&(0,Q.jsx)(`div`,{className:`flex items-center gap-2`,children:(()=>{let e=qe.filter(e=>(e.type||(e.options?.length>0?`multiple-choice`:`long-answer`))===`multiple-choice`).length,t=qe.filter(e=>(e.type||(e.options?.length>0?`multiple-choice`:`long-answer`))===`long-answer`).length;return(0,Q.jsxs)(Q.Fragment,{children:[e>0&&(0,Q.jsxs)(`span`,{className:`text-xs px-2 py-1 rounded bg-purple-500/20 text-purple-400 font-bold`,children:[e,` MC`]}),t>0&&(0,Q.jsxs)(`span`,{className:`text-xs px-2 py-1 rounded bg-cyan-500/20 text-cyan-400 font-bold`,children:[t,` LA`]}),(0,Q.jsx)(`span`,{className:`text-xs px-2 py-1 rounded bg-emerald-500/20 text-emerald-400 font-bold`,children:`Valid`})]})})()})]}),(0,Q.jsx)(`div`,{className:`flex-1 overflow-y-auto space-y-3 custom-scroll pr-2 mb-4 bg-slate-950/50 rounded-lg p-2 border border-slate-800 h-64`,children:qe.length===0?(0,Q.jsx)(`div`,{className:`h-full flex items-center justify-center text-slate-500 text-xs italic`,children:`Paste content to preview...`}):qe.map((e,t)=>{let n=typeof e.question==`string`?e.question:e.question||`Untitled Question`,r=Array.isArray(e.options)?e.options:[],i=(e.type||(r.length>0?`multiple-choice`:`long-answer`))===`long-answer`;return(0,Q.jsxs)(`div`,{className:`p-3 bg-slate-900 border border-slate-700 rounded-lg text-xs`,children:[(0,Q.jsxs)(`div`,{className:`flex items-start justify-between mb-2`,children:[(0,Q.jsxs)(`div`,{className:`font-bold text-slate-200 flex gap-2 flex-1`,children:[(0,Q.jsxs)(`span`,{className:`text-purple-400`,children:[t+1,`.`]}),(0,Q.jsx)(`span`,{children:n})]}),(0,Q.jsx)(`span`,{className:`text-[10px] px-2 py-0.5 rounded font-bold ${i?`bg-cyan-500/20 text-cyan-400`:`bg-purple-500/20 text-purple-400`}`,children:i?`Long Answer`:`Multiple Choice`})]}),i?(0,Q.jsx)(`div`,{className:`text-slate-500 italic text-[10px] pl-4`,children:`Open-ended response`}):(0,Q.jsx)(`div`,{className:`space-y-1 pl-4`,children:r.length>0?r.map((t,n)=>{let r=typeof t==`string`?t:String(t||``);return(0,Q.jsxs)(`div`,{className:`flex items-center gap-2 ${e.correct===n?`text-emerald-400 font-bold`:`text-slate-500`}`,children:[(0,Q.jsxs)(`span`,{children:[String.fromCharCode(65+n),`.`]}),` `,(0,Q.jsx)(`span`,{children:r}),e.correct===n&&(0,Q.jsx)(`span`,{className:`text-[10px] text-emerald-400`,children:``})]},n)}):(0,Q.jsx)(`div`,{className:`text-slate-500 italic text-[10px]`,children:`No options provided`})})]},t)})}),(0,Q.jsx)(`button`,{onClick:()=>{if(qe.length===0)return;let e=qe.map(e=>({type:e.type||(e.options?.length>0?`multiple-choice`:`long-answer`),question:e.question,options:e.options||[],correct:typeof e.correct==`number`?e.correct:0}));e.forEach(e=>m(e));let t=e.filter(e=>e.type===`multiple-choice`).length,n=e.filter(e=>e.type===`long-answer`).length;alert(` Imported ${e.length} questions! (${t} multiple-choice, ${n} long-answer)`),Ke(``),Je([]),We(`MASTER`)},disabled:qe.length===0,className:`w-full bg-purple-600 hover:bg-purple-500 text-white font-bold py-3 rounded-lg shadow-lg disabled:opacity-50 transition-all`,children:`Import to Master Assessment`})]})]})]})}),Ve===`MATERIALS`&&(0,Q.jsx)(`div`,{className:`animate-in fade-in slide-in-from-right-4 duration-300 space-y-4`,children:(0,Q.jsxs)(`div`,{className:`p-4 bg-pink-900/20 border border-pink-700/50 rounded-lg`,children:[(0,Q.jsx)(`h3`,{className:`text-sm font-bold text-pink-400 mb-4`,children:`Materials Manager`}),(0,Q.jsxs)(`div`,{className:`p-4 bg-slate-950 rounded-xl border border-pink-800/50 mb-4`,children:[(0,Q.jsx)(`h4`,{className:`text-xs font-bold text-pink-300 mb-3`,children:`Add New Material`}),(0,Q.jsxs)(`div`,{className:`grid grid-cols-1 md:grid-cols-3 gap-3 mb-3`,children:[(0,Q.jsx)(`input`,{type:`text`,value:R.number,onChange:e=>z({...R,number:e.target.value}),placeholder:`Number (e.g., 05)`,className:`bg-slate-900 border border-slate-700 rounded p-2 text-white text-xs`}),(0,Q.jsxs)(`select`,{value:R.color,onChange:e=>z({...R,color:e.target.value}),className:`bg-slate-900 border border-slate-700 rounded p-2 text-white text-xs`,children:[(0,Q.jsx)(`option`,{value:`slate`,children:`Gray`}),(0,Q.jsx)(`option`,{value:`rose`,children:`Red`}),(0,Q.jsx)(`option`,{value:`amber`,children:`Orange`}),(0,Q.jsx)(`option`,{value:`emerald`,children:`Green`}),(0,Q.jsx)(`option`,{value:`sky`,children:`Blue`}),(0,Q.jsx)(`option`,{value:`purple`,children:`Purple`})]}),(0,Q.jsxs)(`select`,{value:R.mediaType,onChange:e=>z({...R,mediaType:e.target.value}),className:`bg-slate-900 border border-slate-700 rounded p-2 text-white text-xs`,children:[(0,Q.jsx)(`option`,{value:`number`,children:`Badge: Number`}),(0,Q.jsx)(`option`,{value:`book`,children:`Badge: Book`}),(0,Q.jsx)(`option`,{value:`pdf`,children:`Badge: PDF`}),(0,Q.jsx)(`option`,{value:`video`,children:`Badge: Video`}),(0,Q.jsx)(`option`,{value:`slides`,children:`Badge: Slides`})]})]}),(0,Q.jsxs)(`div`,{className:`mb-2`,children:[(0,Q.jsx)(`label`,{className:`block text-[10px] text-slate-500 mb-1`,children:`Card theme`}),(0,Q.jsx)(`select`,{value:R.themeOverride??``,onChange:e=>z({...R,themeOverride:e.target.value||null}),className:`w-full bg-slate-900 border border-slate-700 rounded p-2 text-white text-xs`,children:jt.map(e=>(0,Q.jsx)(`option`,{value:e.value,children:e.label},e.value||`default`))})]}),(0,Q.jsx)(`input`,{type:`text`,value:R.title,onChange:e=>z({...R,title:e.target.value}),placeholder:`Title (e.g., The Engine)`,className:`w-full bg-slate-900 border border-slate-700 rounded p-2 text-white text-sm mb-2`}),(0,Q.jsx)(`input`,{type:`text`,value:R.description,onChange:e=>z({...R,description:e.target.value}),placeholder:`Description`,className:`w-full bg-slate-900 border border-slate-700 rounded p-2 text-white text-xs mb-2`}),(0,Q.jsxs)(`div`,{className:`flex gap-2 mb-2`,children:[(0,Q.jsx)(`input`,{type:`text`,value:R.viewUrl,onChange:e=>z({...R,viewUrl:e.target.value}),placeholder:`View URL`,className:`flex-1 bg-slate-900 border border-slate-700 rounded p-2 text-white text-xs`}),R.mediaType!==`video`&&(0,Q.jsx)(`button`,{onClick:()=>{ze(`view`),Re(!0)},className:`bg-slate-800 hover:bg-slate-700 text-slate-300 border border-slate-600 rounded px-3`,title:`Browse Local Vault`,children:(0,Q.jsx)(le,{size:14})})]}),(0,Q.jsxs)(`div`,{className:`flex gap-2 mb-3`,children:[(0,Q.jsx)(`input`,{type:`text`,value:R.downloadUrl,onChange:e=>z({...R,downloadUrl:e.target.value}),placeholder:`Download URL (Google Drive /view link)`,className:`flex-1 bg-slate-900 border border-slate-700 rounded p-2 text-white text-xs`}),R.mediaType!==`video`&&(0,Q.jsx)(`button`,{onClick:()=>{ze(`download`),Re(!0)},className:`bg-slate-800 hover:bg-slate-700 text-slate-300 border border-slate-600 rounded px-3`,title:`Browse Local Vault`,children:(0,Q.jsx)(le,{size:14})})]}),(0,Q.jsxs)(`div`,{className:`mb-3 p-3 bg-slate-900 rounded border border-slate-700`,children:[(0,Q.jsxs)(`label`,{className:`flex items-center gap-2 cursor-pointer mb-2`,children:[(0,Q.jsx)(`input`,{type:`checkbox`,checked:R.hasDigitalContent,onChange:e=>z({...R,hasDigitalContent:e.target.checked}),className:`rounded border-slate-700 bg-slate-900 text-emerald-600`}),(0,Q.jsx)(`span`,{className:`text-xs font-bold text-emerald-400 uppercase`,children:`Enable Digital Resource`})]}),R.hasDigitalContent&&(0,Q.jsxs)(`div`,{className:`mt-2`,children:[(0,Q.jsx)(`p`,{className:`text-[10px] text-slate-500 mb-2`,children:`Paste JSON content for a themed, readable digital version (chapters, sections, etc.)`}),(0,Q.jsx)(`textarea`,{value:R.digitalContentJson,onChange:e=>{let t=e.target.value;z({...R,digitalContentJson:t});try{if(t.trim()){let e=JSON.parse(t);(e.chapters||e.title)&&z(n=>({...n,digitalContent:e,digitalContentJson:t}))}}catch{}},placeholder:`{"title": "My Resource", "chapters": [{"number": 1, "title": "Chapter 1", "sections": [{"heading": "Section 1", "content": "Content here..."}]}]}`,className:`w-full bg-slate-950 border border-slate-700 rounded p-2 text-white text-xs font-mono h-24 resize-none`}),R.digitalContentJson&&(0,Q.jsx)(`div`,{className:`mt-2`,children:(()=>{try{let e=JSON.parse(R.digitalContentJson),t=e.chapters?.length||0,n=e.chapters?.reduce((e,t)=>e+(t.sections?.length||0),0)||0;return(0,Q.jsxs)(`p`,{className:`text-[10px] text-emerald-400`,children:[`Valid JSON: `,t,` chapter`,t===1?``:`s`,`, `,n,` section`,n===1?``:`s`]})}catch(e){return(0,Q.jsxs)(`p`,{className:`text-[10px] text-rose-400`,children:[`Invalid JSON: `,e.message]})}})()})]})]}),(0,Q.jsxs)(`div`,{className:`mb-3 p-3 bg-slate-900 rounded border border-slate-700`,children:[(0,Q.jsx)(`label`,{className:`block text-xs font-bold text-cyan-400 uppercase mb-2`,children:`Assign to Modules (Optional)`}),(0,Q.jsx)(`div`,{className:`space-y-2 max-h-32 overflow-y-auto`,children:(()=>(e[`Current Course`]?.modules||[]).map(e=>(0,Q.jsxs)(`label`,{className:`flex items-center gap-2 cursor-pointer hover:bg-slate-800 p-1.5 rounded`,children:[(0,Q.jsx)(`input`,{type:`checkbox`,checked:R.assignedModules.includes(e.id),onChange:t=>{let n=t.target.checked?[...R.assignedModules,e.id]:R.assignedModules.filter(t=>t!==e.id);z({...R,assignedModules:n})},className:`rounded border-slate-700 bg-slate-900 text-cyan-600`}),(0,Q.jsx)(`span`,{className:`text-xs text-slate-300`,children:e.title})]},e.id)))()})]}),(0,Q.jsxs)(`button`,{onClick:()=>{if(!R.title){alert(`Title is required`);return}if(!R.viewUrl&&!R.digitalContent){alert(`Please provide either a View URL or Digital Content`);return}i(R),z({number:``,title:``,description:``,viewUrl:``,downloadUrl:``,color:`slate`,mediaType:`number`,themeOverride:null,assignedModules:[],hasDigitalContent:!1,digitalContent:null,digitalContentJson:``})},className:`w-full bg-pink-600 hover:bg-pink-500 text-white font-bold py-2 rounded text-xs flex items-center justify-center gap-2`,children:[(0,Q.jsx)(_e,{size:14}),` Add Material`]})]}),(0,Q.jsxs)(`div`,{className:`space-y-2`,children:[(0,Q.jsx)(`h4`,{className:`text-xs font-bold text-pink-300 mb-2`,children:`Current Materials`}),(()=>{let t=e[`Current Course`]?.materials||[];return t.length===0?(0,Q.jsx)(`p`,{className:`text-xs text-slate-500 italic text-center py-4`,children:`No materials yet. Add one above.`}):t.sort((e,t)=>e.order-t.order).map(e=>{let n=Ef(e),r=e.mediaType&&e.mediaType!==`number`?`text-[9px] font-black uppercase tracking-widest`:`text-xs font-bold`;return(0,Q.jsx)(`div`,{className:`p-3 bg-slate-900 rounded-lg border border-slate-800 hover:bg-slate-800/70 transition-colors`,children:(0,Q.jsxs)(`div`,{className:`flex items-center justify-between`,children:[(0,Q.jsxs)(`div`,{className:`flex items-center gap-3 flex-1`,children:[(0,Q.jsx)(`div`,{className:`w-8 h-8 rounded flex items-center justify-center text-${e.color}-500 bg-${e.color}-500/10 border border-${e.color}-500/20 ${r}`,children:n}),(0,Q.jsxs)(`div`,{className:`flex-1`,children:[(0,Q.jsxs)(`div`,{className:`text-sm font-medium ${e.hidden?`text-slate-500 line-through`:`text-slate-200`}`,children:[e.title,` `,e.hidden&&(0,Q.jsx)(`span`,{className:`text-[9px] text-slate-600`,children:`(HIDDEN)`}),e.digitalContent&&(0,Q.jsx)(`span`,{className:`ml-2 px-1.5 py-0.5 text-[9px] bg-emerald-900 text-emerald-400 rounded uppercase font-bold`,children:`Digital`})]}),(0,Q.jsx)(`div`,{className:`text-[10px] text-slate-500`,children:e.description})]})]}),(0,Q.jsxs)(`div`,{className:`flex items-center gap-1`,children:[(0,Q.jsx)(`button`,{onClick:()=>c(e.id),className:`p-1.5 rounded transition-colors ${e.hidden?`bg-slate-700 text-slate-400`:`bg-emerald-900 text-emerald-400`}`,title:e.hidden?`Show`:`Hide`,children:e.hidden?(0,Q.jsx)(ae,{size:12}):(0,Q.jsx)(oe,{size:12})}),(0,Q.jsx)(`button`,{onClick:()=>{L(e.id),z({...e,mediaType:e.mediaType||`number`,themeOverride:e.themeOverride??null,hasDigitalContent:!!e.digitalContent,digitalContentJson:e.digitalContent?JSON.stringify(e.digitalContent,null,2):``})},className:`p-1.5 hover:bg-blue-900 hover:text-blue-400 rounded`,title:`Edit`,children:(0,Q.jsx)(ge,{size:12})}),(0,Q.jsx)(`button`,{onClick:()=>s(e.id,`up`),disabled:e.order===0,className:`p-1.5 hover:bg-slate-700 rounded disabled:opacity-30`,title:`Move up`,children:(0,Q.jsx)(ee,{size:12})}),(0,Q.jsx)(`button`,{onClick:()=>s(e.id,`down`),disabled:e.order===t.length-1,className:`p-1.5 hover:bg-slate-700 rounded disabled:opacity-30 rotate-180`,title:`Move down`,children:(0,Q.jsx)(ee,{size:12})}),(0,Q.jsx)(`button`,{onClick:()=>o(e.id),className:`p-1.5 hover:bg-rose-900 hover:text-rose-400 rounded`,title:`Delete`,children:(0,Q.jsx)(Oe,{size:12})})]})]})},e.id)})})()]}),Mt&&(0,Q.jsx)(`div`,{className:`fixed inset-0 bg-black/80 z-50 flex items-center justify-center p-4`,children:(0,Q.jsxs)(`div`,{className:`bg-slate-900 border border-slate-700 rounded-xl max-w-2xl w-full p-6`,children:[(0,Q.jsx)(`h3`,{className:`text-lg font-bold text-white mb-4`,children:`Edit Material`}),(0,Q.jsxs)(`div`,{className:`space-y-3`,children:[(0,Q.jsxs)(`div`,{className:`grid grid-cols-1 md:grid-cols-3 gap-3`,children:[(0,Q.jsx)(`input`,{type:`text`,value:R.number,onChange:e=>z({...R,number:e.target.value}),placeholder:`Number`,className:`bg-slate-950 border border-slate-700 rounded p-2 text-white text-xs`}),(0,Q.jsxs)(`select`,{value:R.color,onChange:e=>z({...R,color:e.target.value}),className:`bg-slate-950 border border-slate-700 rounded p-2 text-white text-xs`,children:[(0,Q.jsx)(`option`,{value:`slate`,children:`Gray`}),(0,Q.jsx)(`option`,{value:`rose`,children:`Red`}),(0,Q.jsx)(`option`,{value:`amber`,children:`Orange`}),(0,Q.jsx)(`option`,{value:`emerald`,children:`Green`}),(0,Q.jsx)(`option`,{value:`sky`,children:`Blue`}),(0,Q.jsx)(`option`,{value:`purple`,children:`Purple`})]}),(0,Q.jsxs)(`select`,{value:R.mediaType,onChange:e=>z({...R,mediaType:e.target.value}),className:`bg-slate-950 border border-slate-700 rounded p-2 text-white text-xs`,children:[(0,Q.jsx)(`option`,{value:`number`,children:`Badge: Number`}),(0,Q.jsx)(`option`,{value:`book`,children:`Badge: Book`}),(0,Q.jsx)(`option`,{value:`pdf`,children:`Badge: PDF`}),(0,Q.jsx)(`option`,{value:`video`,children:`Badge: Video`}),(0,Q.jsx)(`option`,{value:`slides`,children:`Badge: Slides`})]})]}),(0,Q.jsxs)(`div`,{children:[(0,Q.jsx)(`label`,{className:`block text-xs font-bold text-slate-400 uppercase mb-1`,children:`Card theme`}),(0,Q.jsx)(`p`,{className:`text-[10px] text-slate-500 mb-1 italic`,children:`Overrides Phase 5 default for this material`}),(0,Q.jsx)(`select`,{value:R.themeOverride??``,onChange:e=>z({...R,themeOverride:e.target.value||null}),className:`w-full bg-slate-950 border border-slate-700 rounded p-2 text-white text-xs`,children:jt.map(e=>(0,Q.jsx)(`option`,{value:e.value,children:e.label},e.value||`default`))})]}),(0,Q.jsx)(`input`,{type:`text`,value:R.title,onChange:e=>z({...R,title:e.target.value}),placeholder:`Title`,className:`w-full bg-slate-950 border border-slate-700 rounded p-3 text-white text-sm`}),(0,Q.jsx)(`input`,{type:`text`,value:R.description,onChange:e=>z({...R,description:e.target.value}),placeholder:`Description`,className:`w-full bg-slate-950 border border-slate-700 rounded p-2 text-white text-xs`}),(0,Q.jsx)(`input`,{type:`text`,value:R.viewUrl,onChange:e=>z({...R,viewUrl:e.target.value}),placeholder:`View URL`,className:`w-full bg-slate-950 border border-slate-700 rounded p-2 text-white text-xs`}),(0,Q.jsx)(`input`,{type:`text`,value:R.downloadUrl,onChange:e=>z({...R,downloadUrl:e.target.value}),placeholder:`Download URL`,className:`w-full bg-slate-950 border border-slate-700 rounded p-2 text-white text-xs`}),(0,Q.jsxs)(`div`,{className:`p-3 bg-black/50 rounded border border-slate-700`,children:[(0,Q.jsx)(`label`,{className:`block text-xs font-bold text-cyan-400 uppercase mb-2`,children:`Assign to Modules (Optional)`}),(0,Q.jsx)(`div`,{className:`space-y-2 max-h-32 overflow-y-auto`,children:(()=>(e[`Current Course`]?.modules||[]).map(e=>(0,Q.jsxs)(`label`,{className:`flex items-center gap-2 cursor-pointer hover:bg-slate-800 p-1.5 rounded`,children:[(0,Q.jsx)(`input`,{type:`checkbox`,checked:(R.assignedModules||[]).includes(e.id),onChange:t=>{let n=R.assignedModules||[],r=t.target.checked?[...n,e.id]:n.filter(t=>t!==e.id);z({...R,assignedModules:r})},className:`rounded border-slate-700 bg-slate-900 text-cyan-600`}),(0,Q.jsx)(`span`,{className:`text-xs text-slate-300`,children:e.title})]},e.id)))()})]}),(0,Q.jsxs)(`div`,{className:`p-3 bg-black/50 rounded border border-slate-700`,children:[(0,Q.jsxs)(`label`,{className:`flex items-center gap-2 cursor-pointer mb-2`,children:[(0,Q.jsx)(`input`,{type:`checkbox`,checked:R.hasDigitalContent,onChange:e=>z({...R,hasDigitalContent:e.target.checked}),className:`rounded border-slate-700 bg-slate-900 text-emerald-600`}),(0,Q.jsx)(`span`,{className:`text-xs font-bold text-emerald-400 uppercase`,children:`Enable Digital Resource`})]}),R.hasDigitalContent&&(0,Q.jsxs)(`div`,{className:`mt-2`,children:[(0,Q.jsx)(`p`,{className:`text-[10px] text-slate-500 mb-2`,children:`Paste JSON content for a themed, readable digital version`}),(0,Q.jsx)(`textarea`,{value:R.digitalContentJson||``,onChange:e=>{let t=e.target.value;z({...R,digitalContentJson:t});try{if(t.trim()){let e=JSON.parse(t);(e.chapters||e.title)&&z(n=>({...n,digitalContent:e,digitalContentJson:t}))}}catch{}},placeholder:`{"title": "My Resource", "chapters": [...]}`,className:`w-full bg-slate-950 border border-slate-700 rounded p-2 text-white text-xs font-mono h-32 resize-none`}),R.digitalContentJson&&(0,Q.jsx)(`div`,{className:`mt-2`,children:(()=>{try{let e=JSON.parse(R.digitalContentJson);return(0,Q.jsxs)(`p`,{className:`text-[10px] text-emerald-400`,children:[`Valid: `,e.chapters?.length||0,` chapters, `,e.chapters?.reduce((e,t)=>e+(t.sections?.length||0),0)||0,` sections`]})}catch(e){return(0,Q.jsxs)(`p`,{className:`text-[10px] text-rose-400`,children:[`Invalid JSON: `,e.message]})}})()})]})]})]}),(0,Q.jsxs)(`div`,{className:`flex gap-3 mt-6`,children:[(0,Q.jsx)(`button`,{onClick:()=>{L(null),z({number:``,title:``,description:``,viewUrl:``,downloadUrl:``,color:`slate`,mediaType:`number`,themeOverride:null,assignedModules:[],hasDigitalContent:!1,digitalContent:null,digitalContentJson:``})},className:`flex-1 bg-slate-700 hover:bg-slate-600 text-white py-2 rounded font-bold`,children:`Cancel`}),(0,Q.jsxs)(`button`,{onClick:()=>{a(Mt,R),L(null),z({number:``,title:``,description:``,viewUrl:``,downloadUrl:``,color:`slate`,mediaType:`number`,themeOverride:null,assignedModules:[],hasDigitalContent:!1,digitalContent:null,digitalContentJson:``})},className:`flex-1 bg-pink-600 hover:bg-pink-500 text-white py-2 rounded font-bold flex items-center justify-center gap-2`,children:[(0,Q.jsx)(be,{size:16}),` Save Changes`]})]})]})})]})}),Ve===`MODULE_MANAGER`&&(0,Q.jsx)(`div`,{className:`animate-in fade-in slide-in-from-right-4 duration-300 space-y-4`,children:(0,Q.jsxs)(`div`,{className:`p-6 bg-indigo-900/20 border border-indigo-700/50 rounded-xl`,children:[(0,Q.jsxs)(`h3`,{className:`text-lg font-bold text-indigo-400 mb-2 flex items-center gap-2`,children:[(0,Q.jsx)(O,{size:20}),` Module Manager`]}),(0,Q.jsxs)(`p`,{className:`text-xs text-slate-400 mb-6 leading-relaxed`,children:[`Add complete HTML pages as modules. Each module runs in its own `,(0,Q.jsx)(`span`,{className:`text-emerald-400 font-bold`,children:`isolated iframe`}),` - your code works exactly as you created it with no modifications.`]}),(0,Q.jsxs)(`div`,{className:`flex gap-2 mb-6 bg-slate-900 p-1 rounded-lg border border-slate-700`,children:[(0,Q.jsx)(`button`,{onClick:()=>{Xe(`standalone`),mt(null)},className:`flex-1 py-2 px-4 rounded text-xs font-bold transition-all ${Ye===`standalone`?`bg-indigo-600 text-white`:`text-slate-400 hover:text-white`}`,children:`Standalone HTML`}),(0,Q.jsx)(`button`,{onClick:()=>{Xe(`external`),mt(null)},className:`flex-1 py-2 px-4 rounded text-xs font-bold transition-all ${Ye===`external`?`bg-indigo-600 text-white`:`text-slate-400 hover:text-white`}`,children:`External Link`})]}),(0,Q.jsxs)(`div`,{className:`space-y-4`,children:[(0,Q.jsxs)(`div`,{children:[(0,Q.jsxs)(`label`,{className:`block text-xs font-bold text-slate-300 uppercase mb-2`,children:[`Module ID `,(0,Q.jsx)(`span`,{className:`text-rose-500`,children:`*`})]}),(0,Q.jsx)(`input`,{type:`text`,value:tt,onChange:e=>nt(e.target.value),placeholder:`hss3020 or view-hss3020`,className:`w-full bg-slate-950 border border-slate-700 rounded-lg p-3 text-white text-sm font-mono focus:border-indigo-500 outline-none`}),(0,Q.jsx)(`p`,{className:`text-[10px] text-slate-500 mt-1 italic`,children:`Unique identifier (will be prefixed with 'view-' if needed)`})]}),(0,Q.jsxs)(`div`,{children:[(0,Q.jsxs)(`label`,{className:`block text-xs font-bold text-slate-300 uppercase mb-2`,children:[`Module Title `,(0,Q.jsx)(`span`,{className:`text-rose-500`,children:`*`})]}),(0,Q.jsx)(`input`,{type:`text`,value:rt,onChange:e=>it(e.target.value),placeholder:`HSS3020 Course`,className:`w-full bg-slate-950 border border-slate-700 rounded-lg p-3 text-white text-sm focus:border-indigo-500 outline-none`}),(0,Q.jsx)(`p`,{className:`text-[10px] text-slate-500 mt-1 italic`,children:`Display name for the sidebar button`})]}),Ye===`standalone`&&(0,Q.jsxs)(Q.Fragment,{children:[(0,Q.jsxs)(`div`,{children:[(0,Q.jsxs)(`label`,{className:`block text-xs font-bold text-slate-300 uppercase mb-2`,children:[`Paste Complete HTML File `,(0,Q.jsx)(`span`,{className:`text-rose-500`,children:`*`})]}),(0,Q.jsx)(`textarea`,{value:Ze,onChange:e=>Qe(e.target.value),placeholder:`<!DOCTYPE html>
<html>
<head>...</head>
<body>...</body>
</html>`,className:`w-full bg-slate-950 border border-slate-700 rounded-lg p-3 text-indigo-100 text-xs font-mono h-64 resize-y focus:border-indigo-500 outline-none`}),(0,Q.jsx)(`p`,{className:`text-[10px] text-emerald-400 mt-1 font-bold`,children:` Your code runs AS-IS in an isolated iframe - no modifications needed!`})]}),(0,Q.jsxs)(`button`,{onClick:Yt,className:`w-full bg-indigo-600 hover:bg-indigo-500 text-white px-6 py-3 rounded-lg text-sm font-bold flex items-center justify-center gap-2 transition-all active:scale-[0.98]`,children:[(0,Q.jsx)(_e,{size:16}),` Add Standalone Module`]})]}),Ye===`external`&&(0,Q.jsxs)(Q.Fragment,{children:[(0,Q.jsxs)(`div`,{children:[(0,Q.jsxs)(`label`,{className:`block text-xs font-bold text-slate-300 uppercase mb-2`,children:[`External URL `,(0,Q.jsx)(`span`,{className:`text-rose-500`,children:`*`})]}),(0,Q.jsxs)(`div`,{className:`flex gap-2`,children:[(0,Q.jsx)(`input`,{type:`url`,value:$e,onChange:e=>{et(e.target.value),mt(null)},placeholder:`https://myhostedmodule.com`,className:`flex-1 bg-slate-950 border border-slate-700 rounded-lg p-3 text-white text-sm font-mono focus:border-indigo-500 outline-none`,onKeyDown:e=>{e.key===`Enter`&&!dt&&Zt($e)}}),(0,Q.jsx)(`button`,{onClick:()=>Zt($e),disabled:!$e||dt,className:`px-4 bg-slate-700 hover:bg-slate-600 text-white rounded-lg text-xs font-bold disabled:opacity-50 disabled:cursor-not-allowed transition-colors`,title:`Test if URL is accessible`,children:dt?`Testing...`:`Test`})]}),pt&&(0,Q.jsx)(`div`,{className:`mt-2 p-3 rounded-lg text-xs border ${pt.success?`bg-emerald-900/30 text-emerald-400 border-emerald-500/30`:`bg-rose-900/30 text-rose-400 border-rose-500/30`}`,children:(0,Q.jsxs)(`div`,{className:`flex items-start gap-2`,children:[(0,Q.jsx)(`span`,{className:`font-bold`,children:pt.success?``:``}),(0,Q.jsx)(`span`,{children:pt.message})]})}),(0,Q.jsx)(`p`,{className:`text-[10px] text-slate-500 mt-1 italic`,children:`Full URL to the hosted module page. Press Enter or click Test to verify.`})]}),(0,Q.jsxs)(`div`,{children:[(0,Q.jsx)(`label`,{className:`block text-xs font-bold text-slate-300 uppercase mb-2`,children:`Link Behavior`}),(0,Q.jsxs)(`div`,{className:`flex gap-3`,children:[(0,Q.jsxs)(`label`,{className:`flex items-center gap-2 p-3 bg-slate-950 rounded-lg border border-slate-800 cursor-pointer hover:border-indigo-500 transition flex-1`,children:[(0,Q.jsx)(`input`,{type:`radio`,name:`linkType`,value:`iframe`,checked:at===`iframe`,onChange:e=>ot(e.target.value),className:`w-4 h-4 text-indigo-600`}),(0,Q.jsx)(`span`,{className:`text-xs text-slate-300`,children:`Open in iframe`})]}),(0,Q.jsxs)(`label`,{className:`flex items-center gap-2 p-3 bg-slate-950 rounded-lg border border-slate-800 cursor-pointer hover:border-indigo-500 transition flex-1`,children:[(0,Q.jsx)(`input`,{type:`radio`,name:`linkType`,value:`newtab`,checked:at===`newtab`,onChange:e=>ot(e.target.value),className:`w-4 h-4 text-indigo-600`}),(0,Q.jsx)(`span`,{className:`text-xs text-slate-300`,children:`Open in new tab`})]})]})]}),(0,Q.jsxs)(`button`,{onClick:Xt,className:`w-full bg-indigo-600 hover:bg-indigo-500 text-white px-6 py-3 rounded-lg text-sm font-bold flex items-center justify-center gap-2 transition-all active:scale-[0.98]`,children:[(0,Q.jsx)(_e,{size:16}),` Add External Link Module`]})]}),st&&(0,Q.jsx)(`div`,{className:`p-4 rounded-lg border ${st===`success`?`bg-emerald-900/20 border-emerald-500/30`:`bg-rose-900/20 border-rose-500/30`}`,children:(0,Q.jsx)(`p`,{className:`text-sm ${st===`success`?`text-emerald-300`:`text-rose-300`}`,children:lt})}),(0,Q.jsxs)(`div`,{className:`p-4 bg-sky-900/10 border border-sky-500/20 rounded-lg`,children:[(0,Q.jsx)(`h4`,{className:`text-xs font-bold text-sky-400 uppercase mb-2`,children:` Module Types`}),(0,Q.jsxs)(`ul`,{className:`text-[10px] text-slate-400 space-y-1 leading-relaxed`,children:[(0,Q.jsxs)(`li`,{children:[(0,Q.jsx)(`strong`,{className:`text-sky-300`,children:`Standalone HTML:`}),` Complete HTML file (like HSS3020). CSS auto-scoped, wrapped in view container.`]}),(0,Q.jsxs)(`li`,{children:[(0,Q.jsx)(`strong`,{className:`text-sky-300`,children:`External Link:`}),` Link to hosted module. Choose iframe (embedded) or new tab (external).`]}),(0,Q.jsx)(`li`,{children:` Modules appear in sidebar navigation`}),(0,Q.jsx)(`li`,{children:` Can be hidden/shown in Phase 2`}),(0,Q.jsx)(`li`,{children:` Included in compiled site`})]})]})]})]})}),Ve===`AI_MODULE`&&(0,Q.jsxs)(`div`,{className:`animate-in fade-in slide-in-from-right-4 duration-300 space-y-6`,children:[(0,Q.jsxs)(`div`,{className:`flex gap-2 bg-slate-900 p-1 rounded-lg border border-slate-700 w-full max-w-md mx-auto`,children:[(0,Q.jsxs)(`button`,{onClick:()=>Ht(`MODULE`),className:`flex-1 flex items-center justify-center gap-2 py-3 px-4 rounded-md text-xs font-bold transition-all ${Vt===`MODULE`?`bg-sky-600 text-white shadow-lg`:`text-slate-500 hover:text-slate-300`}`,children:[(0,Q.jsx)(O,{size:14}),` Create Module`]}),(0,Q.jsxs)(`button`,{onClick:()=>Ht(`FEATURE`),className:`flex-1 flex items-center justify-center gap-2 py-3 px-4 rounded-md text-xs font-bold transition-all ${Vt===`FEATURE`?`bg-orange-600 text-white shadow-lg`:`text-slate-500 hover:text-slate-300`}`,children:[(0,Q.jsx)(je,{size:14}),` Create Feature`]})]}),(0,Q.jsxs)(`div`,{className:`p-4 bg-emerald-900/20 border border-emerald-700/50 rounded-lg`,children:[(0,Q.jsxs)(`h3`,{className:`text-sm font-bold text-emerald-400 mb-4 flex items-center gap-2`,children:[(0,Q.jsx)(Te,{size:16}),` Step 1: Generate AI Prompt`]}),(0,Q.jsx)(`p`,{className:`text-xs text-slate-400 mb-4`,children:Vt===`MODULE`?`Describe what course module you want to create. We'll generate an optimized prompt for Google AI Studio.`:`Describe what reusable feature you want to create. Features are saved to the Global Toolkit and can be used across courses.`}),(0,Q.jsxs)(`div`,{className:`space-y-3`,children:[(0,Q.jsx)(`label`,{className:`block text-xs font-bold text-slate-400 uppercase`,children:Vt===`MODULE`?`Describe Your Module`:`Describe Your Feature`}),(0,Q.jsx)(`textarea`,{value:Ot,onChange:e=>kt(e.target.value),placeholder:Vt===`MODULE`?`Example: Create a drag-and-drop goal-setting activity with 3 categories (Personal, Professional, Health). Include a save button that stores goals to localStorage and a reset button.`:`Example: Create a save/load system with 3 buttons: Save Progress, Load Progress, and Clear All. Use localStorage with a configurable storage key. Show success/error toasts.`,className:`w-full bg-slate-950 border border-emerald-900 rounded-lg p-3 text-sm text-white h-32 focus:border-emerald-500 outline-none resize-y`}),(0,Q.jsxs)(`button`,{onClick:()=>{Pt(`=== PROMPT FOR GOOGLE AI STUDIO ===

I am building a feature for the "Course Factory" Learning Platform. 
I need you to act as a Senior System Architect. 

**YOUR GOAL:** Analyze my feature request and generate robust, non-conflicting code that is safe for a Single Page Application (SPA).

**OUTPUT FORMAT:**
Return ONLY valid JSON. No markdown. Single-line strings.
\`\`\`json
{
  "id": "${Vt===`MODULE`?`view`:`feat`}-[descriptive-name]",
  "html": "...",
  "script": "..."
}
\`\`\`

**SYSTEM CONTEXT:**
- **Framework:** HTML5 + Vanilla JS + Tailwind CSS (CDN).
- **Theme:** Dark Mode (Bg: \`bg-slate-950\`, Text: \`text-slate-200\`).
- **Wrapper Logic:** Your code is injected into a parent container that handles visibility. **NEVER use \`hidden\` or \`display:none\` on your root HTML element.**

**SAFETY PROTOCOLS (CRITICAL):**
1. **Namespace Security:** All variables and function names MUST use a unique prefix based on the feature name (e.g., \`featCalc_calculate\`, \`featTimer_start\`). Do not use generic names like \`count\` or \`calcValue\`.
2. **Variable Scope Safety:** Use \`var\` (NOT \`const\` or \`let\`) for any state variables that need to be accessed by inline onclick handlers. This ensures they are accessible from the global scope. Example: \`var featCalc_state = {};\` instead of \`const featCalc_state = {};\`.
3. **Window Attachment (CRITICAL):** After defining each function, you MUST explicitly attach it to the window object for Google Sites compatibility. Example:
   \`\`\`javascript
   function featCalc_calculate() { ... }
   window.featCalc_calculate = featCalc_calculate;
   \`\`\`
   This ensures inline onclick handlers can find the function in sandboxed environments.
4. **No Zombie Listeners:** Prefer inline attributes (e.g., \`onclick="featCalc_handle()"\`) over \`window.addEventListener\`.
5. **Visibility Safety:** The HTML string must be visible by default. Do not add \`hidden\` classes to the outer-most div.
6. **Close Logic:** If building a tool, the close button should trigger \`toggleTool('tool-id')\` (where 'tool-id' matches your div id, e.g. 'tool-calculator').
7. **Initialization Block (REQUIRED):** At the END of your script, you MUST add initialization code to force execution in sandboxed environments (like Google Sites). This ensures all functions are registered before user interaction. Minimum requirement:
   \`\`\`javascript
   // Force script execution
   if (document.readyState === 'loading') {
       document.addEventListener('DOMContentLoaded', function() {
           console.log(' [feature-name] loaded');
       });
   } else {
       console.log(' [feature-name] loaded');
   }
   \`\`\`
   If your code has state to restore from localStorage, call your populate/init function here instead.

**LOGIC ROUTER (How to build this):**

**CASE A: Standard Tool (Calculator, Timer, Notes)**
- Build a fixed position Card UI (\`fixed bottom-4 right-4 z-50 bg-slate-800\`).
- Ensure the UI is visible immediately (no \`hidden\` class).
- Use \`localStorage\` for saving data.

**CASE B: System Integrator (Theme Switcher, Progress Bar)**
- To read data, scan DOM via \`document.querySelectorAll\`.

**CASE C: Visual Overlay (Modal, Popup)**
- Use \`fixed inset-0 z-[100]\` to sit on top of the Sidebar.

**CASE D: External Libraries (Charts, PDF)**
- Inject the required CDN script tag inside the HTML string.

**MY REQUEST:**
${Ot}
`)},disabled:!Ot.trim(),className:`w-full bg-emerald-600 hover:bg-emerald-500 text-white font-bold py-3 rounded-lg text-xs disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2`,children:[(0,Q.jsx)(Te,{size:14}),` Generate Full Prompt`]})]}),Nt&&(0,Q.jsxs)(`div`,{className:`mt-4 pt-4 border-t border-emerald-800`,children:[(0,Q.jsx)(xf,{label:`Copy this prompt to Google AI Studio`,code:Nt,height:`h-64`}),(0,Q.jsxs)(`div`,{className:`mt-2 p-3 bg-sky-900/20 border border-sky-700/50 rounded text-xs text-sky-200`,children:[(0,Q.jsx)(`strong`,{children:`Next:`}),` Copy the prompt above, paste it into Google AI Studio, and copy the JSON response back to Step 2 below.`]})]})]}),(0,Q.jsxs)(`div`,{className:`p-4 bg-blue-900/20 border border-blue-700/50 rounded-lg`,children:[(0,Q.jsxs)(`h3`,{className:`text-sm font-bold text-blue-400 mb-4 flex items-center gap-2`,children:[(0,Q.jsx)(se,{size:16}),` Step 2: Import AI Studio Output`]}),(0,Q.jsx)(`p`,{className:`text-xs text-slate-400 mb-4`,children:`Paste the JSON response from Google AI Studio here. We'll validate and parse it.`}),(0,Q.jsxs)(`div`,{className:`space-y-3`,children:[(0,Q.jsx)(`textarea`,{value:Ft,onChange:e=>{It(e.target.value),Bt(null),Rt(null)},placeholder:Vt===`MODULE`?`Paste JSON here: { "id": "view-example", "html": "...", "script": "..." }`:`Paste JSON here: { "id": "feat-example", "html": "...", "script": "..." }`,className:`w-full bg-slate-950 border border-blue-900 rounded-lg p-3 text-xs text-blue-100 font-mono h-48 focus:border-blue-500 outline-none resize-y`}),zt&&(0,Q.jsxs)(`div`,{className:`p-3 bg-rose-900/30 border border-rose-600 rounded text-xs text-rose-200`,children:[(0,Q.jsx)(`strong`,{children:`Parse Error:`}),` `,zt]}),Lt&&(0,Q.jsxs)(`div`,{className:`space-y-2`,children:[(0,Q.jsxs)(`div`,{className:`p-3 bg-emerald-900/20 border border-emerald-700 rounded space-y-1`,children:[(0,Q.jsxs)(`div`,{className:`flex items-center gap-2 text-xs text-emerald-300`,children:[(0,Q.jsx)(te,{size:14}),` `,(0,Q.jsx)(`strong`,{children:`Valid JSON detected`})]}),(0,Q.jsxs)(`div`,{className:`text-xs text-slate-400`,children:[`ID: `,(0,Q.jsx)(`span`,{className:`font-mono text-emerald-400`,children:Lt.id})]}),(0,Q.jsxs)(`div`,{className:`text-xs text-slate-400`,children:[`HTML length: `,(0,Q.jsx)(`span`,{className:`text-white`,children:Lt.html?.length||0}),` chars`]}),(0,Q.jsxs)(`div`,{className:`text-xs text-slate-400`,children:[`Script: `,(0,Q.jsx)(`span`,{className:`text-white`,children:Lt.script?`Present`:`None`})]})]}),(0,Q.jsx)(`input`,{type:`text`,value:bt,onChange:e=>xt(e.target.value),placeholder:Vt===`MODULE`?`Module title for sidebar (e.g., Goal Setting Activity)`:`Feature title for Global Toolkit (e.g., Save/Load System)`,className:`w-full bg-slate-950 border border-blue-700 rounded-lg p-3 text-white text-sm`})]}),(0,Q.jsxs)(`button`,{onClick:()=>{try{let e=Ft.trim(),t=e;if(e.includes("```json")){let n=e.match(/```json\s*([\s\S]*?)\s*```/);n&&(t=n[1])}else if(e.includes("```")){let n=e.match(/```\s*([\s\S]*?)\s*```/);n&&(t=n[1])}let n=JSON.parse(t);if(!n.id)throw Error(`Missing "id" field`);if(!n.html)throw Error(`Missing "html" field`);Rt(n),Bt(null),I(JSON.stringify(n,null,2))}catch(e){Bt(e.message),Rt(null)}},disabled:!Ft.trim(),className:`w-full bg-blue-600 hover:bg-blue-500 text-white font-bold py-3 rounded-lg text-xs disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2`,children:[(0,Q.jsx)(se,{size:14}),` Parse & Validate JSON`]})]})]}),Lt&&bt&&(0,Q.jsxs)(`div`,{className:`p-4 bg-slate-900/50 border border-slate-700 rounded-lg`,children:[(0,Q.jsxs)(`h3`,{className:`text-sm font-bold text-white mb-4 flex items-center gap-2`,children:[(0,Q.jsx)(te,{size:16}),` Step 3: Preview & Commit`]}),(0,Q.jsx)(`div`,{className:`flex gap-3`,children:(0,Q.jsxs)(`button`,{onClick:()=>{Jt(yt),kt(``),Pt(``),It(``),Rt(null),xt(``)},className:`flex-1 bg-emerald-600 hover:bg-emerald-500 text-white font-bold py-4 rounded-lg transition-colors flex items-center justify-center gap-2 text-sm shadow-lg`,children:[(0,Q.jsx)(Ne,{size:16}),` Add to Project`]})}),St===`success`&&(0,Q.jsxs)(`div`,{className:`mt-3 text-xs text-emerald-400 font-bold animate-in fade-in zoom-in flex items-center gap-2 justify-center bg-emerald-900/20 p-2 rounded border border-emerald-800`,children:[(0,Q.jsx)(te,{size:14}),Vt===`MODULE`?`Module added! Check Phase 2 to preview or Phase 4 to compile.`:`Feature added to Global Toolkit! Check Phase 2 to preview or Phase 4 to add to a course.`]})]})]}),Ve!==`ASSET`&&Ve!==`ASSESSMENT`&&Ve!==`AI_MODULE`&&(0,Q.jsxs)(Q.Fragment,{children:[(0,Q.jsx)(Sf,{active:Ue,onToggle:We,labelA:`New Content (PDF)`,labelB:`Migrate Code`,iconA:Te,iconB:xe}),Ue===`B`&&(0,Q.jsxs)(`div`,{className:`animate-in fade-in slide-in-from-right-4 duration-300 space-y-8`,children:[(0,Q.jsxs)(`div`,{className:`bg-slate-900/50 p-4 rounded-xl border border-blue-900/50`,children:[(0,Q.jsxs)(`h3`,{className:`text-sm font-bold text-blue-400 flex items-center gap-2 mb-2`,children:[(0,Q.jsx)(Se,{size:16}),` Step 1: The Scanner`]}),(0,Q.jsx)(xf,{label:`Analysis Prompt`,code:Qt,height:`h-24`}),(0,Q.jsx)(`div`,{className:`mt-4 pt-4 border-t border-slate-800`,children:(0,Q.jsx)(`textarea`,{value:n,onChange:e=>r(e.target.value),className:`w-full bg-slate-950 border border-slate-800 rounded-lg p-3 text-xs text-slate-300 font-mono h-24 focus:border-blue-500 outline-none resize-y`,placeholder:`Paste results here...`})})]}),(0,Q.jsxs)(`div`,{className:`bg-slate-900/50 p-4 rounded-xl border border-pink-900/50`,children:[(0,Q.jsxs)(`h3`,{className:`text-sm font-bold text-pink-400 flex items-center gap-2 mb-2`,children:[(0,Q.jsx)(xe,{size:16}),` Step 2: The Extractor`]}),(0,Q.jsxs)(`div`,{className:`grid grid-cols-2 gap-4 mb-4`,children:[(0,Q.jsx)(`input`,{type:`text`,value:ht,onChange:e=>gt(e.target.value),placeholder:`Target ID...`,className:`w-full bg-slate-900 border border-slate-700 rounded p-2 text-pink-400 font-mono text-xs`}),(0,Q.jsx)(`input`,{type:`text`,value:_t,onChange:e=>vt(e.target.value),placeholder:`JS Prefix...`,className:`w-full bg-slate-900 border border-slate-700 rounded p-2 text-pink-400 font-mono text-xs`})]}),(0,Q.jsx)(xf,{label:`Deconstruction Prompt`,code:$t,height:`h-32`})]}),(0,Q.jsxs)(`div`,{className:`bg-emerald-900/20 border border-emerald-700/50 p-4 rounded-xl`,children:[(0,Q.jsxs)(`div`,{className:`flex items-center justify-between mb-2`,children:[(0,Q.jsxs)(`h3`,{className:`text-sm font-bold text-emerald-400 flex items-center gap-2`,children:[(0,Q.jsx)(re,{size:16}),` Step 3: Commit to `,en]}),St===`success`&&(0,Q.jsxs)(`span`,{className:`flex items-center gap-1 text-xs text-emerald-300 animate-in fade-in zoom-in`,children:[(0,Q.jsx)(te,{size:14}),` Saved to Session!`]})]}),wt&&(0,Q.jsx)(`div`,{className:`mb-2 p-2 bg-rose-900/30 border border-rose-600 rounded text-xs text-rose-200`,children:wt}),(0,Q.jsx)(`input`,{type:`text`,value:bt,onChange:e=>xt(e.target.value),placeholder:`Title (e.g. Save System)`,className:`w-full mb-2 bg-slate-950 border border-emerald-900 rounded p-2 text-white text-sm`}),(0,Q.jsx)(`textarea`,{value:yt,onChange:e=>I(e.target.value),className:`w-full bg-slate-950 border border-emerald-900 rounded-lg p-3 text-xs text-emerald-100 font-mono h-24 focus:border-emerald-500 outline-none resize-y mb-2`,placeholder:`Paste output JSON here...`}),(0,Q.jsx)(`div`,{className:`flex gap-2 mb-6`,children:(0,Q.jsxs)(`button`,{onClick:()=>Jt(),disabled:!yt||!bt,className:`flex-1 bg-emerald-600 hover:bg-emerald-500 text-white font-bold py-3 rounded-lg transition-colors flex items-center justify-center gap-2 text-xs shadow-lg`,children:[(0,Q.jsx)(Ne,{size:14}),`  Add to Session (Instant)`]})}),(0,Q.jsxs)(`div`,{className:`pt-4 border-t border-emerald-800/50`,children:[(0,Q.jsxs)(`div`,{className:`flex items-center justify-between mb-2`,children:[(0,Q.jsx)(`p`,{className:`text-[10px] text-emerald-400/60 uppercase font-bold`,children:`Optional: Hard Save`}),(0,Q.jsx)(`span`,{className:`text-[9px] text-emerald-600 bg-emerald-950/50 px-2 py-0.5 rounded`,children:`Only do this once at the end`})]}),(0,Q.jsx)(xf,{label:`Permanent Save Prompt (Use Sparingly)`,code:tn,height:`h-24`})]})]})]})]})]})]}),Le&&(0,Q.jsx)(ff,{onSelect:Wt,onClose:()=>{Re(!1),ze(null)}})]})},If=({projectData:e,setProjectData:t,editMaterial:n,onEdit:r,onPreview:i,onDelete:a,onToggleHidden:o,deleteMaterial:s,deleteAssessment:c,toggleMaterialHidden:l,toggleAssessmentHidden:u})=>{let[d,f]=$(`MODULE`),[p,m]=$(``),[h,g]=$(null),[_,v]=$(null),[y,b]=$(null),[x,S]=$(null),[C,w]=$(null),[T,E]=$([]),D=e[`Current Course`]?.modules||[],k=e[`Global Toolkit`]||[],A=e[`Current Course`]?.materials||[],j=D.flatMap(e=>(e.assessments||[]).map(t=>({...t,moduleName:e.title}))),M=d===`MODULE`?D:d===`FEATURE`?k:d===`ASSESSMENT`?j:d===`MATERIAL`?A:[],ee=M.filter(e=>e.title?.toLowerCase().includes(p.toLowerCase())||e.id?.toLowerCase().includes(p.toLowerCase())),ne=e=>{let t=ee[e];if(g(t),d===`MATERIAL`){v(t);return}if(d===`ASSESSMENT`){S(t);return}i&&i(t)},N=e=>{let t=ee[e];if(d===`MATERIAL`){b(t);return}if(d===`ASSESSMENT`){w(t);return}r&&r(t)},P=e=>{let t=e.code||{};if(typeof t==`string`)try{t=JSON.parse(t)}catch{}return t.id===`view-materials`||e.id===`item-assessments`||e.title===`Assessments`},re=e=>{let t=ee[e];if(P(t)){alert(`\xA0 Course Materials and Assessments are core modules and cannot be deleted.

You can hide them instead using the hide/show toggle.`);return}a&&a(t)},se=e=>{try{if(!e.code)return{htmlLength:0,scriptLength:0,total:0};let t=typeof e.code==`string`?JSON.parse(e.code):e.code,n=t.html?.length||0,r=t.script?.length||0;return{htmlLength:n,scriptLength:r,total:n+r}}catch{return{htmlLength:0,scriptLength:0,total:0}}};return(0,Q.jsxs)(`div`,{className:`space-y-6 animate-in fade-in duration-500`,children:[(0,Q.jsxs)(`div`,{className:`bg-slate-800 p-6 rounded-lg border border-slate-700`,children:[(0,Q.jsxs)(`h2`,{className:`text-xl font-bold text-white mb-4 flex items-center gap-2`,children:[(0,Q.jsx)(oe,{className:`text-purple-400`}),` Phase 2: Preview & Test`]}),(0,Q.jsx)(`p`,{className:`text-xs text-slate-400 mb-6`,children:`Browse, preview, and test your modules and features before compiling.`}),(0,Q.jsxs)(`div`,{className:`grid grid-cols-2 md:grid-cols-4 gap-2 bg-slate-900 p-1 rounded-lg border border-slate-700 mb-4`,children:[(0,Q.jsxs)(`button`,{onClick:()=>{f(`MODULE`),m(``),g(null)},className:`flex items-center justify-center gap-2 py-2 px-3 rounded-md text-xs font-bold transition-all ${d===`MODULE`?`bg-purple-600 text-white shadow-lg`:`text-slate-500 hover:text-slate-300`}`,children:[(0,Q.jsx)(O,{size:14}),` Modules (`,D.length,`)`]}),(0,Q.jsxs)(`button`,{onClick:()=>{f(`ASSESSMENT`),m(``),g(null)},className:`flex items-center justify-center gap-2 py-2 px-3 rounded-md text-xs font-bold transition-all ${d===`ASSESSMENT`?`bg-blue-600 text-white shadow-lg`:`text-slate-500 hover:text-slate-300`}`,children:[(0,Q.jsx)(te,{size:14}),` Assessments`]}),(0,Q.jsxs)(`button`,{onClick:()=>{f(`MATERIAL`),m(``),g(null)},className:`flex items-center justify-center gap-2 py-2 px-3 rounded-md text-xs font-bold transition-all ${d===`MATERIAL`?`bg-cyan-600 text-white shadow-lg`:`text-slate-500 hover:text-slate-300`}`,children:[(0,Q.jsx)(le,{size:14}),` Materials`]}),(0,Q.jsxs)(`button`,{onClick:()=>{f(`FEATURE`),m(``),g(null)},className:`flex items-center justify-center gap-2 py-2 px-3 rounded-md text-xs font-bold transition-all ${d===`FEATURE`?`bg-orange-600 text-white shadow-lg`:`text-slate-500 hover:text-slate-300`}`,children:[(0,Q.jsx)(je,{size:14}),` Toolkit (`,k.length,`)`]})]}),(0,Q.jsxs)(`div`,{className:`relative mb-6`,children:[(0,Q.jsx)(Se,{size:16,className:`absolute left-3 top-3 text-slate-500`}),(0,Q.jsx)(`input`,{type:`text`,value:p,onChange:e=>m(e.target.value),placeholder:`Search by title or ID...`,className:`w-full bg-slate-900 border border-slate-700 rounded-lg pl-10 pr-4 py-3 text-white text-sm focus:outline-none focus:border-purple-500`})]}),T.length>0&&(0,Q.jsxs)(`div`,{className:`mb-4 p-3 bg-amber-900/20 border border-amber-700/50 rounded-lg`,children:[(0,Q.jsxs)(`div`,{className:`flex items-center justify-between mb-2`,children:[(0,Q.jsxs)(`span`,{className:`text-sm font-bold text-amber-400`,children:[T.length,` item`,T.length===1?``:`s`,` selected`]}),(0,Q.jsx)(`button`,{onClick:()=>E([]),className:`text-xs text-slate-400 hover:text-white`,children:`Clear Selection`})]}),(0,Q.jsxs)(`div`,{className:`flex flex-wrap gap-2`,children:[(d===`MODULE`||d===`MATERIAL`||d===`ASSESSMENT`)&&(0,Q.jsxs)(Q.Fragment,{children:[(0,Q.jsxs)(`button`,{onClick:()=>{d===`MODULE`?t(e=>{let t=(e[`Current Course`]?.modules||[]).map(e=>T.includes(e.id)&&!P(e)&&!e.hidden?{...e,hidden:!0}:e);return{...e,"Current Course":{...e[`Current Course`],modules:t}}}):d===`MATERIAL`?t(e=>{let t=(e[`Current Course`]?.materials||[]).map(e=>T.includes(e.id)&&e.hidden!==!0?{...e,hidden:!0}:e);return{...e,"Current Course":{...e[`Current Course`],materials:t}}}):d===`ASSESSMENT`&&t(e=>{let t=e[`Current Course`]?.modules||[],n=t.find(e=>e.id===`item-assessments`||e.title===`Assessments`);if(n){let r=(n.assessments||[]).map(e=>T.includes(e.id)&&e.hidden!==!0?{...e,hidden:!0}:e),i=t.map(e=>e.id===`item-assessments`||e.title===`Assessments`?{...e,assessments:r}:e);return{...e,"Current Course":{...e[`Current Course`],modules:i}}}return e}),E([])},className:`px-3 py-2 bg-slate-700 hover:bg-slate-600 text-white text-xs font-bold rounded transition-colors flex items-center gap-1`,children:[(0,Q.jsx)(ae,{size:12}),` Hide Selected`]}),(0,Q.jsxs)(`button`,{onClick:()=>{d===`MODULE`?t(e=>{let t=(e[`Current Course`]?.modules||[]).map(e=>T.includes(e.id)&&e.hidden?{...e,hidden:!1}:e);return{...e,"Current Course":{...e[`Current Course`],modules:t}}}):d===`MATERIAL`?t(e=>{let t=(e[`Current Course`]?.materials||[]).map(e=>T.includes(e.id)&&e.hidden===!0?{...e,hidden:!1}:e);return{...e,"Current Course":{...e[`Current Course`],materials:t}}}):d===`ASSESSMENT`&&t(e=>{let t=e[`Current Course`]?.modules||[],n=t.find(e=>e.id===`item-assessments`||e.title===`Assessments`);if(n){let r=(n.assessments||[]).map(e=>T.includes(e.id)&&e.hidden===!0?{...e,hidden:!1}:e),i=t.map(e=>e.id===`item-assessments`||e.title===`Assessments`?{...e,assessments:r}:e);return{...e,"Current Course":{...e[`Current Course`],modules:i}}}return e}),E([])},className:`px-3 py-2 bg-slate-700 hover:bg-slate-600 text-white text-xs font-bold rounded transition-colors flex items-center gap-1`,children:[(0,Q.jsx)(oe,{size:12}),` Show Selected`]})]}),(0,Q.jsxs)(`button`,{onClick:()=>{if(confirm(`Delete ${T.length} item${T.length===1?``:`s`}? This cannot be undone.`)){if(d===`MODULE`)t(e=>{let t=(e[`Current Course`]?.modules||[]).filter(e=>!T.includes(e.id)||P(e));return{...e,"Current Course":{...e[`Current Course`],modules:t}}});else if(d===`MATERIAL`&&s)t(e=>{let t=(e[`Current Course`]?.materials||[]).filter(e=>!T.includes(e.id));return{...e,"Current Course":{...e[`Current Course`],materials:t}}});else if(d===`ASSESSMENT`&&c){let n=e[`Current Course`]?.modules?.find(e=>e.id===`item-assessments`||e.title===`Assessments`);if(n){let e=(n.assessments||[]).filter(e=>!T.includes(e.id));t(t=>{let n=(t[`Current Course`]?.modules||[]).map(t=>t.id===`item-assessments`||t.title===`Assessments`?{...t,assessments:e}:t);return{...t,"Current Course":{...t[`Current Course`],modules:n}}})}}else d===`FEATURE`&&a&&t(e=>{let t=(e[`Global Toolkit`]||[]).filter(e=>!T.includes(e.id));return{...e,"Global Toolkit":t}});E([])}},className:`px-3 py-2 bg-rose-600 hover:bg-rose-500 text-white text-xs font-bold rounded transition-colors flex items-center gap-1`,children:[(0,Q.jsx)(Oe,{size:12}),` Delete Selected`]})]})]}),ee.length===0?(0,Q.jsxs)(`div`,{className:`p-12 text-center bg-slate-900/50 border border-slate-700 rounded-xl`,children:[(0,Q.jsx)(O,{size:48,className:`mx-auto text-slate-700 mb-4`}),(0,Q.jsx)(`p`,{className:`text-slate-400 text-sm mb-2`,children:p?`No items match your search`:`No ${d===`MODULE`?`modules`:`features`} yet`}),(0,Q.jsx)(`p`,{className:`text-slate-600 text-xs`,children:!p&&`Go to Phase 1: Harvest to create some!`})]}):(0,Q.jsx)(`div`,{className:`grid grid-cols-1 md:grid-cols-2 gap-4`,children:ee.map((e,t)=>{let n=se(e);return M.findIndex(t=>t.id===e.id),(0,Q.jsxs)(`div`,{className:`bg-slate-900 border rounded-lg p-4 hover:border-purple-500/50 transition-all group ${T.includes(e.id)?`border-amber-500 bg-amber-900/10`:`border-slate-700`}`,children:[(0,Q.jsxs)(`div`,{className:`flex items-start justify-between mb-3`,children:[(0,Q.jsxs)(`div`,{className:`flex items-start gap-2 flex-1 min-w-0`,children:[(0,Q.jsx)(`input`,{type:`checkbox`,checked:T.includes(e.id),onChange:t=>{t.target.checked?E([...T,e.id]):E(T.filter(t=>t!==e.id))},className:`mt-1 w-4 h-4 text-amber-600 bg-slate-800 border-slate-600 rounded focus:ring-amber-500 focus:ring-2`}),(0,Q.jsxs)(`div`,{className:`flex-1 min-w-0`,children:[(0,Q.jsx)(`h3`,{className:`text-white font-bold text-sm truncate mb-1`,children:e.title}),(0,Q.jsx)(`p`,{className:`text-xs text-slate-500 font-mono truncate`,children:e.id})]})]}),(0,Q.jsx)(`div`,{className:`px-2 py-1 rounded text-[10px] font-bold uppercase ${d===`MODULE`?`bg-purple-900/30 text-purple-400`:`bg-orange-900/30 text-orange-400`}`,children:d===`MODULE`?`Module`:`Feature`})]}),(0,Q.jsxs)(`div`,{className:`flex items-center gap-2 mb-3 text-xs text-slate-400`,children:[(0,Q.jsx)(F,{size:12}),(0,Q.jsxs)(`span`,{children:[(n.total/1024).toFixed(1),` KB`]}),(0,Q.jsx)(`span`,{className:`text-slate-700`,children:``}),(0,Q.jsx)(`span`,{children:n.htmlLength>0?`Has HTML`:`No HTML`}),(0,Q.jsx)(`span`,{className:`text-slate-700`,children:``}),(0,Q.jsx)(`span`,{children:n.scriptLength>0?`Has Script`:`No Script`})]}),e.section&&(0,Q.jsx)(`div`,{className:`mb-3`,children:(0,Q.jsx)(`span`,{className:`text-xs bg-slate-800 border border-slate-700 px-2 py-1 rounded text-slate-400`,children:e.section})}),(0,Q.jsxs)(`div`,{className:`flex gap-2`,children:[(0,Q.jsxs)(`button`,{onClick:()=>ne(t),className:`flex-1 flex items-center justify-center gap-1 bg-purple-600 hover:bg-purple-500 text-white text-xs font-bold py-2 rounded transition-colors`,children:[(0,Q.jsx)(oe,{size:12}),` Preview`]}),(0,Q.jsx)(`button`,{onClick:()=>N(t),className:`flex items-center justify-center gap-1 bg-slate-700 hover:bg-slate-600 text-white text-xs font-bold px-3 py-2 rounded transition-colors`,title:`Edit`,children:(0,Q.jsx)(ge,{size:12})}),(0,Q.jsx)(`button`,{onClick:()=>re(t),disabled:P(e),className:`flex items-center justify-center gap-1 text-white text-xs font-bold px-3 py-2 rounded transition-colors ${P(e)?`bg-slate-800 text-slate-600 cursor-not-allowed opacity-50`:`bg-slate-700 hover:bg-rose-600`}`,title:P(e)?`Core modules cannot be deleted. Hide them instead.`:`Delete`,children:(0,Q.jsx)(Oe,{size:12})})]}),P(e)&&(0,Q.jsxs)(`div`,{className:`mt-2 flex items-center gap-1 text-[10px] text-amber-400`,children:[(0,Q.jsx)(pe,{size:10}),(0,Q.jsx)(`span`,{children:`Core module (cannot be deleted)`})]})]},e.id)})})]}),_&&(0,Q.jsx)(`div`,{className:`fixed inset-0 bg-black/80 backdrop-blur-sm z-50 flex items-center justify-center p-4`,onClick:()=>v(null),children:(0,Q.jsxs)(`div`,{className:`bg-slate-900 border border-slate-700 rounded-xl max-w-5xl w-full max-h-[90vh] overflow-hidden shadow-2xl`,onClick:e=>e.stopPropagation(),children:[(0,Q.jsxs)(`div`,{className:`bg-slate-800 border-b border-slate-700 p-4 flex items-center justify-between`,children:[(0,Q.jsxs)(`div`,{children:[(0,Q.jsxs)(`h3`,{className:`text-lg font-bold text-white flex items-center gap-2`,children:[(0,Q.jsx)(oe,{size:20,className:`text-cyan-400`}),`Material Preview: `,_.title]}),(0,Q.jsx)(`p`,{className:`text-xs text-slate-400 mt-1`,children:_.description})]}),(0,Q.jsx)(`button`,{onClick:()=>v(null),className:`text-slate-400 hover:text-white transition-colors`,children:(0,Q.jsx)(Me,{size:24})})]}),(0,Q.jsxs)(`div`,{className:`p-6 max-h-[calc(90vh-120px)] overflow-y-auto`,children:[_.viewUrl&&(0,Q.jsx)(`div`,{className:`mb-6`,children:(0,Q.jsx)(`div`,{className:`bg-black rounded-lg border border-slate-700 overflow-hidden`,children:(0,Q.jsx)(`iframe`,{src:_.viewUrl.replace(`/view`,`/preview`),width:`100%`,height:`600`,style:{border:`none`},title:_.title})})}),(0,Q.jsxs)(`div`,{className:`grid grid-cols-2 gap-4 bg-slate-950 p-4 rounded-lg border border-slate-800`,children:[(0,Q.jsxs)(`div`,{children:[(0,Q.jsx)(`span`,{className:`text-xs font-bold text-slate-500 uppercase`,children:`Number`}),(0,Q.jsx)(`p`,{className:`text-white`,children:_.number||`N/A`})]}),(0,Q.jsxs)(`div`,{children:[(0,Q.jsx)(`span`,{className:`text-xs font-bold text-slate-500 uppercase`,children:`Color`}),(0,Q.jsx)(`p`,{className:`text-white capitalize`,children:_.color||`slate`})]}),(0,Q.jsxs)(`div`,{className:`col-span-2`,children:[(0,Q.jsx)(`span`,{className:`text-xs font-bold text-slate-500 uppercase`,children:`View URL`}),(0,Q.jsx)(`p`,{className:`text-cyan-400 text-xs break-all`,children:_.viewUrl||`N/A`})]}),(0,Q.jsxs)(`div`,{className:`col-span-2`,children:[(0,Q.jsx)(`span`,{className:`text-xs font-bold text-slate-500 uppercase`,children:`Download URL`}),(0,Q.jsx)(`p`,{className:`text-cyan-400 text-xs break-all`,children:_.downloadUrl||`N/A`})]}),(0,Q.jsxs)(`div`,{className:`col-span-2`,children:[(0,Q.jsx)(`span`,{className:`text-xs font-bold text-slate-500 uppercase`,children:`Digital Content`}),_.digitalContent?(0,Q.jsx)(`div`,{className:`mt-1`,children:(0,Q.jsxs)(`span`,{className:`inline-flex items-center gap-2 px-2 py-1 bg-emerald-900/50 text-emerald-400 text-xs rounded font-bold`,children:[`Enabled - `,_.digitalContent.chapters?.length||0,` Chapters`]})}):(0,Q.jsx)(`p`,{className:`text-slate-500 text-xs`,children:`Not configured`})]})]}),(0,Q.jsxs)(`div`,{className:`flex gap-3 mt-6`,children:[(0,Q.jsxs)(`button`,{onClick:()=>{v(null),b(_)},className:`flex-1 bg-cyan-600 hover:bg-cyan-500 text-white font-bold py-3 rounded-lg flex items-center justify-center gap-2`,children:[(0,Q.jsx)(ge,{size:16}),` Edit Material`]}),_.downloadUrl&&(0,Q.jsxs)(`a`,{href:_.downloadUrl,target:`_blank`,rel:`noopener noreferrer`,className:`flex-1 bg-slate-700 hover:bg-slate-600 text-white font-bold py-3 rounded-lg flex items-center justify-center gap-2`,children:[(0,Q.jsx)(ie,{size:16}),` Download`]})]})]})]})}),y&&(0,Q.jsx)(`div`,{className:`fixed inset-0 bg-black/80 backdrop-blur-sm z-50 flex items-center justify-center p-4`,onClick:()=>b(null),children:(0,Q.jsxs)(`div`,{className:`bg-slate-900 border border-slate-700 rounded-xl max-w-3xl w-full max-h-[90vh] overflow-hidden shadow-2xl`,onClick:e=>e.stopPropagation(),children:[(0,Q.jsxs)(`div`,{className:`bg-slate-800 border-b border-slate-700 p-4 flex items-center justify-between`,children:[(0,Q.jsxs)(`h3`,{className:`text-lg font-bold text-white flex items-center gap-2`,children:[(0,Q.jsx)(ge,{size:20,className:`text-cyan-400`}),`Edit Material`]}),(0,Q.jsx)(`button`,{onClick:()=>b(null),className:`text-slate-400 hover:text-white transition-colors`,children:(0,Q.jsx)(Me,{size:24})})]}),(0,Q.jsx)(`div`,{className:`p-6 max-h-[calc(90vh-120px)] overflow-y-auto`,children:(0,Q.jsxs)(`div`,{className:`space-y-4`,children:[(0,Q.jsxs)(`div`,{className:`grid grid-cols-2 gap-3`,children:[(0,Q.jsxs)(`div`,{children:[(0,Q.jsx)(`label`,{className:`block text-xs font-bold text-slate-400 uppercase mb-2`,children:`Number`}),(0,Q.jsx)(`input`,{type:`text`,value:y.number||``,onChange:e=>b({...y,number:e.target.value}),placeholder:`e.g., 05`,className:`w-full bg-slate-950 border border-slate-700 rounded p-3 text-white text-sm`})]}),(0,Q.jsxs)(`div`,{children:[(0,Q.jsx)(`label`,{className:`block text-xs font-bold text-slate-400 uppercase mb-2`,children:`Color`}),(0,Q.jsxs)(`select`,{value:y.color||`slate`,onChange:e=>b({...y,color:e.target.value}),className:`w-full bg-slate-950 border border-slate-700 rounded p-3 text-white text-sm`,children:[(0,Q.jsx)(`option`,{value:`slate`,children:`Gray`}),(0,Q.jsx)(`option`,{value:`rose`,children:`Red`}),(0,Q.jsx)(`option`,{value:`amber`,children:`Orange`}),(0,Q.jsx)(`option`,{value:`emerald`,children:`Green`}),(0,Q.jsx)(`option`,{value:`sky`,children:`Blue`}),(0,Q.jsx)(`option`,{value:`purple`,children:`Purple`})]})]})]}),(0,Q.jsxs)(`div`,{children:[(0,Q.jsx)(`label`,{className:`block text-xs font-bold text-slate-400 uppercase mb-2`,children:`Title`}),(0,Q.jsx)(`input`,{type:`text`,value:y.title||``,onChange:e=>b({...y,title:e.target.value}),placeholder:`Material title`,className:`w-full bg-slate-950 border border-slate-700 rounded p-3 text-white text-sm`})]}),(0,Q.jsxs)(`div`,{children:[(0,Q.jsx)(`label`,{className:`block text-xs font-bold text-slate-400 uppercase mb-2`,children:`Description`}),(0,Q.jsx)(`input`,{type:`text`,value:y.description||``,onChange:e=>b({...y,description:e.target.value}),placeholder:`Brief description`,className:`w-full bg-slate-950 border border-slate-700 rounded p-3 text-white text-sm`})]}),(0,Q.jsxs)(`div`,{children:[(0,Q.jsx)(`label`,{className:`block text-xs font-bold text-slate-400 uppercase mb-2`,children:`View URL`}),(0,Q.jsx)(`input`,{type:`text`,value:y.viewUrl||``,onChange:e=>b({...y,viewUrl:e.target.value}),placeholder:`Google Drive /preview or /view link`,className:`w-full bg-slate-950 border border-slate-700 rounded p-3 text-white text-xs font-mono`})]}),(0,Q.jsxs)(`div`,{children:[(0,Q.jsx)(`label`,{className:`block text-xs font-bold text-slate-400 uppercase mb-2`,children:`Download URL`}),(0,Q.jsx)(`input`,{type:`text`,value:y.downloadUrl||``,onChange:e=>b({...y,downloadUrl:e.target.value}),placeholder:`Google Drive /view link`,className:`w-full bg-slate-950 border border-slate-700 rounded p-3 text-white text-xs font-mono`})]}),(0,Q.jsxs)(`div`,{className:`p-4 bg-black/30 rounded-lg border border-slate-700`,children:[(0,Q.jsxs)(`label`,{className:`flex items-center gap-2 cursor-pointer mb-3`,children:[(0,Q.jsx)(`input`,{type:`checkbox`,checked:!!y.digitalContent,onChange:e=>{e.target.checked?b({...y,digitalContent:y.digitalContent||{},digitalContentJson:y.digitalContentJson||``}):b({...y,digitalContent:null,digitalContentJson:``})},className:`rounded border-slate-700 bg-slate-900 text-emerald-600`}),(0,Q.jsx)(`span`,{className:`text-xs font-bold text-emerald-400 uppercase`,children:`Enable Digital Resource`})]}),y.digitalContent&&(0,Q.jsxs)(`div`,{children:[(0,Q.jsx)(`p`,{className:`text-[10px] text-slate-500 mb-2`,children:`Paste JSON content for a themed, readable digital version`}),(0,Q.jsx)(`textarea`,{value:y.digitalContentJson||(y.digitalContent?JSON.stringify(y.digitalContent,null,2):``),onChange:e=>{let t=e.target.value;try{if(t.trim()){let e=JSON.parse(t);b({...y,digitalContent:e,digitalContentJson:t})}else b({...y,digitalContentJson:t})}catch{b({...y,digitalContentJson:t})}},placeholder:`{"title": "My Resource", "chapters": [...]}`,className:`w-full bg-slate-950 border border-slate-700 rounded p-3 text-white text-xs font-mono h-40 resize-none`}),y.digitalContentJson&&(0,Q.jsx)(`div`,{className:`mt-2`,children:(()=>{try{let e=JSON.parse(y.digitalContentJson),t=e.chapters?.length||0,n=e.chapters?.reduce((e,t)=>e+(t.sections?.length||0),0)||0;return(0,Q.jsxs)(`p`,{className:`text-[10px] text-emerald-400`,children:[`Valid JSON: `,t,` chapter`,t===1?``:`s`,`, `,n,` section`,n===1?``:`s`]})}catch(e){return(0,Q.jsxs)(`p`,{className:`text-[10px] text-rose-400`,children:[`Invalid JSON: `,e.message]})}})()})]})]}),(0,Q.jsxs)(`div`,{className:`flex gap-3 mt-6`,children:[(0,Q.jsx)(`button`,{onClick:()=>b(null),className:`flex-1 bg-slate-700 hover:bg-slate-600 text-white font-bold py-3 rounded-lg`,children:`Cancel`}),(0,Q.jsxs)(`button`,{onClick:()=>{n&&n(y.id,y),b(null)},className:`flex-1 bg-cyan-600 hover:bg-cyan-500 text-white font-bold py-3 rounded-lg flex items-center justify-center gap-2`,children:[(0,Q.jsx)(be,{size:16}),` Save Changes`]})]})]})})]})}),x&&(0,Q.jsx)(`div`,{className:`fixed inset-0 bg-black/80 backdrop-blur-sm z-50 flex items-center justify-center p-4`,onClick:()=>S(null),children:(0,Q.jsxs)(`div`,{className:`bg-slate-900 border border-slate-700 rounded-xl max-w-6xl w-full max-h-[90vh] overflow-hidden shadow-2xl`,onClick:e=>e.stopPropagation(),children:[(0,Q.jsxs)(`div`,{className:`bg-slate-800 border-b border-slate-700 p-4 flex items-center justify-between`,children:[(0,Q.jsxs)(`div`,{children:[(0,Q.jsxs)(`h3`,{className:`text-lg font-bold text-white flex items-center gap-2`,children:[(0,Q.jsx)(oe,{size:20,className:`text-blue-400`}),`Assessment Preview: `,x.title]}),(0,Q.jsx)(`p`,{className:`text-xs text-slate-400 mt-1`,children:`Interactive preview with full functionality`})]}),(0,Q.jsx)(`button`,{onClick:()=>S(null),className:`text-slate-400 hover:text-white transition-colors`,children:(0,Q.jsx)(Me,{size:24})})]}),(0,Q.jsx)(`div`,{className:`p-0 max-h-[calc(90vh-80px)] overflow-y-auto`,children:(0,Q.jsx)(`iframe`,{srcDoc:(()=>`<!DOCTYPE html><html><head><script src="https://cdn.tailwindcss.com"><\/script><link href="https://fonts.googleapis.com/css?family=Inter:wght@400;700&family=JetBrains+Mono:wght@700&display=swap" rel="stylesheet"><style>body{background:#020617;color:#e2e8f0;font-family:'Inter',sans-serif;padding:20px;}.mono{font-family:'JetBrains Mono',monospace;}.score-btn{background:#0f172a;border:1px solid #1e293b;color:#64748b;transition:all 0.2s;}.score-btn:hover{border-color:#0ea5e9;color:white;}.score-btn.active{background:#0ea5e9;color:#000;font-weight:900;border-color:#0ea5e9;}.rubric-cell{cursor:pointer;transition:all 0.2s;border:1px solid transparent;}.rubric-cell:hover{background:rgba(255,255,255,0.05);}.active-proficient{background:rgba(16,185,129,0.2);border:1px solid #10b981;color:#10b981;}.active-developing{background:rgba(245,158,11,0.2);border:1px solid #f59e0b;color:#f59e0b;}.active-emerging{background:rgba(244,63,94,0.2);border:1px solid #f43f5e;color:#f43f5e;}</style></head><body>${x.html||`<p class="text-slate-500">No HTML content</p>`}<script>${Of(x.script||``)}<\/script></body></html>`)(),className:`w-full border-0`,style:{minHeight:`600px`},title:x.title||`Assessment Preview`})}),(0,Q.jsxs)(`div`,{className:`bg-slate-800 border-t border-slate-700 p-4 flex justify-between items-center`,children:[(0,Q.jsxs)(`div`,{className:`text-xs text-slate-400`,children:[(0,Q.jsx)(`strong`,{className:`text-white`,children:`Tip:`}),` This assessment will function exactly like this in your compiled site`]}),(0,Q.jsxs)(`button`,{onClick:()=>{S(null),w(x)},className:`bg-blue-600 hover:bg-blue-500 text-white font-bold py-2 px-4 rounded-lg flex items-center gap-2`,children:[(0,Q.jsx)(ge,{size:16}),` Edit Assessment`]})]})]})}),C&&(0,Q.jsx)(`div`,{className:`fixed inset-0 bg-black/80 backdrop-blur-sm z-50 flex items-center justify-center p-4`,onClick:()=>w(null),children:(0,Q.jsxs)(`div`,{className:`bg-slate-900 border border-slate-700 rounded-xl max-w-4xl w-full max-h-[90vh] overflow-hidden shadow-2xl`,onClick:e=>e.stopPropagation(),children:[(0,Q.jsxs)(`div`,{className:`bg-slate-800 border-b border-slate-700 p-4 flex items-center justify-between`,children:[(0,Q.jsxs)(`h3`,{className:`text-lg font-bold text-white flex items-center gap-2`,children:[(0,Q.jsx)(ge,{size:20,className:`text-blue-400`}),`Edit Assessment`]}),(0,Q.jsx)(`button`,{onClick:()=>w(null),className:`text-slate-400 hover:text-white transition-colors`,children:(0,Q.jsx)(Me,{size:24})})]}),(0,Q.jsxs)(`div`,{className:`p-6 max-h-[calc(90vh-120px)] overflow-y-auto`,children:[(0,Q.jsx)(`div`,{className:`bg-amber-900/20 border border-amber-700/50 rounded-lg p-4 mb-4`,children:(0,Q.jsxs)(`p`,{className:`text-xs text-amber-300`,children:[(0,Q.jsx)(`strong`,{children:`Note:`}),` For complex edits, please use Phase 1's Assessment Builder. This editor is for quick title changes only.`]})}),(0,Q.jsxs)(`div`,{className:`space-y-4`,children:[(0,Q.jsxs)(`div`,{children:[(0,Q.jsx)(`label`,{className:`block text-xs font-bold text-slate-400 uppercase mb-2`,children:`Assessment Title`}),(0,Q.jsx)(`input`,{type:`text`,value:C.title||``,onChange:e=>w({...C,title:e.target.value}),placeholder:`Assessment title`,className:`w-full bg-slate-950 border border-slate-700 rounded p-3 text-white text-sm`})]}),(0,Q.jsxs)(`div`,{className:`grid grid-cols-2 gap-4 bg-slate-950 p-4 rounded-lg border border-slate-800`,children:[(0,Q.jsxs)(`div`,{children:[(0,Q.jsx)(`span`,{className:`text-xs font-bold text-slate-500 uppercase`,children:`Type`}),(0,Q.jsx)(`p`,{className:`text-white capitalize`,children:C.type||`Quiz`})]}),(0,Q.jsxs)(`div`,{children:[(0,Q.jsx)(`span`,{className:`text-xs font-bold text-slate-500 uppercase`,children:`Question Count`}),(0,Q.jsx)(`p`,{className:`text-white`,children:C.questionCount||`N/A`})]}),(0,Q.jsxs)(`div`,{className:`col-span-2`,children:[(0,Q.jsx)(`span`,{className:`text-xs font-bold text-slate-500 uppercase`,children:`Assessment ID`}),(0,Q.jsx)(`p`,{className:`text-blue-400 text-xs font-mono`,children:C.id})]})]}),(0,Q.jsxs)(`div`,{className:`flex gap-3 mt-6`,children:[(0,Q.jsx)(`button`,{onClick:()=>w(null),className:`flex-1 bg-slate-700 hover:bg-slate-600 text-white font-bold py-3 rounded-lg`,children:`Cancel`}),(0,Q.jsxs)(`button`,{onClick:()=>{let n=e[`Current Course`]?.modules?.find(e=>e.id===`item-assessments`||e.title===`Assessments`);if(n){let r=n.assessments.map(e=>e.id===C.id?{...e,title:C.title}:e),i=e[`Current Course`].modules.findIndex(e=>e.id===n.id),a=[...e[`Current Course`].modules];a[i]={...n,assessments:r},t({...e,"Current Course":{...e[`Current Course`],modules:a}})}w(null)},className:`flex-1 bg-blue-600 hover:bg-blue-500 text-white font-bold py-3 rounded-lg flex items-center justify-center gap-2`,children:[(0,Q.jsx)(be,{size:16}),` Save Changes`]})]})]})]})]})})]})},Lf=({onGoToMaster:e,projectData:t,setProjectData:n})=>{let[r,i]=$(!1),[a,o]=$(!1);return(0,Q.jsx)(`div`,{className:`space-y-6 animate-in fade-in duration-500`,children:(0,Q.jsxs)(`div`,{className:`bg-slate-800 p-6 rounded-lg border border-slate-700`,children:[(0,Q.jsxs)(`h2`,{className:`text-xl font-bold text-white mb-4 flex items-center gap-2`,children:[(0,Q.jsx)(D,{className:`text-blue-400`}),` Phase 3: Manage & Reset`]}),(0,Q.jsxs)(`div`,{className:`space-y-4`,children:[(0,Q.jsxs)(`div`,{className:`bg-blue-900/20 p-4 rounded-xl border border-blue-700/50`,children:[(0,Q.jsx)(`h3`,{className:`text-sm font-bold text-blue-400 mb-2`,children:`1. Backup & Restore`}),(0,Q.jsxs)(`div`,{className:`space-y-2`,children:[(0,Q.jsxs)(`button`,{onClick:()=>{let e=`data:text/json;charset=utf-8,`+encodeURIComponent(JSON.stringify(t,null,2)),n=document.createElement(`a`);n.setAttribute(`href`,e),n.setAttribute(`download`,`course_factory_backup.json`),document.body.appendChild(n),n.click(),n.remove(),i(!0)},className:`w-full bg-blue-600 hover:bg-blue-500 text-white font-bold py-3 rounded-lg flex items-center justify-center gap-2 transition-all`,children:[(0,Q.jsx)(ie,{size:16}),` Download Project Backup`]}),(0,Q.jsxs)(`div`,{className:`relative`,children:[(0,Q.jsx)(`input`,{type:`file`,accept:`.json`,onChange:e=>{let t=e.target.files[0];if(!t)return;let r=new FileReader;r.onload=e=>{try{n(JSON.parse(e.target.result))}catch(e){console.error(`Invalid backup file`,e)}},r.readAsText(t)},id:`restore-upload`,className:`hidden`}),(0,Q.jsxs)(`label`,{htmlFor:`restore-upload`,className:`w-full bg-emerald-600 hover:bg-emerald-500 text-white font-bold py-3 rounded-lg flex items-center justify-center gap-2 transition-all cursor-pointer`,children:[(0,Q.jsx)(Ae,{size:16}),` Upload & Restore Backup`]})]})]})]}),(0,Q.jsxs)(`div`,{className:`p-4 rounded-xl border transition-all duration-300 ${r?`bg-rose-900/20 border-rose-700/50`:`bg-slate-900 border-slate-800 opacity-50`}`,children:[(0,Q.jsxs)(`div`,{className:`flex items-center justify-between mb-2`,children:[(0,Q.jsx)(`h3`,{className:`text-sm font-bold ${r?`text-rose-400`:`text-slate-500`}`,children:`2. Reset Project`}),r?(0,Q.jsx)(fe,{size:16,className:`text-rose-400`}):(0,Q.jsx)(pe,{size:16,className:`text-slate-500`})]}),r&&!a&&(0,Q.jsxs)(`div`,{className:`animate-in fade-in bg-rose-950/30 p-4 rounded-lg border border-rose-800`,children:[(0,Q.jsxs)(`h4`,{className:`text-rose-400 font-bold text-sm mb-2 flex items-center gap-2`,children:[(0,Q.jsx)(ke,{size:16}),` Final Safety Check`]}),(0,Q.jsxs)(`p`,{className:`text-xs text-slate-300 mb-4 leading-relaxed`,children:[`Did you update the `,(0,Q.jsx)(`strong`,{children:`Phase 0: Master Shell`}),` with any new features (like Dark Mode or Save Buttons) you built during this project?`,(0,Q.jsx)(`br`,{}),(0,Q.jsx)(`br`,{}),`If you Reset now without updating the Master Shell, those improvements will be lost.`]}),(0,Q.jsxs)(`div`,{className:`flex gap-2`,children:[(0,Q.jsxs)(`button`,{onClick:()=>e(),className:`flex-1 bg-slate-800 hover:bg-slate-700 text-slate-200 text-xs font-bold py-3 rounded border border-slate-700 flex items-center justify-center gap-2`,children:[(0,Q.jsx)(E,{size:14,className:`rotate-180`}),` No, Take me there`]}),(0,Q.jsx)(`button`,{onClick:()=>o(!0),className:`flex-1 bg-rose-600 hover:bg-rose-500 text-white text-xs font-bold py-3 rounded shadow-lg shadow-rose-900/20`,children:`Yes, I Updated It`})]})]}),r&&a&&(0,Q.jsxs)(`div`,{className:`animate-in fade-in`,children:[(0,Q.jsx)(`p`,{className:`text-xs text-rose-200/70 mb-4`,children:`Copy this prompt to Canvas to wipe the Course Content.`}),(0,Q.jsx)(xf,{label:`Canvas Safe Reset Prompt`,code:`I need to reset the Course Factory for a new project.
Please modify the \`PROJECT_DATA\` variable at the top of the file.

**Task:**
1. Locate \`PROJECT_DATA\`.
2. Reset \`PROJECT_DATA["Current Course"].modules\` to empty \`[]\`.
3. Change \`name\` to "New Course".

**CRITICAL SAFETY INSTRUCTION:**
- Do NOT touch \`PROJECT_DATA["Global Toolkit"]\`. (Keep all saved features).
- Do NOT touch \`const MASTER_SHELL\`.
- Do NOT touch any React code.

**Expected Result:**
const PROJECT_DATA = {
  "Current Course": {
    name: "New Course",
    modules: [] // Cleared
  },
  "Global Toolkit": [
    ... // Kept intact
  ]
};`,height:`h-40`})]})]})]})]})})},Rf=({modules:e,toolkit:t,excludedIds:n=[],initialViewKey:r=null,projectData:i,ignoreAssetBaseUrl:a=!1})=>{let o=i[`Course Settings`]||{},s=o.courseName||i[`Current Course`]?.name||`Course Factory`,c=s.toUpperCase(),l=o.courseCode||``,u=o.instructor||``,d=o.academicYear||``,f=o.accentColor||`sky`,p=o.backgroundColor||`slate-900`,m=o.fontFamily||`inter`,h=o.customCSS||``,g=o.compilationDefaults||{},_=[`slate-50`,`zinc-50`,`neutral-50`,`stone-50`,`gray-50`,`white`].includes(p),v=o.headingTextColor||(_?`slate-900`:`white`),y=o.secondaryTextColor||(_?`slate-600`:`slate-400`),b=o.buttonColor||`${f}-600`,x=o.containerColor||(_?`white/80`:`slate-900/80`),S=e=>e.startsWith(`text-`)?e:`text-${e}`,C=e=>e.startsWith(`bg-`)?e.slice(3):e,w=(e,t=1)=>{if(!e)return`rgba(15, 23, 42, ${t})`;let n=e.replace(`#`,``);return n.length===6?`rgba(${parseInt(n.slice(0,2),16)}, ${parseInt(n.slice(2,4),16)}, ${parseInt(n.slice(4,6),16)}, ${t})`:`rgba(15, 23, 42, ${t})`},T=e=>{let t=(e||``).toString().trim();if(!t)return{base:_?`white`:`slate-900`,alpha:.8,alphaRaw:`80`};let n=t;n.startsWith(`bg-`)&&(n=n.slice(3)),n.startsWith(`text-`)&&(n=n.slice(5));let r=n.split(`/`),i=r[0]||(_?`white`:`slate-900`),a=r[1]||null;return{base:i,alpha:a?Math.max(0,Math.min(1,parseInt(a,10)/100)):1,alphaRaw:a}},E={"slate-900":`#0f172a`,"slate-800":`#1e293b`,"slate-700":`#334155`,"slate-600":`#475569`,"slate-500":`#64748b`,"slate-950":`#020617`,"gray-900":`#111827`,"gray-800":`#1f2937`,"gray-700":`#374151`,"gray-600":`#4b5563`,"zinc-900":`#18181b`,"zinc-800":`#27272a`,"neutral-900":`#171717`,"stone-900":`#1c1917`,white:`#ffffff`},D=S(v),O=S(y),k=C(b),A=`bg-${k}`,j=k.endsWith(`-600`)?`hover:bg-${k.replace(/-600$/,`-500`)}`:`hover:bg-${k}`,M=O,ee=T(x),te=ee.alphaRaw?`bg-${ee.base}/${ee.alphaRaw}`:`bg-${ee.base}`,ne=w(E[ee.base]||(_?`#ffffff`:`#0f172a`),ee.alpha),N=a?``:(o.assetBaseUrl||``).replace(/\/$/,``),P=[];l&&P.push(l),u&&P.push(u),d&&P.push(d);let re=P.length>0?`\n            <p class="text-[9px] text-slate-600 uppercase tracking-widest mono mt-1">${P.join(` | `)}</p>`:``,ie=e.filter(e=>!n.includes(e.id)&&!e.hidden);g.includeMaterials===!1&&(ie=ie.filter(e=>{let t=e.code||{};if(typeof t==`string`)try{t=JSON.parse(t)}catch{}return t.id!==`view-materials`})),g.includeAssessments===!1&&(ie=ie.filter(e=>e.id!==`item-assessments`&&e.title!==`Assessments`));let ae=t.filter(e=>e.enabled);g.includeToolkit===!1&&(ae=[]);let oe=ae.filter(e=>e.hiddenFromUser),se=ae.filter(e=>!e.hiddenFromUser),F=``,ce=``,le=``;if(ie.forEach(e=>{let t=e.code||{};if(typeof t==`string`)try{t=JSON.parse(t)}catch{}if(t.id===`view-materials`){let n=(i[`Current Course`]?.materials||[]).filter(e=>!e.hidden).sort((e,t)=>e.order-t.order),r=n.filter(e=>e.digitalContent),a=o.defaultMaterialTheme||`dark`,s={dark:{cardBg:`bg-slate-900`,cardBorder:`border-slate-700`,heading:`text-white`,body:`text-slate-400`,inner:`bg-slate-800`,proseClass:`prose-invert`,tocHover:`hover:bg-slate-700`},light:{cardBg:`bg-white`,cardBorder:`border-slate-300`,heading:`text-slate-900`,body:`text-slate-600`,inner:`bg-slate-100`,proseClass:`prose`,tocHover:`hover:bg-slate-200`},muted:{cardBg:`bg-slate-800`,cardBorder:`border-slate-700`,heading:`text-slate-200`,body:`text-slate-500`,inner:`bg-slate-800`,proseClass:`prose-invert`,tocHover:`hover:bg-slate-700`},"high-contrast-light":{cardBg:`bg-white`,cardBorder:`border-slate-300`,heading:`text-black`,body:`text-slate-800`,inner:`bg-slate-100`,proseClass:`prose`,tocHover:`hover:bg-slate-200`},"high-contrast-dark":{cardBg:`bg-black`,cardBorder:`border-slate-600`,heading:`text-white`,body:`text-slate-300`,inner:`bg-slate-900`,proseClass:`prose-invert`,tocHover:`hover:bg-slate-800`}},c=s[a]||s.dark,l=c.inner+` `+c.heading,u=n.map(e=>{let t=s[e.themeOverride!=null&&e.themeOverride!==``?e.themeOverride:a]||s.dark,n=e.color||`slate`,r=n===`slate`?``:`border-l-4 border-l-${n}-500`,i=n===`slate`?`bg-slate-800`:`bg-${n}-500/10`,o=n===`slate`?`border-slate-700`:`border-${n}-500/20`,c=n===`slate`?t.body:`text-${n}-500`,l=`${A} ${j}`,u=Ef(e)||`00`,d=e.mediaType&&e.mediaType!==`number`?`text-[9px] font-black uppercase tracking-widest`:`font-black italic text-xl`,f=n!==`slate`;f?`${n}${n}`:`${A}${j}${M}`,f&&`${n}`;let p=e.viewUrl||``,m=e.downloadUrl||``;if(N)try{let e=new URL(N),t=e.pathname.replace(/\/$/,``);p.startsWith(`/`)&&(p=t&&t!==`/`&&p.startsWith(t)?e.origin+p:N+p),m.startsWith(`/`)&&(m=t&&t!==`/`&&m.startsWith(t)?e.origin+m:N+m)}catch{p.startsWith(`/`)&&(p=N+p),m.startsWith(`/`)&&(m=N+m)}let h=p.replace(/'/g,`\\'`),g=(e.title||``).replace(/'/g,`\\'`),_=m.replace(/'/g,`\\'`),v=e.id||`mat-${Date.now()}`,y=``;return e.viewUrl&&(y+=`<button data-pdf-url="${h}" data-pdf-title="${g}" class="pdf-viewer-btn flex-1 ${A} ${j} ${M} text-[10px] font-bold uppercase tracking-widest py-3 px-6 rounded-lg border border-slate-600 transition-all">View</button>`),e.downloadUrl&&(y+=`<a href="${_}" target="_blank" class="flex-1 ${l} ${M} text-[10px] font-bold uppercase tracking-widest py-3 px-6 rounded-lg transition-all text-center flex items-center justify-center">Download</a>`),e.digitalContent&&(y+=`<button data-digital-reader="${v}" class="digital-reader-btn flex-1 ${A} ${j} ${M} text-[10px] font-bold uppercase tracking-widest py-3 px-6 rounded-lg transition-all flex items-center justify-center gap-2">Read</button>`),`<div class="material-card flex flex-col md:flex-row items-center justify-between gap-6 ${t.cardBg} rounded-xl border ${t.cardBorder} p-6 ${r}">
    <div class="flex items-center gap-6">
        <div class="w-12 h-12 rounded-lg ${i} flex items-center justify-center ${c} ${d} border ${o}">${u}</div>
        <div>
            <h3 class="text-lg font-bold ${t.heading} uppercase italic">${e.title}</h3>
            <p class="text-xs ${t.body} font-mono">${e.description}</p>
        </div>
    </div>
    <div class="flex gap-3 w-full md:w-auto">
        ${y}
    </div>
</div>`}).join(`
                    `),d={};r.forEach(e=>{d[e.id]=e.digitalContent});let f=JSON.stringify(d).replace(/`/g,"\\`").replace(/\$\{/g,"\\${").replace(/</g,`\\u003c`).replace(/>/g,`\\u003e`),p=`<div id="view-materials" class="w-full h-full custom-scroll p-8 md:p-12">
            <div class="max-w-5xl mx-auto space-y-8">
                <div class="mb-12">
                    <h2 class="text-3xl font-black ${D} italic uppercase tracking-tighter">Course Materials</h2>
                    <p class="text-xs ${O} font-mono uppercase tracking-widest mt-2">Access lectures, presentations, and briefing documents.</p>
                </div>
                <div id="pdf-viewer-container" class="hidden mb-12 ${c.cardBg} rounded-xl border ${c.cardBorder} overflow-hidden shadow-2xl">
                    <div class="flex justify-between items-center p-3 ${c.inner} border-b ${c.cardBorder}">
                        <span id="viewer-title" class="text-xs font-bold ${c.heading} uppercase tracking-widest px-2">Document Viewer</span>
                        <button data-close-pdf-viewer class="text-xs ${c.body} hover:opacity-80 font-bold uppercase tracking-widest px-2">Close X</button>
                    </div>
                    <iframe id="pdf-frame" src="" width="100%" height="600" style="border:none;"></iframe>
                </div>
                <div id="digital-reader-container" class="hidden mb-12 ${c.cardBg} rounded-xl border ${c.cardBorder} overflow-hidden shadow-2xl">
                    <div class="flex justify-between items-center p-3 ${c.inner} border-b ${c.cardBorder}">
                        <span id="reader-title" class="text-xs font-bold ${c.heading} uppercase tracking-widest px-2 flex items-center gap-2">Digital Resource</span>
                        <button data-close-digital-reader class="text-xs ${c.body} hover:opacity-80 font-bold uppercase tracking-widest px-2">Close X</button>
                    </div>
                    <div class="flex" style="height: 600px;">
                        <div id="reader-toc" class="w-64 ${c.inner} border-r ${c.cardBorder} p-4 overflow-y-auto hidden md:block">
                            <h4 class="text-xs font-bold ${c.heading} uppercase tracking-wider mb-4">Contents</h4>
                            <div id="reader-toc-items" class="space-y-1"></div>
                        </div>
                        <div id="reader-content" class="flex-1 p-6 md:p-8 overflow-y-auto ${c.cardBg}">
                            <div id="reader-body" class="prose ${c.proseClass} max-w-none"></div>
                            <div class="flex justify-between items-center mt-8 pt-4 border-t ${c.cardBorder}">
                                <button data-prev-chapter id="prev-btn" class="px-4 py-2 ${A} ${j} ${M} text-xs font-bold uppercase rounded-lg transition-all disabled:opacity-30">Previous</button>
                                <span id="reader-progress" class="text-xs ${c.body}"></span>
                                <button data-next-chapter id="next-btn" class="px-4 py-2 ${A} ${j} ${M} text-xs font-bold uppercase rounded-lg transition-all disabled:opacity-30">Next</button>
                            </div>
                        </div>
                    </div>
                </div>
                <div id="materials-list" class="grid grid-cols-1 gap-4">
                    ${u}
                </div>
            </div>
        </div>`;F+=`\n            <button onclick="switchView('materials')" id="nav-materials" class="nav-item">\n                <span class="w-2 h-2 rounded-full bg-slate-600"></span>${e.title}\n            </button>`,ce+=`
        `+p+`
`;let m=e.script||t.script||``;if(m&&(le+=`
        `+m+`
`),le+=`
        
        // PDF Viewer Event Delegation
        document.addEventListener('click', function(e) {
            // PDF Viewer button
            var pdfBtn = e.target.closest('[data-pdf-url]');
            if (pdfBtn) {
                e.preventDefault();
                var url = pdfBtn.getAttribute('data-pdf-url');
                var title = pdfBtn.getAttribute('data-pdf-title');
                if (typeof openPDF === 'function') {
                    openPDF(url, title);
                } else {
                    // Fallback
                    var container = document.getElementById('pdf-viewer-container');
                    if (container) {
                        document.getElementById('pdf-frame').src = url.replace('/view', '/preview');
                        document.getElementById('viewer-title').innerText = 'VIEWING: ' + title;
                        container.classList.remove('hidden');
                        container.scrollIntoView({ behavior: 'smooth' });
                    }
                }
                return;
            }
            
            // Close PDF Viewer button
            var closePdfBtn = e.target.closest('[data-close-pdf-viewer]');
            if (closePdfBtn) {
                if (typeof closeViewer === 'function') {
                    closeViewer();
                } else {
                    // Fallback
                    var container = document.getElementById('pdf-viewer-container');
                    if (container) {
                        container.classList.add('hidden');
                        document.getElementById('pdf-frame').src = '';
                    }
                }
                return;
            }
        });
      
`,r.length>0){let e={heading:c.heading,body:c.body,tocActive:l,tocInactive:c.body,tocHover:c.tocHover},t=`
        // Digital Reader System - Using Event Delegation for Google Sites compatibility
        var CF_MAT_THEME = ${JSON.stringify(e)};
        var DIGITAL_CONTENT = ${f};
        var currentReader = { matId: null, chapterIdx: 0, data: null };
        
        function openDigitalReaderFn(matId) {
            var content = DIGITAL_CONTENT[matId];
            if (!content) { console.error('No digital content for', matId); return; }
            
            currentReader = { matId: matId, chapterIdx: 0, data: content };
            
            // Update title
            document.getElementById('reader-title').innerText = (content.title || 'Digital Resource');
            
            // Build table of contents (using data attributes, not onclick) - themed
            var tocHTML = '';
            (content.chapters || []).forEach(function(ch, idx) {
                var tocCls = 'toc-item w-full text-left px-3 py-2 rounded text-xs ' + CF_MAT_THEME.tocHover + ' transition-colors ' + (idx === 0 ? CF_MAT_THEME.tocActive : CF_MAT_THEME.tocInactive);
                tocHTML += '<button data-toc-chapter="' + idx + '" class="' + tocCls + '" data-chapter="' + idx + '">' +
                    '<span class="font-bold">' + (ch.number || (idx + 1)) + '.</span> ' + ch.title +
                '</button>';
            });
            document.getElementById('reader-toc-items').innerHTML = tocHTML;
            
            // Show first chapter
            renderChapterFn(0);
            
            // Show reader, hide materials list
            document.getElementById('digital-reader-container').classList.remove('hidden');
            document.getElementById('materials-list').classList.add('hidden');
            document.getElementById('pdf-viewer-container').classList.add('hidden');
        }
        
        function closeDigitalReaderFn() {
            document.getElementById('digital-reader-container').classList.add('hidden');
            document.getElementById('materials-list').classList.remove('hidden');
            currentReader = { matId: null, chapterIdx: 0, data: null };
        }
        
        function renderChapterFn(idx) {
            if (!currentReader.data || !currentReader.data.chapters) return;
            var chapters = currentReader.data.chapters;
            if (idx < 0 || idx >= chapters.length) return;
            
            currentReader.chapterIdx = idx;
            var chapter = chapters[idx];
            
            // Build chapter content - themed
            var html = '<h2 class="text-2xl font-bold ' + CF_MAT_THEME.heading + ' mb-2">' + (chapter.number || (idx + 1)) + '. ' + chapter.title + '</h2>';
            
            (chapter.sections || []).forEach(function(sec) {
                html += '<div class="mt-6">';
                if (sec.heading) {
                    html += '<h3 class="text-lg font-bold ' + CF_MAT_THEME.heading + ' mb-3">' + sec.heading + '</h3>';
                }
                // Simple markdown-like rendering
                var content = (sec.content || '').replace(/\\n/g, '<br>').replace(/\\*\\*(.+?)\\*\\*/g, '<strong>$1</strong>').replace(/\\*(.+?)\\*/g, '<em>$1</em>').replace(/^- /gm, '- ');
                html += '<div class="' + CF_MAT_THEME.body + ' leading-relaxed whitespace-pre-line">' + content + '</div>';
                html += '</div>';
            });
            
            document.getElementById('reader-body').innerHTML = html;
            
            // Update TOC highlighting - themed
            var tocActiveArr = CF_MAT_THEME.tocActive.split(' ').filter(Boolean);
            var tocInactiveArr = CF_MAT_THEME.tocInactive.split(' ').filter(Boolean);
            document.querySelectorAll('.toc-item').forEach(function(btn) {
                var chIdx = parseInt(btn.getAttribute('data-chapter'));
                if (chIdx === idx) {
                    tocInactiveArr.forEach(function(c) { btn.classList.remove(c); });
                    tocActiveArr.forEach(function(c) { btn.classList.add(c); });
                } else {
                    tocActiveArr.forEach(function(c) { btn.classList.remove(c); });
                    tocInactiveArr.forEach(function(c) { btn.classList.add(c); });
                }
            });
            
            // Update navigation buttons
            document.getElementById('prev-btn').disabled = idx === 0;
            document.getElementById('next-btn').disabled = idx === chapters.length - 1;
            document.getElementById('reader-progress').textContent = 'Chapter ' + (idx + 1) + ' of ' + chapters.length;
            
            // Scroll to top
            document.getElementById('reader-content').scrollTop = 0;
        }
        
        // EVENT DELEGATION for Digital Reader - More reliable in sandboxed environments like Google Sites
        document.addEventListener('click', function(e) {
            // Digital Reader button
            var readerBtn = e.target.closest('[data-digital-reader]');
            if (readerBtn) {
                e.preventDefault();
                openDigitalReaderFn(readerBtn.getAttribute('data-digital-reader'));
                return;
            }
            
            // Close Digital Reader button
            var closeReaderBtn = e.target.closest('[data-close-digital-reader]');
            if (closeReaderBtn) {
                closeDigitalReaderFn();
                return;
            }
            
            // TOC chapter buttons
            var tocBtn = e.target.closest('[data-toc-chapter]');
            if (tocBtn) {
                renderChapterFn(parseInt(tocBtn.getAttribute('data-toc-chapter')));
                return;
            }
            
            // Prev/Next buttons
            if (e.target.closest('#prev-btn') || e.target.closest('[data-prev-chapter]')) {
                renderChapterFn(currentReader.chapterIdx - 1);
                return;
            }
            if (e.target.closest('#next-btn') || e.target.closest('[data-next-chapter]')) {
                renderChapterFn(currentReader.chapterIdx + 1);
                return;
            }
        });
        
        console.log(' Digital Reader initialized with event delegation');
        `;le+=`
        `+t+`
`}}else if(e.id===`item-assessments`||e.title===`Assessments`){let t=(e.assessments||[]).filter(e=>!e.hidden).sort((e,t)=>e.order-t.order),n=t.map((e,t)=>{let n=e.type===`quiz`?`Multiple Choice`:e.type===`longanswer`?`Long Answer`:e.type===`print`?`Print & Submit`:`Mixed Assessment`,r=e.type===`quiz`?`MC`:e.type===`longanswer`?`LA`:e.type===`print`?`PRINT`:`MIX`,i=e.questionCount||(e.type===`mixed`?`Multiple`:`Unknown`);return`
            <div class="assessment-card p-6 ${te} rounded-xl border border-slate-700 hover:border-${f}-500 transition-all cursor-pointer group" onclick="showAssessment(${t})">
            <div class="flex items-center justify-between">
              <div class="flex-1">
                <div class="flex items-center gap-3 mb-2">
                  <span class="text-[10px] font-black uppercase tracking-widest ${O}">${r}</span>
                  <div>
                    <h3 class="text-xl font-bold ${D} group-hover:text-${f}-400 transition-colors">${e.title}</h3>
                    <p class="text-xs ${O} uppercase tracking-wider">${n}${e.questionCount?` | `+i+` Questions`:``}</p>
                  </div>
                </div>
              </div>
              <div class="text-${f}-400 group-hover:translate-x-1 transition-transform">
                <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path>
                </svg>
              </div>
            </div>
          </div>`}).join(`
          `),r=t.map((e,t)=>`
        <div id="assessment-`+t+`" class="assessment-container hidden">
          <button onclick="backToAssessmentList()" class="mb-6 inline-flex items-center gap-2 \${buttonBgClass} \${buttonHoverClass} \${buttonTextClass} font-bold text-[10px] uppercase tracking-widest px-4 py-2 rounded-lg transition-colors">
            <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"></path>
            </svg>
            Back to Assessments
          </button>
          `+e.html+`
          
          <!-- INLINE ASSESSMENT SCRIPT -->
          <script>
          `+(e.script||``)+`
          <\/script>
        </div>`).join(`
        `),i=o.assessmentTextColor||`white`,a=o.assessmentBoxColor||`slate-900`,s={white:`#ffffff`,black:`#000000`,"slate-950":`#020617`,"slate-900":`#0f172a`,"slate-800":`#1e293b`,"slate-700":`#334155`,"slate-600":`#475569`,"slate-500":`#64748b`,"slate-400":`#94a3b8`,"slate-300":`#cbd5e1`,"slate-200":`#e2e8f0`,"slate-100":`#f1f5f9`,"slate-50":`#f8fafc`,"gray-900":`#111827`,"gray-800":`#1f2937`,"gray-700":`#374151`,"gray-600":`#4b5563`,"gray-500":`#6b7280`,"gray-400":`#9ca3af`,"gray-300":`#d1d5db`,"gray-200":`#e5e7eb`,"gray-100":`#f3f4f6`,"gray-50":`#f9fafb`},c=t.map(e=>{let t=e.textColorOverride!=null&&e.textColorOverride!==``?e.textColorOverride:i,n=e.boxColorOverride!=null&&e.boxColorOverride!==``?e.boxColorOverride:a,r=e.generatedId;if(!r&&(e.html||``).match(/id="(quiz_|mixed_)\d+"/)){let t=(e.html||``).match(/id="((?:quiz_|mixed_)\d+)"/);r=t?t[1]:null}if(!r)return``;let o=s[t]||s.white,c=s[n]||s[`slate-900`],l=[`white`,`slate-50`,`slate-100`,`slate-200`,`slate-300`,`slate-400`,`gray-50`,`gray-100`,`gray-200`,`gray-300`,`gray-400`].includes(n)?`#cbd5e1`:`#334155`;return`#${r} .assessment-input,#${r} textarea.assessment-input,#${r} input.assessment-input{color:${o} !important;background-color:${c} !important;border-color:${l} !important;}`}).filter(Boolean).join(`
`),l=`<div id="view-assessments" class="w-full h-full custom-scroll p-8 md:p-12">
            ${c?`<style>/* per-assessment overrides */\n${c}</style>`:``}
            <div class="max-w-5xl mx-auto">
                <!-- Assessment Selection Page -->
                <div id="assessment-list">
                    <div class="mb-12">
                        <h2 class="text-3xl font-black ${D} italic uppercase tracking-tighter">Assessment Center</h2>
                        <p class="text-xs ${O} font-mono uppercase tracking-widest mt-2">Select an assessment to begin</p>
                    </div>
                    ${t.length>0?`
                    <div class="grid grid-cols-1 gap-4">
                        ${n}
                    </div>`:`<p class="text-center ${O} italic py-12">No assessments available.</p>`}
                </div>
                
                <!-- Individual Assessments (hidden by default) -->
                ${r}
            </div>
            
            <!-- INLINE ASSESSMENT NAVIGATION SCRIPTS -->
            <script>
            (function() {
              console.log(' [INLINE] Initializing assessment navigation functions...');
              
              window.showAssessment = function(index) {
                console.log(' [INLINE] Showing assessment:', index);
                var listEl = document.getElementById('assessment-list');
                var targetEl = document.getElementById('assessment-' + index);
                
                if (listEl) listEl.classList.add('hidden');
                document.querySelectorAll('.assessment-container').forEach(function(c) {
                  c.classList.add('hidden');
                });
                if (targetEl) {
                  targetEl.classList.remove('hidden');
                } else {
                  console.error(' Assessment container not found:', 'assessment-' + index);
                }
                window.scrollTo(0, 0);
              };
              
              window.backToAssessmentList = function() {
                console.log(' [INLINE] Returning to assessment list');
                document.querySelectorAll('.assessment-container').forEach(function(c) {
                  c.classList.add('hidden');
                });
                var listEl = document.getElementById('assessment-list');
                if (listEl) listEl.classList.remove('hidden');
                window.scrollTo(0, 0);
              };
              
              // Global Toolkit Menu Toggle
              window.toggleToolkitMenu = function() {
                console.log(' [INLINE] Toggling toolkit menu');
                var dropdown = document.getElementById('toolkit-dropdown');
                if (dropdown) {
                  dropdown.classList.toggle('hidden');
                }
              };
              
              // Global Toolkit Tool Toggle
              var toolkitState = JSON.parse(localStorage.getItem('mf_toolkit') || '{}');
              
              window.toggleTool = function(toolId) {
                console.log(' [INLINE] Toggling tool:', toolId);
                console.log(' [DEBUG] Looking for element ID:', 'feat-' + toolId);
                
                toolkitState[toolId] = !toolkitState[toolId];
                localStorage.setItem('mf_toolkit', JSON.stringify(toolkitState));
                
                var toolElement = document.getElementById('feat-' + toolId);
                var toggleButton = document.getElementById('toggle-' + toolId);
                
                console.log(' [DEBUG] Tool element found:', !!toolElement);
                console.log(' [DEBUG] Toggle button found:', !!toggleButton);
                console.log(' [DEBUG] New state:', toolkitState[toolId]);
                
                if (toolElement) {
                  if (toolkitState[toolId]) {
                    toolElement.classList.remove('hidden');
                    console.log(' [DEBUG] Showing tool');
                  } else {
                    toolElement.classList.add('hidden');
                    console.log(' [DEBUG] Hiding tool');
                  }
                }
                
                if (toggleButton) {
                  if (toolkitState[toolId]) {
                    toggleButton.classList.remove('bg-slate-600');
                    toggleButton.classList.add('bg-emerald-600');
                    var dot = toggleButton.querySelector('div');
                    if (dot) dot.classList.add('translate-x-4');
                    console.log(' [DEBUG] Toggle ON visual');
                  } else {
                    toggleButton.classList.remove('bg-emerald-600');
                    toggleButton.classList.add('bg-slate-600');
                    var dot = toggleButton.querySelector('div');
                    if (dot) dot.classList.remove('translate-x-4');
                    console.log(' [DEBUG] Toggle OFF visual');
                  }
                }
              };
              
              // Initialize toolkit state on load
              window.initializeToolkit = function() {
                console.log(' [INLINE] Initializing toolkit state');
                Object.keys(toolkitState).forEach(function(toolId) {
                  if (toolkitState[toolId]) {
                    var toolElement = document.getElementById('feat-' + toolId);
                    var toggleButton = document.getElementById('toggle-' + toolId);
                    if (toolElement) toolElement.classList.remove('hidden');
                    if (toggleButton) {
                      toggleButton.classList.remove('bg-slate-600');
                      toggleButton.classList.add('bg-emerald-600');
                      var dot = toggleButton.querySelector('div');
                      if (dot) dot.classList.add('translate-x-4');
                    }
                  }
                });
              };
              
              // Initialize on load
              if (document.readyState === 'loading') {
                document.addEventListener('DOMContentLoaded', window.initializeToolkit);
              } else {
                window.initializeToolkit();
              }
              
              console.log(' [INLINE] Assessment navigation + toolkit functions ready!');
            })();
            <\/script>
        </div>`,u=t.map(e=>e.script||``).join(`
        `);F+=`
            <button onclick="switchView('assessments')" id="nav-assessments" class="nav-item">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z" /></svg>
                Assessments
            </button>`,ce+=`\n        ${l}\n`,le+=`\n        
        (function() {
          console.log(' Initializing assessment navigation functions...');
          
          window.showAssessment = function(index) {
            console.log(' Showing assessment:', index);
            var listEl = document.getElementById('assessment-list');
            var targetEl = document.getElementById('assessment-' + index);
            
            if (listEl) listEl.classList.add('hidden');
            document.querySelectorAll('.assessment-container').forEach(function(c) {
              c.classList.add('hidden');
            });
            if (targetEl) {
              targetEl.classList.remove('hidden');
            } else {
              console.error('Assessment container not found:', 'assessment-' + index);
            }
            window.scrollTo(0, 0);
          };
          
          window.backToAssessmentList = function() {
            console.log(' Returning to assessment list');
            document.querySelectorAll('.assessment-container').forEach(function(c) {
              c.classList.add('hidden');
            });
            var listEl = document.getElementById('assessment-list');
            if (listEl) listEl.classList.remove('hidden');
            window.scrollTo(0, 0);
          };
          
          console.log(' Assessment navigation functions ready!');
        })();
        \n        ${u}\n`}else{let n=e.id||t.id||``,r=n.replace(`view-`,``);if(n&&(e.type===`external`&&e.linkType===`newtab`?F+=`\n            <button onclick="window.open('${e.url}', '_blank', 'noopener,noreferrer')" id="nav-${r}" class="nav-item">\n                <span class="w-2 h-2 rounded-full bg-slate-600"></span>${e.title}\n            </button>`:F+=`\n            <button onclick="switchView('${r}')" id="nav-${r}" class="nav-item">\n                <span class="w-2 h-2 rounded-full bg-slate-600"></span>${e.title}\n            </button>`),!(e.type===`external`&&e.linkType===`newtab`)){let t=``;if(e.rawHtml)t=e.rawHtml;else{let n=Df(e);if(!n.html)return;let r=n.html||``,i=n.script||``;t=`<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="https://cdn.tailwindcss.com"><\/script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:ital,wght@0,400;0,700;1,400;1,900&family=JetBrains+Mono:wght@700&display=swap" rel="stylesheet">
    <style>
        body { 
            background-color: #0f172a; 
            color: #e2e8f0; 
            font-family: 'Inter', sans-serif;
            margin: 0;
            padding: 0;
        }
        ::-webkit-scrollbar { width: 8px; height: 8px; }
        ::-webkit-scrollbar-track { background: #1e293b; }
        ::-webkit-scrollbar-thumb { background: #475569; border-radius: 4px; }
        ::-webkit-scrollbar-thumb:hover { background: #64748b; }
        ${n.css||``}
    </style>
</head>
<body class="min-h-screen p-4 md:p-8">
    ${r}
    <script>
        (function() {
            ${i}
        })();
    <\/script>
</body>
</html>`}let n=`
        <div id="view-${r}" class="w-full h-full hidden module-container">
            <iframe 
                srcdoc="${t.replace(/"/g,`&quot;`).replace(/'/g,`&#39;`)}" 
                class="w-full h-full border-0" 
                style="min-height: 100vh;"
                sandbox="allow-scripts allow-same-origin allow-forms allow-popups allow-modals allow-downloads"
            ></iframe>
        </div>`;ce+=`
`+n+`
`}}}),oe.forEach(e=>{let t=typeof e.code==`string`?JSON.parse(e.code):e.code;if(e.includeUi&&t.html){let e=t.html+(t.script?`
<script>
`+t.script+`
<\/script>`:``);ce+=`
        `+e+`
`}}),se.length>0){F+=`
            <button onclick="toggleToolkitMenu()" id="nav-toolkit" class="nav-item mt-4 border-t border-slate-800 pt-4">
                <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"></path><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"></path></svg>
                Global Toolkit
            </button>`;let e=``;se.forEach(t=>{let n=typeof t.code==`string`?JSON.parse(t.code):t.code,r=t.id.replace(`feat-`,``);if(t.userToggleable?e+=`
                        <div class="flex items-center justify-between p-2 hover:bg-slate-700 rounded">
                            <span class="text-xs text-slate-300">${t.title}</span>
                            <button onclick="toggleTool('${r}')" id="toggle-${r}" class="relative w-8 h-4 rounded-full transition-colors bg-slate-600 cursor-pointer">
                                <div class="absolute top-0.5 left-0.5 w-3 h-3 bg-white rounded-full transition-transform pointer-events-none"></div>
                            </button>
                        </div>`:e+=`
                        <div class="p-2 hover:bg-slate-700 rounded">
                            <span class="text-xs text-slate-300">${t.title}</span>
                        </div>`,t.includeUi&&n.html){let e=n.html+(n.script?`
<script>
`+n.script+`
<\/script>`:``);ce+=`
        <div id="feat-`+r+`" class="`+(t.userToggleable?`hidden`:``)+`">
`+e+`
        </div>
`}}),ce+=`
        <div id="toolkit-dropdown" class="hidden fixed top-16 left-4 bg-slate-800 border border-slate-700 rounded-xl p-3 shadow-2xl z-50 w-64">
            <div class="flex items-center justify-between mb-3">
                <h3 class="text-sm font-bold text-white">Global Toolkit</h3>
                <button onclick="toggleToolkitMenu()" class="text-slate-400 hover:text-white"></button>
            </div>
            <div class="space-y-1">
                ${e}
            </div>
        </div>`;let t=se.filter(e=>e.userToggleable).map(e=>e.id.replace(`feat-`,``));le+=`
        // Global Toolkit Menu Logic
        function toggleToolkitMenu() {
            const dropdown = document.getElementById('toolkit-dropdown');
            dropdown.classList.toggle('hidden');
        }

        // Tool Toggle State Management
        let toolkitState = JSON.parse(localStorage.getItem('mf_toolkit') || '{}');
        
        function toggleTool(toolId) {
            toolkitState[toolId] = !toolkitState[toolId];
            localStorage.setItem('mf_toolkit', JSON.stringify(toolkitState));
            applyToolState(toolId);
        }

        function applyToolState(toolId) {
            const isActive = toolkitState[toolId];
            const toolEl = document.getElementById('tool-' + toolId);
            const toggleBtn = document.getElementById('toggle-' + toolId);
            
            if (toolEl) {
                toolEl.classList.toggle('hidden', !isActive);
            }
            
            if (toggleBtn) {
                const slider = toggleBtn.querySelector('div');
                if (isActive) {
                    toggleBtn.classList.remove('bg-slate-600');
                    toggleBtn.classList.add('bg-emerald-600');
                    slider.classList.add('translate-x-4');
                } else {
                    toggleBtn.classList.add('bg-slate-600');
                    toggleBtn.classList.remove('bg-emerald-600');
                    slider.classList.remove('translate-x-4');
                }
            }
        }

        // Initialize tool states on load
        ${t.map(e=>`applyToolState('${e}');`).join(`
        `)}
      `}let ue=g.enableProgressTracking===!0?`
        
        // ========================================
        // PROGRESS TRACKING SYSTEM
        // ========================================
        let moduleProgress = JSON.parse(localStorage.getItem('courseProgress_${s.replace(/[^a-zA-Z0-9]/g,`_`)}') || '{}');
        
        // Track when a module is viewed
        function trackModuleView(moduleId) {
          if (!moduleProgress[moduleId]) {
            moduleProgress[moduleId] = {
              viewed: true,
              viewedAt: new Date().toISOString(),
              completed: false
            };
            localStorage.setItem('courseProgress_${s.replace(/[^a-zA-Z0-9]/g,`_`)}', JSON.stringify(moduleProgress));
            updateProgressIndicators();
          }
        }
        
        // Mark module as completed
        function markModuleComplete(moduleId) {
          if (!moduleProgress[moduleId]) {
            moduleProgress[moduleId] = { viewed: true, viewedAt: new Date().toISOString() };
          }
          moduleProgress[moduleId].completed = true;
          moduleProgress[moduleId].completedAt = new Date().toISOString();
          localStorage.setItem('courseProgress_${s.replace(/[^a-zA-Z0-9]/g,`_`)}', JSON.stringify(moduleProgress));
          updateProgressIndicators();
        }
        
        // Update visual progress indicators
        function updateProgressIndicators() {
          const allModules = document.querySelectorAll('nav button[onclick^="switchView"]');
          allModules.forEach(btn => {
            const moduleId = btn.getAttribute('onclick').match(/'([^']+)'/)[1];
            if (moduleProgress[moduleId]) {
              // Add checkmark indicator
              if (moduleProgress[moduleId].completed && !btn.querySelector('.progress-check')) {
                btn.insertAdjacentHTML('beforeend', '<span class="progress-check ml-2 text-emerald-400"></span>');
              } else if (moduleProgress[moduleId].viewed && !moduleProgress[moduleId].completed && !btn.querySelector('.progress-dot')) {
                btn.insertAdjacentHTML('beforeend', '<span class="progress-dot ml-2 text-amber-400"></span>');
              }
            }
          });
        }
        
        // Hook into module switching to track views
        const originalSwitchView = window.switchView;
        window.switchView = function(viewId) {
          trackModuleView(viewId);
          return originalSwitchView(viewId);
        };
        
        // Initialize on load
        updateProgressIndicators();
      `:``,de=r?`
        // Auto-open to initial view on load
        (function() {
          function initView() {
            const targetView = document.getElementById('view-${r}');
            if (targetView) {
              // Hide all views first
              document.querySelectorAll('[id^="view-"]').forEach(v => v.classList.add('hidden'));
              // Show target view
              targetView.classList.remove('hidden');
              // Activate nav button
              const navBtn = document.getElementById('nav-${r}');
              if (navBtn) {
                document.querySelectorAll('.nav-item').forEach(b => b.classList.remove('active'));
                navBtn.classList.add('active');
              }
              // Call module init if available (backward compatibility)
              if (window.COURSE_FACTORY_MODULES && window.COURSE_FACTORY_MODULES['${r}'] && window.COURSE_FACTORY_MODULES['${r}'].init) {
                try {
                  window.COURSE_FACTORY_MODULES['${r}'].init();
                } catch(e) {
                  console.error('Module init error:', e);
                }
              }
            }
          }
          if (document.readyState === 'loading') {
            document.addEventListener('DOMContentLoaded', initView);
          } else {
            initView();
          }
        })();
      `:``;return bf({courseName:s,courseNameUpper:c,accentColor:f,backgroundColor:p,fontFamily:m,customCSS:h,courseInfo:re,navItems:F,content:ce,scripts:le+de,progressTracking:ue,containerBgRgba:ne,layoutSettings:i[`Course Settings`]?.layoutSettings})},zf=({projectData:e,setProjectData:t,excludedIds:n,toggleModule:r,onToggleHidden:i,onError:a})=>{let[o,s]=$(``),[c,l]=$(!1),[u,d]=$(null),[f,p]=$(``),[m,h]=$([]),[g,_]=$([]),[v,y]=$([]),[b,x]=$(``),[S,C]=$(``),[w,T]=$(`Mental Fitness Course`),[E,D]=$(`Master your mental game and unlock peak performance.`),[O,k]=$(`legacy`),[A,j]=$(`multi-file`),[M,ee]=$([]),[ne,N]=$(!0),[re,ae]=$(``),[oe,ce]=$(``),ue=e[`Current Course`]?.modules||[],fe=async()=>window.JSZip?window.JSZip:new Promise((e,t)=>{let n=document.createElement(`script`);n.src=`https://cdnjs.cloudflare.com/ajax/libs/jszip/3.10.1/jszip.min.js`,n.onload=()=>e(window.JSZip),n.onerror=()=>t(Error(`Failed to load JSZip`)),document.head.appendChild(n)}),pe=()=>{let t=(e[`Course Settings`]||{}).courseName||e[`Current Course`]?.name||`Course`,r=ue.filter(e=>!n.includes(e.id)&&!e.hidden);return{courseTitle:t,updatedAt:new Date().toISOString(),modules:r.map(e=>({id:e.id,title:e.title,path:`modules/${e.id}.html`}))}},me=yf,ge=t=>{let n=e[`Course Settings`]||{},r=n.accentColor||`sky`,i=n.backgroundColor||`slate-900`,a=n.fontFamily||`inter`,o=n.customCSS||``,s=t.courseTitle,c=me(a),l=[`slate-50`,`zinc-50`,`neutral-50`,`stone-50`,`gray-50`,`white`].includes(i),u=n.headingTextColor||(l?`slate-900`:`white`),d=n.secondaryTextColor||(l?`slate-600`:`slate-400`),f=n.containerColor||(l?`white/80`:`slate-900/80`),p=e=>e.startsWith(`text-`)?e:`text-${e}`,m=(e,t=1)=>{if(!e)return`rgba(15, 23, 42, ${t})`;let n=e.replace(`#`,``);return n.length===6?`rgba(${parseInt(n.slice(0,2),16)}, ${parseInt(n.slice(2,4),16)}, ${parseInt(n.slice(4,6),16)}, ${t})`:`rgba(15, 23, 42, ${t})`},h=e=>{let t=(e||``).toString().trim();if(!t)return{base:l?`white`:`slate-900`,alpha:.8,alphaRaw:`80`};let n=t;n.startsWith(`bg-`)&&(n=n.slice(3)),n.startsWith(`text-`)&&(n=n.slice(5));let r=n.split(`/`),i=r[0]||(l?`white`:`slate-900`),a=r[1]||null;return{base:i,alpha:a?Math.max(0,Math.min(1,parseInt(a,10)/100)):1,alphaRaw:a}},g={"slate-900":`#0f172a`,"slate-800":`#1e293b`,"slate-700":`#334155`,"slate-600":`#475569`,"slate-500":`#64748b`,"slate-950":`#020617`,"gray-900":`#111827`,"gray-800":`#1f2937`,"gray-700":`#374151`,"gray-600":`#4b5563`,"zinc-900":`#18181b`,"zinc-800":`#27272a`,"neutral-900":`#171717`,"stone-900":`#1c1917`,white:`#ffffff`},_=p(u),v=p(d),y=p(`slate-500`),b=l?`border-slate-300`:`border-slate-700`,x=h(f),S=x.alphaRaw?`bg-${x.base}/${x.alphaRaw}`:`bg-${x.base}`,C=`hover:bg-${x.base}`,w=m(g[x.base]||(l?`#ffffff`:`#0f172a`),x.alpha),T=v,E=t.modules.map((e,t)=>`
      <a href="./${e.path}" class="block p-6 ${S} rounded-xl border ${b} hover:border-${r}-500 ${C} transition-all group">
        <div class="flex items-center justify-between">
          <div class="flex items-center gap-4">
            <div class="w-10 h-10 rounded-lg bg-${r}-500/20 flex items-center justify-center text-${r}-400 font-bold">
              ${String(t+1).padStart(2,`0`)}
            </div>
            <div>
              <h3 class="text-lg font-bold ${_} group-hover:text-${r}-400 transition-colors">${e.title}</h3>
              <p class="text-xs ${y} font-mono">${e.id}</p>
            </div>
          </div>
          <svg class="w-5 h-5 ${T} group-hover:text-${r}-400 group-hover:translate-x-1 transition-all" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path>
          </svg>
        </div>
      </a>
    `).join(`
`),D={"slate-900":`#0f172a`,"slate-950":`#020617`,"zinc-900":`#18181b`,"neutral-900":`#171717`,"stone-900":`#1c1917`,"gray-900":`#111827`,"slate-50":`#f8fafc`,"zinc-50":`#fafafa`,"neutral-50":`#fafafa`,"stone-50":`#fafaf9`,"gray-50":`#f9fafb`,white:`#ffffff`},O=D[i]||D[`slate-900`],k=l?`#e2e8f0`:`#1e293b`,A=l?`#94a3b8`:`#475569`;return`<!DOCTYPE html>
<html lang="en" style="background: ${O} !important; background-color: ${O} !important;">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>${s}</title>
  <script src="https://cdn.tailwindcss.com"><\/script>
  <link href="${c.url}" rel="stylesheet">
  <style>
    * { 
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }
    html, body { 
      background: ${O} !important;
      background-color: ${O} !important;
      ${c.css}
    }
    body { 
      min-height: 100vh;
    }
    :root { --cf-container-bg: ${w}; }
    .custom-scroll::-webkit-scrollbar { width: 6px; }
    .custom-scroll::-webkit-scrollbar-track { background: ${k}; }
    .custom-scroll::-webkit-scrollbar-thumb { background: ${A}; border-radius: 3px; }
    ${o?`\n    /* Custom CSS from Settings */\n    ${o}`:``}
  </style>
  <script>
    // Force background color after Tailwind loads
    (function() {
      function setBackground() {
        document.documentElement.style.backgroundColor = '${O}';
        document.documentElement.style.background = '${O}';
        document.body.style.backgroundColor = '${O}';
        document.body.style.background = '${O}';
      }
      setBackground();
      if (document.readyState === 'loading') {
        document.addEventListener('DOMContentLoaded', setBackground);
      }
      setTimeout(setBackground, 100);
      setTimeout(setBackground, 500);
    })();
  <\/script>
</head>
<body class="${v} custom-scroll" style="background: ${O} !important; background-color: ${O} !important;">
  <div class="max-w-4xl mx-auto px-6 py-12">
    <header class="mb-12 text-center">
      <h1 class="text-4xl font-black ${_} uppercase tracking-tight mb-2">${s}</h1>
      <p class="text-sm ${v}">Select a module to begin</p>
      <p class="text-xs ${y} mt-2 font-mono">Last updated: ${new Date(t.updatedAt).toLocaleDateString()}</p>
    </header>
    
    <nav class="space-y-4">
      ${E}
    </nav>
    
    <footer class="mt-16 pt-8 border-t ${b} text-center">
      <p class="text-xs ${y}">Built with Course Factory</p>
    </footer>
  </div>
</body>
</html>`},_e=t=>{let n=ue.find(e=>e.id===t);if(!n)return null;let r=e[`Course Settings`]||{};return jf(n,{...r,__courseName:r.courseName||e[`Current Course`]?.name||`Course`,__toolkit:e[`Global Toolkit`]||[],__materials:e[`Current Course`]?.materials||[],ignoreAssetBaseUrl:!0})},ye=()=>{let t=pe(),r={};return r[`index.html`]=Rf({modules:ue,toolkit:e[`Global Toolkit`]||[],excludedIds:n,initialViewKey:null,projectData:e,ignoreAssetBaseUrl:!0}),r[`manifest.json`]=JSON.stringify(t,null,2),r},be=()=>{let e=pe(),t={};return t[`index.html`]=ge(e),t[`manifest.json`]=JSON.stringify(e,null,2),e.modules.forEach(e=>{let n=_e(e.id);n&&(t[`modules/${e.id}.html`]=n)}),t},xe=(e,t)=>{let n={};if(t){let e=pe();n[`manifest.json`]=JSON.stringify(e,null,2)}return e.forEach(e=>{let t=_e(e);t&&(n[`modules/${e}.html`]=t)}),n},Se=async(e,t)=>{try{ae(`loading`),ce(`Loading ZIP library...`);let n=new(await(fe()));ce(`Creating ZIP archive...`),Object.entries(e).forEach(([e,t])=>{n.file(e,t)}),ce(`Generating download...`);let r=await n.generateAsync({type:`blob`}),i=URL.createObjectURL(r),a=document.createElement(`a`);a.href=i,a.download=t,document.body.appendChild(a),a.click(),document.body.removeChild(a),URL.revokeObjectURL(i),ae(`success`),ce(`Downloaded ${t}`),setTimeout(()=>{ae(``),ce(``)},3e3)}catch(e){ae(`error`),ce(`Failed: ${e.message}`)}},Ce=e=>e.replace(/[^a-zA-Z0-9]/g,`_`).toLowerCase(),we=async()=>{let t=`course_${Ce((e[`Course Settings`]||{}).courseName||e[`Current Course`]?.name||`course`)}_${new Date().toISOString().split(`T`)[0]}.zip`;await Se(A===`single-page`?ye():be(),t)},Te=async()=>{if(M.length===0){ae(`error`),ce(`Please select at least one module`);return}let t=`delta_${Ce((e[`Course Settings`]||{}).courseName||e[`Current Course`]?.name||`course`)}_${new Date().toISOString().split(`T`)[0]}.zip`;await Se(xe(M,ne),t)},Ee=e=>{ee(t=>t.includes(e)?t.filter(t=>t!==e):[...t,e])},De=()=>{ee(ue.filter(e=>!n.includes(e.id)&&!e.hidden).map(e=>e.id))},Oe=()=>{ee([])},Ae=e[`Current Course`]?.materials||[],je=e[`Global Toolkit`]||[],Me=(n,r)=>{let i=[...je];i[n]={...i[n],[r]:!i[n][r]},t({...e,"Global Toolkit":i})},Pe=()=>{try{let t=ue.find(e=>e.id===f);if(!t){a&&a(`module`,`Module "${f}" not found. Please select a valid module.`);return}let n=e[`Course Settings`]||{},r=jf(t,{...n,__courseName:n.courseName||e[`Current Course`]?.name||`Course`,__toolkit:e[`Global Toolkit`]||[],__materials:e[`Current Course`]?.materials||[]});r&&x(r)}catch(e){a&&a(`compile`,`Failed to generate module page HTML: ${e.message}`,e.stack),console.error(`Module page generation error:`,e)}},Fe=()=>{try{s(Rf({modules:ue,toolkit:je,excludedIds:n,initialViewKey:null,projectData:e})),l(!0)}catch(e){a&&a(`compile`,`Failed to compile full site: ${e.message}`,e.stack),console.error(`Full site compilation error:`,e),l(!1)}};return(0,Q.jsx)(`div`,{className:`space-y-6 animate-in fade-in duration-500`,children:(0,Q.jsxs)(`div`,{className:`bg-slate-800 p-6 rounded-lg border border-slate-700`,children:[(0,Q.jsxs)(`h2`,{className:`text-xl font-bold text-white mb-4 flex items-center gap-2`,children:[(0,Q.jsx)(he,{className:`text-purple-400`}),` Phase 4: Compile & Export`]}),(0,Q.jsxs)(`div`,{className:`mb-6 p-4 bg-slate-900/50 rounded-xl border border-slate-700`,children:[(0,Q.jsxs)(`div`,{className:`flex items-center gap-2 mb-2`,children:[(0,Q.jsx)(`h3`,{className:`text-xs font-bold text-slate-400 uppercase`,children:`Asset Base URL (CDN)`}),(0,Q.jsx)(`span`,{className:`text-[10px] bg-blue-900/50 text-blue-300 px-2 py-0.5 rounded border border-blue-800`,children:`Required for Google Sites`})]}),(0,Q.jsxs)(`p`,{className:`text-[10px] text-slate-500 mb-3`,children:[`If your PDFs/files are in a local folder (e.g. `,(0,Q.jsx)(`code`,{children:`/materials/doc.pdf`}),`), Google Sites cannot see them. Enter your GitHub Pages URL here to convert them to absolute links.`]}),(0,Q.jsx)(`input`,{type:`text`,value:e[`Course Settings`]?.assetBaseUrl||``,onChange:e=>t(t=>({...t,"Course Settings":{...t[`Course Settings`],assetBaseUrl:e.target.value}})),placeholder:`https://username.github.io/repo-name`,className:`w-full bg-slate-950 border border-slate-700 rounded-lg p-3 text-white text-sm font-mono focus:border-blue-500 outline-none`})]}),(0,Q.jsxs)(`div`,{className:`mb-6 p-4 bg-slate-900/50 rounded-xl border border-slate-700`,children:[(0,Q.jsx)(`label`,{className:`block text-xs font-bold text-slate-400 uppercase mb-3`,children:`Publishing Mode`}),(0,Q.jsxs)(`div`,{className:`flex gap-2`,children:[(0,Q.jsx)(`button`,{onClick:()=>k(`legacy`),className:`flex-1 py-3 px-4 rounded-lg font-bold text-sm transition-all ${O===`legacy`?`bg-purple-600 text-white`:`bg-slate-800 text-slate-400 hover:bg-slate-700`}`,children:`Legacy Compile (Single HTML)`}),(0,Q.jsxs)(`button`,{onClick:()=>k(`beta`),className:`flex-1 py-3 px-4 rounded-lg font-bold text-sm transition-all flex items-center justify-center gap-2 ${O===`beta`?`bg-emerald-600 text-white`:`bg-slate-800 text-slate-400 hover:bg-slate-700`}`,children:[`Static Multi-File Publish`,(0,Q.jsx)(`span`,{className:`text-[10px] bg-amber-500 text-black px-1.5 py-0.5 rounded font-black`,children:`BETA`})]})]})]}),O===`beta`&&(0,Q.jsxs)(`div`,{className:`mb-8 bg-gradient-to-br from-emerald-900/20 to-slate-900/50 p-6 rounded-xl border border-emerald-500/30`,children:[(0,Q.jsxs)(`h3`,{className:`text-lg font-bold text-white mb-2 flex items-center gap-2`,children:[(0,Q.jsx)(Ne,{size:20,className:`text-emerald-400`}),` Static Multi-File Publish`,(0,Q.jsx)(`span`,{className:`text-[10px] bg-amber-500 text-black px-1.5 py-0.5 rounded font-black`,children:`BETA`})]}),(0,Q.jsxs)(`p`,{className:`text-xs text-slate-400 mb-4`,children:[`Generate a proper static site structure with `,(0,Q.jsx)(`code`,{className:`bg-slate-800 px-1 rounded`,children:`index.html`}),`, `,(0,Q.jsx)(`code`,{className:`bg-slate-800 px-1 rounded`,children:`manifest.json`}),`, and individual module pages in `,(0,Q.jsx)(`code`,{className:`bg-slate-800 px-1 rounded`,children:`modules/`}),` folder.`]}),(0,Q.jsxs)(`div`,{className:`mb-6 p-4 bg-slate-900/50 rounded-lg border border-slate-700`,children:[(0,Q.jsx)(`label`,{className:`block text-xs font-bold text-slate-400 uppercase mb-3`,children:`Site Structure`}),(0,Q.jsxs)(`div`,{className:`flex gap-2`,children:[(0,Q.jsx)(`button`,{onClick:()=>j(`multi-file`),className:`flex-1 py-2.5 px-4 rounded-lg font-bold text-xs transition-all ${A===`multi-file`?`bg-sky-600 text-white`:`bg-slate-800 text-slate-400 hover:bg-slate-700`}`,children:`Multi-File (Separate Pages)`}),(0,Q.jsx)(`button`,{onClick:()=>j(`single-page`),className:`flex-1 py-2.5 px-4 rounded-lg font-bold text-xs transition-all ${A===`single-page`?`bg-purple-600 text-white`:`bg-slate-800 text-slate-400 hover:bg-slate-700`}`,children:`Single-Page App (With Sidebar)`})]}),(0,Q.jsx)(`div`,{className:`mt-3 text-xs text-slate-500`,children:A===`multi-file`?(0,Q.jsx)(`span`,{children:` Separate HTML files per module  Bookmarkable URLs  Delta publish support`}):(0,Q.jsx)(`span`,{children:` Single HTML file  Sidebar navigation  Instant switching  State preserved`})})]}),re&&(0,Q.jsxs)(`div`,{className:`mb-4 p-3 rounded-lg flex items-center gap-2 text-sm ${re===`loading`?`bg-sky-900/50 border border-sky-700 text-sky-300`:re===`success`?`bg-emerald-900/50 border border-emerald-700 text-emerald-300`:`bg-rose-900/50 border border-rose-700 text-rose-300`}`,children:[re===`loading`&&(0,Q.jsx)(ve,{size:14,className:`animate-spin`}),re===`success`&&(0,Q.jsx)(te,{size:14}),re===`error`&&(0,Q.jsx)(ke,{size:14}),oe]}),(0,Q.jsxs)(`div`,{className:`mb-6 p-4 bg-slate-900/50 rounded-lg border border-slate-700`,children:[(0,Q.jsx)(`h4`,{className:`text-sm font-bold text-emerald-400 mb-2 uppercase tracking-wider`,children:`Full Publish`}),(0,Q.jsx)(`p`,{className:`text-xs text-slate-500 mb-4`,children:`Downloads a complete ZIP containing all active modules.`}),(0,Q.jsxs)(`div`,{className:`mb-4 p-3 bg-slate-950 rounded border border-slate-800`,children:[(0,Q.jsx)(`div`,{className:`text-[10px] font-bold text-slate-500 uppercase mb-2`,children:`Files to be generated:`}),(0,Q.jsx)(`div`,{className:`text-xs font-mono text-slate-400 space-y-1`,children:A===`multi-file`?(0,Q.jsxs)(Q.Fragment,{children:[(0,Q.jsxs)(`div`,{className:`flex items-center gap-2`,children:[(0,Q.jsx)(`span`,{className:`text-emerald-400`,children:(0,Q.jsx)(F,{size:14})}),` index.html`]}),(0,Q.jsxs)(`div`,{className:`flex items-center gap-2`,children:[(0,Q.jsx)(`span`,{className:`text-amber-400`,children:(0,Q.jsx)(se,{size:14})}),` manifest.json`]}),ue.filter(e=>!n.includes(e.id)&&!e.hidden).map(e=>(0,Q.jsxs)(`div`,{className:`flex items-center gap-2 pl-2`,children:[(0,Q.jsx)(`span`,{className:`text-sky-400`,children:(0,Q.jsx)(le,{size:14})}),` modules/`,e.id,`.html`]},e.id))]}):(0,Q.jsxs)(Q.Fragment,{children:[(0,Q.jsxs)(`div`,{className:`flex items-center gap-2`,children:[(0,Q.jsx)(`span`,{className:`text-emerald-400`,children:(0,Q.jsx)(F,{size:14})}),` index.html (single-page app with sidebar)`]}),(0,Q.jsxs)(`div`,{className:`flex items-center gap-2`,children:[(0,Q.jsx)(`span`,{className:`text-amber-400`,children:(0,Q.jsx)(se,{size:14})}),` manifest.json`]})]})})]}),(0,Q.jsxs)(`button`,{onClick:we,disabled:re===`loading`||ue.filter(e=>!n.includes(e.id)&&!e.hidden).length===0,className:`w-full bg-emerald-600 hover:bg-emerald-500 disabled:bg-slate-700 disabled:cursor-not-allowed text-white font-bold py-3 rounded-lg flex items-center justify-center gap-2 transition-all`,children:[(0,Q.jsx)(ie,{size:16}),` Full Publish (ZIP)`]})]}),A===`multi-file`&&(0,Q.jsxs)(`div`,{className:`p-4 bg-slate-900/50 rounded-lg border border-slate-700`,children:[(0,Q.jsx)(`h4`,{className:`text-sm font-bold text-sky-400 mb-2 uppercase tracking-wider`,children:`Delta Publish (Selected Modules Only)`}),(0,Q.jsx)(`p`,{className:`text-xs text-slate-500 mb-4`,children:`Select specific modules to include in a partial update ZIP.`}),(0,Q.jsxs)(`label`,{className:`flex items-center gap-2 mb-4 cursor-pointer`,children:[(0,Q.jsx)(`input`,{type:`checkbox`,checked:ne,onChange:e=>N(e.target.checked),className:`rounded border-slate-600 bg-slate-900 text-sky-600`}),(0,Q.jsx)(`span`,{className:`text-sm text-slate-300`,children:`Include manifest.json`})]}),(0,Q.jsxs)(`div`,{className:`mb-4`,children:[(0,Q.jsxs)(`div`,{className:`flex items-center justify-between mb-2`,children:[(0,Q.jsx)(`label`,{className:`text-xs font-bold text-slate-400 uppercase`,children:`Select Modules`}),(0,Q.jsxs)(`div`,{className:`flex gap-2`,children:[(0,Q.jsx)(`button`,{onClick:De,className:`text-[10px] text-sky-400 hover:text-sky-300 font-bold`,children:`Select All`}),(0,Q.jsx)(`span`,{className:`text-slate-600`,children:`|`}),(0,Q.jsx)(`button`,{onClick:Oe,className:`text-[10px] text-slate-500 hover:text-slate-400 font-bold`,children:`Clear`})]})]}),(0,Q.jsxs)(`div`,{className:`bg-slate-950 rounded-lg border border-slate-800 max-h-48 overflow-y-auto p-2 space-y-1`,children:[ue.filter(e=>!n.includes(e.id)&&!e.hidden).map(e=>(0,Q.jsxs)(`label`,{className:`flex items-center gap-2 p-2 rounded hover:bg-slate-900 cursor-pointer`,children:[(0,Q.jsx)(`input`,{type:`checkbox`,checked:M.includes(e.id),onChange:()=>Ee(e.id),className:`rounded border-slate-600 bg-slate-900 text-sky-600`}),(0,Q.jsx)(`span`,{className:`text-sm text-slate-300`,children:e.title}),(0,Q.jsx)(`span`,{className:`text-[10px] text-slate-600 font-mono ml-auto`,children:e.id})]},e.id)),ue.filter(e=>!n.includes(e.id)&&!e.hidden).length===0&&(0,Q.jsx)(`p`,{className:`text-xs text-slate-500 italic p-2 text-center`,children:`No active modules`})]})]}),M.length>0&&(0,Q.jsxs)(`div`,{className:`mb-4 p-3 bg-slate-950 rounded border border-slate-800`,children:[(0,Q.jsx)(`div`,{className:`text-[10px] font-bold text-slate-500 uppercase mb-2`,children:`Delta ZIP will contain:`}),(0,Q.jsxs)(`div`,{className:`text-xs font-mono text-slate-400 space-y-1`,children:[ne&&(0,Q.jsxs)(`div`,{className:`flex items-center gap-2`,children:[(0,Q.jsx)(`span`,{className:`text-amber-400`,children:(0,Q.jsx)(se,{size:14})}),` manifest.json`]}),M.map(e=>{let t=ue.find(t=>t.id===e);return(0,Q.jsxs)(`div`,{className:`flex items-center gap-2 pl-2`,children:[(0,Q.jsx)(`span`,{className:`text-sky-400`,children:(0,Q.jsx)(le,{size:14})}),` modules/`,e,`.html`,t&&(0,Q.jsxs)(`span`,{className:`text-slate-600 text-[10px]`,children:[`(`,t.title,`)`]})]},e)})]})]}),(0,Q.jsxs)(`button`,{onClick:Te,disabled:re===`loading`||M.length===0,className:`w-full bg-sky-600 hover:bg-sky-500 disabled:bg-slate-700 disabled:cursor-not-allowed text-white font-bold py-3 rounded-lg flex items-center justify-center gap-2 transition-all`,children:[(0,Q.jsx)(ie,{size:16}),` Publish Selected (Delta ZIP)`,M.length>0&&(0,Q.jsxs)(`span`,{className:`bg-sky-800 px-2 py-0.5 rounded text-xs`,children:[M.length,` selected`]})]})]})]}),(0,Q.jsxs)(`div`,{className:`mb-8 bg-slate-900/50 p-6 rounded-xl border border-blue-500/30`,children:[(0,Q.jsxs)(`h3`,{className:`text-lg font-bold text-white mb-4 flex items-center gap-2`,children:[(0,Q.jsx)(de,{size:20,className:`text-blue-400`}),` Export Single Module Page`]}),(0,Q.jsxs)(`div`,{className:`space-y-4`,children:[(0,Q.jsxs)(`div`,{children:[(0,Q.jsx)(`label`,{className:`block text-xs font-bold text-slate-400 uppercase mb-2`,children:`Select Primary Module`}),(0,Q.jsxs)(`select`,{value:f,onChange:e=>p(e.target.value),className:`w-full bg-slate-950 border border-slate-700 rounded-lg p-3 text-white text-sm`,children:[(0,Q.jsx)(`option`,{value:``,children:`-- Choose a Module --`}),ue.map(e=>(0,Q.jsx)(`option`,{value:e.id,children:e.title},e.id))]})]}),f&&(0,Q.jsxs)(`div`,{className:`grid grid-cols-1 md:grid-cols-3 gap-4`,children:[(0,Q.jsxs)(`div`,{className:`bg-slate-950 p-4 rounded-lg border border-slate-800 h-48 overflow-y-auto`,children:[(0,Q.jsx)(`label`,{className:`block text-xs font-bold text-purple-400 uppercase mb-2 sticky top-0 bg-slate-950 pb-2`,children:`Include Assessments`}),(0,Q.jsx)(`div`,{className:`space-y-2`,children:ue.flatMap(e=>e.assessments||[]).map(e=>(0,Q.jsxs)(`label`,{className:`flex items-center gap-2 cursor-pointer hover:bg-slate-900 p-1 rounded`,children:[(0,Q.jsx)(`input`,{type:`checkbox`,checked:m.includes(e.id),onChange:t=>t.target.checked?h([...m,e.id]):h(m.filter(t=>t!==e.id)),className:`rounded border-slate-700 bg-slate-900 text-purple-600`}),(0,Q.jsx)(`span`,{className:`text-xs text-slate-300 truncate`,children:e.title})]},e.id))})]}),(0,Q.jsxs)(`div`,{className:`bg-slate-950 p-4 rounded-lg border border-slate-800 h-48 overflow-y-auto`,children:[(0,Q.jsx)(`label`,{className:`block text-xs font-bold text-cyan-400 uppercase mb-2 sticky top-0 bg-slate-950 pb-2`,children:`Include Materials`}),(0,Q.jsx)(`div`,{className:`space-y-2`,children:Ae.map(e=>(0,Q.jsxs)(`label`,{className:`flex items-center gap-2 cursor-pointer hover:bg-slate-900 p-1 rounded`,children:[(0,Q.jsx)(`input`,{type:`checkbox`,checked:g.includes(e.id),onChange:t=>t.target.checked?_([...g,e.id]):_(g.filter(t=>t!==e.id)),className:`rounded border-slate-700 bg-slate-900 text-cyan-600`}),(0,Q.jsx)(`span`,{className:`text-xs text-slate-300 truncate`,children:e.title})]},e.id))})]}),(0,Q.jsxs)(`div`,{className:`bg-slate-950 p-4 rounded-lg border border-slate-800 h-48 overflow-y-auto`,children:[(0,Q.jsx)(`label`,{className:`block text-xs font-bold text-orange-400 uppercase mb-2 sticky top-0 bg-slate-950 pb-2`,children:`Include Tools`}),(0,Q.jsx)(`div`,{className:`space-y-2`,children:je.map(e=>(0,Q.jsxs)(`label`,{className:`flex items-center gap-2 cursor-pointer hover:bg-slate-900 p-1 rounded`,children:[(0,Q.jsx)(`input`,{type:`checkbox`,checked:v.includes(e.id),onChange:t=>t.target.checked?y([...v,e.id]):y(v.filter(t=>t!==e.id)),className:`rounded border-slate-700 bg-slate-900 text-orange-600`}),(0,Q.jsx)(`span`,{className:`text-xs text-slate-300 truncate`,children:e.title})]},e.id))})]})]}),(0,Q.jsxs)(`button`,{onClick:Pe,disabled:!f,className:`w-full bg-blue-600 hover:bg-blue-500 text-white font-bold py-3 rounded-lg flex items-center justify-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed`,children:[(0,Q.jsx)(F,{size:16}),` Generate Module HTML`]}),b&&(0,Q.jsxs)(`div`,{className:`animate-in fade-in slide-in-from-top-2`,children:[(0,Q.jsxs)(`div`,{className:`flex justify-between items-center mb-2`,children:[(0,Q.jsx)(`span`,{className:`text-xs font-bold text-emerald-400`,children:` Successfully Generated!`}),(0,Q.jsxs)(`button`,{onClick:()=>navigator.clipboard.writeText(b),className:`text-xs bg-emerald-600 hover:bg-emerald-500 text-white px-3 py-1 rounded flex items-center gap-1`,children:[(0,Q.jsx)(P,{size:12}),` Copy Code`]})]}),(0,Q.jsx)(`textarea`,{readOnly:!0,value:b,className:`w-full h-32 bg-black border border-emerald-900/50 rounded-lg p-3 text-[10px] font-mono text-emerald-500/80 focus:outline-none resize-y`})]})]})]}),O===`legacy`&&(0,Q.jsx)(Q.Fragment,{children:c?(0,Q.jsxs)(`div`,{className:`animate-in fade-in slide-in-from-bottom-4`,children:[(0,Q.jsxs)(`div`,{className:`flex items-center justify-between mb-4`,children:[(0,Q.jsx)(`h3`,{className:`text-sm font-bold text-purple-400`,children:`Final Assembled Code (index.html)`}),(0,Q.jsxs)(`div`,{className:`flex gap-2`,children:[(0,Q.jsxs)(`button`,{onClick:()=>{let t=new Blob([o],{type:`text/html`}),n=URL.createObjectURL(t),r=document.createElement(`a`);r.href=n;let i=e[`Course Settings`]?.exportSettings||{},a=e[`Course Settings`]?.courseName||`course`,s=i.filenamePattern||`{courseName}_compiled`;if(s=s.replace(/{courseName}/g,a.replace(/[^a-zA-Z0-9]/g,`_`)),i.includeTimestamp){let e=new Date().toISOString().replace(/[:.]/g,`-`).slice(0,-5);s+=`_${e}`}r.download=`${s}.html`,document.body.appendChild(r),r.click(),document.body.removeChild(r)},className:`text-xs bg-emerald-600 hover:bg-emerald-500 text-white px-3 py-1 rounded flex items-center gap-2`,children:[(0,Q.jsx)(ie,{size:12}),` Download File`]}),(0,Q.jsx)(`button`,{onClick:()=>{l(!1),d(null)},className:`text-xs text-slate-500 hover:text-white px-2 py-1`,children:`Reset`})]})]}),u?.warnings?.length>0&&(0,Q.jsxs)(`div`,{className:`mb-4 p-4 bg-amber-950/40 border border-amber-700 rounded-xl text-left`,children:[(0,Q.jsxs)(`div`,{className:`flex items-center gap-2 text-amber-300 font-bold mb-2`,children:[(0,Q.jsx)(ke,{size:16}),`Compiled with `,u.warnings.length,` warning`,u.warnings.length===1?``:`s`]}),(0,Q.jsx)(`ul`,{className:`list-disc list-inside space-y-1 text-sm text-amber-200/90`,children:u.warnings.map((e,t)=>(0,Q.jsxs)(`li`,{children:[(0,Q.jsx)(`span`,{className:`text-amber-400/80`,children:typeof e==`object`&&e.context?e.context+`: `:``}),typeof e==`object`&&e.message?e.message:e]},t))})]}),(0,Q.jsx)(xf,{label:`Full Website Source`,code:o,height:`h-96`}),(0,Q.jsxs)(`div`,{className:`mt-4 p-4 bg-purple-900/20 border border-purple-700/50 rounded-lg text-sm text-purple-200`,children:[(0,Q.jsx)(`strong`,{children:`Next Step:`}),` Download the file above, or copy the block and paste it into your Google Sites "Embed Code" widget.`]})]}):(0,Q.jsxs)(`div`,{className:`text-center py-6`,children:[(0,Q.jsxs)(`div`,{className:`mb-6 bg-slate-900 rounded-xl border border-slate-700 overflow-hidden text-left`,children:[(0,Q.jsx)(`div`,{className:`p-3 bg-slate-800 border-b border-slate-700 text-xs font-bold text-slate-400 uppercase tracking-wider`,children:`Build Configuration`}),(0,Q.jsxs)(`div`,{className:`divide-y divide-slate-800`,children:[ue.length===0&&(0,Q.jsx)(`div`,{className:`p-4 text-xs text-slate-500 italic text-center`,children:`No modules found. Go to Phase 1.`}),ue.map(e=>{let t=n.includes(e.id)||e.hidden;return(0,Q.jsxs)(`div`,{className:`p-3 flex items-center justify-between hover:bg-slate-800/50 transition-colors`,children:[(0,Q.jsxs)(`div`,{className:`flex items-center gap-3`,children:[(0,Q.jsx)(`div`,{className:`w-2 h-2 rounded-full ${t?`bg-slate-600`:`bg-emerald-500 shadow-[0_0_8px_rgba(16,185,129,0.5)]`}`}),(0,Q.jsx)(`span`,{className:`text-sm ${t?`text-slate-500`:`text-slate-200 font-medium`}`,children:e.title})]}),(0,Q.jsx)(`button`,{onClick:()=>{e.hidden&&i?i(e.id):r(e.id)},className:`relative w-10 h-5 rounded-full transition-colors ${t?`bg-slate-700`:`bg-emerald-600`}`,children:(0,Q.jsx)(`div`,{className:`absolute top-1 left-1 w-3 h-3 bg-white rounded-full transition-transform ${t?`translate-x-0`:`translate-x-5`}`})})]},e.id)})]})]}),je.length>0&&(0,Q.jsxs)(`div`,{className:`mb-6 bg-slate-900 rounded-xl border border-slate-700 overflow-hidden text-left`,children:[(0,Q.jsx)(`div`,{className:`p-3 bg-slate-800 border-b border-slate-700 text-xs font-bold text-orange-500 uppercase tracking-wider`,children:`Global Toolkit (Builder Controls)`}),(0,Q.jsx)(`div`,{className:`divide-y divide-slate-800`,children:je.map((e,t)=>(0,Q.jsxs)(`div`,{className:`p-4 hover:bg-slate-800/50 transition-colors`,children:[(0,Q.jsxs)(`div`,{className:`flex items-center justify-between mb-2`,children:[(0,Q.jsxs)(`div`,{className:`flex items-center gap-3`,children:[(0,Q.jsx)(`div`,{className:`w-2 h-2 rounded-full ${e.enabled?`bg-emerald-500`:`bg-slate-600`}`}),(0,Q.jsxs)(`div`,{children:[(0,Q.jsx)(`div`,{className:`text-sm font-medium ${e.enabled?`text-slate-200`:`text-slate-500`}`,children:e.title}),(0,Q.jsx)(`div`,{className:`text-[10px] text-slate-500 italic`,children:e.description})]})]}),(0,Q.jsx)(`button`,{onClick:()=>Me(t,`enabled`),className:`relative w-10 h-5 rounded-full transition-colors ${e.enabled?`bg-emerald-600`:`bg-slate-700`}`,children:(0,Q.jsx)(`div`,{className:`absolute top-1 left-1 w-3 h-3 bg-white rounded-full transition-transform ${e.enabled?`translate-x-5`:`translate-x-0`}`})})]}),e.enabled&&(0,Q.jsxs)(`div`,{className:`ml-5 mt-2 flex flex-wrap gap-3 text-[10px]`,children:[(0,Q.jsxs)(`label`,{className:`flex items-center gap-2 cursor-pointer`,children:[(0,Q.jsx)(`input`,{type:`checkbox`,checked:!!e.hiddenFromUser,onChange:()=>Me(t,`hiddenFromUser`),className:`w-3 h-3 rounded`}),(0,Q.jsx)(`span`,{className:`text-slate-400`,children:`Hidden from user`})]}),(0,Q.jsxs)(`label`,{className:`flex items-center gap-2 cursor-pointer`,children:[(0,Q.jsx)(`input`,{type:`checkbox`,checked:!!e.userToggleable,onChange:()=>Me(t,`userToggleable`),disabled:!!e.hiddenFromUser,className:`w-3 h-3 rounded disabled:opacity-30`}),(0,Q.jsx)(`span`,{className:`${e.hiddenFromUser?`text-slate-600`:`text-slate-400`}`,children:`User can toggle`})]}),(0,Q.jsxs)(`label`,{className:`flex items-center gap-2 cursor-pointer`,children:[(0,Q.jsx)(`input`,{type:`checkbox`,checked:!!e.includeUi,onChange:()=>Me(t,`includeUi`),className:`w-3 h-3 rounded`}),(0,Q.jsx)(`span`,{className:`text-slate-400`,children:`Include UI`})]})]})]},e.id||t))})]}),u&&(0,Q.jsx)(`div`,{className:`mb-6 rounded-xl border p-4 text-left ${u.errors.length>0?`bg-rose-950/40 border-rose-700`:`bg-amber-950/40 border-amber-700`}`,children:u.errors.length>0?(0,Q.jsxs)(Q.Fragment,{children:[(0,Q.jsxs)(`div`,{className:`flex items-center gap-2 text-rose-300 font-bold mb-2`,children:[(0,Q.jsx)(ke,{size:18}),u.errors.length,` validation error`,u.errors.length===1?``:`s`,`  fix before compiling`]}),(0,Q.jsx)(`ul`,{className:`list-disc list-inside space-y-1 text-sm text-rose-200/90`,children:u.errors.map((e,t)=>(0,Q.jsxs)(`li`,{children:[(0,Q.jsx)(`span`,{className:`text-rose-400/80`,children:typeof e==`object`&&e.context?e.context+`: `:``}),typeof e==`object`&&e.message?e.message:e]},t))})]}):u.warnings.length>0?(0,Q.jsxs)(Q.Fragment,{children:[(0,Q.jsxs)(`div`,{className:`flex items-center gap-2 text-amber-300 font-bold mb-2`,children:[(0,Q.jsx)(ke,{size:18}),u.warnings.length,` warning`,u.warnings.length===1?``:`s`]}),(0,Q.jsx)(`ul`,{className:`list-disc list-inside space-y-1 text-sm text-amber-200/90`,children:u.warnings.map((e,t)=>(0,Q.jsxs)(`li`,{children:[(0,Q.jsx)(`span`,{className:`text-amber-400/80`,children:typeof e==`object`&&e.context?e.context+`: `:``}),typeof e==`object`&&e.message?e.message:e]},t))})]}):null}),(0,Q.jsxs)(`button`,{onClick:()=>{let t=Af(e);if(!t.isValid){d(t);return}d(t.warnings.length>0?t:null),Fe()},disabled:ue.length===0,className:`bg-purple-600 hover:bg-purple-500 text-white font-bold py-4 px-8 rounded-xl shadow-lg transition-transform hover:scale-105 flex items-center gap-3 mx-auto disabled:opacity-50 disabled:cursor-not-allowed`,children:[(0,Q.jsx)(he,{size:24}),` Compile Selected Modules`]})]})})]})})},Bf=({projectData:e,setProjectData:t,applyVisualDefaults:n})=>{let r=e[`Course Settings`]||{courseName:`Mental Fitness`,courseCode:``,instructor:``,academicYear:``,accentColor:`sky`,backgroundColor:`slate-900`,fontFamily:`inter`,customCSS:``,compilationDefaults:{includeMaterials:!0,includeAssessments:!0,includeToolkit:!0,enableProgressTracking:!0},exportSettings:{filenamePattern:`{courseName}_compiled`,includeTimestamp:!0}},i=e[`Current Course`]?.modules||[],a=(i.find(e=>e.id===`item-assessments`||e.title===`Assessments`)?.assessments||[]).filter(e=>!e.hidden),o=e[`Current Course`]?.materials||[],s=e=>{t(t=>({...t,"Course Settings":{...t[`Course Settings`],...e}}))},c=e=>{s({compilationDefaults:{...r.compilationDefaults||{},...e}})},l=()=>{let t=JSON.stringify(e,null,2),n=new Blob([t],{type:`application/json`}),i=URL.createObjectURL(n),a=document.createElement(`a`);a.href=i,a.download=`${r.courseName.replace(/\s+/g,`_`)}_backup_${new Date().toISOString().split(`T`)[0]}.json`,a.click(),URL.revokeObjectURL(i)},u=e=>{let n=e.target.files?.[0];if(!n)return;let r=new FileReader;r.onload=e=>{try{let n=JSON.parse(e.target.result);n&&n[`Current Course`]?(t(n),alert(` Project imported successfully!`)):alert(` Invalid project file`)}catch(e){alert(` Failed to import: `+e.message)}},r.readAsText(n)},d=()=>{window.confirm(`\xA0 This will delete all your course data! Are you sure?`)&&(localStorage.removeItem(`course_factory_v2_data`),window.location.reload())},f=[{value:`sky`,label:`Sky Blue`,class:`bg-sky-500`},{value:`rose`,label:`Rose`,class:`bg-rose-500`},{value:`emerald`,label:`Emerald`,class:`bg-emerald-500`},{value:`amber`,label:`Amber`,class:`bg-amber-500`},{value:`purple`,label:`Purple`,class:`bg-purple-500`},{value:`indigo`,label:`Indigo`,class:`bg-indigo-500`},{value:`pink`,label:`Pink`,class:`bg-pink-500`},{value:`teal`,label:`Teal`,class:`bg-teal-500`}],p=[{value:`white`,label:`White`,swatch:`bg-white border-slate-300`,text:`text-slate-900`},{value:`slate-900`,label:`Slate 900`,swatch:`bg-slate-900 border-slate-700`,text:`text-white`},{value:`slate-700`,label:`Slate 700`,swatch:`bg-slate-700 border-slate-600`,text:`text-white`},{value:`slate-600`,label:`Slate 600`,swatch:`bg-slate-600 border-slate-500`,text:`text-white`},{value:`slate-500`,label:`Slate 500`,swatch:`bg-slate-500 border-slate-400`,text:`text-white`},{value:`gray-900`,label:`Gray 900`,swatch:`bg-gray-900 border-gray-700`,text:`text-white`},{value:`gray-700`,label:`Gray 700`,swatch:`bg-gray-700 border-gray-600`,text:`text-white`},{value:`gray-600`,label:`Gray 600`,swatch:`bg-gray-600 border-gray-500`,text:`text-white`}],m=[{value:`white`,label:`White`,swatch:`bg-white border-slate-300`,text:`text-slate-900`},{value:`slate-900`,label:`Slate 900`,swatch:`bg-slate-900 border-slate-700`,text:`text-white`},{value:`slate-800`,label:`Slate 800`,swatch:`bg-slate-800 border-slate-700`,text:`text-white`},{value:`slate-700`,label:`Slate 700`,swatch:`bg-slate-700 border-slate-600`,text:`text-white`},{value:`slate-600`,label:`Slate 600`,swatch:`bg-slate-600 border-slate-500`,text:`text-white`},{value:`slate-500`,label:`Slate 500`,swatch:`bg-slate-500 border-slate-400`,text:`text-white`},{value:`slate-400`,label:`Slate 400`,swatch:`bg-slate-400 border-slate-300`,text:`text-white`},{value:`slate-300`,label:`Slate 300`,swatch:`bg-slate-300 border-slate-200`,text:`text-slate-900`},{value:`slate-200`,label:`Slate 200`,swatch:`bg-slate-200 border-slate-100`,text:`text-slate-900`},{value:`slate-100`,label:`Slate 100`,swatch:`bg-slate-100 border-slate-50`,text:`text-slate-900`},{value:`gray-900`,label:`Gray 900`,swatch:`bg-gray-900 border-gray-700`,text:`text-white`},{value:`gray-800`,label:`Gray 800`,swatch:`bg-gray-800 border-gray-700`,text:`text-white`},{value:`gray-700`,label:`Gray 700`,swatch:`bg-gray-700 border-gray-600`,text:`text-white`},{value:`gray-600`,label:`Gray 600`,swatch:`bg-gray-600 border-gray-500`,text:`text-white`},{value:`gray-500`,label:`Gray 500`,swatch:`bg-gray-500 border-gray-400`,text:`text-white`},{value:`gray-400`,label:`Gray 400`,swatch:`bg-gray-400 border-gray-300`,text:`text-white`},{value:`gray-300`,label:`Gray 300`,swatch:`bg-gray-300 border-gray-200`,text:`text-slate-900`},{value:`black`,label:`Black`,swatch:`bg-black border-slate-700`,text:`text-white`}];return(0,Q.jsx)(`div`,{className:`space-y-6 animate-in fade-in duration-500`,children:(0,Q.jsxs)(`div`,{className:`bg-slate-800 p-6 rounded-lg border border-slate-700`,children:[(0,Q.jsxs)(`h2`,{className:`text-xl font-bold text-white mb-6 flex items-center gap-2`,children:[(0,Q.jsx)(Ce,{className:`text-sky-400`}),` Phase 5: Settings & Preferences`]}),(0,Q.jsxs)(`div`,{className:`mb-8 bg-slate-900/50 p-6 rounded-xl border border-sky-500/30`,children:[(0,Q.jsxs)(`h3`,{className:`text-lg font-bold text-white mb-4 flex items-center gap-2`,children:[(0,Q.jsx)(De,{size:20,className:`text-sky-400`}),` Course Configuration`]}),(0,Q.jsxs)(`div`,{className:`space-y-4`,children:[(0,Q.jsxs)(`div`,{children:[(0,Q.jsx)(`label`,{className:`block text-xs font-bold text-slate-400 uppercase mb-2`,children:`Course Name`}),(0,Q.jsx)(`input`,{type:`text`,value:r.courseName||``,onChange:e=>s({courseName:e.target.value}),className:`w-full bg-slate-950 border border-slate-700 rounded-lg p-3 text-white text-sm`,placeholder:`Mental Fitness`}),(0,Q.jsxs)(`p`,{className:`text-[10px] text-slate-500 mt-1 italic`,children:[`This appears in the sidebar as "IN: `,(r.courseName||`COURSE NAME`).toUpperCase(),`"`]})]}),(0,Q.jsxs)(`div`,{className:`grid grid-cols-2 gap-3`,children:[(0,Q.jsxs)(`div`,{children:[(0,Q.jsx)(`label`,{className:`block text-xs font-bold text-slate-400 uppercase mb-2`,children:`Course Code`}),(0,Q.jsx)(`input`,{type:`text`,value:r.courseCode||``,onChange:e=>s({courseCode:e.target.value}),className:`w-full bg-slate-950 border border-slate-700 rounded-lg p-3 text-white text-sm`,placeholder:`PSY-101`})]}),(0,Q.jsxs)(`div`,{children:[(0,Q.jsx)(`label`,{className:`block text-xs font-bold text-slate-400 uppercase mb-2`,children:`Academic Year`}),(0,Q.jsx)(`input`,{type:`text`,value:r.academicYear||``,onChange:e=>s({academicYear:e.target.value}),className:`w-full bg-slate-950 border border-slate-700 rounded-lg p-3 text-white text-sm`,placeholder:`2025-2026`})]})]}),(0,Q.jsxs)(`div`,{children:[(0,Q.jsx)(`label`,{className:`block text-xs font-bold text-slate-400 uppercase mb-2`,children:`Instructor Name`}),(0,Q.jsx)(`input`,{type:`text`,value:r.instructor||``,onChange:e=>s({instructor:e.target.value}),className:`w-full bg-slate-950 border border-slate-700 rounded-lg p-3 text-white text-sm`,placeholder:`Dr. Smith`})]})]})]}),(0,Q.jsxs)(`div`,{className:`mb-8 bg-slate-900/50 p-6 rounded-xl border border-purple-500/30`,children:[(0,Q.jsxs)(`h3`,{className:`text-lg font-bold text-white mb-4 flex items-center gap-2`,children:[(0,Q.jsx)(Te,{size:20,className:`text-purple-400`}),` Visual Settings`]}),(0,Q.jsxs)(`div`,{className:`space-y-4`,children:[(0,Q.jsxs)(`div`,{children:[(0,Q.jsx)(`label`,{className:`block text-xs font-bold text-slate-400 uppercase mb-2`,children:`Primary Accent Color`}),(0,Q.jsx)(`div`,{className:`grid grid-cols-4 gap-2`,children:f.map(e=>(0,Q.jsxs)(`button`,{onClick:()=>s({accentColor:e.value}),className:`flex items-center gap-2 p-3 rounded-lg border-2 transition-all ${r.accentColor===e.value?`border-white bg-slate-700`:`border-slate-700 bg-slate-900 hover:bg-slate-800`}`,children:[(0,Q.jsx)(`div`,{className:`w-6 h-6 rounded ${e.class}`}),(0,Q.jsx)(`span`,{className:`text-xs text-white`,children:e.label})]},e.value))})]}),(0,Q.jsxs)(`div`,{children:[(0,Q.jsx)(`label`,{className:`block text-xs font-bold text-slate-400 uppercase mb-2`,children:`Background Color`}),(0,Q.jsx)(`p`,{className:`text-[10px] text-slate-500 mb-2 italic`,children:`Applies to hub pages and compiled sites`}),(0,Q.jsxs)(`div`,{className:`space-y-3`,children:[(0,Q.jsxs)(`div`,{children:[(0,Q.jsx)(`p`,{className:`text-[10px] text-slate-500 mb-2 font-bold`,children:`Dark Options`}),(0,Q.jsx)(`div`,{className:`grid grid-cols-3 gap-2`,children:[{value:`slate-900`,label:`Dark Slate`,class:`bg-slate-900 border-slate-700`},{value:`slate-950`,label:`Darker Slate`,class:`bg-slate-950 border-slate-800`},{value:`zinc-900`,label:`Dark Zinc`,class:`bg-zinc-900 border-zinc-700`},{value:`neutral-900`,label:`Dark Neutral`,class:`bg-neutral-900 border-neutral-700`},{value:`stone-900`,label:`Dark Stone`,class:`bg-stone-900 border-stone-700`},{value:`gray-900`,label:`Dark Gray`,class:`bg-gray-900 border-gray-700`}].map(e=>(0,Q.jsxs)(`button`,{onClick:()=>s({backgroundColor:e.value}),className:`flex items-center gap-2 p-3 rounded-lg border-2 transition-all ${(r.backgroundColor||`slate-900`)===e.value?`border-white bg-slate-700`:`border-slate-700 bg-slate-900 hover:bg-slate-800`}`,children:[(0,Q.jsx)(`div`,{className:`w-6 h-6 rounded border ${e.class}`}),(0,Q.jsx)(`span`,{className:`text-xs text-white`,children:e.label})]},e.value))})]}),(0,Q.jsxs)(`div`,{children:[(0,Q.jsx)(`p`,{className:`text-[10px] text-slate-500 mb-2 font-bold`,children:`Light Options`}),(0,Q.jsx)(`div`,{className:`grid grid-cols-3 gap-2`,children:[{value:`slate-50`,label:`Light Slate`,class:`bg-slate-50 border-slate-300`,textClass:`text-slate-900`},{value:`zinc-50`,label:`Light Zinc`,class:`bg-zinc-50 border-zinc-300`,textClass:`text-zinc-900`},{value:`neutral-50`,label:`Light Neutral`,class:`bg-neutral-50 border-neutral-300`,textClass:`text-neutral-900`},{value:`stone-50`,label:`Light Stone`,class:`bg-stone-50 border-stone-300`,textClass:`text-stone-900`},{value:`gray-50`,label:`Light Gray`,class:`bg-gray-50 border-gray-300`,textClass:`text-gray-900`},{value:`white`,label:`White`,class:`bg-white border-gray-200`,textClass:`text-gray-900`}].map(e=>(0,Q.jsxs)(`button`,{onClick:()=>s({backgroundColor:e.value}),className:`flex items-center gap-2 p-3 rounded-lg border-2 transition-all ${(r.backgroundColor||`slate-900`)===e.value?`border-white bg-slate-700`:`border-slate-700 bg-slate-900 hover:bg-slate-800`}`,children:[(0,Q.jsx)(`div`,{className:`w-6 h-6 rounded border ${e.class}`}),(0,Q.jsx)(`span`,{className:`text-xs text-white`,children:e.label})]},e.value))})]})]})]}),(0,Q.jsxs)(`div`,{children:[(0,Q.jsx)(`label`,{className:`block text-xs font-bold text-slate-400 uppercase mb-2`,children:`Heading Text Color`}),(0,Q.jsx)(`p`,{className:`text-[10px] text-slate-500 mb-2 italic`,children:`Applies to Materials & Assessments titles`}),(0,Q.jsx)(`div`,{className:`grid grid-cols-3 gap-2`,children:p.map(e=>(0,Q.jsxs)(`button`,{onClick:()=>s({headingTextColor:e.value}),className:`flex items-center gap-2 p-3 rounded-lg border-2 transition-all ${(r.headingTextColor||`white`)===e.value?`border-white bg-slate-700`:`border-slate-700 bg-slate-900 hover:bg-slate-800`}`,children:[(0,Q.jsx)(`div`,{className:`w-6 h-6 rounded border ${e.swatch}`}),(0,Q.jsx)(`span`,{className:`text-xs ${e.text}`,children:e.label})]},e.value))})]}),(0,Q.jsxs)(`div`,{children:[(0,Q.jsx)(`label`,{className:`block text-xs font-bold text-slate-400 uppercase mb-2`,children:`Secondary Text Color`}),(0,Q.jsx)(`p`,{className:`text-[10px] text-slate-500 mb-2 italic`,children:`Applies to subtext, descriptions, and button text`}),(0,Q.jsx)(`div`,{className:`grid grid-cols-3 gap-2`,children:p.map(e=>(0,Q.jsxs)(`button`,{onClick:()=>s({secondaryTextColor:e.value}),className:`flex items-center gap-2 p-3 rounded-lg border-2 transition-all ${(r.secondaryTextColor||`slate-400`)===e.value?`border-white bg-slate-700`:`border-slate-700 bg-slate-900 hover:bg-slate-800`}`,children:[(0,Q.jsx)(`div`,{className:`w-6 h-6 rounded border ${e.swatch}`}),(0,Q.jsx)(`span`,{className:`text-xs ${e.text}`,children:e.label})]},e.value))})]}),(0,Q.jsxs)(`div`,{children:[(0,Q.jsx)(`label`,{className:`block text-xs font-bold text-slate-400 uppercase mb-2`,children:`Assessment Text Color`}),(0,Q.jsx)(`p`,{className:`text-[10px] text-slate-500 mb-2 italic`,children:`Text color for questions, answers, and input fields in assessments`}),(0,Q.jsx)(`div`,{className:`grid grid-cols-3 gap-2`,children:m.map(e=>(0,Q.jsxs)(`button`,{onClick:()=>s({assessmentTextColor:e.value}),className:`flex items-center gap-2 p-3 rounded-lg border-2 transition-all ${(r.assessmentTextColor||`white`)===e.value?`border-white bg-slate-700`:`border-slate-700 bg-slate-900 hover:bg-slate-800`}`,children:[(0,Q.jsx)(`div`,{className:`w-6 h-6 rounded border ${e.swatch}`}),(0,Q.jsx)(`span`,{className:`text-xs ${e.text}`,children:e.label})]},e.value))})]}),(0,Q.jsxs)(`div`,{children:[(0,Q.jsx)(`label`,{className:`block text-xs font-bold text-slate-400 uppercase mb-2`,children:`Assessment Box Color`}),(0,Q.jsx)(`p`,{className:`text-[10px] text-slate-500 mb-2 italic`,children:`Default background for assessment cards and input fields`}),(0,Q.jsx)(`div`,{className:`grid grid-cols-3 gap-2`,children:m.map(e=>(0,Q.jsxs)(`button`,{onClick:()=>s({assessmentBoxColor:e.value}),className:`flex items-center gap-2 p-3 rounded-lg border-2 transition-all ${(r.assessmentBoxColor||`slate-900`)===e.value?`border-white bg-slate-700`:`border-slate-700 bg-slate-900 hover:bg-slate-800`}`,children:[(0,Q.jsx)(`div`,{className:`w-6 h-6 rounded border ${e.swatch}`}),(0,Q.jsx)(`span`,{className:`text-xs ${e.text}`,children:e.label})]},`box-`+e.value))})]}),(0,Q.jsxs)(`div`,{children:[(0,Q.jsx)(`label`,{className:`block text-xs font-bold text-slate-400 uppercase mb-2`,children:`Default Material Card Theme`}),(0,Q.jsx)(`p`,{className:`text-[10px] text-slate-500 mb-2 italic`,children:`Default card look for materials; overridable per material in Phase 1`}),(0,Q.jsx)(`div`,{className:`grid grid-cols-2 sm:grid-cols-3 gap-2`,children:[{value:`dark`,label:`Dark`},{value:`light`,label:`Light`},{value:`muted`,label:`Muted`},{value:`high-contrast-light`,label:`High contrast (light)`},{value:`high-contrast-dark`,label:`High contrast (dark)`}].map(e=>(0,Q.jsx)(`button`,{onClick:()=>s({defaultMaterialTheme:e.value}),className:`flex items-center justify-center p-3 rounded-lg border-2 transition-all ${(r.defaultMaterialTheme||`dark`)===e.value?`border-white bg-slate-700`:`border-slate-700 bg-slate-900 hover:bg-slate-800`}`,children:(0,Q.jsx)(`span`,{className:`text-xs text-white`,children:e.label})},e.value))})]}),(0,Q.jsxs)(`div`,{children:[(0,Q.jsx)(`label`,{className:`block text-xs font-bold text-slate-400 uppercase mb-2`,children:`Materials & Assessments Button Color`}),(0,Q.jsx)(`p`,{className:`text-[10px] text-slate-500 mb-2 italic`,children:`Uniform button background for Materials & Assessments`}),(0,Q.jsx)(`div`,{className:`grid grid-cols-3 gap-2`,children:[{value:`sky-600`,label:`Sky`,swatch:`bg-sky-600 border-sky-500`,text:`text-white`},{value:`emerald-600`,label:`Emerald`,swatch:`bg-emerald-600 border-emerald-500`,text:`text-white`},{value:`rose-600`,label:`Rose`,swatch:`bg-rose-600 border-rose-500`,text:`text-white`},{value:`amber-600`,label:`Amber`,swatch:`bg-amber-600 border-amber-500`,text:`text-white`},{value:`purple-600`,label:`Purple`,swatch:`bg-purple-600 border-purple-500`,text:`text-white`},{value:`slate-800`,label:`Slate 800`,swatch:`bg-slate-800 border-slate-700`,text:`text-white`},{value:`gray-800`,label:`Gray 800`,swatch:`bg-gray-800 border-gray-700`,text:`text-white`},{value:`black`,label:`Black`,swatch:`bg-black border-slate-700`,text:`text-white`}].map(e=>(0,Q.jsxs)(`button`,{onClick:()=>s({buttonColor:e.value}),className:`flex items-center gap-2 p-3 rounded-lg border-2 transition-all ${(r.buttonColor||`sky-600`)===e.value?`border-white bg-slate-700`:`border-slate-700 bg-slate-900 hover:bg-slate-800`}`,children:[(0,Q.jsx)(`div`,{className:`w-6 h-6 rounded border ${e.swatch}`}),(0,Q.jsx)(`span`,{className:`text-xs ${e.text}`,children:e.label})]},e.value))})]}),(0,Q.jsxs)(`div`,{children:[(0,Q.jsx)(`label`,{className:`block text-xs font-bold text-slate-400 uppercase mb-2`,children:`Materials & Assessments Container Color`}),(0,Q.jsx)(`p`,{className:`text-[10px] text-slate-500 mb-2 italic`,children:`Applies to material cards and assessment containers`}),(0,Q.jsx)(`div`,{className:`grid grid-cols-3 gap-2`,children:[{value:`slate-900/80`,label:`Slate 900`,swatch:`bg-slate-900 border-slate-700`,text:`text-white`},{value:`slate-800/80`,label:`Slate 800`,swatch:`bg-slate-800 border-slate-700`,text:`text-white`},{value:`slate-700/80`,label:`Slate 700`,swatch:`bg-slate-700 border-slate-600`,text:`text-white`},{value:`gray-800/80`,label:`Gray 800`,swatch:`bg-gray-800 border-gray-700`,text:`text-white`},{value:`gray-700/80`,label:`Gray 700`,swatch:`bg-gray-700 border-gray-600`,text:`text-white`},{value:`white/90`,label:`White`,swatch:`bg-white border-slate-300`,text:`text-slate-900`}].map(e=>(0,Q.jsxs)(`button`,{onClick:()=>s({containerColor:e.value}),className:`flex items-center gap-2 p-3 rounded-lg border-2 transition-all ${(r.containerColor||`slate-900/80`)===e.value?`border-white bg-slate-700`:`border-slate-700 bg-slate-900 hover:bg-slate-800`}`,children:[(0,Q.jsx)(`div`,{className:`w-6 h-6 rounded border ${e.swatch}`}),(0,Q.jsx)(`span`,{className:`text-xs ${e.text}`,children:e.label})]},e.value))})]}),(0,Q.jsxs)(`div`,{className:`pt-4 border-t border-slate-800`,children:[(0,Q.jsx)(`p`,{className:`text-[10px] text-slate-500 mb-2 italic`,children:`Clear every per-material theme and assessment color override so the Phase 5 palette becomes the source of truth again.`}),(0,Q.jsxs)(`button`,{onClick:n,className:`flex items-center gap-2 bg-slate-800 hover:bg-slate-700 border border-slate-700 text-white font-bold py-3 px-4 rounded-md text-xs w-full justify-center transition-colors`,children:[(0,Q.jsx)(ve,{size:14}),` Apply Visual Defaults (materials & assessments)`]})]}),(0,Q.jsxs)(`div`,{children:[(0,Q.jsx)(`label`,{className:`block text-xs font-bold text-slate-400 uppercase mb-2`,children:`Font Family`}),(0,Q.jsx)(`p`,{className:`text-[10px] text-slate-500 mb-2 italic`,children:`Primary font for hub pages and compiled sites`}),(0,Q.jsxs)(`select`,{value:r.fontFamily||`inter`,onChange:e=>s({fontFamily:e.target.value}),className:`w-full bg-slate-950 border border-slate-700 rounded-lg p-3 text-white text-sm`,children:[(0,Q.jsx)(`option`,{value:`inter`,children:`Inter (Default)`}),(0,Q.jsx)(`option`,{value:`roboto`,children:`Roboto`}),(0,Q.jsx)(`option`,{value:`opensans`,children:`Open Sans`}),(0,Q.jsx)(`option`,{value:`lato`,children:`Lato`}),(0,Q.jsx)(`option`,{value:`montserrat`,children:`Montserrat`}),(0,Q.jsx)(`option`,{value:`poppins`,children:`Poppins`}),(0,Q.jsx)(`option`,{value:`raleway`,children:`Raleway`}),(0,Q.jsx)(`option`,{value:`nunito`,children:`Nunito`})]})]}),(0,Q.jsxs)(`div`,{children:[(0,Q.jsx)(`label`,{className:`block text-xs font-bold text-slate-400 uppercase mb-2`,children:`Custom CSS (Advanced)`}),(0,Q.jsx)(`p`,{className:`text-[10px] text-slate-500 mb-2 italic`,children:`Applies to all compiled outputs (legacy, beta single-page, and beta multi-file hub)`}),(0,Q.jsx)(`textarea`,{value:r.customCSS||``,onChange:e=>s({customCSS:e.target.value}),className:`w-full bg-slate-950 border border-slate-700 rounded-lg p-3 text-white text-xs font-mono h-32 resize-none`,placeholder:`/* Custom styles will be injected into compiled site */`})]})]})]}),(0,Q.jsxs)(`div`,{className:`mb-8 bg-slate-900/50 p-6 rounded-xl border border-emerald-500/30`,children:[(0,Q.jsxs)(`h3`,{className:`text-lg font-bold text-white mb-4 flex items-center gap-2`,children:[(0,Q.jsx)(re,{size:20,className:`text-emerald-400`}),` Data Management`]}),(0,Q.jsxs)(`div`,{className:`space-y-3`,children:[(0,Q.jsxs)(`div`,{className:`flex gap-3`,children:[(0,Q.jsxs)(`button`,{onClick:l,className:`flex-1 bg-emerald-600 hover:bg-emerald-500 text-white font-bold py-3 rounded-lg flex items-center justify-center gap-2 transition-all`,children:[(0,Q.jsx)(ie,{size:16}),` Export Project`]}),(0,Q.jsxs)(`label`,{className:`flex-1 bg-sky-600 hover:bg-sky-500 text-white font-bold py-3 rounded-lg flex items-center justify-center gap-2 transition-all cursor-pointer`,children:[(0,Q.jsx)(Ae,{size:16}),` Import Project`,(0,Q.jsx)(`input`,{type:`file`,accept:`.json`,onChange:u,className:`hidden`})]})]}),(0,Q.jsxs)(`button`,{onClick:d,className:`w-full bg-rose-600 hover:bg-rose-500 text-white font-bold py-3 rounded-lg flex items-center justify-center gap-2 transition-all`,children:[(0,Q.jsx)(Oe,{size:16}),` Reset All Data`]})]})]}),(0,Q.jsxs)(`div`,{className:`mb-8 bg-slate-900/50 p-6 rounded-xl border border-amber-500/30`,children:[(0,Q.jsxs)(`h3`,{className:`text-lg font-bold text-white mb-4 flex items-center gap-2`,children:[(0,Q.jsx)(he,{size:20,className:`text-amber-400`}),` Compilation Defaults`]}),(0,Q.jsxs)(`div`,{className:`space-y-3`,children:[(0,Q.jsxs)(`label`,{className:`flex items-center gap-3 p-3 bg-slate-950 rounded-lg cursor-pointer hover:bg-slate-900 transition-colors`,children:[(0,Q.jsx)(`input`,{type:`checkbox`,checked:r.compilationDefaults?.includeMaterials||!1,onChange:e=>c({includeMaterials:e.target.checked}),className:`w-5 h-5 rounded border-slate-700 bg-slate-900 text-sky-600`}),(0,Q.jsxs)(`div`,{children:[(0,Q.jsx)(`div`,{className:`text-sm font-bold text-white`,children:`Auto-include Course Materials`}),(0,Q.jsx)(`div`,{className:`text-xs text-slate-500`,children:`Automatically include materials in full site compile`})]})]}),(0,Q.jsxs)(`label`,{className:`flex items-center gap-3 p-3 bg-slate-950 rounded-lg cursor-pointer hover:bg-slate-900 transition-colors`,children:[(0,Q.jsx)(`input`,{type:`checkbox`,checked:r.compilationDefaults?.includeAssessments||!1,onChange:e=>c({includeAssessments:e.target.checked}),className:`w-5 h-5 rounded border-slate-700 bg-slate-900 text-sky-600`}),(0,Q.jsxs)(`div`,{children:[(0,Q.jsx)(`div`,{className:`text-sm font-bold text-white`,children:`Auto-include Assessments`}),(0,Q.jsx)(`div`,{className:`text-xs text-slate-500`,children:`Automatically include assessments module in full site compile`})]})]}),(0,Q.jsxs)(`label`,{className:`flex items-center gap-3 p-3 bg-slate-950 rounded-lg cursor-pointer hover:bg-slate-900 transition-colors`,children:[(0,Q.jsx)(`input`,{type:`checkbox`,checked:r.compilationDefaults?.includeToolkit||!1,onChange:e=>c({includeToolkit:e.target.checked}),className:`w-5 h-5 rounded border-slate-700 bg-slate-900 text-sky-600`}),(0,Q.jsxs)(`div`,{children:[(0,Q.jsx)(`div`,{className:`text-sm font-bold text-white`,children:`Auto-include Global Toolkit`}),(0,Q.jsx)(`div`,{className:`text-xs text-slate-500`,children:`Automatically include enabled toolkit items`})]})]}),(0,Q.jsxs)(`label`,{className:`flex items-center gap-3 p-3 bg-slate-950 rounded-lg cursor-pointer hover:bg-slate-900 transition-colors`,children:[(0,Q.jsx)(`input`,{type:`checkbox`,checked:r.compilationDefaults?.enableProgressTracking||!1,onChange:e=>c({enableProgressTracking:e.target.checked}),className:`w-5 h-5 rounded border-slate-700 bg-slate-900 text-sky-600`}),(0,Q.jsxs)(`div`,{children:[(0,Q.jsx)(`div`,{className:`text-sm font-bold text-white`,children:`Enable Progress Tracking`}),(0,Q.jsx)(`div`,{className:`text-xs text-slate-500`,children:`Track student progress in localStorage`})]})]})]})]}),(0,Q.jsxs)(`div`,{className:`mb-8 bg-slate-900/50 p-6 rounded-xl border border-slate-700`,children:[(0,Q.jsxs)(`h3`,{className:`text-lg font-bold text-white mb-4 flex items-center gap-2`,children:[(0,Q.jsx)(De,{size:20,className:`text-slate-400`}),` Developer Tools`]}),(0,Q.jsxs)(`div`,{className:`space-y-4`,children:[(0,Q.jsxs)(`div`,{className:`bg-slate-950 p-4 rounded-lg border border-slate-800`,children:[(0,Q.jsxs)(`div`,{className:`flex justify-between items-center mb-2`,children:[(0,Q.jsx)(`span`,{className:`text-xs font-bold text-slate-400 uppercase`,children:`Storage Usage`}),(0,Q.jsx)(`span`,{className:`text-sm font-mono text-white`,children:(()=>{try{let e=localStorage.getItem(`course_factory_v2_data`);if(!e)return`0 KB`;let t=new Blob([e]).size;return t<1024?t+` B`:t<1024*1024?(t/1024).toFixed(2)+` KB`:(t/(1024*1024)).toFixed(2)+` MB`}catch{return`Unknown`}})()})]}),(0,Q.jsxs)(`div`,{className:`flex justify-between items-center mb-2`,children:[(0,Q.jsx)(`span`,{className:`text-xs font-bold text-slate-400 uppercase`,children:`Total Modules`}),(0,Q.jsx)(`span`,{className:`text-sm font-mono text-white`,children:i.length})]}),(0,Q.jsxs)(`div`,{className:`flex justify-between items-center mb-2`,children:[(0,Q.jsx)(`span`,{className:`text-xs font-bold text-slate-400 uppercase`,children:`Total Assessments`}),(0,Q.jsx)(`span`,{className:`text-sm font-mono text-white`,children:a.length})]}),(0,Q.jsxs)(`div`,{className:`flex justify-between items-center`,children:[(0,Q.jsx)(`span`,{className:`text-xs font-bold text-slate-400 uppercase`,children:`Total Materials`}),(0,Q.jsx)(`span`,{className:`text-sm font-mono text-white`,children:o.length})]})]}),(0,Q.jsxs)(`button`,{onClick:()=>{let t=JSON.stringify(e,null,2),n=new Blob([t],{type:`application/json`}),r=URL.createObjectURL(n);window.open(r,`_blank`),URL.revokeObjectURL(r)},className:`w-full bg-slate-700 hover:bg-slate-600 text-white font-bold py-3 rounded-lg flex items-center justify-center gap-2 transition-all`,children:[(0,Q.jsx)(oe,{size:16}),` View Raw Project Data`]}),(0,Q.jsxs)(`button`,{onClick:()=>{if(window.confirm(`Clear localStorage cache? This will not delete your project data.`)){let e=localStorage.getItem(`course_factory_v2_data`);localStorage.clear(),e&&localStorage.setItem(`course_factory_v2_data`,e),alert(` Cache cleared`)}},className:`w-full bg-slate-700 hover:bg-slate-600 text-white font-bold py-3 rounded-lg flex items-center justify-center gap-2 transition-all`,children:[(0,Q.jsx)(Oe,{size:16}),` Clear Cache`]}),(0,Q.jsxs)(`button`,{onClick:async()=>{if(window.confirm(` Force Refresh?

This will:
 Clear browser cache for this site
 Clear any service workers
 Reload with fresh code

Your project data will be preserved.`))try{if(`caches`in window){let e=await caches.keys();await Promise.all(e.map(e=>caches.delete(e)))}if(`serviceWorker`in navigator){let e=await navigator.serviceWorker.getRegistrations();await Promise.all(e.map(e=>e.unregister()))}window.location.reload(!0)}catch{window.location.reload(!0)}},className:`w-full bg-amber-600 hover:bg-amber-500 text-white font-bold py-3 rounded-lg flex items-center justify-center gap-2 transition-all`,children:[(0,Q.jsx)(ve,{size:16}),` Force Refresh (Get Latest Code)`]}),(0,Q.jsxs)(`div`,{className:`border-t border-rose-900/50 pt-4 mt-4`,children:[(0,Q.jsxs)(`p`,{className:`text-[10px] text-rose-400 uppercase font-bold mb-2 flex items-center gap-1`,children:[(0,Q.jsx)(ke,{size:12}),` Danger Zone`]}),(0,Q.jsxs)(`button`,{onClick:()=>{if(window.confirm(`\xA0 FULL RESET WARNING!

This will permanently delete:
 All your materials (but keep Materials module)
 All your assessments (but keep Assessments module)
 All other custom modules
 All toolkit items

The Course Materials and Assessments containers will remain empty.

Continue?`))if(window.prompt(`Type RESET to confirm full data wipe:`)===`RESET`){let e={"Current Course":{name:`New Course`,modules:[{id:`item-1768749223001`,title:`Course Materials`,type:`standalone`,code:{id:`view-materials`},materials:[],html:`<div id="view-materials" class="w-full h-full custom-scroll p-8 md:p-12">
                                <div class="max-w-5xl mx-auto space-y-8">
                                  <div class="mb-12">
                                    <h2 class="text-3xl font-black text-white italic uppercase tracking-tighter">Course <span class="text-sky-500">Materials</span></h2>
                                    <p class="text-xs text-slate-400 font-mono uppercase tracking-widest mt-2">Access lectures, presentations, and briefing documents.</p>
                                  </div>
                                  <div id="pdf-viewer-container" class="hidden mb-12 bg-black rounded-xl border border-slate-700 overflow-hidden shadow-2xl">
                                    <div class="flex justify-between items-center p-3 bg-slate-800 border-b border-slate-700">
                                      <span id="viewer-title" class="text-xs font-bold text-white uppercase tracking-widest px-2">Document Viewer</span>
                                      <button onclick="closeViewer()" class="text-xs text-rose-400 hover:text-white font-bold uppercase tracking-widest px-2">Close X</button>
                                    </div>
                                    <iframe id="pdf-frame" src="" width="100%" height="600" style="border:none;"></iframe>
                                  </div>
                                  <div class="grid grid-cols-1 gap-4" id="materials-container">
                                    <p class="text-center text-slate-500 italic py-8">No materials yet. Add materials in the builder.</p>
                                  </div>
                                </div>
                              </div>`,css:``,script:`function renderMaterials() {
                                const container = document.getElementById('materials-container');
                                if (!container) return;
                                if (window.courseMaterials && window.courseMaterials.length > 0) {
                                  container.innerHTML = window.courseMaterials.map(mat => \`<div class="material-card">\${mat.title}</div>\`).join('');
                                }
                              }
                              if (document.readyState === 'loading') {
                                document.addEventListener('DOMContentLoaded', renderMaterials);
                              } else {
                                renderMaterials();
                              }`},{id:`item-assessments`,title:`Assessments`,type:`standalone`,assessments:[],html:`<div id="view-assessments" class="w-full h-full custom-scroll p-8 md:p-12">
                                <div class="max-w-5xl mx-auto space-y-8">
                                  <div class="mb-12">
                                    <h2 class="text-3xl font-black text-white italic uppercase tracking-tighter">Assessment <span class="text-purple-500">Center</span></h2>
                                    <p class="text-xs text-slate-400 font-mono uppercase tracking-widest mt-2">Quizzes, tests, and reflection exercises.</p>
                                  </div>
                                  <div id="assessments-container" class="space-y-6">
                                    <p class="text-center text-slate-500 italic py-8">No assessments yet. Create assessments in the builder.</p>
                                  </div>
                                </div>
                              </div>`,css:``,script:`function renderAssessments() {
                                const container = document.getElementById('assessments-container');
                                if (!container) return;
                                if (window.courseAssessments && window.courseAssessments.length > 0) {
                                  container.innerHTML = window.courseAssessments.map(assessment => '<div class="assessment-wrapper mb-8">' + assessment.html + '</div>').join('');
                                  window.courseAssessments.forEach((assessment) => {
                                    if (assessment.script) {
                                      try { eval(assessment.script); } catch(e) { console.error('Assessment script error:', e); }
                                    }
                                  });
                                }
                              }
                              if (document.readyState === 'loading') {
                                document.addEventListener('DOMContentLoaded', renderAssessments);
                              } else {
                                renderAssessments();
                              }`}]},"Global Toolkit":[]};t(e),localStorage.setItem(`course_factory_v2_data`,JSON.stringify(e)),localStorage.removeItem(`course_factory_backup`),Object.keys(localStorage).forEach(e=>{e.startsWith(`courseProgress_`)&&localStorage.removeItem(e)}),`caches`in window&&caches.keys().then(e=>{e.forEach(e=>caches.delete(e))}),alert(` Reset complete! Course Materials and Assessments modules preserved (but emptied). All other content cleared.`)}else alert(`Reset cancelled. Your data is safe.`)},className:`w-full bg-rose-600 hover:bg-rose-500 text-white font-bold py-3 rounded-lg flex items-center justify-center gap-2 transition-all`,children:[(0,Q.jsx)(Oe,{size:16}),` Full Reset (Delete Everything)`]})]})]})]})]})})},Vf=({error:e,onDismiss:t})=>{if(!e)return null;let n=()=>{switch(e.type){case`compile`:return(0,Q.jsx)(F,{size:20});case`preview`:return(0,Q.jsx)(oe,{size:20});case`module`:return(0,Q.jsx)(O,{size:20});default:return(0,Q.jsx)(ke,{size:20})}},r={rose:{bg:`bg-rose-900/20`,border:`border-rose-500/50`,text:`text-rose-400`,icon:`text-rose-500`},amber:{bg:`bg-amber-900/20`,border:`border-amber-500/50`,text:`text-amber-400`,icon:`text-amber-500`},purple:{bg:`bg-purple-900/20`,border:`border-purple-500/50`,text:`text-purple-400`,icon:`text-purple-500`}}[(()=>{switch(e.type){case`compile`:return`rose`;case`preview`:return`amber`;case`module`:return`purple`;default:return`rose`}})()];return(0,Q.jsx)(`div`,{className:`fixed top-4 right-4 z-[100] max-w-md animate-in slide-in-from-top-4 fade-in duration-300 ${r.bg} ${r.border} border rounded-xl p-4 shadow-2xl backdrop-blur-sm`,children:(0,Q.jsxs)(`div`,{className:`flex items-start gap-3`,children:[(0,Q.jsx)(`div`,{className:`${r.icon} flex-shrink-0 mt-0.5`,children:n()}),(0,Q.jsxs)(`div`,{className:`flex-1 min-w-0`,children:[(0,Q.jsxs)(`div`,{className:`flex items-start justify-between gap-2 mb-1`,children:[(0,Q.jsx)(`h3`,{className:`${r.text} font-bold text-sm uppercase tracking-wider`,children:e.type===`compile`?`Compilation Error`:e.type===`preview`?`Preview Error`:e.type===`module`?`Module Error`:`Error`}),(0,Q.jsx)(`button`,{onClick:t,className:`${r.text} hover:text-white transition-colors flex-shrink-0`,children:(0,Q.jsx)(Me,{size:16})})]}),(0,Q.jsx)(`p`,{className:`text-white text-sm mb-2`,children:e.message}),e.details&&(0,Q.jsxs)(`details`,{className:`mt-2`,children:[(0,Q.jsx)(`summary`,{className:`${r.text} text-xs cursor-pointer hover:text-white transition-colors`,children:`Technical Details`}),(0,Q.jsx)(`pre`,{className:`mt-2 text-xs text-slate-300 bg-slate-950/50 p-2 rounded border border-slate-700 overflow-auto max-h-32 font-mono`,children:e.details})]})]})]})})},Hf=(e,t)=>{let n={modules:[],assessments:[],toolkit:[],materials:[]},r=t[`Current Course`]?.modules?.find(t=>t.id===e)?.title||e,i=e.replace(`view-`,``).replace(`item-`,``),a=t[`Current Course`]?.modules||[];a.forEach(t=>{if(t.id===e)return;let r=t.rawHtml||t.html||t.code?.html||``;(r.includes(e)||r.includes(i))&&n.modules.push({id:t.id,title:t.title,type:`HTML reference`});let a=t.script||t.code?.script||``;if(a.includes(e)||a.includes(i)){let e=n.modules.find(e=>e.id===t.id);e?e.type=`HTML & Script reference`:n.modules.push({id:t.id,title:t.title,type:`Script reference`})}}),a.forEach(t=>{(t.assessments||[]).forEach(r=>{let a=(r.html||``)+(r.script||``);(a.includes(e)||a.includes(i))&&n.assessments.push({id:r.id,title:r.title,moduleTitle:t.title})})}),(t[`Global Toolkit`]||[]).forEach(t=>{let r=typeof t.code==`string`?JSON.parse(t.code||`{}`):t.code||{},a=(r.html||``)+(r.script||``);(a.includes(e)||a.includes(i))&&n.toolkit.push({id:t.id,title:t.title})}),(t[`Current Course`]?.materials||[]).forEach(t=>{let r=(t.title||``)+(t.description||``)+(t.viewUrl||``);(r.includes(e)||r.includes(i))&&n.materials.push({id:t.id,title:t.title})});let o=n.modules.length+n.assessments.length+n.toolkit.length+n.materials.length;return{hasDependencies:o>0,dependencies:n,totalCount:o,moduleTitle:r}},Uf=({isOpen:e,message:t,onConfirm:n,onCancel:r,dependencies:i})=>{if(!e)return null;let a=i&&i.hasDependencies;return(0,Q.jsx)(`div`,{className:`fixed inset-0 bg-black/80 z-[60] flex items-center justify-center p-4 backdrop-blur-sm`,onClick:r,children:(0,Q.jsxs)(`div`,{className:`bg-slate-900 border rounded-xl p-6 max-w-lg w-full shadow-2xl max-h-[90vh] overflow-y-auto ${a?`border-amber-900`:`border-rose-900`}`,onClick:e=>e.stopPropagation(),children:[(0,Q.jsxs)(`div`,{className:`flex items-center gap-3 mb-4 ${a?`text-amber-500`:`text-rose-500`}`,children:[(0,Q.jsx)(me,{size:24}),(0,Q.jsx)(`h3`,{className:`text-lg font-bold`,children:a?`\xA0 Dependencies Found`:`Delete Item?`})]}),a?(0,Q.jsx)(Q.Fragment,{children:(0,Q.jsxs)(`div`,{className:`mb-4 p-4 bg-amber-900/20 border border-amber-700/50 rounded-lg`,children:[(0,Q.jsxs)(`p`,{className:`text-amber-200 text-sm mb-3`,children:[(0,Q.jsxs)(`strong`,{children:[`"`,i.moduleTitle,`"`]}),` is referenced in `,i.totalCount,` place`,i.totalCount===1?``:`s`,`:`]}),i.dependencies.modules.length>0&&(0,Q.jsxs)(`div`,{className:`mb-3`,children:[(0,Q.jsxs)(`p`,{className:`text-xs font-bold text-amber-400 uppercase mb-1`,children:[`Modules (`,i.dependencies.modules.length,`):`]}),(0,Q.jsx)(`ul`,{className:`text-xs text-amber-200 space-y-1 ml-4`,children:i.dependencies.modules.map(e=>(0,Q.jsxs)(`li`,{children:[` `,e.title,` `,(0,Q.jsxs)(`span`,{className:`text-amber-500`,children:[`(`,e.type,`)`]})]},e.id))})]}),i.dependencies.assessments.length>0&&(0,Q.jsxs)(`div`,{className:`mb-3`,children:[(0,Q.jsxs)(`p`,{className:`text-xs font-bold text-amber-400 uppercase mb-1`,children:[`Assessments (`,i.dependencies.assessments.length,`):`]}),(0,Q.jsx)(`ul`,{className:`text-xs text-amber-200 space-y-1 ml-4`,children:i.dependencies.assessments.map(e=>(0,Q.jsxs)(`li`,{children:[` `,e.title,` `,(0,Q.jsxs)(`span`,{className:`text-amber-500`,children:[`(in `,e.moduleTitle,`)`]})]},e.id))})]}),i.dependencies.toolkit.length>0&&(0,Q.jsxs)(`div`,{className:`mb-3`,children:[(0,Q.jsxs)(`p`,{className:`text-xs font-bold text-amber-400 uppercase mb-1`,children:[`Toolkit Items (`,i.dependencies.toolkit.length,`):`]}),(0,Q.jsx)(`ul`,{className:`text-xs text-amber-200 space-y-1 ml-4`,children:i.dependencies.toolkit.map(e=>(0,Q.jsxs)(`li`,{children:[` `,e.title]},e.id))})]}),i.dependencies.materials.length>0&&(0,Q.jsxs)(`div`,{className:`mb-3`,children:[(0,Q.jsxs)(`p`,{className:`text-xs font-bold text-amber-400 uppercase mb-1`,children:[`Materials (`,i.dependencies.materials.length,`):`]}),(0,Q.jsx)(`ul`,{className:`text-xs text-amber-200 space-y-1 ml-4`,children:i.dependencies.materials.map(e=>(0,Q.jsxs)(`li`,{children:[` `,e.title]},e.id))})]}),(0,Q.jsx)(`p`,{className:`text-xs text-amber-300 mt-3 italic`,children:`Deleting this module may break these items. Proceed with caution.`})]})}):(0,Q.jsx)(`p`,{className:`text-slate-300 text-sm mb-6`,children:t}),(0,Q.jsxs)(`div`,{className:`flex gap-3`,children:[(0,Q.jsx)(`button`,{onClick:r,className:`flex-1 py-2 bg-slate-800 hover:bg-slate-700 text-white rounded-lg text-sm font-bold transition-colors`,children:`Cancel`}),(0,Q.jsx)(`button`,{onClick:n,className:`flex-1 py-2 rounded-lg text-sm font-bold shadow-lg transition-colors ${a?`bg-amber-600 hover:bg-amber-500 shadow-amber-900/20`:`bg-rose-600 hover:bg-rose-500 shadow-rose-900/20`}`,children:a?`\xA0 Delete Anyway`:`Delete Forever`})]})]})})};function Wf(){let[e,t]=$(0),[n,r]=$(``),[i,a]=$(_f),[o,s]=$(!1),[c,l]=$(null),u=`course_factory_v2_data`,[d,f]=$(!1),[p,m]=$(null),{toasts:h,showToast:g,removeToast:_}=hf(),[v,y]=$(null),b=(e,t,n=null)=>{y({type:e,message:t,details:n}),console.error(`[${e.toUpperCase()}]`,t,n||``),setTimeout(()=>y(null),1e4)},x=()=>y(null);pf(()=>{try{let e=localStorage.getItem(u);if(e){let t=JSON.parse(e);t&&t[`Current Course`]&&(a(t),g(`Project restored from storage`,`success`))}f(!0)}catch(e){g(`Failed to load project data. Starting fresh.`,`error`),console.error(` Load failed:`,e),f(!0)}},[]),pf(()=>{if(!d)return;let e=setTimeout(()=>{try{let e=JSON.stringify(i).length,t=(e/1024/1024).toFixed(2);e>4*1024*1024&&g(`Warning: Project is ${t}MB. Approaching storage limit.`,`warning`,6e3),localStorage.setItem(u,JSON.stringify(i)),m(new Date)}catch(e){e.name===`QuotaExceededError`?g(`Storage full! Project too large. Please export backup immediately.`,`error`,1e4):g(`Failed to save project. Check console for details.`,`error`),console.error(` Save failed:`,e)}},1e3);return()=>clearTimeout(e)},[i,d,g]);let[S,C]=$([]),[w,T]=$(null),[E,O]=$({title:``,html:``,script:``,id:``,section:``,moduleType:``,url:``,linkType:`iframe`,fullDocument:``}),[M,ee]=$(null),[te,ne]=$(null),[P,re]=$(null),[ie,F]=$(!1),[ce,le]=$(``),[de,fe]=$(`quiz`),[pe,me]=$(``),[_e,ve]=$([{question:``,options:[``,``,``,``],correct:0}]),[be,xe]=$(``),[Se,we]=$(``),[Te,De]=$(null),[Oe,ke]=$([]),[Ae,Ne]=$(``),[Pe,Fe]=$(`multiple-choice`),[Ie,Le]=$({question:``,options:[``,``,``,``],correct:0}),[Re,ze]=$(null),[Be,Ve]=$(``),[He,Ue]=$(``),[We,Ge]=$(``),Ke=i[`Current Course`]||{name:`Error`,modules:[]},qe=i[`Global Toolkit`]||[],Je=e=>{if(!e||e.trim()===``){alert(`Course name cannot be empty`);return}a({...i,"Current Course":{...i[`Current Course`],name:e}}),F(!1)},Ye=e=>{C(t=>t.includes(e)?t.filter(t=>t!==e):[...t,e])},Xe=e=>{let t=i[`Current Course`]?.modules||[],n=!t.find(t=>t.id===e)?.hidden,r=t.map(t=>t.id===e?{...t,hidden:n}:t);a({...i,"Current Course":{...i[`Current Course`],modules:r}}),C(n?t=>t.includes(e)?t:[...t,e]:t=>t.filter(t=>t!==e))},Ze=e=>{if(e.type===`external`){O({title:e.title,url:e.url||``,linkType:e.linkType||`iframe`,id:e.id,section:`Current Course`,moduleType:`external`}),T(e.id);return}if(e.type===`standalone`){if(e.rawHtml){O({title:e.title,fullDocument:e.rawHtml,id:e.id,section:`Current Course`,moduleType:`standalone`,hasRawHtml:!0}),T(e.id);return}let t=`<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>`+(e.title||`Module`)+`</title>
`;t+=`<script src="https://cdn.tailwindcss.com"><\/script>
`,e.css&&(t+=`<style>
`+e.css+`
</style>
`),t+=`</head>
<body>
`,e.html&&(t+=e.html+`
`),e.script&&(t+=`<script>
`+e.script+`
<\/script>
`),t+=`</body>
</html>`,O({title:e.title,fullDocument:t,id:e.id,section:`Current Course`,moduleType:`standalone`,hasRawHtml:!1}),T(e.id);return}let t=e.code||{};if(typeof t==`string`)try{t=JSON.parse(t)}catch{}O({title:e.title,html:t.html||``,script:t.script||``,id:e.id,section:`Current Course`,moduleType:`legacy`}),T(e.id)},Qe=()=>{let e=E.section,t=i[e]?.modules||[],n=t.findIndex(e=>e.id===w);if(n===-1)return;let r={...t[n]},o=r.history||[],s={timestamp:new Date().toISOString(),title:r.title,...r.type===`standalone`?r.rawHtml?{rawHtml:r.rawHtml}:{html:r.html,css:r.css,script:r.script}:r.type===`external`?{url:r.url,linkType:r.linkType}:{code:r.code}},c=o[o.length-1],l=!c||JSON.stringify(s)!==JSON.stringify({...c,timestamp:s.timestamp}),u=o;l&&(u=[...o,s].slice(-10)),E.moduleType===`external`?t[n]={...t[n],title:E.title,url:E.url,linkType:E.linkType||`iframe`,type:`external`,history:u}:E.moduleType===`standalone`?t[n]={...t[n],title:E.title,rawHtml:E.fullDocument.trim(),html:``,css:``,script:``,type:`standalone`,history:u}:t[n]={...t[n],title:E.title,code:{id:t[n].code?.id||E.id,html:E.html,script:E.script},history:u},a({...i,[e]:{...i[e],modules:t}}),T(null)},$e=(e,t)=>{let n=`Current Course`,r=i[n]?.modules||[],o=r.findIndex(t=>t.id===e);if(o===-1)return;let s=r[o],c=s.history||[];if(t<0||t>=c.length)return;let l=c[t];if(s.type===`standalone`?l.rawHtml?r[o]={...r[o],title:l.title,rawHtml:l.rawHtml,html:``,css:``,script:``}:r[o]={...r[o],title:l.title,rawHtml:``,html:l.html||``,css:l.css||``,script:l.script||``}:s.type===`external`?r[o]={...r[o],title:l.title,url:l.url||``,linkType:l.linkType||`iframe`}:r[o]={...r[o],title:l.title,code:l.code||{}},a({...i,[n]:{...i[n],modules:r}}),w===e){let e=r[o];Ze(e)}ne(null)},et=e=>{ee(e)},tt=e=>{let t=e.code||{};if(typeof t==`string`)try{t=JSON.parse(t)}catch{}return t.id===`view-materials`||e.id===`item-assessments`||e.title===`Assessments`},nt=e=>{if(tt(e)){alert(`\xA0 Course Materials and Assessments are core modules and cannot be deleted.

You can hide them instead using the hide/show toggle in Phase 2.`);return}let t=i[`Global Toolkit`]?.some(t=>t.id===e.id),n=null;t||(n=Hf(e.id,i)),re({id:e.id,type:t?`tool`:`module`,dependencies:n})},rt=()=>{if(P){if(P.type===`module`){let e=i[`Current Course`]?.modules?.find(e=>e.id===P.id);if(e&&tt(e)){alert(`\xA0 Course Materials and Assessments are core modules and cannot be deleted.`),re(null);return}let t=i[`Current Course`]?.modules||[];t=t.filter(e=>e.id!==P.id),a({...i,"Current Course":{...i[`Current Course`],modules:t}})}else if(P.type===`tool`){let e=i[`Global Toolkit`]||[];e=e.filter(e=>e.id!==P.id),a({...i,"Global Toolkit":e})}re(null)}},it=()=>Ke.modules.find(e=>e.id===`item-assessments`||e.title===`Assessments`);function at(e){let t=Ke.modules.findIndex(e=>e.id===`item-assessments`||e.title===`Assessments`);if(t===-1)return;let n=[...Ke.modules];n[t]={...n[t],assessments:e},a({...i,"Current Course":{...i[`Current Course`],modules:n}})}let ot=()=>{let e=i[`Current Course`]?.materials||[];if(!e.some(e=>e.themeOverride))return!1;let t=e.map(e=>e.themeOverride?{...e,themeOverride:null}:e);return a(e=>({...e,"Current Course":{...e[`Current Course`],materials:t}})),!0},st=()=>{let e=it()?.assessments||[];return e.some(e=>e.textColorOverride||e.boxColorOverride)?(at(e.map(e=>({...e,textColorOverride:null,boxColorOverride:null}))),!0):!1},ct=()=>{let e=ot(),t=st();e||t?g(`Per-material and assessment overrides were cleared, reverting to Phase 5 defaults.`,`success`):g(`Materials and assessments already use the Phase 5 defaults.`,`info`)},lt=e=>{let t=i[`Current Course`]?.materials||[],n={id:`mat-${Date.now()}`,number:e.number,mediaType:e.mediaType||`number`,title:e.title,description:e.description,viewUrl:e.viewUrl,downloadUrl:e.downloadUrl,color:e.color||`slate`,themeOverride:e.themeOverride||null,hidden:!1,order:t.length,assignedModules:e.assignedModules||[],digitalContent:e.digitalContent||null};a({...i,"Current Course":{...i[`Current Course`],materials:[...t,n]}})},ut=(e,t)=>{let n=(i[`Current Course`]?.materials||[]).map(n=>n.id===e?{...n,...t}:n);a({...i,"Current Course":{...i[`Current Course`],materials:n}})},dt=e=>{let t=(i[`Current Course`]?.materials||[]).filter(t=>t.id!==e);a({...i,"Current Course":{...i[`Current Course`],materials:t}})},ft=(e,t)=>{let n=i[`Current Course`]?.materials||[],r=n.findIndex(t=>t.id===e);if(r===-1)return;let o=t===`up`?r-1:r+1;if(o<0||o>=n.length)return;let s=[...n];[s[r],s[o]]=[s[o],s[r]],s.forEach((e,t)=>{e.order=t}),a({...i,"Current Course":{...i[`Current Course`],materials:s}})},pt=e=>{let t=(i[`Current Course`]?.materials||[]).map(t=>t.id===e?{...t,hidden:!t.hidden}:t);a({...i,"Current Course":{...i[`Current Course`],materials:t}})},mt=e=>{let t=it()?.assessments||[],n={...e,id:`assess_${Date.now()}`,order:t.length,hidden:!1};at([...t,n])},ht=(e,t)=>{at((it()?.assessments||[]).map(n=>n.id===e?{...n,...t}:n))},gt=e=>{at((it()?.assessments||[]).filter(t=>t.id!==e))},_t=(e,t)=>{let n=it()?.assessments||[],r=n.findIndex(t=>t.id===e);if(r===-1)return;let i=t===`up`?r-1:r+1;if(i<0||i>=n.length)return;let a=[...n];[a[r],a[i]]=[a[i],a[r]],a.forEach((e,t)=>{e.order=t}),at(a)},vt=e=>{at((it()?.assessments||[]).map(t=>t.id===e?{...t,hidden:!t.hidden}:t))},yt=()=>`q-${Date.now()}-${Math.random().toString(36).slice(2,8)}`,I=(e,t=`multiple-choice`)=>{let n=e.type||t;return{id:e.id||yt(),question:e.question||``,options:e.options?.slice()||[``,``,``,``],correct:typeof e.correct==`number`?e.correct:0,type:n,order:typeof e.order==`number`?e.order:0}};return(0,Q.jsxs)(`div`,{className:`min-h-screen bg-slate-950 text-white`,children:[(0,Q.jsx)(`header`,{className:`bg-slate-900 border-b border-slate-800 p-4`,children:(0,Q.jsxs)(`div`,{className:`flex items-center justify-between max-w-[1800px] mx-auto`,children:[(0,Q.jsxs)(`div`,{children:[(0,Q.jsxs)(`h1`,{className:`text-lg font-bold flex items-center gap-2`,children:[(0,Q.jsx)(Ce,{className:`text-blue-400`,size:20}),`Course Factory Dashboard`]}),(0,Q.jsxs)(`p`,{className:`text-[10px] text-slate-500 uppercase tracking-wider mt-1 font-mono`,children:[`LIVING DOC  SAVED `,p?p.toLocaleTimeString(`en-US`,{hour:`2-digit`,minute:`2-digit`}).toUpperCase():`---`]})]}),(0,Q.jsx)(`div`,{className:`flex items-center gap-4`,children:ie?(0,Q.jsxs)(`div`,{className:`flex items-center gap-2`,children:[(0,Q.jsx)(`input`,{type:`text`,value:ce,onChange:e=>le(e.target.value),onKeyDown:e=>{e.key===`Enter`&&Je(ce),e.key===`Escape`&&F(!1)},className:`bg-slate-800 border border-blue-500 rounded px-3 py-1 text-sm`,placeholder:`Course Name`,autoFocus:!0}),(0,Q.jsx)(`button`,{onClick:()=>Je(ce),className:`text-emerald-400 hover:text-emerald-300`,children:(0,Q.jsx)(k,{size:18})}),(0,Q.jsx)(`button`,{onClick:()=>F(!1),className:`text-slate-500 hover:text-slate-400`,children:(0,Q.jsx)(Me,{size:18})})]}):(0,Q.jsxs)(`button`,{onClick:()=>{le(Ke.name),F(!0)},className:`px-4 py-2 bg-blue-600 hover:bg-blue-500 rounded text-sm font-bold flex items-center gap-2 transition-colors`,children:[`PROJECT: `,Ke.name.toUpperCase(),(0,Q.jsx)(ge,{size:14})]})})]})}),(0,Q.jsxs)(`div`,{className:`flex max-w-[1800px] mx-auto`,children:[(0,Q.jsx)(`aside`,{className:`w-64 bg-slate-900 border-r border-slate-800 p-4 min-h-[calc(100vh-73px)] flex flex-col`,children:(0,Q.jsxs)(`div`,{className:`flex-grow space-y-6`,children:[(0,Q.jsxs)(`div`,{children:[(0,Q.jsx)(`h3`,{className:`text-[10px] font-bold text-slate-600 uppercase tracking-wider mb-3`,children:`Factory Line`}),(0,Q.jsxs)(`div`,{className:`space-y-1`,children:[(0,Q.jsx)(Gf,{title:`Phase 0: Master Shell`,icon:ue,isActive:e===0,onClick:()=>t(0)}),(0,Q.jsx)(Gf,{title:`Phase 1: Harvest`,icon:se,isActive:e===1,onClick:()=>t(1)}),(0,Q.jsx)(Gf,{title:`Phase 2: Preview & Test`,icon:oe,isActive:e===2,onClick:()=>t(2),badge:Ke.modules.length,badgeColor:`bg-purple-600`}),(0,Q.jsx)(Gf,{title:`Phase 3: Manage & Reset`,icon:D,isActive:e===3,onClick:()=>t(3)}),(0,Q.jsx)(Gf,{title:`Phase 4: Compile`,icon:he,isActive:e===4,onClick:()=>t(4)}),(0,Q.jsx)(Gf,{title:`Phase 5: Settings`,icon:Ce,isActive:e===5,onClick:()=>t(5)})]})]}),(0,Q.jsxs)(`div`,{children:[(0,Q.jsxs)(`h3`,{className:`text-[10px] font-bold text-slate-600 uppercase tracking-wider mb-3`,children:[`IN: `,(i[`Course Settings`]?.courseName||Ke.name).toUpperCase()]}),(0,Q.jsx)(`div`,{className:`space-y-1`,children:Ke.modules.map((e,t)=>(0,Q.jsxs)(`div`,{className:`flex items-center gap-2 px-2 py-1.5 rounded text-xs hover:bg-slate-800 transition-colors group`,children:[(0,Q.jsx)(`button`,{onClick:()=>Xe(e.id),className:`p-0.5 hover:text-emerald-400 transition-colors`,title:e.hidden?`Show module`:`Hide module`,children:e.hidden?(0,Q.jsx)(ae,{size:12,className:`text-slate-600`}):(0,Q.jsx)(oe,{size:12,className:`text-emerald-500`})}),(0,Q.jsx)(`span`,{className:`text-slate-300 truncate flex-1`,children:e.title}),(0,Q.jsxs)(`div`,{className:`flex gap-1 opacity-0 group-hover:opacity-100 transition-opacity`,children:[(0,Q.jsx)(`button`,{onClick:()=>{if(t===0)return;let e=[...Ke.modules];[e[t],e[t-1]]=[e[t-1],e[t]],a({...i,"Current Course":{...i[`Current Course`],modules:e}})},disabled:t===0,className:`p-0.5 hover:text-sky-400 disabled:opacity-30 disabled:cursor-not-allowed`,title:`Move Up`,children:(0,Q.jsx)(j,{size:12})}),(0,Q.jsx)(`button`,{onClick:()=>{if(t===Ke.modules.length-1)return;let e=[...Ke.modules];[e[t],e[t+1]]=[e[t+1],e[t]],a({...i,"Current Course":{...i[`Current Course`],modules:e}})},disabled:t===Ke.modules.length-1,className:`p-0.5 hover:text-sky-400 disabled:opacity-30 disabled:cursor-not-allowed`,title:`Move Down`,children:(0,Q.jsx)(A,{size:12})}),(0,Q.jsx)(`button`,{onClick:()=>nt(e),disabled:tt(e),className:`p-0.5 ${tt(e)?`opacity-30 cursor-not-allowed`:`hover:text-rose-400`}`,title:tt(e)?`Core module (cannot be deleted)`:`Delete`,children:(0,Q.jsx)(Me,{size:12})})]})]},e.id))})]}),(0,Q.jsxs)(`div`,{children:[(0,Q.jsx)(`h3`,{className:`text-[10px] font-bold text-slate-600 uppercase tracking-wider mb-3`,children:`Global Toolkit`}),qe.length===0?(0,Q.jsx)(`p`,{className:`text-xs text-slate-600`,children:`No features saved.`}):(0,Q.jsx)(`div`,{className:`space-y-1`,children:qe.map(e=>(0,Q.jsxs)(`div`,{className:`flex items-center gap-2 px-2 py-1.5 rounded text-xs hover:bg-slate-800 transition-colors`,children:[(0,Q.jsx)(je,{size:12,className:`text-orange-500`}),(0,Q.jsx)(`span`,{className:`text-slate-300 truncate flex-1`,children:e.title})]},e.id))})]})]})}),(0,Q.jsxs)(`main`,{className:`flex-grow min-h-[600px]`,children:[e===0&&(0,Q.jsx)(Mf,{projectData:i,setProjectData:a}),e===1&&(0,Q.jsx)(Ff,{projectData:i,setProjectData:a,scannerNotes:n,setScannerNotes:r,addMaterial:lt,editMaterial:ut,deleteMaterial:dt,moveMaterial:ft,toggleMaterialHidden:pt,addAssessment:mt,editAssessment:ht,deleteAssessment:gt,moveAssessment:_t,toggleAssessmentHidden:vt,addQuestionToMaster:(e=null)=>{let t=e||{...Ie,type:Pe};ke(e=>{let n=e.findIndex(e=>e.id===t.id);if(n!==-1){let r=[...e],i=r[n]?.order??n;return r[n]={...r[n],...I(t,Pe),order:i},r}let r={...I(t,Pe),order:e.length};return[...e,r]}),Le({question:``,options:[``,``,``,``],correct:0})},moveQuestion:(e,t)=>{ke(n=>{let r=n.findIndex(t=>t.id===e);if(r===-1)return n;let i=t===`up`?r-1:r+1;if(i<0||i>=n.length)return n;let a=[...n];return[a[r],a[i]]=[a[i],a[r]],a.map((e,t)=>({...e,order:t}))})},deleteQuestion:e=>{ke(t=>t.filter(t=>t.id!==e).map((e,t)=>({...e,order:t})))},updateQuestion:(e,t)=>{ke(n=>n.map(n=>n.id===e?{...n,...t}:n))},clearMasterAssessment:()=>{ke([]),Ne(``),Le({question:``,options:[``,``,``,``],correct:0}),ze(null)},masterQuestions:Oe,setMasterQuestions:ke,masterAssessmentTitle:Ae,setMasterAssessmentTitle:Ne,currentQuestionType:Pe,setCurrentQuestionType:Fe,currentQuestion:Ie,setCurrentQuestion:Le,editingQuestion:Re,setEditingQuestion:ze,generateMixedAssessment:()=>{if(!Ae||Oe.length===0){alert(`Please add a title and at least one question to the Master Assessment.`);return}let e=`mixed_${Date.now()}`,t=i[`Course Settings`]||{},n=t.backgroundColor||`slate-950`,r=t.accentColor||`sky`,a=n.includes(`white`)||n.includes(`slate-100`)||n.includes(`slate-50`),o=t.headingTextColor||(a?`slate-900`:`white`),s=t.secondaryTextColor||(a?`slate-600`:`slate-400`),c=t.assessmentTextColor||`white`,l=t.buttonColor||`${r}-600`,u=e=>e.startsWith(`text-`)?e:`text-${e}`,d=e=>e.startsWith(`bg-`)?e.slice(3):e,f=u(o),p=u(s),m=u(c),h=m,g=d(l),_=`bg-${g}`,v=g.endsWith(`-600`)?`hover:bg-${g.replace(/-600$/,`-500`)}`:`hover:bg-${g}`,y=a?`text-slate-900`:`text-white`,b=a?`bg-white`:`bg-slate-900`,x=a?`border-slate-300`:`border-slate-700`,S=a?`bg-slate-100`:`bg-slate-800`,C=a?`hover:bg-slate-200`:`hover:bg-slate-750`,w=a?`bg-white`:`bg-slate-950`,T=m,E=a?`bg-white`:`bg-slate-900`,D=a?`border-slate-300`:`border-slate-700`,O=e=>e.type?e.type:e.options&&e.options.length>0&&e.options.some(e=>e&&e.trim())?`multiple-choice`:`long-answer`,k=Oe.filter(e=>O(e)===`multiple-choice`),A=Oe.filter(e=>O(e)===`long-answer`),j=``,M=0,ee=0,te=0;Oe.forEach((t,n)=>{let i=O(t)===`multiple-choice`,a=n+1;i&&t.options&&t.options.length>0?(j+=`
          <div class="mb-8 p-6 ${b} rounded-xl border ${x}">
            <h3 class="text-lg font-bold ${f} mb-4">${a}. ${t.question||`Untitled Question`}</h3>
            <div class="space-y-2">
              ${t.options.map((e,t)=>`
                <label class="flex items-center gap-3 p-3 ${S} rounded-lg cursor-pointer ${C} transition-colors">
                  <input type="radio" name="q${n}" value="${t}" class="w-4 h-4 assessment-input" />
                  <span class="${h}">${e||``}</span>
                </label>
              `).join(``)}
            </div>
          </div>
        `,ee++):(j+=`
          <div class="mb-8 p-6 ${b} rounded-xl border ${x} print-section">
            <h3 class="text-lg font-bold ${f} mb-4 print-question">${a}. ${t.question||`Untitled Question`}</h3>
            <textarea 
              id="${e}-answer-${te}" 
              placeholder="Type your answer here..."
              class="w-full h-48 ${w} border ${x} rounded-lg p-4 ${T} resize-none focus:border-${r}-500 focus:outline-none print-response assessment-input"
            ></textarea>
            <p class="text-xs ${p} italic mt-2 no-print">Auto-saved to browser</p>
          </div>
        `,te++),M++});let ne=`<div id="${e}" class="w-full h-full custom-scroll p-8">
      <div class="max-w-4xl mx-auto">
        <header class="mb-8">
          <h1 class="text-3xl font-black ${f} italic mb-2 print-title">${Ae}</h1>
          <p class="text-sm ${p} no-print">
            ${k.length>0&&A.length>0?`Complete ${k.length} multiple-choice and ${A.length} long-answer questions.`:k.length>0?`Select the best answer for each of ${k.length} questions.`:`Complete all ${A.length} questions. Your responses are auto-saved.`}
          </p>
        </header>
        
        ${A.length>0?`
          <!-- Student Info (only for long-answer assessments) -->
          <div class="grid grid-cols-2 gap-4 mb-8 p-6 ${b} rounded-xl border ${x} print-header no-print">
            <div>
              <label class="block text-xs font-bold ${p} uppercase mb-2">Student Name</label>
              <input 
                type="text" 
                id="${e}-student-name"
                placeholder="Enter your name..."
                class="w-full ${w} border ${x} rounded p-3 ${T} text-sm focus:border-${r}-500 focus:outline-none assessment-input"
              />
            </div>
            <div>
              <label class="block text-xs font-bold ${p} uppercase mb-2">Date</label>
              <input 
                type="date" 
                id="${e}-student-date"
                class="w-full ${w} border ${x} rounded p-3 ${T} text-sm focus:border-${r}-500 focus:outline-none assessment-input"
              />
            </div>
          </div>
        `:``}

        <!-- Questions -->
        <form id="${e}-form" class="space-y-6">
          ${j}
        </form>

        <!-- Action Buttons -->
        <div class="flex flex-wrap gap-3 mt-8 no-print">
          <button type="button" onclick="${e}_reset()" class="${_} ${v} ${y} font-bold py-3 px-6 rounded-lg flex items-center gap-2">
            Reset
          </button>
          ${A.length>0?`
          <button type="button" onclick="${e}_download()" class="${_} ${v} ${y} font-bold py-3 px-6 rounded-lg flex items-center gap-2">
            Download Backup
          </button>
          <button type="button" onclick="document.getElementById('${e}-upload').click()" class="${_} ${v} ${y} font-bold py-3 px-6 rounded-lg flex items-center gap-2">
            Upload Backup
          </button>
          `:``}
          <button type="button" onclick="${e}_generateReport()" class="${_} ${v} ${y} font-bold py-3 px-6 rounded-lg flex items-center gap-2">
            Print & Submit
          </button>
        </div>
        
        ${A.length>0?`
        <input type="file" id="${e}-upload" accept=".json" style="display: none;" onchange="${e}_loadBackup(this)" />
        <div id="${e}-loaded" class="hidden mt-6 p-4 rounded-xl bg-blue-900/20 border border-blue-500">
          <p class="text-blue-400 font-bold">Backup loaded successfully!</p>
        </div>
        `:``}

        <!-- Reset Confirmation Modal -->
        <div id="${e}-reset-modal" class="fixed inset-0 bg-black/80 z-50 flex items-center justify-center hidden">
          <div class="${E} border ${D} rounded-xl p-6 max-w-md mx-4">
            <h3 class="text-lg font-bold ${f} mb-4">Reset Assessment?</h3>
            <p class="${h} mb-6">Are you sure you want to reset all your answers? This cannot be undone.</p>
            <div class="flex gap-3">
              <button onclick="document.getElementById('${e}-reset-modal').classList.add('hidden')" class="flex-1 ${_} ${v} ${y} font-bold py-2 rounded">Cancel</button>
              <button onclick="${e}_confirmReset()" class="flex-1 bg-rose-600 hover:bg-rose-500 text-white font-bold py-2 rounded">Reset</button>
            </div>
          </div>
        </div>

        <!-- Print Instructions -->
        <div class="mt-8 p-4 bg-amber-900/20 border border-amber-500/30 rounded-lg no-print">
          <p class="text-amber-300 text-sm">
            <strong>Instructions:</strong> Complete all questions, then click "Print & Submit" to generate a clean printable report.
          </p>
        </div>

        <!-- Print Styles -->
        <style>
          @media print {
            body { background: white !important; }
            .no-print { display: none !important; }
            .print-title { color: black !important; font-size: 24pt; text-align: center; border-bottom: 3px solid black; padding-bottom: 10px; margin-bottom: 20px; }
            .print-header { background: white !important; border: 2px solid black !important; margin-bottom: 20px; }
            .print-header label { color: black !important; }
            .print-header input { border: none !important; border-bottom: 1px solid black !important; background: white !important; color: black !important; }
            .print-section { page-break-inside: avoid; background: white !important; border: 1px solid #ccc !important; margin-bottom: 20px; }
            .print-question { color: black !important; border-bottom: 2px solid #666; padding-bottom: 5px; }
            .print-response { background: white !important; color: black !important; border: 1px solid #999 !important; min-height: 200px; font-family: Arial, sans-serif; }
          }
        </style>
      </div>
    </div>`,N=``;N+=`
      // Reset function - shows confirmation modal
      function ${e}_reset() {
        var modal = document.getElementById('${e}-reset-modal');
        if (modal) modal.classList.remove('hidden');
      }
      
      // Confirm Reset - actually performs the reset
      function ${e}_confirmReset() {
        document.getElementById('${e}-reset-modal').classList.add('hidden');
        var form = document.getElementById('${e}-form');
        if (form) form.reset();
        
        // Clear localStorage for this assessment
        try {
          localStorage.removeItem('${e}-student-name');
          localStorage.removeItem('${e}-student-date');
          var container = document.getElementById('${e}');
          if (container) {
            container.querySelectorAll('textarea, input').forEach(function(el) {
              if (el.id) localStorage.removeItem(el.id);
            });
          }
        } catch(e) {}
      }
      
      // Generate Report - creates a clean printable page in new window
      function ${e}_generateReport() {
        var container = document.getElementById('${e}');
        if (!container) { alert('Assessment not found'); return; }
        
        // Gather all data
        var studentName = document.getElementById('${e}-student-name')?.value || 'Not Provided';
        var studentDate = document.getElementById('${e}-student-date')?.value || new Date().toLocaleDateString();
        
        // Build questions HTML
        var questionsHTML = '';
        var questions = container.querySelectorAll('[class*="print-section"], [class*="mb-8 p-6"]');
        var qNum = 1;
        
        questions.forEach(function(q) {
          var questionText = q.querySelector('h3')?.textContent || 'Question ' + qNum;
          var textarea = q.querySelector('textarea');
          var answer = textarea ? textarea.value : '';
          
          // Check for radio buttons (MC questions)
          var selectedRadio = q.querySelector('input[type="radio"]:checked');
          if (selectedRadio) {
            var label = selectedRadio.closest('label');
            answer = label ? label.textContent.trim() : 'Selected: Option ' + (parseInt(selectedRadio.value) + 1);
          }
          
          if (questionText.trim()) {
            questionsHTML += '<div style="margin-bottom:25px; border-left:4px solid #333; padding-left:15px;">' +
              '<h3 style="font-size:14px; font-weight:bold; margin-bottom:10px; color:#333;">' + questionText + '</h3>' +
              '<div style="background:#f9f9f9; padding:15px; border-radius:8px; border:1px solid #ddd; min-height:60px; white-space:pre-wrap; font-size:13px;">' + 
              (answer || '<em style="color:#999;">No answer provided</em>') + 
              '</div></div>';
            qNum++;
          }
        });
        
        // Build the print HTML
        var printHTML = '<!DOCTYPE html><html><head><title>${Ae} - Submission</title>' +
          '<style>' +
          'body { font-family: Arial, sans-serif; padding: 40px; color: #333; background: white; line-height: 1.5; max-width: 800px; margin: 0 auto; }' +
          '.header { border-bottom: 4px solid #333; padding-bottom: 15px; margin-bottom: 25px; display: flex; justify-content: space-between; align-items: flex-end; }' +
          '.header h1 { font-size: 24px; font-weight: 900; text-transform: uppercase; font-style: italic; margin: 0; }' +
          '.student-info { display: grid; grid-template-columns: 1fr 1fr; gap: 15px; margin-bottom: 30px; padding: 20px; background: #f5f5f5; border-radius: 8px; }' +
          '.student-info div { font-size: 14px; }' +
          '.student-info strong { display: block; font-size: 11px; text-transform: uppercase; color: #666; margin-bottom: 4px; }' +
          '</style></head><body>' +
          '<div class="header">' +
          '<div><h1>${Ae}</h1><p style="font-size:11px; text-transform:uppercase; letter-spacing:2px; color:#666; margin-top:5px;">Assessment Submission</p></div>' +
          '</div>' +
          '<div class="student-info">' +
          '<div><strong>Student Name</strong>' + studentName + '</div>' +
          '<div><strong>Date</strong>' + studentDate + '</div>' +
          '</div>' +
          '<div class="questions">' + questionsHTML + '</div>' +
          '<div style="margin-top:40px; border-top:2px solid #333; padding-top:20px; text-align:center;">' +
          '<p style="font-size:10px; text-transform:uppercase; letter-spacing:2px; color:#999;">End of Submission</p>' +
          '</div>' +
          '<script>window.onload = function() { setTimeout(function() { window.print(); }, 500); }<\\/script>' +
          '</body></html>';
        
        var pw = window.open('', '_blank');
        if (pw) {
          pw.document.open();
          pw.document.write(printHTML);
          pw.document.close();
        } else {
          alert('Please allow popups to print.');
        }
      }
    `,A.length>0&&(N+=`
      var ${e}_laCount = ${A.length};
      
      // Initialize: Load saved data on page load
      window.addEventListener('load', function() {
        ${e}_loadFromLocalStorage();
      });
      
      // Auto-save on input for all fields
      function ${e}_setupAutoSave() {
        var nameField = document.getElementById('${e}-student-name');
        var dateField = document.getElementById('${e}-student-date');
        if (nameField) {
          nameField.addEventListener('input', function() {
            localStorage.setItem('${e}-student-name', this.value);
          });
        }
        if (dateField) {
          dateField.addEventListener('input', function() {
            localStorage.setItem('${e}-student-date', this.value);
          });
        }
        
        for (var i = 0; i < ${e}_laCount; i++) {
          var textarea = document.getElementById('${e}-answer-' + i);
          if (textarea) {
            (function(idx) {
              textarea.addEventListener('input', function() {
                localStorage.setItem('${e}-answer-' + idx, this.value);
              });
            })(i);
          }
        }
      }
      
      // Load from localStorage
      function ${e}_loadFromLocalStorage() {
        var nameField = document.getElementById('${e}-student-name');
        var dateField = document.getElementById('${e}-student-date');
        
        if (nameField) {
          var savedName = localStorage.getItem('${e}-student-name');
          if (savedName) nameField.value = savedName;
        }
        if (dateField) {
          var savedDate = localStorage.getItem('${e}-student-date');
          if (savedDate) dateField.value = savedDate;
        }
        
        for (var i = 0; i < ${e}_laCount; i++) {
          var textarea = document.getElementById('${e}-answer-' + i);
          if (textarea) {
            var saved = localStorage.getItem('${e}-answer-' + i);
            if (saved) textarea.value = saved;
          }
        }
        
        ${e}_setupAutoSave();
      }
      
      // Download Backup
      function ${e}_download() {
        var data = {
          studentName: document.getElementById('${e}-student-name')?.value || '',
          studentDate: document.getElementById('${e}-student-date')?.value || '',
          answers: []
        };
        
        for (var i = 0; i < ${e}_laCount; i++) {
          var textarea = document.getElementById('${e}-answer-' + i);
          data.answers.push(textarea ? textarea.value : '');
        }
        
        var blob = new Blob([JSON.stringify(data, null, 2)], { type: 'application/json' });
        var url = URL.createObjectURL(blob);
        var a = document.createElement('a');
        a.href = url;
        a.download = '${Ae.replace(/[^a-z0-9]/gi,`_`)}_backup.json';
        a.click();
        URL.revokeObjectURL(url);
      }
      
      // Load Backup
      function ${e}_loadBackup(input) {
        var file = input.files[0];
        if (!file) return;
        
        var reader = new FileReader();
        reader.onload = function(e) {
          try {
            var data = JSON.parse(e.target.result);
            
            var nameField = document.getElementById('${e}-student-name');
            var dateField = document.getElementById('${e}-student-date');
            
            if (nameField && data.studentName) {
              nameField.value = data.studentName;
              localStorage.setItem('${e}-student-name', data.studentName);
            }
            if (dateField && data.studentDate) {
              dateField.value = data.studentDate;
              localStorage.setItem('${e}-student-date', data.studentDate);
            }
            
            data.answers.forEach(function(answer, i) {
              var textarea = document.getElementById('${e}-answer-' + i);
              if (textarea) {
                textarea.value = answer;
                localStorage.setItem('${e}-answer-' + i, answer);
              }
            });
            
            var loadedDiv = document.getElementById('${e}-loaded');
            if (loadedDiv) {
              loadedDiv.classList.remove('hidden');
              setTimeout(function() { loadedDiv.classList.add('hidden'); }, 3000);
            }
          } catch(err) {
            alert('Error loading backup file.');
          }
        };
        reader.readAsText(file);
      }
      `);let P={id:e,title:Ae,type:`mixed`,questionCount:Oe.length,mcCount:k.length,laCount:A.length,html:ne,script:N};xe(JSON.stringify(P,null,2))},generatedAssessment:be,setGeneratedAssessment:xe,assessmentType:de,setAssessmentType:fe,assessmentTitle:pe,setAssessmentTitle:me,quizQuestions:_e,setQuizQuestions:ve,printInstructions:Se,setPrintInstructions:we,editingAssessment:Te,setEditingAssessment:De,migrateCode:Be,setMigrateCode:Ve,migratePrompt:He,setMigratePrompt:Ue,migrateOutput:We,setMigrateOutput:Ge,isVaultOpen:o,setIsVaultOpen:s,setVaultTargetField:l,vaultTargetField:c}),e===2&&(0,Q.jsx)(If,{projectData:i,setProjectData:a,editMaterial:ut,onEdit:Ze,onPreview:et,onDelete:nt,onToggleHidden:Xe,deleteMaterial:dt,deleteAssessment:gt,toggleMaterialHidden:pt,toggleAssessmentHidden:vt}),e===3&&(0,Q.jsx)(Lf,{onGoToMaster:()=>t(0),projectData:i,setProjectData:a}),e===4&&(0,Q.jsx)(zf,{projectData:i,setProjectData:a,excludedIds:S,toggleModule:Ye,onToggleHidden:Xe,onError:b}),e===5&&(0,Q.jsx)(Bf,{projectData:i,setProjectData:a,applyVisualDefaults:ct})]})]}),(0,Q.jsx)(Vf,{error:v,onDismiss:x}),(0,Q.jsx)(Uf,{isOpen:!!P,message:P?.type===`module`?`This will permanently delete this module and all its content.`:`This will permanently delete this toolkit item.`,onConfirm:rt,onCancel:()=>re(null),dependencies:P?.dependencies||null}),w&&(0,Q.jsx)(`div`,{className:`fixed inset-0 bg-black/80 z-50 flex items-center justify-center p-4 backdrop-blur-sm`,children:(0,Q.jsxs)(`div`,{className:`bg-slate-900 border border-blue-900 rounded-xl w-full max-w-6xl max-h-[90vh] overflow-hidden shadow-2xl flex flex-col`,children:[(0,Q.jsxs)(`div`,{className:`bg-slate-800 border-b border-slate-700 p-4 flex items-center justify-between`,children:[(0,Q.jsxs)(`h3`,{className:`text-lg font-bold text-white flex items-center gap-2`,children:[(0,Q.jsx)(Ee,{size:20,className:`text-blue-400`}),`Edit Module: `,E.title||`Untitled`]}),(0,Q.jsx)(`button`,{onClick:()=>T(null),className:`text-slate-400 hover:text-white`,children:(0,Q.jsx)(Me,{size:24})})]}),(0,Q.jsxs)(`div`,{className:`flex-1 overflow-y-auto p-6`,children:[(0,Q.jsxs)(`div`,{className:`mb-4`,children:[(0,Q.jsx)(`label`,{className:`block text-sm font-bold text-slate-300 mb-2`,children:`Module Title`}),(0,Q.jsx)(`input`,{type:`text`,value:E.title||``,onChange:e=>O({...E,title:e.target.value}),className:`w-full bg-slate-950 border border-slate-700 rounded p-3 text-white text-sm`,placeholder:`Module title`})]}),E.moduleType===`external`&&(0,Q.jsxs)(`div`,{className:`space-y-4`,children:[(0,Q.jsxs)(`div`,{children:[(0,Q.jsx)(`label`,{className:`block text-sm font-bold text-slate-300 mb-2`,children:`URL`}),(0,Q.jsx)(`input`,{type:`text`,value:E.url||``,onChange:e=>O({...E,url:e.target.value}),className:`w-full bg-slate-950 border border-slate-700 rounded p-3 text-white font-mono text-sm`,placeholder:`https://example.com/module`})]}),(0,Q.jsxs)(`div`,{children:[(0,Q.jsx)(`label`,{className:`block text-sm font-bold text-slate-300 mb-2`,children:`Link Type`}),(0,Q.jsxs)(`div`,{className:`flex gap-4`,children:[(0,Q.jsxs)(`label`,{className:`flex items-center gap-2 cursor-pointer`,children:[(0,Q.jsx)(`input`,{type:`radio`,name:`linkType`,value:`iframe`,checked:E.linkType===`iframe`,onChange:e=>O({...E,linkType:e.target.value}),className:`w-4 h-4 text-blue-600`}),(0,Q.jsx)(`span`,{className:`text-sm text-slate-300`,children:`Embed in iframe`})]}),(0,Q.jsxs)(`label`,{className:`flex items-center gap-2 cursor-pointer`,children:[(0,Q.jsx)(`input`,{type:`radio`,name:`linkType`,value:`newtab`,checked:E.linkType===`newtab`,onChange:e=>O({...E,linkType:e.target.value}),className:`w-4 h-4 text-blue-600`}),(0,Q.jsx)(`span`,{className:`text-sm text-slate-300`,children:`Open in new tab`})]})]})]})]}),E.moduleType===`standalone`&&(0,Q.jsxs)(`div`,{children:[(0,Q.jsx)(`label`,{className:`block text-sm font-bold text-slate-300 mb-2`,children:`Full HTML Document`}),(0,Q.jsx)(`p`,{className:`text-xs text-emerald-400 mb-2 font-medium`,children:`Edit the complete HTML document - your code runs as-is in an iframe`}),(0,Q.jsx)(`textarea`,{value:E.fullDocument||``,onChange:e=>O({...E,fullDocument:e.target.value}),className:`w-full h-96 bg-slate-950 border border-slate-700 rounded p-3 text-white font-mono text-xs`,placeholder:`<!DOCTYPE html>...`})]}),E.moduleType===`legacy`&&(0,Q.jsxs)(`div`,{className:`space-y-4`,children:[(0,Q.jsxs)(`div`,{children:[(0,Q.jsx)(`label`,{className:`block text-sm font-bold text-slate-300 mb-2`,children:`HTML`}),(0,Q.jsx)(`textarea`,{value:E.html||``,onChange:e=>O({...E,html:e.target.value}),className:`w-full h-64 bg-slate-950 border border-slate-700 rounded p-3 text-white font-mono text-sm`})]}),(0,Q.jsxs)(`div`,{children:[(0,Q.jsx)(`label`,{className:`block text-sm font-bold text-slate-300 mb-2`,children:`Script`}),(0,Q.jsx)(`textarea`,{value:E.script||``,onChange:e=>O({...E,script:e.target.value}),className:`w-full h-64 bg-slate-950 border border-slate-700 rounded p-3 text-white font-mono text-sm`})]})]})]}),(0,Q.jsxs)(`div`,{className:`bg-slate-800 border-t border-slate-700 p-4 flex gap-3`,children:[(0,Q.jsx)(`button`,{onClick:()=>T(null),className:`flex-1 py-2 bg-slate-700 hover:bg-slate-600 text-white rounded transition-colors`,children:`Cancel`}),(0,Q.jsxs)(`button`,{onClick:()=>{let e=i[`Current Course`]?.modules?.find(e=>e.id===w);e?.history&&e.history.length>0?ne({moduleId:w,history:e.history}):alert(`No version history available for this module yet. History is created when you save changes.`)},className:`px-4 py-2 bg-slate-600 hover:bg-slate-500 text-white rounded flex items-center gap-2 transition-colors`,title:`View version history`,children:[(0,Q.jsx)(N,{size:16}),`History`]}),(0,Q.jsx)(`button`,{onClick:Qe,className:`flex-1 py-2 bg-blue-600 hover:bg-blue-500 text-white rounded font-bold shadow-lg transition-colors`,children:`Save Changes`})]})]})}),te&&(0,Q.jsx)(`div`,{className:`fixed inset-0 bg-black/80 z-[55] flex items-center justify-center p-4 backdrop-blur-sm`,onClick:()=>ne(null),children:(0,Q.jsxs)(`div`,{className:`bg-slate-900 border border-amber-900 rounded-xl w-full max-w-2xl max-h-[80vh] overflow-hidden shadow-2xl flex flex-col`,onClick:e=>e.stopPropagation(),children:[(0,Q.jsxs)(`div`,{className:`bg-slate-800 border-b border-slate-700 p-4 flex items-center justify-between`,children:[(0,Q.jsxs)(`h3`,{className:`text-lg font-bold text-white flex items-center gap-2`,children:[(0,Q.jsx)(N,{size:20,className:`text-amber-400`}),`Version History`]}),(0,Q.jsx)(`button`,{onClick:()=>ne(null),className:`text-slate-400 hover:text-white`,children:(0,Q.jsx)(Me,{size:24})})]}),(0,Q.jsx)(`div`,{className:`flex-1 overflow-y-auto p-6`,children:te.history.length===0?(0,Q.jsx)(`p`,{className:`text-slate-400 text-sm text-center py-8`,children:`No version history available yet.`}):(0,Q.jsx)(`div`,{className:`space-y-3`,children:te.history.map((e,t)=>{let n=new Date(e.timestamp),r=t===te.history.length-1;return(0,Q.jsxs)(`div`,{className:`p-4 rounded-lg border ${r?`bg-amber-900/20 border-amber-700/50`:`bg-slate-800/50 border-slate-700`}`,children:[(0,Q.jsxs)(`div`,{className:`flex items-start justify-between mb-2`,children:[(0,Q.jsxs)(`div`,{children:[(0,Q.jsxs)(`div`,{className:`flex items-center gap-2`,children:[(0,Q.jsxs)(`span`,{className:`text-sm font-bold text-white`,children:[`Version `,te.history.length-t]}),r&&(0,Q.jsx)(`span`,{className:`text-xs bg-amber-600 text-white px-2 py-0.5 rounded uppercase font-bold`,children:`Current`})]}),(0,Q.jsx)(`p`,{className:`text-xs text-slate-400 mt-1`,children:n.toLocaleString(`en-US`,{month:`short`,day:`numeric`,year:`numeric`,hour:`2-digit`,minute:`2-digit`})})]}),!r&&(0,Q.jsxs)(`button`,{onClick:()=>{confirm(`Revert to this version? This will replace the current version.`)&&$e(te.moduleId,t)},className:`px-3 py-1.5 bg-amber-600 hover:bg-amber-500 text-white text-xs font-bold rounded flex items-center gap-1 transition-colors`,children:[(0,Q.jsx)(ye,{size:12}),`Revert`]})]}),(0,Q.jsx)(`p`,{className:`text-xs text-slate-300 font-mono truncate`,title:e.title,children:e.title}),(0,Q.jsxs)(`div`,{className:`mt-2 text-[10px] text-slate-500`,children:[e.html&&(0,Q.jsxs)(`span`,{children:[`HTML: `,(e.html.length/1024).toFixed(1),`KB`]}),e.css&&(0,Q.jsxs)(`span`,{className:`ml-2`,children:[`CSS: `,(e.css.length/1024).toFixed(1),`KB`]}),e.script&&(0,Q.jsxs)(`span`,{className:`ml-2`,children:[`Script: `,(e.script.length/1024).toFixed(1),`KB`]}),e.url&&(0,Q.jsx)(`span`,{className:`ml-2`,children:`External Link`})]})]},t)})})}),(0,Q.jsx)(`div`,{className:`bg-slate-800 border-t border-slate-700 p-4`,children:(0,Q.jsx)(`p`,{className:`text-xs text-slate-400 text-center`,children:`History is automatically saved when you make changes. Last 10 versions are kept.`})})]})}),M&&(0,Q.jsx)(`div`,{className:`fixed inset-0 bg-black/80 z-50 flex items-center justify-center p-4 backdrop-blur-sm`,children:(0,Q.jsxs)(`div`,{className:`bg-slate-900 border border-purple-900 rounded-xl w-full max-w-6xl max-h-[90vh] overflow-hidden shadow-2xl`,children:[(0,Q.jsxs)(`div`,{className:`bg-slate-800 border-b border-slate-700 p-4 flex items-center justify-between`,children:[(0,Q.jsxs)(`h3`,{className:`text-lg font-bold text-white flex items-center gap-2`,children:[(0,Q.jsx)(oe,{size:20,className:`text-purple-400`}),`Preview: `,M.title||`Untitled Module`]}),(0,Q.jsx)(`button`,{onClick:()=>ee(null),className:`text-slate-400 hover:text-white`,children:(0,Q.jsx)(Me,{size:24})})]}),(0,Q.jsx)(`div`,{className:`p-0 overflow-hidden max-h-[calc(90vh-80px)]`,children:(0,Q.jsx)(`iframe`,{srcDoc:jf(M,i[`Course Settings`])||``,className:`w-full h-full border-0`,style:{minHeight:`calc(90vh - 80px)`}},M.id||M.title)})]})}),(0,Q.jsx)(gf,{toasts:h,removeToast:_})]})}var Gf=({title:e,icon:t,isActive:n,onClick:r,badge:i,badgeColor:a})=>(0,Q.jsxs)(`button`,{onClick:r,className:`w-full flex items-center justify-between gap-2 px-3 py-2 rounded-lg text-sm font-bold transition-all ${n?`bg-blue-600 text-white shadow-lg`:`text-slate-400 hover:bg-slate-800 hover:text-slate-200`}`,children:[(0,Q.jsxs)(`div`,{className:`flex items-center gap-2`,children:[(0,Q.jsx)(t,{size:16}),(0,Q.jsx)(`span`,{children:e})]}),i!==void 0&&(0,Q.jsx)(`span`,{className:`${a||`bg-slate-700`} text-white text-[10px] font-bold px-2 py-0.5 rounded-full`,children:i})]});Pe.createRoot(document.getElementById(`root`)).render((0,Q.jsx)(C.StrictMode,{children:(0,Q.jsx)(Wf,{})}));